(window.webpackJsonp=window.webpackJsonp||[]).push([[200],{1775:function(e,t,n){"use strict";var i=function(e,t){return e+o(t)},o=function(e){return null===e||"boolean"==typeof e||void 0===e?"":"number"==typeof e?e.toString():"string"==typeof e?e:Array.isArray(e)?e.reduce(i,""):function(e){return Object.prototype.hasOwnProperty.call(e,"props")}(e)&&Object.prototype.hasOwnProperty.call(e.props,"children")?o(e.props.children):""};o.default=o,e.exports=o},3304:function(e,t,n){"use strict";var i=n(348),o=Object(i.a)((function(){return Promise.all([n.e(6),n.e(364)]).then(n.bind(null,4520))}));t.a=o},3305:function(e,t,n){"use strict";var i=n(348),o=Object(i.a)((function(){return Promise.all([n.e(0),n.e(6),n.e(374)]).then(n.bind(null,4521))}));t.a=o},5194:function(e){e.exports=JSON.parse('{"DE":{"authentication":"Authentifizierung","authentication-prompt":"Um diese Lektion abzuschlie\xdfen, logge Dich bitte in Dein ISLE-Konto ein. Wenn Du noch kein Konto eingerichtet hast, melde Dich bitte an und erhalte Zugang zur vollen Funktionalit\xe4t von ISLE","by":"von","choice":"Wahl","completed":"Abgeschlossen","confirmation-email":" Du erh\xe4lst in K\xfcrze eine Best\xe4tigungs-E-Mail.","download-pdf":"PDF der Antworten herunterladen","elapsed":"verstrichen","lesson-successfully-completed":"Lektion erfolgreich abgeschlossen.","lesson-submitted":"Lektion abgeschlossen!","login":"Anmelden","responses-header":"Antworten f\xfcr die ISLE-Lektion","signup":"Registrieren","submit":"Abschicken"},"EN":{"authentication":"Authentication","authentication-prompt":"To finalize this lesson, please login in to your ISLE account. If you have not created one, please sign up and get access to the full functionality of ISLE.","by":"by","choice":"Choice","completed":"Completed","confirmation-email":" You will receive a confirmation email shortly.","download-pdf":"Download PDF of Responses","elapsed":"elapsed","lesson-successfully-completed":"Lesson successfully completed.","lesson-submitted":"Lesson submitted!","login":"Login","responses-header":"Responses for ISLE lesson","signup":"Sign up","submit":"Submit"},"ES":{"authentication":"Autenticaci\xf3n","authentication-prompt":"Para finalizar esta lecci\xf3n, por favor entre en su cuenta de ISLE. Si no ha creado una, por favor reg\xedstrese y acceda a la funcionalidad completa de ISLE.","by":"por","choice":"Elecci\xf3n","completed":"Completado","confirmation-email":" Recibir\xe1 un correo electr\xf3nico de confirmaci\xf3n en breve.","download-pdf":"Descargar PDF de respuestas","elapsed":"transcurrido","lesson-successfully-completed":"Lecci\xf3n completada con \xe9xito.","lesson-submitted":"\xa1Lecci\xf3n presentada!","login":"Login","responses-header":"Respuestas para la lecci\xf3n de ISLE","signup":"Inscripci\xf3n","submit":"Presentar"}}')},5849:function(e,t,n){"use strict";n.r(t);n(395),n(388),n(378),n(377),n(390),n(357),n(350),n(360);var i=n(358),o=n.n(i),s=n(351),a=n.n(s),r=n(352),c=n.n(r),l=n(365),u=n.n(l),p=n(354),d=n.n(p),f=n(355),m=n.n(f),h=n(353),g=n.n(h),b=n(349),v=n.n(b),y=(n(465),n(0)),S=n(399),w=n.n(S),L=(n(341),n(652)),O=n(1774),x=n.n(O),D=n(1775),k=n.n(D),E=n(387),P=n(625),j=n(383),z=n(643),R=n.n(z),C=n(402),A=n.n(C),N=n(484),U=n.n(N),I=n(1708),M=n(3304),F=n(3305),T=n(414),q=n(564),B=n(420),W=(n(2523),n(492)),J=n(5194);function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=g()(e);if(t){var o=g()(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return m()(this,n)}}W.a.addResources("de","lesson-submit",J.DE),W.a.addResources("en","lesson-submit",J.EN),W.a.addResources("es","lesson-submit",J.ES);var Y=w()("isle:lesson-submit");var Z=function(e){d()(n,e);var t=V(n);function n(e){var i;return a()(this,n),i=t.call(this,e),v()(u()(i),"createReponseSummaryDoc",(function(){var e=i.context,t={content:[{text:"".concat(i.props.t("responses-header")," ").concat(e.namespaceName+"/"+e.lessonName),style:"header",alignment:"center"}],styles:{header:{fontSize:24,bold:!0,margin:[0,0,0,10]},author:{fontSize:16,italics:!0,margin:[0,0,0,10],alignment:"center"},date:{fontSize:16,italics:!0,alignment:"right",margin:[0,15,0,15]},elapsed:{fontSize:16,italics:!0,alignment:"right",margin:[0,15,0,15]},subheader:{fontSize:18,bold:!0,margin:[0,30,0,10]},question:{fontSize:15,margin:[0,0,0,10],italics:!0}}};R()(e.user)||t.content.push({text:"".concat(i.props.t("by")," ").concat(e.user.name," (").concat(e.user.email,")"),style:"author"});var n=new Date;if(t.content.push({text:"".concat(n.toLocaleDateString()," - ").concat(n.toLocaleTimeString()),style:"date"}),t.content.push({text:"".concat(i.props.t("elapsed"),": ").concat(U()(e.duration/6e4),"min"),style:"elapsed"}),e.currentUserActions)for(var o=e.responseVisualizerIds,s=0;s<o.length;s++){var a=e.responseVisualizers[o[s]];t.content.push({text:o[s],style:"subheader"}),a&&function(){var n=a.type,r=a.ref.props.data.question,c=a.ref.props.data.type;t.content.push({text:Object(j.isPrimitive)(r)?r:k()(r),style:"question"});var l=e.currentUserActions[o[s]];if(l){var u=(l=(l=l.filter((function(e){return e.type===n}))).sort((function(e,t){return e.absoluteTime-t.absoluteTime})))[l.length-1];if("image"===c)t.content.push({image:u.value,width:500});else if("factor"===c){var p,d=a.ref.props.data.levels;d=d.map((function(e,t){var n=Object(j.isPrimitive)(e)?e:k()(e);return n||(n="".concat(i.props.t("choice")," ").concat(t+1)),n})),p=A()(u.value)?u.value.map((function(e){return d[e]})).join(", "):d[u.value],t.content.push({text:p})}else t.content.push({text:u.value})}}()}x.a.createPdf(t).download("responses.pdf")})),v()(u()(i),"closeUserModal",(function(){i.setState({showUserModal:!1,visibleLogin:!1,visibleSignup:!1})})),v()(u()(i),"login",(function(e){e.stopPropagation(),i.setState({visibleLogin:!0,visibleSignup:!1})})),v()(u()(i),"signup",(function(e){e.stopPropagation(),i.setState({visibleSignup:!0,visibleLogin:!1})})),v()(u()(i),"closeSignup",(function(){i.setState({visibleSignup:!1,showUserModal:!1})})),v()(u()(i),"closeLogin",(function(){i.setState({visibleLogin:!1,showUserModal:!1})})),v()(u()(i),"finalizeSession",(function(){Y("Finalizing session...");for(var e=i.context,t=document.getElementsByClassName("submit-button"),n=0;n<t.length;n++)t[n].innerText===i.props.t("submit")&&t[n].click();e.finalize();var s=i.props.t("lesson-successfully-completed");if(!R()(e.user)&&i.props.sendConfirmationEmail){s+=i.props.t("confirmation-email");var a=function(e,t){var n=t||"";return{text:"Dear ".concat(e.user.name,', this is an automatic confirmation email to inform you that you have successfully completed lesson "').concat(e.lessonName,'" of course "').concat(e.namespaceName,'". ').concat(n),subject:"".concat(e.lessonName," successfully completed!")}}(e,i.props.message);e.sendMail(a,e.user.email)}e.addNotification({title:i.props.t("completed"),message:s,level:"success",position:"tr",autoDismiss:0,dismissible:"button",children:o()("div",{style:{marginBottom:"40px"}},void 0,o()(E.a,{variant:"success",size:"sm",style:{float:"right",marginRight:"10px",marginTop:"10px"},onClick:i.createReponseSummaryDoc},void 0,i.props.t("download-pdf"))),onRemove:function(){i.setState({disabled:!1})}}),e.log({id:e.lessonName,type:B.vb,value:i.props.t("lesson-submitted")}),i.setState({disabled:!0}),window.removeEventListener("beforeunload",I.a)})),v()(u()(i),"handleClick",(function(){i.props.onClick();var e=i.context;if(i.props.requireLogin&&R()(e.user))return i.setState({showUserModal:!0});i.finalizeSession()})),i.state={showUserModal:!1,visibleLogin:!1,visibleSignup:!1},i}return c()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.context;this.unsubsribe=t.subscribe((function(t){t!==q.w&&t!==q.j&&t!==q.k||e.forceUpdate()}))}},{key:"componentWillUnmount",value:function(){this.unsubsribe()}},{key:"render",value:function(){var e=!this.context.live||this.state.disabled;return o()("div",{className:"bg-light ".concat(this.props.className),style:H({maxWidth:400,margin:"0 auto 0px",padding:"20px",fontFamily:"Arial"},this.props.style)},void 0,o()(E.a,{disabled:e,variant:"primary",size:"large",onClick:this.handleClick,block:!0},void 0,this.props.label),o()(P.a,{show:this.state.showUserModal,onHide:this.closeUserModal},void 0,o()(P.a.Header,{closeButton:!0},void 0,o()(P.a.Title,{},void 0,this.props.t("authentication"))),o()(P.a.Body,{},void 0,o()("p",{},void 0,this.props.t("authentication-prompt"))),o()(P.a.Footer,{style:{textAlign:"center"}},void 0,o()(E.a,{variant:"primary",onClick:this.login.bind(this),style:{marginRight:"10px"}},void 0,this.props.t("login")),o()(E.a,{onClick:this.signup.bind(this)},void 0,this.props.t("signup")))),o()(F.a,{show:this.state.visibleLogin,onClose:this.closeLogin}),o()(M.a,{show:this.state.visibleSignup,onClose:this.closeSignup}))}}]),n}(y.Component);Z.defaultProps={label:"Finish lesson",message:"",requireLogin:!0,sendConfirmationEmail:!0,className:"",style:{},onClick:function(){}},Z.contextType=T.a;t.default=Object(L.a)("lesson-submit")(Z)},959:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(0);function o(e){var t=Object(i.useRef)(null);return Object(i.useEffect)((function(){t.current=e})),t.current}}}]);