/*! For license information please see dll.vendors~PrincipalComponentAnalysis.js.LICENSE.txt */
(window.webpackJsonp_name_dll=window.webpackJsonp_name_dll||[]).push([[177],{1198:function(t,e,s){"use strict";s.r(e),s.d(e,"default",(function(){return a}));var r=s(1156);class a extends r.AbstractMatrix{constructor(t){super(),this.data=t,this.rows=t.length,this.columns=t[0].length}set(t,e,s){return this.data[t][e]=s,this}get(t,e){return this.data[t][e]}}},1351:function(t,e,s){"use strict";function r(t,e){let s=0;return Math.abs(t)>Math.abs(e)?(s=e/t,Math.abs(t)*Math.sqrt(1+s*s)):0!==e?(s=t/e,Math.abs(e)*Math.sqrt(1+s*s)):0}s.r(e),s.d(e,"hypotenuse",(function(){return r}))},1611:function(t,e,s){"use strict";s.r(e),s.d(e,"default",(function(){return i}));var r=s(1156),a=s(1198),o=s(1351);class i{constructor(t,e={}){let s=(t=a.default.checkMatrix(t)).rows,i=t.columns;const{computeLeftSingularVectors:n=!0,computeRightSingularVectors:l=!0,autoTranspose:h=!1}=e;let f,g=Boolean(n),u=Boolean(l),c=!1;if(s<i)if(h){f=t.transpose(),s=f.rows,i=f.columns,c=!0;let e=g;g=u,u=e}else f=t.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else f=t.clone();let m=Math.min(s,i),d=Math.min(s+1,i),M=new Float64Array(d),b=new r.default(s,m),w=new r.default(i,i),p=new Float64Array(i),v=new Float64Array(s),x=new Float64Array(d);for(let t=0;t<d;t++)x[t]=t;let S=Math.min(s-1,i),V=Math.max(0,Math.min(i-2,s)),y=Math.max(S,V);for(let t=0;t<y;t++){if(t<S){M[t]=0;for(let e=t;e<s;e++)M[t]=Object(o.hypotenuse)(M[t],f.get(e,t));if(0!==M[t]){f.get(t,t)<0&&(M[t]=-M[t]);for(let e=t;e<s;e++)f.set(e,t,f.get(e,t)/M[t]);f.set(t,t,f.get(t,t)+1)}M[t]=-M[t]}for(let e=t+1;e<i;e++){if(t<S&&0!==M[t]){let r=0;for(let a=t;a<s;a++)r+=f.get(a,t)*f.get(a,e);r=-r/f.get(t,t);for(let a=t;a<s;a++)f.set(a,e,f.get(a,e)+r*f.get(a,t))}p[e]=f.get(t,e)}if(g&&t<S)for(let e=t;e<s;e++)b.set(e,t,f.get(e,t));if(t<V){p[t]=0;for(let e=t+1;e<i;e++)p[t]=Object(o.hypotenuse)(p[t],p[e]);if(0!==p[t]){p[t+1]<0&&(p[t]=0-p[t]);for(let e=t+1;e<i;e++)p[e]/=p[t];p[t+1]+=1}if(p[t]=-p[t],t+1<s&&0!==p[t]){for(let e=t+1;e<s;e++)v[e]=0;for(let e=t+1;e<s;e++)for(let s=t+1;s<i;s++)v[e]+=p[s]*f.get(e,s);for(let e=t+1;e<i;e++){let r=-p[e]/p[t+1];for(let a=t+1;a<s;a++)f.set(a,e,f.get(a,e)+r*v[a])}}if(u)for(let e=t+1;e<i;e++)w.set(e,t,p[e])}}let A=Math.min(i,s+1);if(S<i&&(M[S]=f.get(S,S)),s<A&&(M[A-1]=0),V+1<A&&(p[V]=f.get(V,A-1)),p[A-1]=0,g){for(let t=S;t<m;t++){for(let e=0;e<s;e++)b.set(e,t,0);b.set(t,t,1)}for(let t=S-1;t>=0;t--)if(0!==M[t]){for(let e=t+1;e<m;e++){let r=0;for(let a=t;a<s;a++)r+=b.get(a,t)*b.get(a,e);r=-r/b.get(t,t);for(let a=t;a<s;a++)b.set(a,e,b.get(a,e)+r*b.get(a,t))}for(let e=t;e<s;e++)b.set(e,t,-b.get(e,t));b.set(t,t,1+b.get(t,t));for(let e=0;e<t-1;e++)b.set(e,t,0)}else{for(let e=0;e<s;e++)b.set(e,t,0);b.set(t,t,1)}}if(u)for(let t=i-1;t>=0;t--){if(t<V&&0!==p[t])for(let e=t+1;e<i;e++){let s=0;for(let r=t+1;r<i;r++)s+=w.get(r,t)*w.get(r,e);s=-s/w.get(t+1,t);for(let r=t+1;r<i;r++)w.set(r,e,w.get(r,e)+s*w.get(r,t))}for(let e=0;e<i;e++)w.set(e,t,0);w.set(t,t,1)}let N=A-1,U=0,E=Number.EPSILON;for(;A>0;){let t,e;for(t=A-2;t>=-1&&-1!==t;t--){const e=Number.MIN_VALUE+E*Math.abs(M[t]+Math.abs(M[t+1]));if(Math.abs(p[t])<=e||Number.isNaN(p[t])){p[t]=0;break}}if(t===A-2)e=4;else{let s;for(s=A-1;s>=t&&s!==t;s--){let e=(s!==A?Math.abs(p[s]):0)+(s!==t+1?Math.abs(p[s-1]):0);if(Math.abs(M[s])<=E*e){M[s]=0;break}}s===t?e=3:s===A-1?e=1:(e=2,t=s)}switch(t++,e){case 1:{let e=p[A-2];p[A-2]=0;for(let s=A-2;s>=t;s--){let r=Object(o.hypotenuse)(M[s],e),a=M[s]/r,n=e/r;if(M[s]=r,s!==t&&(e=-n*p[s-1],p[s-1]=a*p[s-1]),u)for(let t=0;t<i;t++)r=a*w.get(t,s)+n*w.get(t,A-1),w.set(t,A-1,-n*w.get(t,s)+a*w.get(t,A-1)),w.set(t,s,r)}break}case 2:{let e=p[t-1];p[t-1]=0;for(let r=t;r<A;r++){let a=Object(o.hypotenuse)(M[r],e),i=M[r]/a,n=e/a;if(M[r]=a,e=-n*p[r],p[r]=i*p[r],g)for(let e=0;e<s;e++)a=i*b.get(e,r)+n*b.get(e,t-1),b.set(e,t-1,-n*b.get(e,r)+i*b.get(e,t-1)),b.set(e,r,a)}break}case 3:{const e=Math.max(Math.abs(M[A-1]),Math.abs(M[A-2]),Math.abs(p[A-2]),Math.abs(M[t]),Math.abs(p[t])),r=M[A-1]/e,a=M[A-2]/e,n=p[A-2]/e,l=M[t]/e,h=p[t]/e,f=((a+r)*(a-r)+n*n)/2,c=r*n*(r*n);let m=0;0===f&&0===c||(m=f<0?0-Math.sqrt(f*f+c):Math.sqrt(f*f+c),m=c/(f+m));let d=(l+r)*(l-r)+m,v=l*h;for(let e=t;e<A-1;e++){let r=Object(o.hypotenuse)(d,v);0===r&&(r=Number.MIN_VALUE);let a=d/r,n=v/r;if(e!==t&&(p[e-1]=r),d=a*M[e]+n*p[e],p[e]=a*p[e]-n*M[e],v=n*M[e+1],M[e+1]=a*M[e+1],u)for(let t=0;t<i;t++)r=a*w.get(t,e)+n*w.get(t,e+1),w.set(t,e+1,-n*w.get(t,e)+a*w.get(t,e+1)),w.set(t,e,r);if(r=Object(o.hypotenuse)(d,v),0===r&&(r=Number.MIN_VALUE),a=d/r,n=v/r,M[e]=r,d=a*p[e]+n*M[e+1],M[e+1]=-n*p[e]+a*M[e+1],v=n*p[e+1],p[e+1]=a*p[e+1],g&&e<s-1)for(let t=0;t<s;t++)r=a*b.get(t,e)+n*b.get(t,e+1),b.set(t,e+1,-n*b.get(t,e)+a*b.get(t,e+1)),b.set(t,e,r)}p[A-2]=d,U+=1;break}case 4:if(M[t]<=0&&(M[t]=M[t]<0?-M[t]:0,u))for(let e=0;e<=N;e++)w.set(e,t,-w.get(e,t));for(;t<N&&!(M[t]>=M[t+1]);){let e=M[t];if(M[t]=M[t+1],M[t+1]=e,u&&t<i-1)for(let s=0;s<i;s++)e=w.get(s,t+1),w.set(s,t+1,w.get(s,t)),w.set(s,t,e);if(g&&t<s-1)for(let r=0;r<s;r++)e=b.get(r,t+1),b.set(r,t+1,b.get(r,t)),b.set(r,t,e);t++}U=0,A--}}if(c){let t=w;w=b,b=t}this.m=s,this.n=i,this.s=M,this.U=b,this.V=w}solve(t){let e=t,s=this.threshold,a=this.s.length,o=r.default.zeros(a,a);for(let t=0;t<a;t++)Math.abs(this.s[t])<=s?o.set(t,t,0):o.set(t,t,1/this.s[t]);let i=this.U,n=this.rightSingularVectors,l=n.mmul(o),h=n.rows,f=i.rows,g=r.default.zeros(h,f);for(let t=0;t<h;t++)for(let e=0;e<f;e++){let s=0;for(let r=0;r<a;r++)s+=l.get(t,r)*i.get(e,r);g.set(t,e,s)}return g.mmul(e)}solveForDiagonal(t){return this.solve(r.default.diag(t))}inverse(){let t=this.V,e=this.threshold,s=t.rows,a=t.columns,o=new r.default(s,this.s.length);for(let r=0;r<s;r++)for(let s=0;s<a;s++)Math.abs(this.s[s])>e&&o.set(r,s,t.get(r,s)/this.s[s]);let i=this.U,n=i.rows,l=i.columns,h=new r.default(s,n);for(let t=0;t<s;t++)for(let e=0;e<n;e++){let s=0;for(let r=0;r<l;r++)s+=o.get(t,r)*i.get(e,r);h.set(t,e,s)}return h}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,e=0,s=this.s;for(let r=0,a=s.length;r<a;r++)s[r]>t&&e++;return e}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return r.default.diag(this.s)}}},3455:function(t,e,s){"use strict";s.r(e),s.d(e,"PCA",(function(){return l}));var r=s(1156),a=s(3614),o=s(1611),i=s(3615),n=s(3616);class l{constructor(t,e={}){if(!0===t){const t=e;return this.center=t.center,this.scale=t.scale,this.means=t.means,this.stdevs=t.stdevs,this.U=r.default.checkMatrix(t.U),this.S=t.S,this.R=t.R,void(this.excludedFeatures=t.excludedFeatures||[])}t=new r.default(t);const{isCovarianceMatrix:s=!1,method:i="SVD",nCompNIPALS:n=2,center:l=!0,scale:h=!1,ignoreZeroVariance:f=!1}=e;if(this.center=l,this.scale=h,this.means=null,this.stdevs=null,this.excludedFeatures=[],s)this._computeFromCovarianceMatrix(t);else switch(this._adjust(t,f),i){case"covarianceMatrix":{const e=new a.default(t).mmul(t).div(t.rows-1);this._computeFromCovarianceMatrix(e);break}case"NIPALS":this._computeWithNIPALS(t,n);break;case"SVD":{const e=new o.default(t,{computeLeftSingularVectors:!1,computeRightSingularVectors:!0,autoTranspose:!0});this.U=e.rightSingularVectors;const s=e.diagonal,r=[];for(const e of s)r.push(e*e/(t.rows-1));this.S=r;break}default:throw new Error("unknown method: "+i)}}static load(t){if("string"!=typeof t.name)throw new TypeError("model must have a name property");if("PCA"!==t.name)throw new RangeError("invalid model: "+t.name);return new l(!0,t)}predict(t,e={}){const{nComponents:s=this.U.columns}=e;if(t=new r.default(t),this.center&&(t.subRowVector(this.means),this.scale)){for(let e of this.excludedFeatures)t.removeColumn(e);t.divRowVector(this.stdevs)}var a=t.mmul(this.U);return a.subMatrix(0,a.rows-1,0,s-1)}invert(t){var e=(t=r.default.checkMatrix(t)).mmul(this.U.transpose());return this.center&&(this.scale&&e.mulRowVector(this.stdevs),e.addRowVector(this.means)),e}getExplainedVariance(){var t=0;for(const e of this.S)t+=e;return this.S.map((e=>e/t))}getCumulativeVariance(){for(var t=this.getExplainedVariance(),e=1;e<t.length;e++)t[e]+=t[e-1];return t}getEigenvectors(){return this.U}getEigenvalues(){return this.S}getStandardDeviations(){return this.S.map((t=>Math.sqrt(t)))}getLoadings(){return this.U.transpose()}toJSON(){return{name:"PCA",center:this.center,scale:this.scale,means:this.means,stdevs:this.stdevs,U:this.U,S:this.S,excludedFeatures:this.excludedFeatures}}_adjust(t,e){if(this.center){const s=t.mean("column"),r=this.scale?t.standardDeviation("column",{mean:s}):null;if(this.means=s,t.subRowVector(s),this.scale){for(let s=0;s<r.length;s++)if(0===r[s]){if(!e)throw new RangeError("Cannot scale the dataset (standard deviation is zero at index "+s);t.removeColumn(s),r.splice(s,1),this.excludedFeatures.push(s),s--}this.stdevs=r,t.divRowVector(r)}}}_computeFromCovarianceMatrix(t){const e=new i.default(t,{assumeSymmetric:!0});this.U=e.eigenvectorMatrix,this.U.flipRows(),this.S=e.realEigenvalues,this.S.reverse()}_computeWithNIPALS(t,e){this.U=new r.default(e,t.columns),this.S=[];let s=t;for(let t=0;t<e;t++){let e=new n.default(s);this.U.setRow(t,e.w.transpose()),this.S.push(Math.pow(e.s.get(0,0),2)),s=e.xResidual}this.U=this.U.transpose()}}},3456:function(t,e,s){"use strict";s.r(e),s.d(e,"default",(function(){return a}));var r=s(1156);class a extends r.AbstractMatrix{constructor(t,e,s){super(),this.matrix=t,this.rows=e,this.columns=s}}},3614:function(t,e,s){"use strict";s.r(e),s.d(e,"default",(function(){return a}));var r=s(3456);class a extends r.default{constructor(t){super(t,t.columns,t.rows)}set(t,e,s){return this.matrix.set(e,t,s),this}get(t,e){return this.matrix.get(e,t)}}},3615:function(t,e,s){"use strict";s.r(e),s.d(e,"default",(function(){return i}));var r=s(1156),a=s(1198),o=s(1351);class i{constructor(t,e={}){const{assumeSymmetric:s=!1}=e;if(!(t=a.default.checkMatrix(t)).isSquare())throw new Error("Matrix is not a square matrix");let i,l,h=t.columns,f=new r.default(h,h),g=new Float64Array(h),u=new Float64Array(h),c=t,m=!1;if(m=!!s||t.isSymmetric(),m){for(i=0;i<h;i++)for(l=0;l<h;l++)f.set(i,l,c.get(i,l));!function(t,e,s,r){let a,o,i,n,l,h,f,g;for(l=0;l<t;l++)s[l]=r.get(t-1,l);for(n=t-1;n>0;n--){for(g=0,i=0,h=0;h<n;h++)g+=Math.abs(s[h]);if(0===g)for(e[n]=s[n-1],l=0;l<n;l++)s[l]=r.get(n-1,l),r.set(n,l,0),r.set(l,n,0);else{for(h=0;h<n;h++)s[h]/=g,i+=s[h]*s[h];for(a=s[n-1],o=Math.sqrt(i),a>0&&(o=-o),e[n]=g*o,i-=a*o,s[n-1]=a-o,l=0;l<n;l++)e[l]=0;for(l=0;l<n;l++){for(a=s[l],r.set(l,n,a),o=e[l]+r.get(l,l)*a,h=l+1;h<=n-1;h++)o+=r.get(h,l)*s[h],e[h]+=r.get(h,l)*a;e[l]=o}for(a=0,l=0;l<n;l++)e[l]/=i,a+=e[l]*s[l];for(f=a/(i+i),l=0;l<n;l++)e[l]-=f*s[l];for(l=0;l<n;l++){for(a=s[l],o=e[l],h=l;h<=n-1;h++)r.set(h,l,r.get(h,l)-(a*e[h]+o*s[h]));s[l]=r.get(n-1,l),r.set(n,l,0)}}s[n]=i}for(n=0;n<t-1;n++){if(r.set(t-1,n,r.get(n,n)),r.set(n,n,1),i=s[n+1],0!==i){for(h=0;h<=n;h++)s[h]=r.get(h,n+1)/i;for(l=0;l<=n;l++){for(o=0,h=0;h<=n;h++)o+=r.get(h,n+1)*r.get(h,l);for(h=0;h<=n;h++)r.set(h,l,r.get(h,l)-o*s[h])}}for(h=0;h<=n;h++)r.set(h,n+1,0)}for(l=0;l<t;l++)s[l]=r.get(t-1,l),r.set(t-1,l,0);r.set(t-1,t-1,1),e[0]=0}(h,u,g,f),function(t,e,s,r){let a,i,n,l,h,f,g,u,c,m,d,M,b,w,p,v,x;for(n=1;n<t;n++)e[n-1]=e[n];e[t-1]=0;let S=0,V=0,y=Number.EPSILON;for(f=0;f<t;f++){for(V=Math.max(V,Math.abs(s[f])+Math.abs(e[f])),g=f;g<t&&!(Math.abs(e[g])<=y*V);)g++;if(g>f){x=0;do{for(x+=1,a=s[f],u=(s[f+1]-a)/(2*e[f]),c=Object(o.hypotenuse)(u,1),u<0&&(c=-c),s[f]=e[f]/(u+c),s[f+1]=e[f]*(u+c),m=s[f+1],i=a-s[f],n=f+2;n<t;n++)s[n]-=i;for(S+=i,u=s[g],d=1,M=d,b=d,w=e[f+1],p=0,v=0,n=g-1;n>=f;n--)for(b=M,M=d,v=p,a=d*e[n],i=d*u,c=Object(o.hypotenuse)(u,e[n]),e[n+1]=p*c,p=e[n]/c,d=u/c,u=d*s[n]-p*a,s[n+1]=i+p*(d*a+p*s[n]),h=0;h<t;h++)i=r.get(h,n+1),r.set(h,n+1,p*r.get(h,n)+d*i),r.set(h,n,d*r.get(h,n)-p*i);u=-p*v*b*w*e[f]/m,e[f]=p*u,s[f]=d*u}while(Math.abs(e[f])>y*V)}s[f]=s[f]+S,e[f]=0}for(n=0;n<t-1;n++){for(h=n,u=s[n],l=n+1;l<t;l++)s[l]<u&&(h=l,u=s[l]);if(h!==n)for(s[h]=s[n],s[n]=u,l=0;l<t;l++)u=r.get(l,n),r.set(l,n,r.get(l,h)),r.set(l,h,u)}}(h,u,g,f)}else{let t=new r.default(h,h),e=new Float64Array(h);for(l=0;l<h;l++)for(i=0;i<h;i++)t.set(i,l,c.get(i,l));!function(t,e,s,r){let a,o,i,n,l,h,f,g=0,u=t-1;for(h=g+1;h<=u-1;h++){for(f=0,n=h;n<=u;n++)f+=Math.abs(e.get(n,h-1));if(0!==f){for(i=0,n=u;n>=h;n--)s[n]=e.get(n,h-1)/f,i+=s[n]*s[n];for(o=Math.sqrt(i),s[h]>0&&(o=-o),i-=s[h]*o,s[h]=s[h]-o,l=h;l<t;l++){for(a=0,n=u;n>=h;n--)a+=s[n]*e.get(n,l);for(a/=i,n=h;n<=u;n++)e.set(n,l,e.get(n,l)-a*s[n])}for(n=0;n<=u;n++){for(a=0,l=u;l>=h;l--)a+=s[l]*e.get(n,l);for(a/=i,l=h;l<=u;l++)e.set(n,l,e.get(n,l)-a*s[l])}s[h]=f*s[h],e.set(h,h-1,f*o)}}for(n=0;n<t;n++)for(l=0;l<t;l++)r.set(n,l,n===l?1:0);for(h=u-1;h>=g+1;h--)if(0!==e.get(h,h-1)){for(n=h+1;n<=u;n++)s[n]=e.get(n,h-1);for(l=h;l<=u;l++){for(o=0,n=h;n<=u;n++)o+=s[n]*r.get(n,l);for(o=o/s[h]/e.get(h,h-1),n=h;n<=u;n++)r.set(n,l,r.get(n,l)+o*s[n])}}}(h,t,e,f),function(t,e,s,r,a){let o,i,l,h,f,g,u,c,m,d,M,b,w,p,v,x=t-1,S=0,V=t-1,y=Number.EPSILON,A=0,N=0,U=0,E=0,k=0,C=0,F=0,R=0;for(o=0;o<t;o++)for((o<S||o>V)&&(s[o]=a.get(o,o),e[o]=0),i=Math.max(o-1,0);i<t;i++)N+=Math.abs(a.get(o,i));for(;x>=S;){for(h=x;h>S&&(C=Math.abs(a.get(h-1,h-1))+Math.abs(a.get(h,h)),0===C&&(C=N),!(Math.abs(a.get(h,h-1))<y*C));)h--;if(h===x)a.set(x,x,a.get(x,x)+A),s[x]=a.get(x,x),e[x]=0,x--,R=0;else if(h===x-1){if(u=a.get(x,x-1)*a.get(x-1,x),U=(a.get(x-1,x-1)-a.get(x,x))/2,E=U*U+u,F=Math.sqrt(Math.abs(E)),a.set(x,x,a.get(x,x)+A),a.set(x-1,x-1,a.get(x-1,x-1)+A),c=a.get(x,x),E>=0){for(F=U>=0?U+F:U-F,s[x-1]=c+F,s[x]=s[x-1],0!==F&&(s[x]=c-u/F),e[x-1]=0,e[x]=0,c=a.get(x,x-1),C=Math.abs(c)+Math.abs(F),U=c/C,E=F/C,k=Math.sqrt(U*U+E*E),U/=k,E/=k,i=x-1;i<t;i++)F=a.get(x-1,i),a.set(x-1,i,E*F+U*a.get(x,i)),a.set(x,i,E*a.get(x,i)-U*F);for(o=0;o<=x;o++)F=a.get(o,x-1),a.set(o,x-1,E*F+U*a.get(o,x)),a.set(o,x,E*a.get(o,x)-U*F);for(o=S;o<=V;o++)F=r.get(o,x-1),r.set(o,x-1,E*F+U*r.get(o,x)),r.set(o,x,E*r.get(o,x)-U*F)}else s[x-1]=c+U,s[x]=c+U,e[x-1]=F,e[x]=-F;x-=2,R=0}else{if(c=a.get(x,x),m=0,u=0,h<x&&(m=a.get(x-1,x-1),u=a.get(x,x-1)*a.get(x-1,x)),10===R){for(A+=c,o=S;o<=x;o++)a.set(o,o,a.get(o,o)-c);C=Math.abs(a.get(x,x-1))+Math.abs(a.get(x-1,x-2)),c=m=.75*C,u=-.4375*C*C}if(30===R&&(C=(m-c)/2,C=C*C+u,C>0)){for(C=Math.sqrt(C),m<c&&(C=-C),C=c-u/((m-c)/2+C),o=S;o<=x;o++)a.set(o,o,a.get(o,o)-C);A+=C,c=m=u=.964}for(R+=1,f=x-2;f>=h&&(F=a.get(f,f),k=c-F,C=m-F,U=(k*C-u)/a.get(f+1,f)+a.get(f,f+1),E=a.get(f+1,f+1)-F-k-C,k=a.get(f+2,f+1),C=Math.abs(U)+Math.abs(E)+Math.abs(k),U/=C,E/=C,k/=C,f!==h)&&!(Math.abs(a.get(f,f-1))*(Math.abs(E)+Math.abs(k))<y*(Math.abs(U)*(Math.abs(a.get(f-1,f-1))+Math.abs(F)+Math.abs(a.get(f+1,f+1)))));)f--;for(o=f+2;o<=x;o++)a.set(o,o-2,0),o>f+2&&a.set(o,o-3,0);for(l=f;l<=x-1&&(p=l!==x-1,l!==f&&(U=a.get(l,l-1),E=a.get(l+1,l-1),k=p?a.get(l+2,l-1):0,c=Math.abs(U)+Math.abs(E)+Math.abs(k),0!==c&&(U/=c,E/=c,k/=c)),0!==c);l++)if(C=Math.sqrt(U*U+E*E+k*k),U<0&&(C=-C),0!==C){for(l!==f?a.set(l,l-1,-C*c):h!==f&&a.set(l,l-1,-a.get(l,l-1)),U+=C,c=U/C,m=E/C,F=k/C,E/=U,k/=U,i=l;i<t;i++)U=a.get(l,i)+E*a.get(l+1,i),p&&(U+=k*a.get(l+2,i),a.set(l+2,i,a.get(l+2,i)-U*F)),a.set(l,i,a.get(l,i)-U*c),a.set(l+1,i,a.get(l+1,i)-U*m);for(o=0;o<=Math.min(x,l+3);o++)U=c*a.get(o,l)+m*a.get(o,l+1),p&&(U+=F*a.get(o,l+2),a.set(o,l+2,a.get(o,l+2)-U*k)),a.set(o,l,a.get(o,l)-U),a.set(o,l+1,a.get(o,l+1)-U*E);for(o=S;o<=V;o++)U=c*r.get(o,l)+m*r.get(o,l+1),p&&(U+=F*r.get(o,l+2),r.set(o,l+2,r.get(o,l+2)-U*k)),r.set(o,l,r.get(o,l)-U),r.set(o,l+1,r.get(o,l+1)-U*E)}}}if(0===N)return;for(x=t-1;x>=0;x--)if(U=s[x],E=e[x],0===E)for(h=x,a.set(x,x,1),o=x-1;o>=0;o--){for(u=a.get(o,o)-U,k=0,i=h;i<=x;i++)k+=a.get(o,i)*a.get(i,x);if(e[o]<0)F=u,C=k;else if(h=o,0===e[o]?a.set(o,x,0!==u?-k/u:-k/(y*N)):(c=a.get(o,o+1),m=a.get(o+1,o),E=(s[o]-U)*(s[o]-U)+e[o]*e[o],g=(c*C-F*k)/E,a.set(o,x,g),a.set(o+1,x,Math.abs(c)>Math.abs(F)?(-k-u*g)/c:(-C-m*g)/F)),g=Math.abs(a.get(o,x)),y*g*g>1)for(i=o;i<=x;i++)a.set(i,x,a.get(i,x)/g)}else if(E<0)for(h=x-1,Math.abs(a.get(x,x-1))>Math.abs(a.get(x-1,x))?(a.set(x-1,x-1,E/a.get(x,x-1)),a.set(x-1,x,-(a.get(x,x)-U)/a.get(x,x-1))):(v=n(0,-a.get(x-1,x),a.get(x-1,x-1)-U,E),a.set(x-1,x-1,v[0]),a.set(x-1,x,v[1])),a.set(x,x-1,0),a.set(x,x,1),o=x-2;o>=0;o--){for(d=0,M=0,i=h;i<=x;i++)d+=a.get(o,i)*a.get(i,x-1),M+=a.get(o,i)*a.get(i,x);if(u=a.get(o,o)-U,e[o]<0)F=u,k=d,C=M;else if(h=o,0===e[o]?(v=n(-d,-M,u,E),a.set(o,x-1,v[0]),a.set(o,x,v[1])):(c=a.get(o,o+1),m=a.get(o+1,o),b=(s[o]-U)*(s[o]-U)+e[o]*e[o]-E*E,w=2*(s[o]-U)*E,0===b&&0===w&&(b=y*N*(Math.abs(u)+Math.abs(E)+Math.abs(c)+Math.abs(m)+Math.abs(F))),v=n(c*k-F*d+E*M,c*C-F*M-E*d,b,w),a.set(o,x-1,v[0]),a.set(o,x,v[1]),Math.abs(c)>Math.abs(F)+Math.abs(E)?(a.set(o+1,x-1,(-d-u*a.get(o,x-1)+E*a.get(o,x))/c),a.set(o+1,x,(-M-u*a.get(o,x)-E*a.get(o,x-1))/c)):(v=n(-k-m*a.get(o,x-1),-C-m*a.get(o,x),F,E),a.set(o+1,x-1,v[0]),a.set(o+1,x,v[1]))),g=Math.max(Math.abs(a.get(o,x-1)),Math.abs(a.get(o,x))),y*g*g>1)for(i=o;i<=x;i++)a.set(i,x-1,a.get(i,x-1)/g),a.set(i,x,a.get(i,x)/g)}for(o=0;o<t;o++)if(o<S||o>V)for(i=o;i<t;i++)r.set(o,i,a.get(o,i));for(i=t-1;i>=S;i--)for(o=S;o<=V;o++){for(F=0,l=S;l<=Math.min(i,V);l++)F+=r.get(o,l)*a.get(l,i);r.set(o,i,F)}}(h,u,g,f,t)}this.n=h,this.e=u,this.d=g,this.V=f}get realEigenvalues(){return Array.from(this.d)}get imaginaryEigenvalues(){return Array.from(this.e)}get eigenvectorMatrix(){return this.V}get diagonalMatrix(){let t,e,s=this.n,a=this.e,o=this.d,i=new r.default(s,s);for(t=0;t<s;t++){for(e=0;e<s;e++)i.set(t,e,0);i.set(t,t,o[t]),a[t]>0?i.set(t,t+1,a[t]):a[t]<0&&i.set(t,t-1,a[t])}return i}}function n(t,e,s,r){let a,o;return Math.abs(s)>Math.abs(r)?(a=r/s,o=s+a*r,[(t+a*e)/o,(e-a*t)/o]):(a=s/r,o=r+a*s,[(a*t+e)/o,(a*e-t)/o])}},3616:function(t,e,s){"use strict";s.r(e),s.d(e,"default",(function(){return o}));var r=s(1156),a=s(1198);class o{constructor(t,e={}){t=a.default.checkMatrix(t);let{Y:s}=e;const{scaleScores:o=!1,maxIterations:i=1e3,terminationCriteria:n=1e-10}=e;let l;if(s){if(s=Array.isArray(s)&&"number"==typeof s[0]?r.default.columnVector(s):a.default.checkMatrix(s),!s.isColumnVector()||s.rows!==t.rows)throw new Error("Y must be a column vector of length X.rows");l=s}else l=t.getColumnVector(0);let h,f,g,u,c=1;for(let e=0;e<i&&c>n;e++)g=t.transpose().mmul(l).div(l.transpose().mmul(l).get(0,0)),g=g.div(g.norm()),h=t.mmul(g).div(g.transpose().mmul(g).get(0,0)),e>0&&(c=h.clone().sub(u).pow(2).sum()),u=h.clone(),s?(f=s.transpose().mmul(h).div(h.transpose().mmul(h).get(0,0)),f=f.div(f.norm()),l=s.mmul(f).div(f.transpose().mmul(f).get(0,0))):l=h;if(s){let e=t.transpose().mmul(h).div(h.transpose().mmul(h).get(0,0));e=e.div(e.norm());let r=t.clone().sub(h.clone().mmul(e.transpose())),a=l.transpose().mmul(h).div(h.transpose().mmul(h).get(0,0)),o=s.clone().sub(h.clone().mulS(a.get(0,0)).mmul(f.transpose()));this.t=h,this.p=e.transpose(),this.w=g.transpose(),this.q=f,this.u=l,this.s=h.transpose().mmul(h),this.xResidual=r,this.yResidual=o,this.betas=a}else this.w=g.transpose(),this.s=h.transpose().mmul(h).sqrt(),this.t=o?h.clone().div(this.s.get(0,0)):h,this.xResidual=t.sub(h.mmul(g.transpose()))}}}}]);