/*! For license information please see dll.LessonSubmit.js.LICENSE.txt */
(window.webpackJsonp_name_dll=window.webpackJsonp_name_dll||[]).push([[83],{1850:function(e,t,n){"use strict";n.r(t),t.default=function(e){return e.returnValue="o/","o/"}},2802:function(e,t,n){"use strict";n.r(t);var s=n(958),i=n(2803);s.default.addResources("de","lesson-submit",i.DE),s.default.addResources("en","lesson-submit",i.EN),s.default.addResources("es","lesson-submit",i.ES)},2803:function(e){e.exports=JSON.parse('{"DE":{"authentication":"Authentifizierung","authentication-prompt":"Um diese Lektion abzuschließen, logge Dich bitte in Dein ISLE-Konto ein. Wenn Du noch kein Konto eingerichtet hast, melde Dich bitte an und erhalte Zugang zur vollen Funktionalität von ISLE","by":"von","choice":"Wahl","completed":"Abgeschlossen","confirmation-email":" Du erhälst in Kürze eine Bestätigungs-E-Mail.","download-pdf":"PDF der Antworten herunterladen","elapsed":"verstrichen","lesson-successfully-completed":"Lektion erfolgreich abgeschlossen.","lesson-submitted":"Lektion abgeschlossen!","login":"Anmelden","responses-header":"Antworten für die ISLE-Lektion","signup":"Registrieren","submit":"Abschicken"},"EN":{"authentication":"Authentication","authentication-prompt":"To finalize this lesson, please login in to your ISLE account. If you have not created one, please sign up and get access to the full functionality of ISLE.","by":"by","choice":"Choice","completed":"Completed","confirmation-email":" You will receive a confirmation email shortly.","download-pdf":"Download PDF of Responses","elapsed":"elapsed","lesson-successfully-completed":"Lesson successfully completed.","lesson-submitted":"Lesson submitted!","login":"Login","responses-header":"Responses for ISLE lesson","signup":"Sign up","submit":"Submit"},"ES":{"authentication":"Autenticación","authentication-prompt":"Para finalizar esta lección, por favor entre en su cuenta de ISLE. Si no ha creado una, por favor regístrese y acceda a la funcionalidad completa de ISLE.","by":"por","choice":"Elección","completed":"Completado","confirmation-email":" Recibirá un correo electrónico de confirmación en breve.","download-pdf":"Descargar PDF de respuestas","elapsed":"transcurrido","lesson-successfully-completed":"Lección completada con éxito.","lesson-submitted":"¡Lección presentada!","login":"Login","responses-header":"Respuestas para la lección de ISLE","signup":"Inscripción","submit":"Presentar"}}')},881:function(e,t,n){"use strict";n.r(t);var s=n(14),i=n.n(s),o=n(13),a=n.n(o),r=n(10),l=n.n(r),c=n(15),u=n.n(c),p=n(16),d=n.n(p),m=n(8),f=n.n(m),h=n(7),g=n.n(h),b=n(0),v=n.n(b),y=n(36),S=n.n(y),E=n(1),L=n.n(E),w=n(2300),D=n(816),x=n.n(D),O=n(1315),k=n.n(O),R=n(76),z=n(1004),C=n(34),P=n(45),j=n.n(P),N=n(39),I=n.n(N),U=n(367),T=n.n(U),A=n(1850),M=n(421),_=n(420),F=n(37),q=n(108),B=n(201);n(2802);function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,s=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(s,arguments,i)}else n=s.apply(this,arguments);return d()(this,n)}}var H=S()("isle:lesson-submit");var J=function(e){u()(n,e);var t=W(n);function n(e){var s;return i()(this,n),s=t.call(this,e),g()(l()(s),"createReponseSummaryDoc",(function(){var e=s.context,t={content:[{text:"".concat(s.props.t("responses-header")," ").concat(e.namespaceName+"/"+e.lessonName),style:"header",alignment:"center"}],styles:{header:{fontSize:24,bold:!0,margin:[0,0,0,10]},author:{fontSize:16,italics:!0,margin:[0,0,0,10],alignment:"center"},date:{fontSize:16,italics:!0,alignment:"right",margin:[0,15,0,15]},elapsed:{fontSize:16,italics:!0,alignment:"right",margin:[0,15,0,15]},subheader:{fontSize:18,bold:!0,margin:[0,30,0,10]},question:{fontSize:15,margin:[0,0,0,10],italics:!0}}};j()(e.user)||t.content.push({text:"".concat(s.props.t("by")," ").concat(e.user.name," (").concat(e.user.email,")"),style:"author"});var n=new Date;if(t.content.push({text:"".concat(n.toLocaleDateString()," - ").concat(n.toLocaleTimeString()),style:"date"}),t.content.push({text:"".concat(s.props.t("elapsed"),": ").concat(T()(e.duration/6e4),"min"),style:"elapsed"}),e.currentUserActions)for(var i=e.responseVisualizerIds,o=0;o<i.length;o++){var a=e.responseVisualizers[i[o]];t.content.push({text:i[o],style:"subheader"}),a&&function(){var n=a.type,r=a.ref.props.data.question,l=a.ref.props.data.type;t.content.push({text:Object(C.isPrimitive)(r)?r:k()(r),style:"question"});var c=e.currentUserActions[i[o]];if(c){var u=(c=(c=c.filter((function(e){return e.type===n}))).sort((function(e,t){return e.absoluteTime-t.absoluteTime})))[c.length-1];if("image"===l)t.content.push({image:u.value,width:500});else if("factor"===l){var p,d=a.ref.props.data.levels;d=d.map((function(e,t){var n=Object(C.isPrimitive)(e)?e:k()(e);return n||(n="".concat(s.props.t("choice")," ").concat(t+1)),n})),p=I()(u.value)?u.value.map((function(e){return d[e]})).join(", "):d[u.value],t.content.push({text:p})}else t.content.push({text:u.value})}}()}x.a.createPdf(t).download("responses.pdf")})),g()(l()(s),"closeUserModal",(function(){s.setState({showUserModal:!1,visibleLogin:!1,visibleSignup:!1})})),g()(l()(s),"login",(function(e){e.stopPropagation(),s.setState({visibleLogin:!0,visibleSignup:!1})})),g()(l()(s),"signup",(function(e){e.stopPropagation(),s.setState({visibleSignup:!0,visibleLogin:!1})})),g()(l()(s),"closeSignup",(function(){s.setState({visibleSignup:!1,showUserModal:!1})})),g()(l()(s),"closeLogin",(function(){s.setState({visibleLogin:!1,showUserModal:!1})})),g()(l()(s),"finalizeSession",(function(){H("Finalizing session...");for(var e=s.context,t=document.getElementsByClassName("submit-button"),n=0;n<t.length;n++)t[n].innerText===s.props.t("submit")&&t[n].click();e.finalize();var i=s.props.t("lesson-successfully-completed");if(!j()(e.user)&&s.props.sendConfirmationEmail){i+=s.props.t("confirmation-email");var o=function(e,t){var n=t||"";return{text:"Dear ".concat(e.user.name,', this is an automatic confirmation email to inform you that you have successfully completed lesson "').concat(e.lessonName,'" of course "').concat(e.namespaceName,'". ').concat(n),subject:"".concat(e.lessonName," successfully completed!")}}(e,s.props.message);e.sendMail(o,e.user.email)}e.addNotification({title:s.props.t("completed"),message:i,level:"success",position:"tr",autoDismiss:0,dismissible:"button",children:v.a.createElement("div",{style:{marginBottom:"40px"}},v.a.createElement(R.default,{variant:"success",size:"sm",style:{float:"right",marginRight:"10px",marginTop:"10px"},onClick:s.createReponseSummaryDoc},s.props.t("download-pdf"))),onRemove:function(){s.setState({disabled:!1})}}),e.log({id:e.lessonName,type:B.LESSON_SUBMIT,value:s.props.t("lesson-submitted")}),s.setState({disabled:!0}),window.removeEventListener("beforeunload",A.default)})),g()(l()(s),"handleClick",(function(){s.props.onClick();var e=s.context;if(s.props.requireLogin&&j()(e.user))return s.setState({showUserModal:!0});s.finalizeSession()})),s.state={showUserModal:!1,visibleLogin:!1,visibleSignup:!1},s}return a()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.context;this.unsubsribe=t.subscribe((function(t){t!==q.RECEIVED_USER_RIGHTS&&t!==q.LOGGED_IN&&t!==q.LOGGED_OUT||e.forceUpdate()}))}},{key:"componentWillUnmount",value:function(){this.unsubsribe()}},{key:"render",value:function(){var e=!this.context.live||this.state.disabled;return v.a.createElement("div",{className:"bg-light ".concat(this.props.className),style:V({maxWidth:400,margin:"0 auto 0px",padding:"20px",fontFamily:"Arial"},this.props.style)},v.a.createElement(R.default,{disabled:e,variant:"primary",size:"large",onClick:this.handleClick,block:!0},this.props.label),v.a.createElement(z.default,{show:this.state.showUserModal,onHide:this.closeUserModal},v.a.createElement(z.default.Header,{closeButton:!0},v.a.createElement(z.default.Title,null,this.props.t("authentication"))),v.a.createElement(z.default.Body,null,v.a.createElement("p",null,this.props.t("authentication-prompt"))),v.a.createElement(z.default.Footer,{style:{textAlign:"center"}},v.a.createElement(R.default,{variant:"primary",onClick:this.login.bind(this),style:{marginRight:"10px"}},this.props.t("login")),v.a.createElement(R.default,{onClick:this.signup.bind(this)},this.props.t("signup")))),v.a.createElement(_.default,{show:this.state.visibleLogin,onClose:this.closeLogin}),v.a.createElement(M.default,{show:this.state.visibleSignup,onClose:this.closeSignup}))}}]),n}(b.Component);J.defaultProps={label:"Finish lesson",message:"",requireLogin:!0,sendConfirmationEmail:!0,className:"",style:{},onClick:function(){}},J.propTypes={label:L.a.string,message:L.a.string,requireLogin:L.a.bool,sendConfirmationEmail:L.a.bool,className:L.a.string,style:L.a.object,onClick:L.a.func},J.contextType=F.default,t.default=Object(w.withTranslation)("lesson-submit")(J)}}]);