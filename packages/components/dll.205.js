/*! For license information please see dll.205.js.LICENSE.txt */
(window.webpackJsonp_name_dll=window.webpackJsonp_name_dll||[]).push([[205],{1518:function(e,t,a){"use strict";a.r(t),t.default=function(e){e.stopPropagation()}},1544:function(e,t,a){"use strict";a.r(t),t.default=function(e,t){var a=new String(e);return a.categories=t,a}},3358:function(e,t,a){"use strict";a.r(t);var n=a(203),r=a.n(n),l=a(0),o=a.n(l),i=a(1),c=a.n(i),s=a(76),u=a(3359),d=a(3362),f=a(3365),m=a(3368),p=function(e){var t,a=e.data,n=e.categorical,i=e.quantitative,c=e.t,p=e.session,h=e.defaultCode,g=e.logAction,v=e.onGenerate,b=Object(l.useState)(null),E=r()(b,2),y=E[0],w=E[1],C=function(){var t="formula"===y?null:"formula";w(t),e.onActive(t)},k=function(){var t="bin"===y?null:"bin";w(t),e.onActive(t)},N=function(){var t="categorical"===y?null:"categorical";w(t),e.onActive(t)},R=function(){var t="group"===y?null:"group";w(t),e.onActive(t)};if(a)switch(y){case"bin":t=o.a.createElement(u.default,{show:!0,onHide:k,quantitative:i,logAction:g,onGenerate:v,data:a,t:c});break;case"categorical":t=o.a.createElement(f.default,{show:!0,onHide:N,categorical:n,logAction:g,onGenerate:v,data:a,t:c});break;case"formula":t=o.a.createElement(d.default,{show:!0,onHide:C,categorical:n,quantitative:i,data:a,defaultCode:h,logAction:g,onGenerate:v,session:p,t:c});break;case"group":t=o.a.createElement(m.default,{show:!0,onHide:R,logAction:g,onGenerate:v,data:a,t:c})}return o.a.createElement(l.Fragment,null,o.a.createElement("div",{className:"well",style:{padding:15,margin:15}},o.a.createElement("div",{style:{padding:12}},o.a.createElement(s.default,{onClick:C,variant:"primary",block:!0,style:{fontSize:"1.2em"}},c("interactions-functions"))),o.a.createElement("div",{style:{padding:12}},o.a.createElement(s.default,{onClick:k,disabled:0===i.length,variant:"primary",block:!0,style:{fontSize:"1.2em"}},c("bin-quantitative"))),o.a.createElement("div",{style:{padding:12}},o.a.createElement(s.default,{onClick:N,disabled:0===n.length,variant:"primary",block:!0,style:{fontSize:"1.2em"}},c("rename-or-combine"))),o.a.createElement("div",{style:{padding:12}},o.a.createElement(s.default,{onClick:R,variant:"primary",block:!0,style:{fontSize:"1.2em"}},c("create-groups")))),t)};p.defaultProps={logAction:function(){},onActive:function(){},onGenerate:function(){},defaultCode:"",session:{}},p.propTypes={categorical:c.a.array.isRequired,quantitative:c.a.array.isRequired,data:c.a.object.isRequired,defaultCode:c.a.string,logAction:c.a.func,onActive:c.a.func,onGenerate:c.a.func,session:c.a.object},t.default=p},3359:function(e,t,a){"use strict";a.r(t);var n=a(7),r=a.n(n),l=a(203),o=a.n(l),i=a(0),c=a.n(i),s=a(1),u=a.n(s),d=a(36),f=a.n(d),m=a(114),p=a(115),h=a(77),g=a(228),v=a(76),b=a(1008),E=a(87),y=a(961),w=a(68),C=a(1491),k=a.n(C),N=a(88),R=a.n(N),x=a(209),O=a.n(x),V=a(364),q=a.n(V),P=a(106),F=a(207),S=a(205),A=a(220),G=a(378),j=a(368),H=a(142),T=a(365),L=a(139),D=a.n(L),M=a(1544),z=a(1042),_=a(1097),B=a(1079),I=a(201),K=a(1396),X=a(1518),Y=a(2120),J=a(2114);a(3360);function U(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function W(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?U(Object(a),!0).forEach((function(t){r()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):U(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var $=f()("isle:data-explorer:variable-transformer"),Q=/shapes\[(\d)\]\.x0/,Z={group:null,displayDensity:!0,densityType:"Data-driven",chooseBins:!1,nBins:null};function ee(e,t){return e-t}var te=function(e){for(var t=[],a=0;a<e.length;a++)t.push({type:"line",x0:e[a],y0:-100,x1:e[a],y1:100,line:{color:"red",width:3}});return t},ae=function(e,t){var a=new Array(t.length);t[0]?a[0]=t[0]:a[0]="(-∞,".concat(e[0],")");for(var n=1;n<t.length;n++)t[n]?a[n]=t[n]:a[n]="[".concat(e[n-1],",").concat(e[n],")");var r=t.length-1;return t[r]?a[r]=t[r]:a[r]="[".concat(e[e.length-1],",∞)"),a},ne=function(e){var t,a,n=Object(i.useState)(""),r=o()(n,2),l=r[0],s=r[1],u=Object(i.useState)(0),d=o()(u,2),f=d[0],C=d[1],N=Object(i.useState)({variable:null,configHist:null,breakpoints:null,categories:null,customNames:null}),x=o()(N,2),V=x[0],L=x[1],U=l.length<2,ne=function(){var t=V.variable,a=V.categories,n=V.breakpoints,r=e.data[t],o=Object(Y.default)(r,a,n);e.logAction(I.DATA_EXPLORER_BIN_TRANSFORMER,{name:l,variable:t,breaks:n,categories:a});var i=Object(M.default)(l,a);e.onGenerate(i,o),e.onHide()},re=function(e){13!==e.charCode||U||ne()},le=function(e){s(e.target.value)},oe=function(e){return function(t){$("Change break point...");var a=V.breakpoints.slice();a[e]=O()(t,-f),a.sort(ee);var n=q()(V.configHist);n.layout.shapes=te(a),L(W(W({},V),{},{configHist:n,breakpoints:a,categories:ae(a,V.customNames)}))}},ie=function(e){return function(t){var a=V.categories.slice();a[e]=t;var n=V.customNames.slice();n[e]=t;var r=W(W({},V),{},{categories:a,customNames:n});L(r)}},ce=function(e){return function(){var t=V.breakpoints,a=V.categories,n=V.customNames;t.splice(e,1),a.splice(e,1),n.splice(e,1);var r=W({},V.configHist);r.layout.shapes=te(t),L(W(W({},V),{},{configHist:r,categories:a,customNames:n,breakpoints:t}))}},se=function(e){var t=R()(e),a=Q.exec(t[0]);if(a){var n=a[1],r=V.breakpoints.slice();r[n]=O()(e[t[0]],-f),r.sort(ee);var l=q()(V.configHist);l.layout.shapes=te(r),L(W(W({},V),{},{configHist:l,breakpoints:r,categories:ae(r,V.customNames)}))}},ue=function(t){$("Change variable to bin...");var a=W({data:e.data,variable:t},Z),n=Object(K.generateHistogramConfig)(a);n.layout.yaxis={range:[Object(_.default)(n.data[1].y),Object(B.default)(n.data[1].y)],fixedrange:!0},n.layout.xaxis={fixedrange:!0};var r=e.data[t];r=r.filter((function(e){return Object(P.isPrimitive)(e)&&!D()(e)}));var l=[O()(Object(z.default)(r),-f)];n.layout.shapes=te(l);var o=[!1,!1];L({variable:t,configHist:n,breakpoints:l,customNames:o,categories:ae(l,o)})},de=function(){var t=V.breakpoints.slice(),a=e.data[V.variable];a=a.filter((function(e){return Object(P.isPrimitive)(e)&&!D()(e)}));var n=k()(.8,1.2)*Object(z.default)(a);t.push(O()(n,-f)),t.sort(ee);var r=q()(V.configHist);r.layout.shapes=te(t);var l=V.customNames;l.push(!1);var o=W(W({},V),{},{breakpoints:t,configHist:r,categories:ae(t,l)});L(o)};return c.a.createElement(G.default,{cancel:".card-body",onDragStart:X.default,style:{zIndex:1006}},c.a.createElement(H.default,{onHide:e.onHide,show:e.show,header:e.t("bin-transformer-header"),footer:c.a.createElement(v.default,{onClick:ne,disabled:U},e.t("create-new-variable")),bodyStyle:{maxHeight:"calc(100vh - 200px)",overflowY:"auto",position:"relative"},role:"button",tabIndex:0},(t=V.configHist,a=c.a.createElement(S.default,{legend:e.t("variable-to-bin"),defaultValue:V.variable,options:e.quantitative,onChange:ue,style:{maxWidth:400}}),t?c.a.createElement(i.Fragment,null,a,c.a.createElement(v.default,{className:"insert-line-button",onClick:de},e.t("insert-break-line")),c.a.createElement("p",null,e.t("drag-red-bars"),"(",c.a.createElement(F.default,{legend:e.t("digits-after-comma-snap"),min:0,max:9,inline:!0,defaultValue:f,onChange:C}),")"),c.a.createElement("div",{style:{height:250}},c.a.createElement(j.default,{data:t.data,layout:t.layout,editable:!0,fit:!0,removeButtons:!0,legendButtons:!1,onRelayout:se})),c.a.createElement("div",null,c.a.createElement(E.default,{className:"mb-2"},c.a.createElement(E.default.Header,null,e.t("choose-category-labels"),":"),c.a.createElement(E.default.Body,null,function(){var e=[],t=V.breakpoints,a=1===t.length;if(e.push(c.a.createElement(y.default,{key:"div-0"},c.a.createElement(w.default,{md:7},c.a.createElement(T.default,{raw:"x < "}),c.a.createElement(F.default,{inline:!0,onBlur:oe(0),defaultValue:t[0],step:"any"})),c.a.createElement(w.default,{md:4},c.a.createElement(A.default,{key:0,legend:"Label 1",defaultValue:V.categories[0],onChange:ie(0),style:{width:200}})),c.a.createElement(w.default,{md:1}))),t.length>1)for(var n=0;n<t.length-1;n++){var r=ie(n+1);e.push(c.a.createElement(y.default,{key:"div-".concat(n+1)},c.a.createElement(w.default,{md:7},c.a.createElement(F.default,{inline:!0,onBlur:oe(n),defaultValue:t[n],step:"any"}),c.a.createElement(T.default,{raw:"\\le x <"}),c.a.createElement(F.default,{inline:!0,onBlur:oe(n+1),defaultValue:t[n+1],step:"any"})),c.a.createElement(w.default,{md:4},c.a.createElement(A.default,{key:1+n,legend:"Label ".concat(n+2),defaultValue:V.categories[n+1],onChange:r,style:{width:200}})),c.a.createElement(w.default,{md:1},c.a.createElement(J.default,{onClick:ce(n),style:{marginTop:"5px"},disabled:a,tooltipPlacement:"right"}))))}var l=t.length;return e.push(c.a.createElement(y.default,{key:"div-".concat(l)},c.a.createElement(w.default,{md:7},c.a.createElement(T.default,{raw:"x \\ge"}),c.a.createElement(F.default,{inline:!0,onChange:oe(l-1),defaultValue:t[l-1],step:"any"})),c.a.createElement(w.default,{md:4},c.a.createElement(A.default,{legend:"Label ".concat(l+1),defaultValue:V.categories[l],onChange:ie(l),key:l,style:{width:200}})),c.a.createElement(w.default,{md:1},c.a.createElement(J.default,{onClick:ce(l-1),style:{marginTop:"5px"},disabled:a})))),e}()))),c.a.createElement(h.default,{style:{width:"fit-content"}},c.a.createElement(p.default,null,e.t("name-new-variable"),":"),c.a.createElement(m.default,{type:"text",placeholder:e.t("select-name"),onChange:le,onKeyPress:re}),c.a.createElement(g.default,null,e.t("new-variable-appended")))):c.a.createElement(i.Fragment,null,a,c.a.createElement(b.default,{variant:"info"},e.t("select-variable-bin"))))))};ne.defaultProps={logAction:function(){},onGenerate:function(){}},ne.propTypes={show:u.a.bool.isRequired,data:u.a.object.isRequired,quantitative:u.a.array.isRequired,logAction:u.a.func,onHide:u.a.func.isRequired,onGenerate:u.a.func},t.default=ne},3360:function(e,t,a){"use strict";a.r(t);var n=a(22),r=a.n(n),l=a(3361),o={insert:"head",singleton:!1};r()(l.default,o);t.default=l.default.locals||{}},3361:function(e,t,a){"use strict";a.r(t);var n=a(23),r=a.n(n)()(!1);r.push([e.i,".insert-line-button {\n\tposition: absolute;\n\tright: 2%;\n\ttop: 52px;\n\tz-index: 2;\n}\n",""]),t.default=r},3362:function(e,t,a){"use strict";a.r(t);var n=a(14),r=a.n(n),l=a(13),o=a.n(l),i=a(10),c=a.n(i),s=a(15),u=a.n(s),d=a(16),f=a.n(d),m=a(8),p=a.n(m),h=a(7),g=a.n(h),v=a(203),b=a.n(v),E=a(0),y=a.n(E),w=a(1),C=a.n(w),k=a(1507),N=a(114),R=a(115),x=a(77),O=a(228),V=a(87),q=a(76),P=a(1003),F=a(1070),S=a(1189),A=a(378),G=a(142),j=a(395),H=a(223),T=a(44),L=a(1060),D=a.n(L),M=a(204),z=a.n(M),_=a(994),B=a.n(_),I=a(201),K=a(2118),X=a(2119);a(3363);function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=p()(e);if(t){var r=p()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return f()(this,a)}}var J=D()(0,10,1),U=/(?:^|\n)([^\n]*)$/,W=/^[0-9]/,$=y.a.forwardRef((function(e,t){var a=e.children,n=e.style,r=e.className,l=e["aria-labelledby"],o=Object(E.useState)(""),i=b()(o,2),c=i[0],s=i[1];return y.a.createElement("div",{ref:t,style:n,className:r,"aria-labelledby":l},y.a.createElement(N.default,{className:"mx-3 my-2 w-auto",placeholder:"Type to filter...",onChange:function(e){return s(e.target.value)},value:c}),y.a.createElement("ul",{className:"list-unstyled"},y.a.Children.toArray(a).filter((function(e){return!c||e.props.children.toLowerCase().startsWith(c)}))))})),Q=function(e){u()(a,e);var t=Y(a);function a(e){var n;return r()(this,a),n=t.call(this,e),g()(c()(n),"handleGenerate",(function(){var e,t=n.state,a=t.code,r=t.name;z()(a,"return ")||(a=B()(a,U,"\nreturn $1"));try{e=Object(K.default)(a,n.props.data),n.props.logAction(I.DATA_EXPLORER_VARIABLE_TRANSFORMER,{code:a,name:r}),n.props.onGenerate(r,e)}catch(e){return n.props.session.addNotification({title:"Errored",message:"Encountered the following error: "+e.message,level:"error",position:"tr"})}n.props.onHide()})),g()(c()(n),"handleNameChange",(function(e){n.setState({name:e.target.value})})),g()(c()(n),"handleCodeChange",(function(e){n.setState({code:e})})),g()(c()(n),"handleKeyPress",(function(e){13===e.charCode&&n.state.name.length>=2&&n.handleGenerate()})),g()(c()(n),"insertVarFactory",(function(e){return function(){var t=n.state.code.substring(0,n.state.selection),a="datum";t+=a+=!z()(e," ")&&!z()(e,".")&&!W.test(e)?".".concat(e):"['".concat(e,"']"),t+=n.state.code.substring(n.state.selection),n.setState({code:t,selection:n.state.selection+a.length})}})),g()(c()(n),"insertLiteralFactory",(function(e){return function(){var t=n.state.code.substring(0,n.state.selection),a=e;t+=a,t+=n.state.code.substring(n.state.selection),n.setState({code:t,selection:n.state.selection+a.length})}})),g()(c()(n),"insertFuncFactory",(function(e){return function(){var t=n.state.code.substring(0,n.state.selection),a=" "+e+"()";t+=a,t+=n.state.code.substring(n.state.selection),n.setState({code:t,selection:n.state.selection+a.length-1})}})),n.state={code:e.defaultCode,selection:null,name:"",showGuide:!1},n}return o()(a,[{key:"render",value:function(){var e=this,t=this.props.quantitative.map((function(t,a){return y.a.createElement(S.default.Item,{key:a,onClick:e.insertVarFactory(t),eventKey:a},t)}));return y.a.createElement(A.default,{cancel:".card-body",onDragStart:function(e){e.stopPropagation()},style:{zIndex:1006}},y.a.createElement(G.default,{show:this.props.show,onHide:this.props.onHide,header:this.props.t("formula-transformer-header"),footer:y.a.createElement(q.default,{onClick:this.handleGenerate,disabled:this.state.name.length<2},this.props.t("create-new-variable")),role:"button",tabIndex:0,bodyStyle:{maxHeight:"calc(100vh - 200px)",overflowY:"auto",position:"relative"}},y.a.createElement("div",{className:"formula-transformer-body"},y.a.createElement(j.default,{headerClassName:"title",header:this.state.showGuide?"Hide Example Guide":"Show Example Guide",visible:this.state.showGuide,onClick:function(){return e.setState({showGuide:!e.state.showGuide})}},y.a.createElement("p",null,"Use the formula text area below to create a new variable. The following table illustrates a few use-cases:"),y.a.createElement(k.default,{condensed:!0},y.a.createElement("thead",null,y.a.createElement("tr",null,y.a.createElement("th",null,"Type"),y.a.createElement("th",null,"Example"),y.a.createElement("th",null,"Description"))),y.a.createElement("tbody",null,y.a.createElement("tr",null,y.a.createElement("td",null,"Interaction:"),y.a.createElement("td",null,y.a.createElement("code",null,"datum.",this.props.quantitative[0]," * datum.",this.props.quantitative[1])),y.a.createElement("td",null,"Multiply values of variables ",y.a.createElement("code",null,this.props.quantitative[0])," and ",y.a.createElement("code",null,this.props.quantitative[1]))),y.a.createElement("tr",null,y.a.createElement("td",null,"Transformation:"),y.a.createElement("td",null,y.a.createElement("code",null,"exp( datum.",this.props.quantitative[0]," )")),y.a.createElement("td",null,"Natural exponential function of variable ",y.a.createElement("code",null,this.props.quantitative[0]))),y.a.createElement("tr",null,y.a.createElement("td",null,"Function:"),y.a.createElement("td",null,y.a.createElement("code",null,"9/5 * ",this.props.quantitative[0]," + 32")),y.a.createElement("td",null,"Multiply values of ",y.a.createElement("code",null,this.props.quantitative[0])," by ",y.a.createElement("code",null,"9/5")," and add ",y.a.createElement("code",null,"32")))))),y.a.createElement("hr",null),y.a.createElement("div",{className:"mb-2"},y.a.createElement(F.default,{style:{marginBottom:5}},y.a.createElement(S.default,{className:"mr-2"},y.a.createElement(S.default.Toggle,{variant:"light",id:"dropdown-custom-components"},"Quantitative"),y.a.createElement(S.default.Menu,{variant:"light",as:$,id:"bg-nested-dropdown"},t)),y.a.createElement(S.default,{className:"mr-2"},y.a.createElement(S.default.Toggle,{variant:"light",id:"dropdown-custom-components"},"Categorical"),y.a.createElement(S.default.Menu,{variant:"light",as:$,id:"bg-nested-dropdown"},this.props.categorical.map((function(t,a){return y.a.createElement(S.default.Item,{key:a,onClick:e.insertVarFactory(t),eventKey:a},t)})))))),y.a.createElement(V.default,{className:"mb-2"},y.a.createElement(V.default.Body,null,y.a.createElement(F.default,{style:{marginBottom:5}},y.a.createElement(P.default,{size:"sm",className:"mr-2"},y.a.createElement(q.default,{variant:"light",onClick:this.insertLiteralFactory(" < ")},"<"),y.a.createElement(q.default,{variant:"light",onClick:this.insertLiteralFactory(" > ")},">"),y.a.createElement(q.default,{variant:"light",onClick:this.insertLiteralFactory(" <= ")},"<="),y.a.createElement(q.default,{variant:"light",onClick:this.insertLiteralFactory(" >= ")},">=")),y.a.createElement(P.default,{size:"sm",className:"mr-2"},y.a.createElement(T.default,{placement:"top",tooltip:"Open parenthesis"},y.a.createElement(q.default,{variant:"light",onClick:this.insertLiteralFactory(" ( ")},"(")),y.a.createElement(T.default,{placement:"top",tooltip:"Closing parenthesis"},y.a.createElement(q.default,{variant:"light",onClick:this.insertLiteralFactory(" ) ")},")"))),y.a.createElement(P.default,{size:"sm",className:"mr-2"},y.a.createElement(T.default,{placement:"top",tooltip:"Addition"},y.a.createElement(q.default,{variant:"light",onClick:this.insertLiteralFactory(" + ")},"+")),y.a.createElement(T.default,{placement:"top",tooltip:"Subtraction"},y.a.createElement(q.default,{variant:"light",onClick:this.insertLiteralFactory(" - ")},"-")),y.a.createElement(T.default,{placement:"top",tooltip:"Multiplication"},y.a.createElement(q.default,{variant:"light",onClick:this.insertLiteralFactory(" * ")},"*")),y.a.createElement(T.default,{placement:"top",tooltip:"Division"},y.a.createElement(q.default,{variant:"light",onClick:this.insertLiteralFactory(" / ")},"/"))),y.a.createElement(P.default,{size:"sm",className:"mr-2"},y.a.createElement(q.default,{variant:"light",onClick:this.insertLiteralFactory(" && ")},"and"),y.a.createElement(q.default,{variant:"light",onClick:this.insertLiteralFactory(" || ")},"or"),y.a.createElement(q.default,{variant:"light",onClick:this.insertLiteralFactory(" !")},"not")),y.a.createElement(P.default,{size:"sm",className:"me-2"},X.map((function(t,a){return y.a.createElement(q.default,{key:a,variant:"light",onClick:e.insertFuncFactory(t),eventKey:a},t)})))),y.a.createElement(F.default,null,y.a.createElement(P.default,{size:"sm",className:"mr-2"},J.map((function(t,a){return y.a.createElement(q.default,{key:a,variant:"light",onClick:e.insertLiteralFactory("".concat(t))},t)})),y.a.createElement(q.default,{variant:"light",onClick:this.insertLiteralFactory(".")},"."))))),y.a.createElement(V.default,{className:"mb-2"},y.a.createElement(V.default.Body,null,y.a.createElement(H.default,{ref:function(t){e.textarea=t},legend:"Expression:",placeholder:"Enter formula...",value:this.state.code,onChange:this.handleCodeChange,onBlur:function(t){var a=t.target.selectionStart;e.setState({selection:a})},rows:3}))),y.a.createElement(x.default,{style:{margin:8}},y.a.createElement(R.default,null,this.props.t("name-new-variable"),":"),y.a.createElement(N.default,{type:"text",placeholder:this.props.t("select-name"),onChange:this.handleNameChange,onKeyPress:this.handleKeyPress}),y.a.createElement(O.default,null,this.props.t("new-variable-appended"))))))}}]),a}(E.Component);Q.defaultProps={logAction:function(){},onGenerate:function(){},defaultCode:"",session:{}},Q.propTypes={show:C.a.bool.isRequired,categorical:C.a.array.isRequired,quantitative:C.a.array.isRequired,data:C.a.object.isRequired,defaultCode:C.a.string,logAction:C.a.func,onGenerate:C.a.func,onHide:C.a.func.isRequired,session:C.a.object},t.default=Q},3363:function(e,t,a){"use strict";a.r(t);var n=a(22),r=a.n(n),l=a(3364),o={insert:"head",singleton:!1};r()(l.default,o);t.default=l.default.locals||{}},3364:function(e,t,a){"use strict";a.r(t);var n=a(23),r=a.n(n)()(!1);r.push([e.i,".formula-transformer-body .dropdown-menu {\n\theight: 300px;\n\toverflow-y: scroll;\n}\n",""]),t.default=r},3365:function(e,t,a){"use strict";a.r(t);var n=a(14),r=a.n(n),l=a(13),o=a.n(l),i=a(10),c=a.n(i),s=a(15),u=a.n(s),d=a(16),f=a.n(d),m=a(8),p=a.n(m),h=a(7),g=a.n(h),v=a(0),b=a.n(v),E=a(1),y=a.n(E),w=a(36),C=a.n(w),k=a(378),N=a(142),R=a(76),x=a(68),O=a(961),V=a(114),q=a(115),P=a(77),F=a(228),S=a(148),A=a(88),G=a.n(A),j=a(1202),H=a.n(j),T=a(1203),L=a.n(T),D=a(364),M=a.n(D),z=a(994),_=a.n(z),B=a(1476),I=a.n(B),K=a(205),X=a(210),Y=a(44),J=a(201),U=a(2121),W=a(1169);a(3366);function $(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=p()(e);if(t){var r=p()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return f()(this,a)}}var Q=C()("isle:data-explorer:variable-transformer");function Z(e){return e?_()(e,".","[dot]"):e}function ee(e){for(var t=G()(e),a=!0,n=0;n<t.length;n++)I()(e[t[n]])||(a=!1);return a}var te=function(e){u()(a,e);var t=$(a);function a(e){var n;r()(this,a),n=t.call(this,e),g()(c()(n),"handleFirstVariableChange",(function(e){var t,a={};if(n.state.secondVar){var r=e,l=n.state.secondVar,o=n.props.data[r];t=H()(o,L.a);for(var i=Object(W.default)(t,r),c=Object(W.default)(n.state.secondFreqs,l),s=0;s<i.length;s++)for(var u=0;u<c.length;u++){var d=i[s]+"-"+c[u];a[Z(d)]=d}}else{var f=n.props.data[e];t=H()(f,L.a);for(var m=Object(W.default)(t,e),p=0;p<m.length;p++)a[Z(m[p])]=m[p]}var h=ee(a);n.setState({firstVar:e,firstFreqs:t,nameMappings:a,onlyNumbers:h})})),g()(c()(n),"handleSecondVariableChange",(function(e){if(!e){for(var t=n.state.firstVar,a=Object(W.default)(n.state.firstFreqs,t),r={},l=0;l<a.length;l++)r[Z(a[l])]=a[l];return n.setState({secondVar:e,nameMappings:r})}for(var o={},i=n.state.firstVar,c=n.props.data[e],s=H()(c,L.a),u=Object(W.default)(n.state.firstFreqs,i),d=Object(W.default)(s,e),f=0;f<u.length;f++)for(var m=0;m<d.length;m++){var p=u[f]+"-"+d[m];o[Z(p)]=p}var h=ee(o);n.setState({secondVar:e,secondFreqs:s,nameMappings:o,onlyNumbers:h})})),g()(c()(n),"handleKeyPress",(function(e){13===e.charCode&&n.state.generatedName.length>=2&&n.makeNewVar()})),g()(c()(n),"changeFreqFactory",(function(e){return function(t){var a=M()(n.state.nameMappings);a[Z(e)]=t.target.value;var r=ee(a);n.setState({nameMappings:a,onlyNumbers:r})}})),g()(c()(n),"changeContigencyFactory",(function(e,t){return function(a){var r=M()(n.state.nameMappings);r[Z(t)+"-"+Z(e)]=a.target.value,n.setState({nameMappings:r})}})),g()(c()(n),"handleGeneratedNameChange",(function(e){n.setState({generatedName:e.target.value})})),g()(c()(n),"makeNewVar",(function(){Q("Generating new categorical variable...");var e=n.state,t=e.firstVar,a=e.secondVar,r=e.nameMappings,l=e.castNumeric,o=Object(U.default)(t,a,r,n.props.data,l);n.props.onGenerate(n.state.generatedName,o),n.props.logAction(J.DATA_EXPLORER_CAT_TRANSFORMER,{name:n.state.generatedName,firstVar:t,secondVar:a,nameMappings:r,castNumeric:l}),n.props.onHide()})),g()(c()(n),"renderFrequencyTable",(function(){var e=n.state.firstVar,t=n.props.data[e],a=H()(t,L.a),r=Object(W.default)(a,e);return b.a.createElement(S.default,{bordered:!0,style:{margin:8}},b.a.createElement("thead",null,b.a.createElement("tr",null,b.a.createElement("th",null,n.props.t("old"),":"),r.map((function(t,a){return b.a.createElement("th",{key:"".concat(e,"-").concat(a,"-old")},t)})))),b.a.createElement("tbody",null,b.a.createElement("tr",null,b.a.createElement("th",null,n.props.t("new"),":"),r.map((function(t,a){return b.a.createElement("th",{key:"".concat(e,"-").concat(a,"-new")},b.a.createElement("input",{className:"transformer-table-input",type:"text",defaultValue:t,onChange:n.changeFreqFactory(t)}))}))),b.a.createElement("tr",{style:{borderTop:"1px solid black"}},b.a.createElement("th",null,n.props.t("frequencies"),":"),r.map((function(t,a){var r=n.state.firstFreqs[t];return b.a.createElement("td",{key:"".concat(e,"-").concat(a,"-freq")},r)})))))})),g()(c()(n),"renderContingencyTable",(function(){var e=n.state.secondVar,t=n.state.firstVar,a=n.props.data[e],r=n.props.data[t],l=H()(a,L.a),o=H()(r,L.a),i=Object(W.default)(l,e),c=Object(W.default)(o,t);return b.a.createElement(S.default,{bordered:!0,style:{margin:8}},b.a.createElement("tr",null,b.a.createElement("th",null),c.map((function(e,t){return b.a.createElement("th",{key:"".concat(e,"-").concat(t)},e)}))),i.map((function(e,t){return b.a.createElement("tr",{key:"".concat(e,"-").concat(t)},b.a.createElement("th",null,e),c.map((function(t,a){return b.a.createElement("td",{key:"".concat(e,"-").concat(t,"-").concat(a)},b.a.createElement("input",{className:"transformer-table-input",type:"text",defaultValue:"".concat(t,"-").concat(e),onChange:n.changeContigencyFactory(e,t)}))})))})))}));for(var l=e.categorical[0],o=e.data[l],i=H()(o,L.a),s=Object(W.default)(i,l),u={},d=0;d<s.length;d++)u[Z(s[d])]=s[d];return n.state={generatedName:"",firstVar:l,firstFreqs:i,nameMappings:u,secondVar:null,secondFreqs:null,castNumeric:!1,onlyNumbers:!1},n}return o()(a,[{key:"renderTable",value:function(){return this.state.firstVar&&this.state.secondVar?this.renderContingencyTable():this.state.firstVar||this.state.secondVar?this.renderFrequencyTable():null}},{key:"render",value:function(){var e=this,t=this.props.t;return b.a.createElement(k.default,{cancel:".card-body",onDragStart:function(e){e.stopPropagation()},style:{zIndex:1006}},b.a.createElement(N.default,{onHide:this.props.onHide,show:this.props.show,header:t("categorical-transformer-header"),footer:b.a.createElement(R.default,{onClick:this.makeNewVar,disabled:this.state.generatedName.length<2},t("create-new-variable")),bodyStyle:{maxHeight:"calc(100vh - 200px)",overflowY:"auto",position:"relative"},role:"button",tabIndex:0},b.a.createElement(O.default,null,b.a.createElement(x.default,{md:4},b.a.createElement(K.default,{legend:t("first-variable"),defaultValue:this.state.firstVar||"",options:this.props.categorical,onChange:this.handleFirstVariableChange})),b.a.createElement(x.default,{md:4},b.a.createElement(K.default,{clearable:!0,legend:t("optional-second-variable"),defaultValue:this.state.secondVar||"",options:this.props.categorical,onChange:this.handleSecondVariableChange}))),b.a.createElement(O.default,{style:{overflowX:"auto",width:"100%"}},this.renderTable()),b.a.createElement(O.default,null,b.a.createElement(Y.default,{tooltip:t("treat-labels-as-numbers-tooltip")},b.a.createElement(X.default,{legend:t("treat-labels-as-numbers"),defaultValue:!1,disabled:!this.state.onlyNumbers,onChange:function(){e.setState({castNumeric:!e.state.castNumeric})}}))),b.a.createElement(O.default,null,b.a.createElement(P.default,{style:{margin:8}},b.a.createElement(q.default,null,t("name-new-variable"),":"),b.a.createElement(V.default,{type:"text",placeholder:t("select-name"),onChange:this.handleGeneratedNameChange,onKeyPress:this.handleKeyPress}),b.a.createElement(F.default,null,t("new-variable-appended"))))))}}]),a}(v.Component);te.defaultProps={logAction:function(){}},te.propTypes={categorical:y.a.array.isRequired,data:y.a.object.isRequired,onGenerate:y.a.func.isRequired,logAction:y.a.func,onHide:y.a.func.isRequired,show:y.a.bool.isRequired},t.default=te},3366:function(e,t,a){"use strict";a.r(t);var n=a(22),r=a.n(n),l=a(3367),o={insert:"head",singleton:!1};r()(l.default,o);t.default=l.default.locals||{}},3367:function(e,t,a){"use strict";a.r(t);var n=a(23),r=a.n(n)()(!1);r.push([e.i,".transformer-table-input {\n\twidth: 100%;\n}\n",""]),t.default=r},3368:function(e,t,a){"use strict";a.r(t);var n=a(14),r=a.n(n),l=a(13),o=a.n(l),i=a(10),c=a.n(i),s=a(15),u=a.n(s),d=a(16),f=a.n(d),m=a(8),p=a.n(m),h=a(7),g=a.n(h),v=a(0),b=a.n(v),E=a(1),y=a.n(E),w=a(36),C=a.n(w),k=a(76),N=a(68),R=a(961),x=a(114),O=a(115),V=a(77),q=a(228),P=a(1016),F=a.n(P),S=a(1056),A=a.n(S),G=a(88),j=a.n(G),H=a(220),T=a(207),L=a(378),D=a(142),M=a(201);function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=p()(e);if(t){var r=p()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return f()(this,a)}}var _=C()("isle:data-explorer:group-transformer"),B=function(e){u()(a,e);var t=z(a);function a(e){var n;return r()(this,a),n=t.call(this,e),g()(c()(n),"handleGeneratedNameChange",(function(e){n.setState({generatedName:e.target.value})})),g()(c()(n),"handleGroupNumberChange",(function(e){for(var t=new Array(e).fill(1/e),a=new Array(e),r=0;r<a.length;r++)a[r]="Group ".concat(r+1);n.setState({groupProbs:t,labels:a,nGroups:e})})),g()(c()(n),"handleKeyPress",(function(e){if(13===e.charCode){for(var t=0,a=0;a<n.state.groupProbs.length;a++)t+=n.state.groupProbs[a];n.state.generatedName.length>2&&A()(t,1)<=15e-9&&n.makeNewVar()}})),g()(c()(n),"makeNewVar",(function(){_("Generating new categorical variable...");var e=j()(n.props.data),t=n.props.data[e[0]].length,a=F()(n.state.labels,{size:t,probs:n.state.groupProbs,replace:!0});n.props.onGenerate(n.state.generatedName,a),n.props.logAction(M.DATA_EXPLORER_GROUP_TRANSFORMER,{name:n.state.generatedName,labels:n.state.labels,groupProbs:n.state.groupProbs}),n.props.onHide()})),n.state={generatedName:"",nGroups:2,groupProbs:[.5,.5],labels:["Group 1","Group 2"]},n}return o()(a,[{key:"renderTable",value:function(){for(var e=this,t=new Array(this.state.nGroups),a=function(a){t[a]=b.a.createElement(R.default,{key:a},b.a.createElement(N.default,null,b.a.createElement(H.default,{legend:"Label for Group ".concat(a+1),defaultValue:e.state.labels[a],onChange:function(t){var n=e.state.labels.slice();n[a]=t,e.setState({labels:n})}})),b.a.createElement(N.default,null,b.a.createElement(T.default,{legend:"Group Proportion",onChange:function(t){var n=e.state.groupProbs.slice();n[a]=t,e.setState({groupProbs:n})},defaultValue:e.state.groupProbs[a],step:.01,min:0,max:1,numbersOnly:!1})))},n=0;n<t.length;n++)a(n);return b.a.createElement(v.Fragment,null,t,b.a.createElement("p",null,this.props.t("proportions-sum-one")))}},{key:"render",value:function(){for(var e=0,t=0;t<this.state.groupProbs.length;t++)e+=this.state.groupProbs[t];var a=this.state.generatedName.length>2&&A()(e,1)<=15e-9;return b.a.createElement(L.default,{cancel:".card-body",onDragStart:function(e){e.stopPropagation()},style:{zIndex:1006}},b.a.createElement(D.default,{onHide:this.props.onHide,show:this.props.show,header:this.props.t("group-transformer-header"),footer:b.a.createElement(k.default,{onClick:this.makeNewVar,disabled:!a},this.props.t("create-new-variable")),role:"button",tabIndex:0,bodyStyle:{maxHeight:"calc(100vh - 200px)",overflowY:"auto",position:"relative"}},b.a.createElement(R.default,null,b.a.createElement(N.default,null,b.a.createElement(T.default,{legend:this.props.t("number-of-groups"),onChange:this.handleGroupNumberChange,defaultValue:this.state.nGroups,step:1,min:1,max:99}))),this.renderTable(),b.a.createElement(R.default,null,b.a.createElement(V.default,{style:{margin:8}},b.a.createElement(O.default,null,this.props.t("name-new-variable"),":"),b.a.createElement(x.default,{type:"text",placeholder:this.props.t("select-name"),onChange:this.handleGeneratedNameChange,onKeyPress:this.handleKeyPress}),b.a.createElement(q.default,null,this.props.t("new-variable-appended"))))))}}]),a}(v.Component);B.defaultProps={logAction:function(){}},B.propTypes={data:y.a.object.isRequired,onGenerate:y.a.func.isRequired,logAction:y.a.func,onHide:y.a.func.isRequired,show:y.a.bool.isRequired},t.default=B}}]);