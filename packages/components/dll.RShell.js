/*! For license information please see dll.RShell.js.LICENSE.txt */
(window.webpackJsonp_name_dll=window.webpackJsonp_name_dll||[]).push([[114],{1337:function(e,t,n){"use strict";n.r(t);var i=n(39),a=n.n(i);t.default=function(e,t,n){var i=n.config.rshell;i&&i.libraries&&(e=e.concat(i.libraries));var o=function(e){return e.map((function(e){return"library("+e+");"})).join(" ")}(e);return i&&i.global&&(o+=i.global+"\n"),t=a()(t)?t.join("\n"):t,o+=t+="\n"}},2933:function(e,t,n){"use strict";n.r(t);var i=n(22),a=n.n(i),o=n(2934),l={insert:"head",singleton:!1};a()(o.default,l);t.default=o.default.locals||{}},2934:function(e,t,n){"use strict";n.r(t);var i=n(23),a=n.n(i)()(!1);a.push([e.i,".rshell {\n\tmax-width: 1200px;\n\tmin-width: 400px;\n\tpadding: 5px;\n\ttext-align: left;\n\tmargin: 0 auto;\n\tmargin-bottom: 15px;\n\tbackground: white;\n\tborder: 1px solid  rgba(92, 92, 92, 0.6);\n\tborder-radius: 6px;\n\tbox-shadow: 0 0 8px rgba(92, 92, 92, 0.5);\n}\n\n.rshell-editor {\n\twidth: 98%;\n\tmargin-top: 1%;\n\tmargin-left: 1%;\n\tfont-family: monospace;\n\tfont-size: 20px;\n\tline-height: 28px;\n\tmargin-bottom: 10px;\n}\n\n.rshell-editor > .CodeMirror {\n\theight: 100%;\n\tmax-height: 100%;\n}\n",""]),t.default=a},911:function(e,t,n){"use strict";n.r(t);var i=n(14),a=n.n(i),o=n(13),l=n.n(o),r=n(10),s=n.n(r),u=n(15),c=n.n(u),d=n(16),p=n.n(d),h=n(8),f=n.n(h),m=n(7),g=n.n(m),v=n(0),y=n.n(v),b=n(26),E=n.n(b),O=n(1),S=n.n(O),x=n(389),R=n(146),w=n(76),C=n(1070),k=n(1004),H=n(215),P=n(2183),L=n.n(P),j=n(1337),_=n(377),T=n(39),V=n.n(T),D=n(110),N=n.n(D),I=n(107),U=n.n(I),A=n(34),z=n(140),M=n.n(z),B=n(36),F=n.n(B),J=n(1567),W=n.n(J),Y=n(63),q=n(394),G=n(382),K=n(90),Q=n(37),X=n(201),Z=n(108);n(2932),n(2137),n(2138),n(2933);function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=f()(e);if(t){var a=f()(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return p()(this,n)}}var te=F()("isle:r-shell"),ne=Object(Y.default)("r-shell"),ie=/(help\([^)]*\)|\?[^\n]*)/,ae=0,oe=[],le=function(e,t){if(N()(e)){var n=e[t];if(V()(n)&&(n=n.filter((function(e){return e.type===X.RSHELL_EVALUATION}))).length>0)return n[0].value}return null},re=function(e){c()(n,e);var t=ee(n);function n(e){var i;return a()(this,n),i=t.call(this,e),g()(s()(i),"handleResetClick",(function(){i.editor.setValue(i.props.code,1)})),g()(s()(i),"logHint",(function(e){i.context.log({id:i.id,type:X.RSHELL_OPEN_HINT,value:e})})),g()(s()(i),"hideHelp",(function(){i.setState({help:""})})),i.state={id:ae,exhaustedHints:0===e.hints.length,result:"",plots:[],running:!1,nEvaluations:0,solutionOpen:!1,help:""},i.id=e.id||ne(e),ae+=1,oe.push(e.code),i.insertPlot=function(e,t){return y.a.createElement(x.default,{key:t,src:e,title:"R Plot"})},i.handleSolutionClick=function(){var e=i.editor.getValue(),t=i.props.solution.replace(/\\n/g,"\n");(!1===i.state.solutionOpen?(i.editor.setOption("theme","paraiso-light"),i.editor.setOption("readOnly",!0)):(i.editor.setOption("theme","elegant"),i.editor.setOption("readOnly",!1)),e!==t)?(i.context.log({id:i.id,type:X.RSHELL_DISPLAY_SOLUTION,value:e}),i.setState({lastSolution:e,solutionOpen:!i.state.solutionOpen}),i.editor.setValue(t,1)):(i.setState({solutionOpen:!i.state.solutionOpen}),i.editor.setValue(i.state.lastSolution||t,1))},i.handleEvaluationClick=function(){te("Evaluate R code..."),i.setState({result:"",plots:[],running:!0});var e=i.editor.getValue();if(oe[i.state.id]=e,""===e)i.setState({result:"Code to be evaluated is empty",running:!1});else{var t=i.context,n=e.match(ie);n&&t.getRHelpPage(n[0],(function(e,t,n){e||i.setState({help:n})})),t.log({id:i.id,type:X.RSHELL_EVALUATION,value:e});var a=Object(j.default)(i.props.libraries,i.props.prependCode,t);if(i.props.addPreceding)for(var o=0;o<i.state.id;o++)a+=oe[o],a+="\n";if(e=a+e+"\n",i.props.onEvaluate(e),!t)return i.setState({result:"R code can only be run in a production environment",nEvaluations:i.state.nEvaluations+1,running:!1});t.executeRCode({code:e,onResult:function(e,t,n){i.setState({result:n,nEvaluations:i.state.nEvaluations+1}),i.props.onResult(i.state.result)},onPlots:function(e){i.setState({plots:e,running:!1,nEvaluations:i.state.nEvaluations+1})},onError:function(e){i.setState({result:e,running:!1,nEvaluations:i.state.nEvaluations+1})}})}},i}return l()(n,[{key:"componentDidMount",value:function(){var e=this;this.editor=W()(this.editorDiv,{mode:"r",theme:"elegant",lineNumbers:!0,lineWrapping:!0}),this.editor.setValue(this.props.code,-1),this.props.disabled&&this.editor.setOption("readOnly","nocursor"),this.editor.on("change",this.props.onChange),this.props.precompute&&this.handleEvaluationClick();var t=this.context;if(t){this.unsubscribe=t.subscribe((function(t,n){if(t===Z.RETRIEVED_CURRENT_USER_ACTIONS){var i=le(n,e.id);Object(A.isPrimitive)(i)&&(e.setState({lastSolution:i,solutionOpen:!1}),e.editor.setValue(i,1))}else e.forceUpdate()}));var n=t.currentUserActions,i=le(n,this.id);Object(A.isPrimitive)(i)&&(this.setState({lastSolution:i,solutionOpen:!1}),this.editor.setValue(i,1))}}},{key:"componentDidUpdate",value:function(e){if(this.props.code!==e.code)oe[this.state.id]=this.props.code,this.editor.setValue(this.props.code,1),this.props.precompute&&this.handleEvaluationClick();else if(this.props.disabled!==e.disabled)this.props.disabled?this.editor.setOption("readOnly",!0):this.editor.setOption("readOnly",!1);else{var t=E.a.findDOMNode(this),n=t.closest?t.closest(".spectacle-content"):null;if(n){var i=window.getComputedStyle(n).getPropertyValue("transform"),a=/matrix\(([0-9.]*)/.exec(i);if(V()(a)&&a.length>1){var o=a[1];t.style.transform="scale(".concat(1/o,")")}}}this.editor.refresh()}},{key:"componentWillUnmount",value:function(){ae=0,oe=[],this.unsubscribe&&this.unsubscribe(),U()(this.editor.destroy)&&this.editor.destroy(),this.editor=null}},{key:"renderHelpModal",value:function(){return y.a.createElement(k.default,{backdrop:!1,show:Boolean(this.state.help),title:"R Help",onHide:this.hideHelp,style:{left:"auto",padding:"10px",position:"fixed",top:"10px",right:"30px",zIndex:99999,overflow:"hidden"},enforceFocus:!1},y.a.createElement(k.default.Header,{closeButton:!0},y.a.createElement(k.default.Title,{id:"contained-modal-title-lg"},"R Help")),y.a.createElement(k.default.Body,{style:{height:"400",overflow:"auto"}},y.a.createElement("span",{dangerouslySetInnerHTML:{__html:this.state.help}})),y.a.createElement(k.default.Footer,null,y.a.createElement(w.default,{onClick:this.hideHelp},"Close")))}},{key:"render",value:function(){var e,t,n,i,a,o=this,l=this.props.hints.length,r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({lineHeight:"1.2em",maxHeight:"".concat(1.2*M()(5,this.props.lines)+.5,"em"),height:"".concat(1.2*this.props.lines+.5,"em")},this.props.style);return y.a.createElement("div",{className:"rshell",style:this.props.style},y.a.createElement("div",{className:"rshell-editor",style:r,ref:function(e){o.editorDiv=e}}),this.props.disabled?y.a.createElement("span",null):y.a.createElement(w.default,{variant:"primary",size:"sm",style:{marginBottom:"8px"},onClick:this.handleEvaluationClick},"Evaluate"),y.a.createElement(q.default,{running:this.state.running,width:60,height:30,display:"inline",lines:12,style:{marginBottom:"-12px"}}),this.props.disabled?null:y.a.createElement(C.default,{style:{float:"right"}},l>0?y.a.createElement(G.default,{disabled:this.props.disabled,hints:this.props.hints,onClick:this.logHint,onFinished:function(){o.setState({exhaustedHints:!0})}}):null,this.props.solution?(e=this.state.exhaustedHints,t=this.handleSolutionClick,n=this.state.solutionOpen,i=this.state.nEvaluations,a=y.a.createElement(H.default,{id:"tooltip"},"Solution becomes available once you have tried the exercise and used all hints."),!e||i<1?y.a.createElement(K.default,{placement:"top",positionLeft:100,overlay:a,rootClose:!0},y.a.createElement("span",{style:{display:"inline-block",marginLeft:"4px"}},y.a.createElement(w.default,{variant:"warning",size:"sm",disabled:!0,style:{pointerEvents:"none"}},n?"Hide Solution":"Show Solution"))):y.a.createElement(w.default,{variant:"warning",size:"sm",onClick:t},n?"Hide Solution":"Show Solution")):null,this.props.resettable?function(e){var t=y.a.createElement(H.default,{id:"tooltip"},"Reset the shell input to its default value.");return y.a.createElement(K.default,{placement:"top",positionLeft:100,overlay:t,rootClose:!0},y.a.createElement("span",{style:{display:"inline-block",marginLeft:"4px"}},y.a.createElement(w.default,{variant:"warning",size:"sm",onClick:e},"Reset")))}(this.handleResetClick):null,this.props.chat?y.a.createElement("span",{style:{display:"inline-block",marginLeft:"4px"}},y.a.createElement(_.default,{for:this.id})):null),y.a.createElement("div",{id:"output"},function(e){if(e){var t={__html:L.a.sanitize(e)};return y.a.createElement("pre",{id:"output"},y.a.createElement("span",{dangerouslySetInnerHTML:t}))}return y.a.createElement("span",null)}(this.state.result),function(e){for(var t=[],n=0;n<e.length;n++)t[n]=y.a.createElement(x.default,{width:"60%",height:"auto",key:n,src:e[n],title:"R Plot"});return t}(this.state.plots)),y.a.createElement(R.default,{id:this.id,info:X.RSHELL_EVALUATION}),this.renderHelpModal())}}]),n}(v.Component);re.propTypes={code:S.a.string,solution:S.a.string,hints:S.a.arrayOf(S.a.oneOfType([S.a.string,S.a.node])),addPreceding:S.a.bool,libraries:S.a.array,precompute:S.a.bool,prependCode:S.a.oneOfType([S.a.string,S.a.array]),chat:S.a.bool,disabled:S.a.bool,lines:S.a.number,resettable:S.a.bool,style:S.a.object,onChange:S.a.func,onEvaluate:S.a.func,onResult:S.a.func},re.defaultProps={code:"",solution:"",hints:[],addPreceding:!1,libraries:[],precompute:!1,prependCode:"",chat:!1,disabled:!1,lines:5,resettable:!1,style:{},onChange:function(){},onEvaluate:function(){},onResult:function(){}},re.contextType=Q.default,t.default=re}}]);