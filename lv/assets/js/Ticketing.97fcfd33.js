(self.webpackChunk=self.webpackChunk||[]).push([[809],{413575:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return I}});i(382139);var n,a,s=i(858255),o=i(711746),r=i(264659),c=i(904730),l=i(673989),h=i(175663),u=i(750591),d=i(575630),f=i(151119),p=(i(6059),i(850110),i(319371),i(202784)),m=(i(213980),i(689653)),Z=i.n(m),v=i(911755),g=i.n(v),k=i(188304),C=i(26266),y=i(830650),N=i(10863),S=i(770561),b=i(927447),w=i(601822),F=i(304964),T=i(150275),x=i(462874),A=(0,i(844601).Z)((function(){return Promise.all([i.e(1982),i.e(9753)]).then(i.bind(i,915210))}));function R(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=(0,d.Z)(t);if(e){var a=(0,d.Z)(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return(0,u.Z)(this,i)}}var H=g()("isle:toolbar:ticketing"),O=["General"];i.g.COMPONENT_LIST&&(O=O.concat(i.g.COMPONENT_LIST));var I=function(t){(0,h.Z)(i,t);var e=R(i);function i(t){var n;return(0,r.Z)(this,i),n=e.call(this,t),(0,f.Z)((0,l.Z)(n),"handleTitleChange",(function(t){n.setState({title:t.target.value})})),(0,f.Z)((0,l.Z)(n),"handleDescriptionChange",(function(t){n.setState({description:t})})),(0,f.Z)((0,l.Z)(n),"handleComponentChange",(function(t){n.setState({component:t})})),(0,f.Z)((0,l.Z)(n),"attachFile",(function(){var t=n.props,e=t.session,i=t.t;if(n.state.files.length>=6)return e.addNotification({title:i("maximum-num-attachments"),message:i("maximum-num-attachments-message"),level:"warning",position:"tr"});var a=document.createElement("input");a.type="file",a.onchange=function(t){var e=t.target.files,i=[].concat((0,o.Z)(n.state.files),(0,o.Z)(e));n.setState({files:i})},a.click()})),(0,f.Z)((0,l.Z)(n),"handleSubmit",(function(){H("Create ticket...");var t=n.props,e=t.session,i=t.t,a={title:n.state.title,description:n.state.description,component:n.state.component,platform:{name:Z().name,version:Z().version,product:Z().product,manufacturer:Z().manufacturer,os:Z().os,description:Z().description},files:n.state.files};e.createTicket(a).then((function(){n.setState({showAlert:!0})})).catch((function(t){e.addNotification({title:i("encountered-error"),message:t.message,level:"error",position:"tc"})}))})),(0,f.Z)((0,l.Z)(n),"removeFileFactory",(function(t){return function(){var e=n.state.files.slice();e.splice(t,1),n.setState({files:e})}})),n.state={title:"",description:"",component:null,showAlert:!1,files:[]},n}return(0,c.Z)(i,[{key:"renderAttachments",value:function(){var t=this;return 0===this.state.files.length?null:(0,s.Z)(p.Fragment,{},void 0,(0,s.Z)("span",{className:"title"},void 0,this.props.t("attachments"),":"),(0,s.Z)(k.Z,{className:"ticketing-attachment-list"},void 0,this.state.files.map((function(e,i){return(0,s.Z)(k.Z.Item,{},"file-".concat(i),e.name,(0,s.Z)(S.Z,{"aria-label":t.props.t("delete"),variant:"danger",size:"sm",onClick:t.removeFileFactory(i),style:{float:"right"}},void 0,n||(n=(0,s.Z)("i",{className:"fas fa-times"}))))}))))}},{key:"render",value:function(){var t=this,e=this.props,i=e.t;return e.show?(0,s.Z)(p.Fragment,{},void 0,(0,s.Z)(w.Z,{dragHandleClassName:"card-header"},void 0,(0,s.Z)(x.Z,{header:(0,s.Z)("span",{},void 0,(0,s.Z)("span",{className:"fa fa-lg fa-medkit",style:{marginRight:6}}),i("ticketing")),onHide:this.props.onHide,minimizable:!0,trapFocus:!0,style:{maxWidth:560},bodyStyle:{maxHeight:"75vh"}},void 0,(0,s.Z)("p",{},void 0,i("ticketing-intro")),(0,s.Z)(b.Z,{legend:i("component"),options:O,onChange:this.handleComponentChange}),(0,s.Z)(N.Z,{controlId:"ticket-title"},void 0,(0,s.Z)(y.Z,{},void 0,i("title"),":"),(0,s.Z)(C.Z,{type:"text",placeholder:i("title-placeholder"),onChange:this.handleTitleChange})),(0,s.Z)(F.Z,{legend:i("description"),value:this.state.description,onChange:this.handleDescriptionChange,placeholder:i("description-placeholder")}),this.renderAttachments(),(0,s.Z)(T.Z,{tooltip:i("attach-file")},void 0,(0,s.Z)(S.Z,{"aria-label":i("attach-file"),onClick:this.attachFile},void 0,a||(a=(0,s.Z)("i",{className:"fas fa-paperclip"})))),(0,s.Z)(S.Z,{onClick:this.handleSubmit,style:{float:"right"},disabled:!this.state.title||!this.state.description},void 0,i("create-ticket")))),(0,s.Z)(A,{title:i("ticket-created"),message:i("ticket-created-message"),show:this.state.showAlert,close:function(){t.setState({title:"",description:"",showAlert:!1,files:[]}),t.props.onHide()}})):null}}]),i}(p.Component)}}]);