(window.webpackJsonp=window.webpackJsonp||[]).push([[155],{3278:function(t,e,n){"use strict";n.r(e);n(358),n(351),n(360);var a=n(354),i=n.n(a),s=n(352),o=n.n(s),r=n(353),u=n.n(r),l=n(364),d=n.n(l),c=n(356),v=n.n(c),f=n(357),h=n.n(f),p=n(355),m=n.n(p),b=n(350),y=n.n(b),w=n(0),g=(n(342),n(384)),x=n(427),S=n(432),N=n(458),C=n(413),R=n(4823),k=n(647),q=n(398),D=n.n(q),P=n(1410),T=n.n(P),A=n(2504),F=n.n(A),J=n(1530),Q=n.n(J),Y=n(2506),B=n.n(Y),I=n(608),M=n(1144),O=n(720),j=n(895),z=n(1221),L=n(415),E=n(419);n(264);function G(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,a=m()(t);if(e){var i=m()(this).constructor;n=Reflect.construct(a,arguments,i)}else n=a.apply(this,arguments);return h()(this,n)}}var H=D()("isle:free-text-survey"),K=Object(I.a)("free-text-survey");var U=i()("tr",{},void 0,i()("th",{},void 0,"Category"),i()("th",{},void 0,"Count"),i()("th",{},void 0,"Relative Frequency")),V=i()("h3",{},void 0,"No responses yet"),W=i()("h2",{},void 0,"Please sign in..."),X=function(t){v()(n,t);var e=G(n);function n(t){var a;return o()(this,n),a=e.call(this,t),y()(d()(a),"submitQuestion",(function(){var t=a.context,e=function(t){t=Q()(t);for(var e=B()(t),n=0;n<R.length;n++)for(var a=0;a<e.length;a++)if(e[a]===R[n])return R[n];return null}(a.state.value);e?t.addNotification({title:"Action required",message:"Your answer contains an offensive word: ".concat(e,". Please remove."),level:"warning"}):(t.log({id:a.id,type:E.Ic,value:a.state.value,anonymous:a.props.anonymous},"members"),a.setState({submitted:!0}),t.addNotification({title:"Submitted",message:"Your answer has been submitted.",level:"success"}),a.props.onSubmit(a.state.value))})),y()(d()(a),"onData",(function(t){H("FreeTextQuestion is receiving data: "+JSON.stringify(t));var e,n=F()(t),s=n.map((function(t){return{x:t[0],y:t[1]}}));e=i()("table",{className:"table table-bordered"},void 0,U,n.map((function(t,e){return i()("tr",{},e,t.map((function(t,e){return 2===e&&(t=t.toFixed(3)),i()("td",{},e,t)})))}))),a.setState({data:s,freqTable:e})})),a.id=t.id||K(t),a.state={data:[],submitted:!1,value:null},a}return u()(n,[{key:"renderChart",value:function(){return T()(this.state.data)?V:i()(k.a,{data:[{x:this.state.data.map((function(t){return t.x})),y:this.state.data.map((function(t){return t.y})),type:"bar"}],layout:{width:400,height:300},removeButtons:!0})}},{key:"render",value:function(){var t=this,e=this.props,n=this.state.submitted&&!e.allowMultipleAnswers;return i()(O.a,{user:!0,banner:W},void 0,i()(x.a,{id:this.id,className:this.props.className,style:this.props.style},void 0,i()(x.a.Body,{style:{overflowY:"auto"}},void 0,i()(S.a,{},void 0,i()(C.a,{},void 0,i()(N.a,{md:6},void 0,i()(x.a,{className:"free-text-survey",body:!0},void 0,i()("label",{},void 0,e.question),i()(M.a,{value:this.state.value,inline:!0,disabled:n,onChange:function(e){t.setState({value:e})},rows:this.props.rows}),i()(g.a,{size:"small",variant:"success",block:!0,fill:!0,onClick:this.submitQuestion,disabled:n},void 0,n?"Submitted":"Submit"))),i()(N.a,{md:6},void 0,i()(z.a,{for:[this.id],onData:this.onData}),this.renderChart(),this.state.freqTable))),i()(j.a,{buttonLabel:"Responses",id:this.id,info:E.Ic}))))}}]),n}(w.Component);X.defaultProps={question:"",allowMultipleAnswers:!1,anonymous:!1,rows:4,className:"",style:{},onSubmit:function(){}},X.contextType=L.a,e.default=X}}]);