/*! For license information please see TextEditor.8e9a5ac2.js.LICENSE.txt */
(self.webpackChunk=self.webpackChunk||[]).push([[3553],{70332:function(t){"use strict";t.exports=JSON.parse("[8,9,10,11,12,14,18,24,30,36,48,60,72]")},777866:function(t,e,n){"use strict";var r=n(990929);e.Z=function(t,e,n,o){if(!t.selection||!t.doc||!n)return t;var i=t.selection,a=i.empty,s=i.$cursor,c=i.ranges;if(a&&!s||!function(t,e,n){for(var o=function(r){var o=e[r],i=o.$from,a=o.$to,s=0===i.depth&&t.type.allowsMarkType(n);if(t.nodesBetween(i.pos,a.pos,(function(t){return!s&&(s=t.inlineContent&&t.type.allowsMarkType(n),!0)})),s)return{v:!0}},i=0;i<e.length;i++){var a=o(i);if("object"===(0,r.Z)(a))return a.v}return!1}(t.doc,c,n))return t;if(s)return t=t.removeStoredMark(n),o?t.addStoredMark(n.create(o)):t;for(var l=!1,u=0;!l&&u<c.length;u++){var d=c[u],f=d.$from,p=d.$to;l=t.doc.rangeHasMark(f.pos,p.pos,n)}for(var h=0;h<c.length;h++){var v=c[h],m=v.$from,g=v.$to;l&&(t=t.removeMark(m.pos,g.pos,n)),o&&(t=t.addMark(m.pos,g.pos,n.create(o)))}return t}},268874:function(t,e,n){"use strict";n.d(e,{yz:function(){return c},wM:function(){return l}});var r=n(56470),o=n(977162),i=n.n(o),a=(n(319371),n(296253),n(940851),n(516037)),s=new a.PluginKey("cursor-parking");e.ZP=function(){return new a.Plugin({key:s,state:{init:function(){return{inCursorParking:!1,storedMarks:null,bookmarkToRestore:null,pos:null}},apply:function(t,e){var n=t.getMeta(this);return n?n.inCursorParking?{inCursorParking:!0,pos:n.pos,storedMarks:t.storedMarks,bookmarkToRestore:t.selection.getBookmark()}:{inCursorParking:!1,pos:n.pos,storedMarks:null,bookmarkToRestore:null}:t.docChanged&&e.inCursorParking&&e.bookmarkToRestore?{inCursorParking:!0,pos:null,storedMarks:e.storedMarks,bookmarkToRestore:e.bookmarkToRestore.map(t.mapping)}:e}},view:function(){var t=document.createElement("cursor-parking");t.setAttribute("style","width:0px;height:0px;position:fixed;top:50%,left:50%;"),t.setAttribute("tabIndex","-1"),t.setAttribute("contenteditable","true");var e=function(){t.innerHTML="<div><br/></div>"};return e(),document.body.appendChild(t),{update:function(n,r){var o=s.getState(r),i=s.getState(n.state);if(!o.inCursorParking&&i.inCursorParking&&function(){var e=document.createRange();e.selectNodeContents(t.firstChild);var n=window.getSelection();n.removeAllRanges(),n.addRange(e)}(),o.inCursorParking&&!i.inCursorParking){var c=n.dispatch,l=n.state.tr;if(o.bookmarkToRestore&&l.setSelection(o.bookmarkToRestore.resolve(l.doc)),o.storedMarks&&l.setStoredMarks(o.storedMarks),n.focus(),i.pos){var u=i.pos;l=l.setSelection(a.TextSelection.create(l.doc,u,u))}else c(l);e()}},destroy:function(){t.parentNode.removeChild(t)}}}})};var c=function(){var t=(0,r.Z)(i().mark((function t(e,n){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.dispatch(e.state.tr.setMeta(s,{inCursorParking:!0,pos:n})),t.next=3,new Promise((function(t){return setTimeout(t,0)}));case 3:e.dispatch(e.state.tr.setMeta(s,{inCursorParking:!1,pos:n}));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),l=function(t){t.dispatch(t.state.tr.setMeta(s,{inCursorParking:!1,storedMarks:null,bookmarkToRestore:null,pos:null}))}},86381:function(t,e,n){"use strict";n.d(e,{NV:function(){return g},ud:function(){return y}});var r=n(264659),o=n(673989),i=n(175663),a=n(750591),s=n(575630),c=(n(319371),n(52310),n(382139),n(516037)),l=n(506565);function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,s.Z)(t);if(e){var o=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var d={name:"CursorPlaceholderPlugin"},f=null,p={state:{init:function(){return l.EH.empty},apply:function(t,e){e=e.map(t.mapping,t.doc);var n=t.getMeta(this);if(!n)return e;if(n.add){var r=document.createElement("editor-cursor-placeholder");r.className="editor-cursor-placeholder";var o=l.p.widget(n.add.pos,r,{id:d});e=e.add(t.doc,[o])}else if(n.remove){var i=e.find(null,null,v);e=e.remove(i)}return e}},props:{decorations:function(t){return f?f.getState(t):null}}},h=function(t){(0,i.Z)(n,t);var e=u(n);function n(){var t;return(0,r.Z)(this,n),t=e.call(this,p),f?(0,a.Z)(t,f):(f=(0,o.Z)(t),t)}return n}(c.Plugin);function v(t){return t.id===d}function m(t){if(!f)return null;var e=f.getState(t).find(null,null,v);return(e.length?e[0].from:null)||null}function g(t){var e=f,n=t.tr;return e&&n.selection?(null===m(t)&&(n.selection.empty||(n=n.deleteSelection()),n=n.setMeta(e,{add:{pos:n.selection.from}})),n):n}function y(t){var e=f,n=t.tr;return e?(null!==m(t)&&(n=n.setMeta(e,{remove:{}})),n):n}e.ZP=h},924285:function(t,e,n){"use strict";n.d(e,{Z:function(){return r}});n(52310);function r(t,e,n,r){for(var o=e,i=function(t){return t.type===r},a=null,s=null,c=null;o<=n;){var l=t.nodeAt(o);if(!l||!l.marks)return null;var u=l.marks.find(i);if(!u)return null;if(a&&u!==a)return null;s=s||l,a=a||u,c=l,o++}var d=e,f=n,p=0;for(o=e-1;o>p;){var h=t.nodeAt(o),v=h&&h.marks.find(i);if(!v||v!==a)break;d=o,s=h,o--}for(o=n+1,p=t.nodeSize-2;o<p;){var m=t.nodeAt(o),g=m&&m.marks.find(i);if(!g||g!==a)break;f=o,c=m,o++}return{mark:a,from:{node:s,pos:d},to:{node:c,pos:f}}}},550171:function(t,e,n){"use strict";var r=n(858255),o=(n(202784),{alignLeft:(0,r.Z)("i",{className:"prosemirror-icon fas fa-align-left"}),alignCenter:(0,r.Z)("i",{className:"prosemirror-icon fas fa-align-center"}),alignRight:(0,r.Z)("i",{className:"prosemirror-icon fas fa-align-right"}),alignJustify:(0,r.Z)("i",{className:"prosemirror-icon fas fa-align-justify"}),annotation:(0,r.Z)("i",{className:"prosemirror-icon fas fa-comment"}),blockquote:(0,r.Z)("i",{className:"prosemirror-icon fas fa-quote-left"}),bold:(0,r.Z)("i",{className:"prosemirror-icon fas fa-bold"}),bullet_list:(0,r.Z)("i",{className:"prosemirror-icon fas fa-list-ul"}),code_block:(0,r.Z)("i",{className:"prosemirror-icon fas fa-file-code"}),code:(0,r.Z)("i",{className:"prosemirror-icon fas fa-code"}),color:(0,r.Z)("i",{className:"prosemirror-icon fas fa-palette"}),editTable:(0,r.Z)("i",{className:"prosemirror-icon fas fa-table"}),em:(0,r.Z)("i",{className:"prosemirror-icon fas fa-italic"}),error:(0,r.Z)("i",{className:"prosemirror-icon fas fa-bug"}),fullscreen:(0,r.Z)("i",{className:"prosemirror-icon fas fa-expand"}),guides:(0,r.Z)("i",{className:"prosemirror-icon fa fa-question-circle"}),history:(0,r.Z)("i",{className:"prosemirror-icon fas fa-history"}),insert:(0,r.Z)("i",{className:"prosemirror-icon fa fa-plus-square"}),link:(0,r.Z)("i",{className:"prosemirror-icon fa fa-link"}),open:(0,r.Z)("i",{className:"prosemirror-icon fa fa-folder-open"}),ordered_list:(0,r.Z)("i",{className:"prosemirror-icon fas fa-list-ol"}),paragraph:(0,r.Z)("i",{className:"prosemirror-icon fas fa-paragraph"}),pdf:(0,r.Z)("i",{className:"prosemirror-icon fas fa-file-pdf"}),redo:(0,r.Z)("i",{className:"prosemirror-icon fas fa-redo"}),reset:(0,r.Z)("i",{className:"prosemirror-icon fa fa-eraser"}),save:(0,r.Z)("i",{className:"prosemirror-icon fa fa-save"}),selectParent:(0,r.Z)("i",{className:"prosemirror-icon far fa-object-group"}),strikethrough:(0,r.Z)("i",{className:"prosemirror-icon fas fa-strikethrough"}),strong:(0,r.Z)("i",{className:"prosemirror-icon fas fa-bold"}),submit:(0,r.Z)("i",{className:"prosemirror-icon fa fa-share-square"}),subscript:(0,r.Z)("i",{className:"prosemirror-icon fas fa-subscript"}),table:(0,r.Z)("i",{className:"prosemirror-icon fas fa-table"}),superscript:(0,r.Z)("i",{className:"prosemirror-icon fas fa-superscript"}),underline:(0,r.Z)("i",{className:"prosemirror-icon fas fa-underline"}),undo:(0,r.Z)("i",{className:"prosemirror-icon fas fa-undo"})});e.Z=o},770290:function(t,e,n){"use strict";n.d(e,{q:function(){return Z}});n(382139);var r=n(264659),o=n(175663),i=n(750591),a=n(575630),s=(n(798184),n(39115),n(296253),n(856997),n(991181),n(52310),n(898837),n(95767),n(530522),n(319371),n(516037)),c=n(506565),l=n(409961),u=n.n(l),d=n(427249),f=n(974247);function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,a.Z)(t);if(e){var o=(0,a.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,i.Z)(this,n)}}var h=(0,d.Z)("image_upload"),v=new Set(["image/jpeg","image/gif","image/png","image/jpg"]),m=new Array(4).join('<div class="editor-image-upload-placeholder-child"></div>');function g(t){return t instanceof b}function y(t){return t&&v.has(t.type)}function Z(t,e,r){var o=t.state,i=t.readOnly,a=t.disabled,c=o.schema,l=o.plugins;if(i||a)return!1;var d=c.nodes.image;if(!d)return!1;var p=Array.from(e).filter(y);if(!p.length)return!1;var v=l.find(g);if(!v)return!1;var m,Z={debugId:h()},b=(m=function(){var e=function(e){var n=function(t,e,n){var r=t.getState(e).find(null,null,(function(t){return t.id===n}));return r.length?r[0].from:null}(v,t.state,Z),r=t.state.tr;if(!n||t.readOnly||t.disabled)p.length=0;else{var o=d.create(e);r=r.replaceWith(n,n,o)}p.length?b():r=r.setMeta(v,{remove:{id:Z}}),t.dispatch(r)},r=p.shift();if(u()(r))throw new Error("unexpected null value");var o=n.g.session;if(o.server&&o.uploadFile){var i=new FormData;i.append("file",r),o.uploadFile({formData:i,callback:function(t,n){return t?e({src:null}):n&&n.filename?e({src:o.server+"/"+n.filename}):e({src:null})},showNotification:!1})}else(0,f.Z)(r).then(e).catch(e.bind(null,{src:null}))},function(){setTimeout(m,0)});b();var w=o.tr,_=0;if(r){var S=t.posAtCoords({left:r.x,top:r.y});if(!S)return!1;_=S.pos,w=w.setSelection(s.TextSelection.create(w.doc,_,_))}else _=w.selection.to,w=w.setSelection(s.TextSelection.create(w.doc,_,_));var k={add:{id:Z,pos:_}};return w=w.setMeta(v,k),t.dispatch(w),!0}var b=function(t){(0,o.Z)(n,t);var e=p(n);function n(){return(0,r.Z)(this,n),e.call(this,{state:{init:function(){return c.EH.empty},apply:function(t,e){e=e.map(t.mapping,t.doc);var n=t.getMeta(this);if(n&&n.add){var r=document.createElement("div");r.title="Uploading...",r.className="editor-image-upload-placeholder",r.innerHTML=m;var o=c.p.widget(n.add.pos,r,{id:n.add.id});e=e.add(t.doc,[o])}else if(n&&n.remove){e=e.remove(e.find(null,null,(function(t){return t.id===n.remove.id})))}return e}},props:{decorations:function(t){return this.getState(t)}}})}return n}(s.Plugin);e.Z=b},588714:function(t,e,n){"use strict";var r=n(516037);e.Z=function(t,e){var n=t.selection,o=t.schema,i=t.tr;if(!o.marks[e])return!1;if(!(n instanceof r.TextSelection||n instanceof r.AllSelection))return!1;var a=t.selection,s=a.from;if(a.to===s+1){var c=i.doc.nodeAt(s);if(c.isAtom&&!c.isText&&c.isLeaf)return!1}return!0}},229511:function(t,e,n){"use strict";n.d(e,{ZP:function(){return te},$T:function(){return Yt},EI:function(){return Wt},Uy:function(){return $t}});n(319371);var r=n(919353),o=n(141396),i=n(516037),a=n(757343),s=n(414256),c=n(603423),l=n(550171),u=n(828919),d=function(t){return function(e){for(var n=e.selection.$from,r=n.depth;r>=0;r--){var o=n.index(r);if(n.node(r).canReplaceWith(o,o,t))return!0}return!1}},f=n(151119);n(798184),n(39115),n(296253),n(856997),n(991181),n(627476),n(95767),n(898837),n(694882),n(298351);function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function h(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach((function(e){(0,f.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var v=function(t){var e=t.selection;return e instanceof i.TextSelection||e instanceof i.AllSelection},m=function(t,e,n){var r=t,o=r.selection,i=r.doc;if(!o||!i)return t;var a=o.from,s=o.to,c=e.nodes,l=c.blockquote,u=c.list_item,d=c.heading,f=c.paragraph,p=[];n=n||null;var v=new Set([l,d,u,f]);return i.nodesBetween(a,s,(function(t,e,r){var o=t.type;return(t.attrs.align||null)!==n&&v.has(o)&&p.push({node:t,pos:e,nodeType:o}),!0})),p.length?(p.forEach((function(e){var r=e.node,o=e.pos,i=e.nodeType,a=r.attrs;a=h(h({},a),{},n?{align:n}:{align:null}),t=t.setNodeMarkup(o,i,a,r.marks)})),t):t},g=function(t){return function(e){var n=e.selection,r=e.doc,o=n.from,i=n.to,a=!0,s=!1;return r.nodesBetween(o,i,(function(e,n){return a&&e.attrs.align===t&&(a=!1,s=!0),a})),s}},y=[{title:"align-left",content:l.Z.alignLeft,enable:v,active:g("left"),run:function(t,e){var n=t.schema,r=t.selection,o=m(t.tr.setSelection(r),n,"left");return!!o.docChanged&&(e&&e(o))}},{title:"align-center",content:l.Z.alignCenter,enable:v,active:g("center"),run:function(t,e){var n=t.schema,r=t.selection,o=m(t.tr.setSelection(r),n,"center");return!!o.docChanged&&(e&&e(o))}},{title:"align-right",content:l.Z.alignRight,enable:v,active:g("right"),run:function(t,e){var n=t.schema,r=t.selection,o=m(t.tr.setSelection(r),n,"right");return!!o.docChanged&&(e&&e(o))}},{title:"justified",content:l.Z.alignJustify,enable:v,active:g("justify"),run:function(t,e){var n=t.schema,r=t.selection,o=m(t.tr.setSelection(r),n,"justify");return!!o.docChanged&&(e&&e(o))}}],Z=n(777866),b=n(70332),w=n(588714),_=(n(382139),n(264659)),S=n(673989),k=n(175663),O=n(750591),x=n(575630),E=(n(304531),n(940851),n(676065)),D=n.n(E),P=n(925161),C=n(924285),M=n(111057),R=n(640987),N=n(70698);function j(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,x.Z)(t);if(e){var o=(0,x.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,O.Z)(this,n)}}var I=function(t){(0,k.Z)(n,t);var e=j(n);function n(){var t;(0,_.Z)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o)),(0,f.Z)((0,S.Z)(t),"_popUp",null),(0,f.Z)((0,S.Z)(t),"title","apply-link"),(0,f.Z)((0,S.Z)(t),"content",l.Z.link),(0,f.Z)((0,S.Z)(t),"enable",(function(t){if(!(t.selection instanceof i.TextSelection))return!1;if(!t.schema.marks.link)return!1;var e=t.selection;return e.from<e.to})),(0,f.Z)((0,S.Z)(t),"waitForUserInput",(function(e,n,r,o){if(t._popUp)return Promise.resolve(void 0);n&&n((0,P.tk)(e));var i=e.doc,a=e.schema,s=e.selection,c=a.marks.link;if(!c)return Promise.resolve(void 0);var l=s.from,u=s.to,d=(0,C.Z)(i,l,u,c),f=d?d.mark.attrs.href:null;return new Promise((function(e){t._popUp=(0,N.Z)(M.Z,{href:f},{modal:!0,onClose:function(n){t._popUp&&(t._popUp=null,e(n))}})}))})),(0,f.Z)((0,S.Z)(t),"executeWithUserInput",(function(t,e,n,r){if(e){var o=t.selection,i=t.schema,a=t.tr;if(a=(a=n?(0,P.be)(n.state):a).setSelection(o),!D()(r)){var s=i.marks.link,c=r?{href:r}:null;a=(0,Z.Z)(a.setSelection(t.selection),i,s,c)}e(a)}return n&&n.focus(),!0})),t}return n}(R.Z),T=n(904730),A=n(202784),z=n(867696),V=n(86381);function B(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,x.Z)(t);if(e){var o=(0,x.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,O.Z)(this,n)}}function L(t,e,n){var r=t.selection;if(!r)return t;var o=r.from;if(o!==r.to)return t;var i=e.nodes.image;if(!i)return t;var a={src:n||"",alt:"",title:""},s=i.create(a,null,null),c=z.Fragment.from(s);return t=t.insert(o,c)}var F=function(t){(0,k.Z)(n,t);var e=B(n);function n(){var t;(0,_.Z)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o)),(0,f.Z)((0,S.Z)(t),"_popUp",null),(0,f.Z)((0,S.Z)(t),"enable",(function(e,n){return t.__isEnabled(e,n)})),(0,f.Z)((0,S.Z)(t),"waitForUserInput",(function(e,n,r,o){return t._popUp?Promise.resolve(void 0):(n&&n((0,V.NV)(e)),new Promise((function(e){var n={runtime:r?r.runtime:null};t._popUp=(0,N.Z)(t.getEditor(),n,{modal:!0,onClose:function(n){t._popUp&&(t._popUp=null,e(n))}})})))})),(0,f.Z)((0,S.Z)(t),"executeWithUserInput",(function(t,e,n,r){if(e){var o=t.selection,i=t.schema,a=t.tr;if(a=(a=n?(0,V.ud)(n.state):a).setSelection(o),r)a=L(a,i,r.src);e(a),n&&n.focus()}return!1})),(0,f.Z)((0,S.Z)(t),"__isEnabled",(function(t,e){var n=t.selection;return n instanceof i.TextSelection&&n.from===n.to})),t}return n}(R.Z),U=n(858255),H=n(320765),W=n(273783),J=n(171696),q=n(304600);function K(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function $(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?K(Object(n),!0).forEach((function(e){(0,f.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function G(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,x.Z)(t);if(e){var o=(0,x.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,O.Z)(this,n)}}var Y=function(t){(0,k.Z)(n,t);var e=G(n);function n(t){var r;return(0,_.Z)(this,n),r=e.call(this,t),(0,f.Z)((0,S.Z)(r),"_onSrcChange",(function(t){var e=t.target.value;r.setState({src:e,validValue:null},r._didSrcChange)})),(0,f.Z)((0,S.Z)(r),"_didSrcChange",(function(){(0,q.Z)(r.state.src).then((function(t){if(r.state.src===t.src&&!r._unmounted){var e=t.complete?t:null;r.setState({validValue:e})}}))})),(0,f.Z)((0,S.Z)(r),"_cancel",(function(){r.props.close()})),(0,f.Z)((0,S.Z)(r),"_insert",(function(){var t=r.state.validValue;r.props.close(t)})),r._img=null,r._unmounted=!1,r.state=$($({},r.props.initialValue||{}),{},{validValue:null}),r}return(0,T.Z)(n,[{key:"componentWillUnmount",value:function(){this._unmounted=!0}},{key:"render",value:function(){var t=this.state,e=t.src,n=t.validValue,r=n?(0,U.Z)("div",{className:"editor-image-url-editor-input-preview",style:{backgroundImage:"url(".concat(String(n.src))}}):null;return(0,U.Z)("div",{className:"editor-image-url-editor"},void 0,(0,U.Z)("form",{className:"editor-form",onSubmit:J.Z},void 0,(0,U.Z)("fieldset",{},void 0,(0,U.Z)("legend",{},void 0,H.a.t("TextEditor:insert-image")),(0,U.Z)("div",{className:"editor-image-url-editor-src-input-row"},void 0,(0,U.Z)("input",{autoFocus:!0,className:"editor-image-url-editor-src-input",onChange:this._onSrcChange,placeholder:"Paste URL of Image...",type:"text",value:e||""}),r),(0,U.Z)("em",{},void 0,H.a.t("TextEditor:require-license"))),(0,U.Z)("div",{className:"editor-form-buttons"},void 0,(0,U.Z)(W.Z,{label:H.a.t("TextEditor:cancel"),onClick:this._cancel}),(0,U.Z)(W.Z,{active:!!n,disabled:!n,label:H.a.t("TextEditor:insert"),onClick:this._insert}))))}}]),n}(A.PureComponent);function X(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,x.Z)(t);if(e){var o=(0,x.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,O.Z)(this,n)}}var Q,tt=function(t){(0,k.Z)(n,t);var e=X(n);function n(){var t;(0,_.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=e.call.apply(e,[this].concat(o)),(0,f.Z)((0,S.Z)(t),"title","insert-image-url"),(0,f.Z)((0,S.Z)(t),"content","insert-image-url"),t}return(0,T.Z)(n,[{key:"getEditor",value:function(){return Y}}]),n}(F),et=n(990929),nt=n(72779),rt=n.n(nt),ot=n(294325),it=n(427249),at=n(974247);function st(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,x.Z)(t);if(e){var o=(0,x.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,O.Z)(this,n)}}var ct=(0,it.Z)("image-upload-editor"),lt=function(t){(0,k.Z)(r,t);var e=st(r);function r(t){var o;return(0,_.Z)(this,r),o=e.call(this,t),(0,f.Z)((0,S.Z)(o),"_onSelectFile",(function(t){var e=t.target.files&&t.target.files[0];e&&"object"===(0,et.Z)(e)&&o._upload(e)})),(0,f.Z)((0,S.Z)(o),"_onSuccess",(function(t){o._unmounted||o.props.close(t)})),(0,f.Z)((0,S.Z)(o),"_onError",(function(t){o._unmounted||o.setState({error:t,id:ct(),pending:!1})})),(0,f.Z)((0,S.Z)(o),"_upload",(function(t){o.setState({pending:!0,error:null});var e=n.g.session;if(e.server&&e.uploadFile){var r=new FormData;r.append("file",t),e.uploadFile({formData:r,callback:function(t,n){return t?o._onError(t):n&&n.filename?o._onSuccess({src:e.server+"/"+n.filename}):o._onSuccess({src:null})},showNotification:!1})}else(0,at.Z)(t).then((function(t){o._onSuccess(t)})).catch((function(t){o._onError(t)}))})),(0,f.Z)((0,S.Z)(o),"_cancel",(function(){o.props.close()})),o._img=null,o._unmounted=!1,o.state={error:null,id:ct(),pending:!1},o}return(0,T.Z)(r,[{key:"componentWillUnmount",value:function(){this._unmounted=!0}},{key:"render",value:function(){var t=this.state,e=t.id,n=t.error,r=t.pending,o=rt()("editor-image-upload-editor",{pending:r,error:n}),i=H.a.t("TextEditor:choose-an-image-file");return r?i=Q||(Q=(0,U.Z)(ot.Z,{animation:"border",role:"status"})):n&&(i=H.a.t("TextEditor:error-while-uploading")),(0,U.Z)("div",{className:o},void 0,(0,U.Z)("form",{className:"editor-form"},void 0,(0,U.Z)("fieldset",{},void 0,(0,U.Z)("legend",{},void 0,H.a.t("TextEditor:upload-image")),(0,U.Z)("div",{className:"editor-image-upload-editor-body"},void 0,(0,U.Z)("div",{className:"editor-image-upload-editor-label"},void 0,i),(0,U.Z)("input",{accept:"image/png,image/gif,image/jpeg,image/jpg",className:"editor-image-upload-editor-input",disabled:r,id:e,onChange:this._onSelectFile,type:"file"},e))),(0,U.Z)("div",{className:"editor-form-buttons"},void 0,(0,U.Z)(W.Z,{label:H.a.t("TextEditor:cancel"),onClick:this._cancel}))))}}]),r}(A.PureComponent);function ut(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,x.Z)(t);if(e){var o=(0,x.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,O.Z)(this,n)}}var dt,ft=function(t){(0,k.Z)(n,t);var e=ut(n);function n(){var t;(0,_.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=e.call.apply(e,[this].concat(o)),(0,f.Z)((0,S.Z)(t),"title","upload-image"),(0,f.Z)((0,S.Z)(t),"content","upload-image"),t}return(0,T.Z)(n,[{key:"getEditor",value:function(){return lt}}]),n}(F),pt=n(59821),ht=n(928316),vt=n(306830),mt=n.n(vt),gt=n(877119),yt=n.n(gt),Zt=n(686605),bt=n.n(Zt),wt=n(521536),_t=n.n(wt),St=n(557106),kt=n.n(St),Ot=n(783158),xt=n.n(Ot),Et=n(615581);function Dt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,x.Z)(t);if(e){var o=(0,x.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,O.Z)(this,n)}}var Pt=16;var Ct=function(t){(0,k.Z)(n,t);var e=Dt(n);function n(){return(0,_.Z)(this,n),e.apply(this,arguments)}return(0,T.Z)(n,[{key:"render",value:function(){var t=this.props,e=t.x,n=t.y,r=t.selected,o={left:e+"px",top:n+"px",width:"16px",height:"16px"},i=rt()("editor-table-grid-size-editor-cell",{selected:r});return(0,U.Z)("div",{className:i,style:o})}}]),n}(A.PureComponent),Mt=function(t){(0,k.Z)(n,t);var e=Dt(n);function n(t){var r;return(0,_.Z)(this,n),r=e.call(this,t),(0,f.Z)((0,S.Z)(r),"_onRef",(function(t){r._ref=t})),(0,f.Z)((0,S.Z)(r),"_onMouseEnter",(function(t){var e=t.currentTarget;if(e instanceof HTMLElement){var n=(0,Et.hs)(e),o=bt()(t.clientX),i=bt()(t.clientY);r._ex=n.x,r._ey=n.y,r._mx=o,r._my=i,r._entered||(r._entered=!0,document.addEventListener("mousemove",r._onMouseMove,!0))}})),(0,f.Z)((0,S.Z)(r),"_onMouseMove",(function(t){var e=r._ref&&ht.findDOMNode(r._ref),n=e?function(t){var e=t.getBoundingClientRect();return{x:e.left,y:e.top,w:e.width,h:e.height}}(e):null,o=(0,Et.mv)(t.screenX,t.screenY,10);n&&o&&(0,Et.vY)(n,o,50)&&(t.preventDefault(),t.stopImmediatePropagation());var i=bt()(t.clientX),a=bt()(t.clientY);i===r._mx&&a===r._my||(r._mx=i,r._my=a,r._rafID&&cancelAnimationFrame(r._rafID),r._rafID=requestAnimationFrame(r._updateGridSize))})),(0,f.Z)((0,S.Z)(r),"_updateGridSize",(function(){r._rafID=0;var t=r._mx,e=r._my,n=t-r._ex,o=e-r._ey,i=yt()(_t()(o/21),1,20),a=yt()(_t()(n/21),1,20),s=r.state,c=s.rows,l=s.cols;c===i&&l===a||r.setState({rows:i,cols:a})})),(0,f.Z)((0,S.Z)(r),"_onMouseDown",(function(t){t.preventDefault(),r.props.close(r.state)})),r._ex=0,r._ey=0,r._mx=0,r._my=0,r._rafID=0,r._ref=null,r._entered=!1,r.state={rows:1,cols:1},r}return(0,T.Z)(n,[{key:"componentWillUnmount",value:function(){this._entered&&document.removeEventListener("mousemove",this._onMouseMove,!0),this._rafID&&cancelAnimationFrame(this._rafID)}},{key:"render",value:function(){var t=this.state,e=t.rows,n=t.cols,r=kt()(5,e),o=kt()(5,n);r===e&&(r=xt()(20,r+1)),o===n&&(o=xt()(20,o+1));for(var i=[],a=0,s=0,c=0,l=0;a<r;){s+=5;for(var u=0,d=0;u<o;){d+=5;var f=a<e&&u<n;i.push((0,U.Z)(Ct,{selected:f,x:d,y:s},"".concat(String(a),"-").concat(String(u)))),c=(d+=Pt)+5,u++}l=(s+=Pt)+5,a++}var p={width:c+"px",height:l+"px"};return A.createElement("div",{className:"editor-table-grid-size-editor",ref:this._onRef},(0,U.Z)("div",{className:"editor-table-grid-size-editor-body",onMouseDown:this._onMouseDown,onMouseEnter:this._onMouseEnter,style:p,role:"button",tabIndex:0},void 0,i),(0,U.Z)("div",{className:"editor-table-grid-size-editor-footer"},void 0,(0,U.Z)("b",{},void 0,e)," ",dt||(dt=(0,U.Z)("i",{className:"fa fa-times"}))," ",(0,U.Z)("b",{},void 0,n)))}}]),n}(A.PureComponent);Mt.defaultProps={close:mt()};var Rt=Mt,Nt=n(871199),jt=n.n(Nt);function It(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,x.Z)(t);if(e){var o=(0,x.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,O.Z)(this,n)}}function Tt(t){if(!jt()(t))return t;var e=new Error("Received unexpected "+t);throw e.framesToPop=1,e}var At=function(t){(0,k.Z)(n,t);var e=It(n);function n(){var t;(0,_.Z)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o)),(0,f.Z)((0,S.Z)(t),"_popUp",null),(0,f.Z)((0,S.Z)(t),"title","insert-table"),(0,f.Z)((0,S.Z)(t),"content","insert-table"),(0,f.Z)((0,S.Z)(t),"enable",(function(t){var e=t.selection;return e instanceof i.TextSelection&&e.from===e.to})),(0,f.Z)((0,S.Z)(t),"waitForUserInput",(function(e,n,r,o){if(t._popUp)return Promise.resolve(void 0);if(!(Tt(o).target instanceof HTMLElement))return Promise.resolve(void 0);var i=o?o.target.parentElement.parentElement:null;return new Promise((function(e){t._popUp=(0,N.Z)(Rt,null,{anchor:i,position:pt.SC,onClose:function(n){t._popUp&&(t._popUp=null,e(n))}})}))})),(0,f.Z)((0,S.Z)(t),"executeWithUserInput",(function(t,e,n,r){if(e){var o=t.schema;if(r){for(var i=r.rows,a=r.cols,s=[];a--;)s.push(o.nodes.table_cell.createAndFill());for(var c=[];i--;)c.push(o.nodes.table_row.createAndFill(void 0,s));var l=o.nodes.table.createAndFill(void 0,c);e(t.tr.replaceSelectionWith(l))}}return!1})),t}return n}(R.Z),zt=function(t){var e=t.selection;return e instanceof i.TextSelection||e instanceof i.AllSelection},Vt=function(t){var e=t.selection;return e instanceof i.TextSelection&&e.from===e.to},Bt=function(t){return function(e){var n=e.selection,r=n.from,o=n.$from,i=n.to;return n.empty?!!t.isInSet(e.storedMarks||o.marks()):!!e.doc.rangeHasMark(r,i,t)}},Lt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=n.selection,o=r.$from,i=r.to,a=r.node;return a?a.hasMarkup(t,e):i<=o.end()&&o.parent.hasMarkup(t,e)}},Ft=function(t){return function(e,n){var r=e.schema,o=e.selection,i=function(t,e,n){var r=e.marks.fontSize;if(!r)return t;var o=n?{pt:n}:null;return(0,Z.Z)(t,e,r,o)}(e.tr.setSelection(o),r,t);return!(!i.docChanged&&!i.storedMarksSet)&&(!n||n(i))}},Ut=function(t){return(0,w.Z)(t,"fontSize")},Ht=function(t){return function(e){var n,r=e.schema.nodes.heading;return(n=r?(0,o.Tr)(r)(e.selection):e.selection)&&n.node&&n.node.attrs&&n.node.attrs.level===t}},Wt=[{title:"strong",content:l.Z.strong,enable:zt,active:Bt(u.Z.marks.strong),run:(0,r.w9)(u.Z.marks.strong)},{title:"emphasis",content:l.Z.em,enable:zt,active:Bt(u.Z.marks.em),run:(0,r.w9)(u.Z.marks.em)},new I],Jt=[{title:"underline",content:l.Z.underline,enable:zt,active:Bt(u.Z.marks.underline),run:(0,r.w9)(u.Z.marks.underline)},{title:"strikethrough",content:l.Z.strikethrough,enable:zt,active:Bt(u.Z.marks.strikethrough),run:(0,r.w9)(u.Z.marks.strikethrough)},{title:"code",content:l.Z.code,enable:zt,active:Bt(u.Z.marks.code),run:(0,r.w9)(u.Z.marks.code)},{title:"subscript",content:l.Z.subscript,enable:zt,active:Bt(u.Z.marks.subscript),run:(0,r.w9)(u.Z.marks.subscript)},{title:"superscript",content:l.Z.superscript,enable:zt,active:Bt(u.Z.marks.superscript),run:(0,r.w9)(u.Z.marks.superscript)}],qt=[{title:"change-paragraph",content:l.Z.paragraph,active:Lt(u.Z.nodes.paragraph),enable:(0,r.uJ)(u.Z.nodes.paragraph),run:(0,r.uJ)(u.Z.nodes.paragraph)},{title:"change-heading-1",content:"H1",active:Ht(1),enable:(0,r.uJ)(u.Z.nodes.heading,{level:1}),run:(0,r.uJ)(u.Z.nodes.heading,{level:1})},{title:"change-heading-2",content:"H2",active:Ht(2),enable:(0,r.uJ)(u.Z.nodes.heading,{level:2}),run:(0,r.uJ)(u.Z.nodes.heading,{level:2})}],Kt=[{title:"change-heading-3",content:"Heading 3",enable:(0,r.uJ)(u.Z.nodes.heading,{level:3}),run:(0,r.uJ)(u.Z.nodes.heading,{level:3})},{title:"change-heading-4",content:"Heading 4",enable:(0,r.uJ)(u.Z.nodes.heading,{level:4}),run:(0,r.uJ)(u.Z.nodes.heading,{level:4})},{title:"change-heading-5",content:"Heading 5",enable:(0,r.uJ)(u.Z.nodes.heading,{level:5}),run:(0,r.uJ)(u.Z.nodes.heading,{level:5})}],$t=[{title:"wrap-block-quote",content:l.Z.blockquote,active:Lt(u.Z.nodes.blockquote),enable:(0,r.ym)(u.Z.nodes.blockquote),run:(0,r.ym)(u.Z.nodes.blockquote)},{title:"wrap-bullet-list",content:l.Z.bullet_list,active:Lt(u.Z.nodes.bullet_list),enable:(0,s.KI)(u.Z.nodes.bullet_list),run:(0,s.KI)(u.Z.nodes.bullet_list)},{title:"wrap-ordered-list",content:l.Z.ordered_list,active:Lt(u.Z.nodes.ordered_list),enable:(0,s.KI)(u.Z.nodes.ordered_list),run:(0,s.KI)(u.Z.nodes.ordered_list)}],Gt=[{title:"lift-out-enclosing",content:"lift-out-enclosing",enable:r.xb,run:r.xb},{title:"join-with-above",content:"join-with-above",enable:r.MI,run:r.MI},{title:"join-with-below",content:"join-with-below",enable:r.Ig,run:r.Ig}],Yt=[new tt,new ft,{title:"insert-footnote",content:"insert-footnote",enable:d(u.Z.nodes.footnote),run:function(t,e){var n=u.Z.nodes.footnote.create();e(t.tr.replaceSelectionWith(n))}},{title:"insert-figure-caption",content:"insert-figure-caption",enable:Vt,run:function(t,e){var n=u.Z.nodes.figureCaption.create();e(t.tr.replaceSelectionWith(n))}},{title:"insert-table-caption",content:"insert-table-caption",enable:Vt,run:function(t,e){var n=u.Z.nodes.tableCaption.create();e(t.tr.replaceSelectionWith(n))}},{title:"insert-code-block",content:"insert-code-block",enable:d(u.Z.nodes.code_block),run:function(t,e){var n=u.Z.nodes.code_block.create();e(t.tr.replaceSelectionWith(n))}}],Xt=[{title:"undo-last-change",content:l.Z.undo,enable:a.Yw,run:a.Yw},{title:"redo-last-undone-change",content:l.Z.redo,enable:a.KX,run:a.KX},{title:"select-parent-node",content:l.Z.selectParent,run:r.N0,select:function(t){return(0,r.N0)(t)}}],Qt=[new At,{title:"insert-column-before",content:"insert-column-before",run:c.addColumnBefore},{title:"insert-column-after",content:"insert-column-after",run:c.addColumnAfter},{title:"insert-row-before",content:"insert-row-before",run:c.addRowBefore},{title:"insert-row-after",content:"insert-row-after",run:c.addRowAfter},{title:"delete-column",content:"delete-column",run:c.deleteColumn},{title:"delete-row",content:"delete-row",run:c.deleteRow},{title:"merge-cells",content:"merge-cells",run:c.mergeCells},{title:"split-cells",content:"split-cells",run:c.splitCell},{title:"toggle-header-column",content:"toggle-header-column",run:c.toggleHeaderColumn},{title:"toggle-header-row",content:"toggle-header-row",run:c.toggleHeaderRow},{title:"delete-table",content:"delete-table",run:c.deleteTable}],te={marks:Wt,extraMarks:Jt,blocks:qt,headers:Kt,alignment:y,wraps:$t,fontSizes:b.map((function(t){return{title:String(t),content:String(t),run:Ft(t),enable:Ut}})),actions:Gt,insert:Yt,history:Xt,tableEdits:Qt}},814346:function(t,e,n){"use strict";n.d(e,{Z:function(){return mt}});var r=n(305250),o=n(960703),i=n(757343),a=n(603423),s=(n(382139),n(904730)),c=n(151119),l=n(264659),u=n(175663),d=n(750591),f=n(575630),p=(n(304531),n(319371),n(516037)),h=n(676065),v=n.n(h),m=n(925161),g=n(777866),y=n(924285);var Z=function(t,e){for(;t&&t.nodeName;){if(e(t))return t;t=t.parentElement}return null},b=n(858255),w=n(56470),_=n(673989),S=n(977162),k=n.n(S),O=n(202784),x=n(772659),E=n(871685),D=n(273783);function P(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,f.Z)(t);if(e){var o=(0,f.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,d.Z)(this,n)}}var C=function(t){(0,u.Z)(n,t);var e=P(n);function n(){var t;(0,l.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=e.call.apply(e,[this].concat(o)),(0,c.Z)((0,_.Z)(t),"_openLink",(function(e){if(e&&0===e.indexOf("#")){var n=e.substr(1),r=document.getElementById(n);if(r){var o=t.props;(0,o.onCancel)(o.editorView),(0,w.Z)(k().mark((function t(){return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,x.Z)(r,{scrollMode:"if-needed",behavior:"smooth"});case 2:case"end":return t.stop()}}),t)})))()}}else e&&window.open((0,E.Z)(e))})),t}return(0,s.Z)(n,[{key:"render",value:function(){var t=this.props,e=t.href,n=t.editorView,r=t.onEdit,o=t.onRemove;return(0,b.Z)("div",{className:"editor-link-tooltip"},void 0,(0,b.Z)("div",{className:"editor-link-tooltip-body"},void 0,(0,b.Z)("div",{className:"editor-link-tooltip-row"},void 0,(0,b.Z)(D.Z,{className:"editor-link-tooltip-href",label:e,onClick:this._openLink,target:"new",title:e,value:e}),(0,b.Z)(D.Z,{label:"Change",onClick:r,value:n}),(0,b.Z)(D.Z,{label:"Remove",onClick:o,value:n}))))}}]),n}(O.PureComponent),M=n(111057),R=n(59821),N=n(70698);function j(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,f.Z)(t);if(e){var o=(0,f.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,d.Z)(this,n)}}var I={view:function(t){return new A(t)}},T=function(t){(0,u.Z)(n,t);var e=j(n);function n(){return(0,l.Z)(this,n),e.call(this,I)}return n}(p.Plugin),A=function(){function t(e){var n=this;(0,l.Z)(this,t),(0,c.Z)(this,"_anchorEl",null),(0,c.Z)(this,"_popup",null),(0,c.Z)(this,"_editor",null),(0,c.Z)(this,"_onCancel",(function(t){n.destroy(),t.focus()})),(0,c.Z)(this,"_onClose",(function(){n._anchorEl=null,n._editor=null,n._popup=null})),(0,c.Z)(this,"_onEdit",(function(t){if(!n._editor){var e=t.state,r=e.schema,o=e.doc,i=e.selection,a=i.from,s=i.to,c=r.marks.link,l=(0,y.Z)(o,a,s,c);if(l){var u=e.tr,d=p.TextSelection.create(u.doc,l.from.pos,l.to.pos+1);u=u.setSelection(d),u=(0,m.tk)(e,u),t.dispatch(u);var f=l?l.mark.attrs.href:null;n._editor=(0,N.Z)(M.Z,{href:f},{onClose:function(e){n._editor=null,n._onEditEnd(t,i,e)}})}}})),(0,c.Z)(this,"_onRemove",(function(t){n._onEditEnd(t,t.state.selection,null)})),(0,c.Z)(this,"_onEditEnd",(function(t,e,n){var r=t.state,o=t.dispatch,i=(0,m.be)(r);if(!v()(n)){var a=r.schema,s=a.marks.link;if(s){var c=(0,y.Z)(i.doc,e.from,e.to,s);if(c){var l=p.TextSelection.create(i.doc,c.from.pos,c.to.pos+1);i=i.setSelection(l);var u=n?{href:n}:null;i=(0,g.Z)(i,a,s,u)}}}i.setSelection(e.map(i.doc,i.mapping)),o(i),t.focus()})),this.update(e,null)}return(0,s.Z)(t,[{key:"update",value:function(t,e){if(t.readOnly)this.destroy();else{var n=t.state,r=n.doc,o=n.selection,i=n.schema.marks.link;if(i){var a=o.from,s=o.to,c=(0,y.Z)(r,a,s,i);if(c){var l=t.domAtPos(a);if(l){var u=Z(l.node,(function(t){return"A"===t.nodeName}));if(u){var d=this._popup,f={editorState:n,editorView:t,href:c.mark.attrs.href,onCancel:this._onCancel,onEdit:this._onEdit,onRemove:this._onRemove};d&&u===this._anchorEl?d.update(f):(d&&d.close(),this._anchorEl=u,this._popup=(0,N.Z)(C,f,{anchor:u,autoDismiss:!1,onClose:this._onClose,position:R.DL}))}else this.destroy()}else this.destroy()}else this.destroy()}}}},{key:"destroy",value:function(){this._popup&&this._popup.close(),this._editor&&this._editor.close()}}]),t}(),z=T,V=n(86381),B=n(770290),L=n(141396);function F(t){var e=t.doc,n=t.selection,r=t.schema,o=r.nodes.table_cell,i=r.nodes.table_header;if(!o&&!i)return null;var s=n;if(s instanceof p.TextSelection){var c=o&&(0,L.Tr)(o)(n)||i&&(0,L.Tr)(i)(n);if(!c)return null;s=a.CellSelection.create(e,c.pos)}return s instanceof a.CellSelection?function(t){var e,n=t.$anchorCell,r=n.start(-1),o=n.node(-1),i=a.TableMap.get(o),s=null,c=null;return t.forEachCell((function(t,n){var o=i.findCell(n-r);(!e||o.top>=e.top&&o.left>e.left)&&(e=o,s=n,c=t)})),null===s?null:{node:c,pos:s}}(s):null}var U=n(226010),H=n(155061),W=n(320765),J=n(550171),q=n(229511);function K(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,f.Z)(t);if(e){var o=(0,f.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,d.Z)(this,n)}}var $=function(t){(0,u.Z)(n,t);var e=K(n);function n(){var t;(0,l.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=e.call.apply(e,[this].concat(o)),(0,c.Z)((0,_.Z)(t),"onMenuMouseDown",(function(e){return function(n){n.preventDefault(),e.run&&e.run(t.props.editorState,t.props.editorView.dispatch,t.props.editorView,n.nativeEvent)}})),(0,c.Z)((0,_.Z)(t),"createDropdownButtons",(function(e,n){return(0,b.Z)(H.Z,{onMouseDown:t.onMenuMouseDown(e)},"dropdown-item-".concat(n),W.a.t("TextEditor:".concat(e.content)))})),t}return(0,s.Z)(n,[{key:"render",value:function(){return(0,b.Z)(U.Z,{title:J.Z.table,variant:"outline-secondary",size:"sm",style:{display:"inline-block"}},void 0,q.ZP.tableEdits.map(this.createDropdownButtons))}}]),n}(O.PureComponent);var G=n(615581);function Y(t){var e=(0,G.hs)(t),n=e.x,r=e.y,o=e.w,i=e.h,a=o&&i&&t?t.ownerDocument.elementFromPoint(n+1,r+1):null;return!!a&&(a===t||!!t.contains(a))}function X(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,f.Z)(t);if(e){var o=(0,f.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,d.Z)(this,n)}}var Q=function(){function t(e){var n=this;(0,l.Z)(this,t),(0,c.Z)(this,"destroy",(function(){n._popUp&&n._popUp.close(),n._popUp=null})),(0,c.Z)(this,"_onOpen",(function(){var t=n._cellElement;t&&(n._scrollHandle=function(t,e){if(t){for(var n=t.ownerDocument.defaultView,r=[],o=0,i=function(){o&&cancelAnimationFrame(o),o=requestAnimationFrame(e)},a=t;a;){var s=n.getComputedStyle(a).overflow;(i&&"auto"===s||"scroll"===s)&&(a.addEventListener("scroll",i,!1),r.push(a)),a=a.parentElement}return{dispose:function(){for(;i&&r.length;)(a=r.pop())&&a.removeEventListener("scroll",i,!1);i=null,o&&window.cancelAnimationFrame(o),o=0}}}}(t,n._onScroll))})),(0,c.Z)(this,"_onClose",(function(){n._popUp=null,n._scrollHandle&&n._scrollHandle.dispose(),n._scrollHandle=null})),(0,c.Z)(this,"_onScroll",(function(){var t=n._popUp,e=n._cellElement;t&&e&&(Y(e)||t.close())})),this._cellElement=null,this._popUp=null,this._scrollHandle=null,this.update(e,null)}return(0,s.Z)(t,[{key:"update",value:function(t,e){var n=t.state,r=t.readOnly,o=F(n);if(o&&!r){var i=t.domAtPos(o.pos+1);if(i){var a=i.node,s=this._popUp,c={editorState:n,editorView:t};a&&!Y(a)&&(a=null),a?s&&a===this._cellElement?s.update(c):(s&&s.close(),this._cellElement=a,this._popUp=(0,N.Z)($,c,{anchor:a,autoDismiss:!1,onClose:this._onClose,position:R.ID}),this._onOpen()):(s&&s.close(),this._cellElement=null)}else this.destroy()}else this.destroy()}}]),t}(),tt={view:function(t){return new Q(t)}},et=function(t){(0,u.Z)(n,t);var e=X(n);function n(){return(0,l.Z)(this,n),e.call(this,tt)}return n}(p.Plugin),nt=n(268874),rt=n(919353),ot=n(642777),it=n(260593),at=n(414256),st=n(437069),ct=n.n(st),lt=n(828919),ut=function(t,e){var n=lt.Z.nodes.hard_break.create();return e(t.tr.replaceSelectionWith(n).scrollIntoView()),!0},dt={"Alt-ArrowDown":rt.Ig,"Alt-ArrowUp":rt.MI,"Ctrl->":(0,rt.ym)(lt.Z.nodes.blockquote),"Ctrl-Enter":(0,rt.QF)(rt.uo,ut),"Mod-_":function(t,e){var n=lt.Z.nodes.horizontal_rule.create();return e(t.tr.replaceSelectionWith(n).scrollIntoView()),!0},"Mod-[":(0,at.IB)(lt.Z.nodes.list_item),"Mod-]":(0,at.bw)(lt.Z.nodes.list_item),"Mod-`":(0,rt.w9)(lt.Z.marks.code),"Mod-b":(0,rt.w9)(lt.Z.marks.strong),"Mod-BracketLeft":rt.xb,"Mod-Enter":(0,rt.QF)(rt.uo,ut),"Mod-i":(0,rt.w9)(lt.Z.marks.em),"Mod-u":(0,rt.w9)(lt.Z.marks.underline),"Mod-y":i.KX,"Mod-z":i.Yw,"Shift-Ctrl-\\":(0,rt.uJ)(lt.Z.nodes.code_block),"Shift-Ctrl-0":(0,rt.uJ)(lt.Z.nodes.paragraph),"Shift-Ctrl-1":(0,rt.uJ)(lt.Z.nodes.heading,{level:1}),"Shift-Ctrl-2":(0,rt.uJ)(lt.Z.nodes.heading,{level:2}),"Shift-Ctrl-3":(0,rt.uJ)(lt.Z.nodes.heading,{level:3}),"Shift-Ctrl-4":(0,rt.uJ)(lt.Z.nodes.heading,{level:4}),"Shift-Ctrl-5":(0,rt.uJ)(lt.Z.nodes.heading,{level:5}),"Shift-Ctrl-6":(0,rt.uJ)(lt.Z.nodes.heading,{level:6}),"Shift-Ctrl-8":(0,at.KI)(lt.Z.nodes.bullet_list),"Shift-Ctrl-9":(0,at.KI)(lt.Z.nodes.ordered_list),"Shift-Enter":(0,rt.QF)(rt.uo,ut),"Shift-Mod-z":i.KX,"Shift-Tab":(0,a.goToNextCell)(-1),Backspace:ot.dU,Enter:(0,at.s6)(lt.Z.nodes.list_item),Escape:rt.N0,Tab:(0,a.goToNextCell)(1)};ct()(rt.YR).forEach((function(t){dt[t]?dt[t]=(0,rt.QF)(dt[t],rt.YR[t]):dt[t]=rt.YR[t]}));var ft=(0,it.h)(dt),pt=n(711746);n(283946);function ht(t,e,n){return new ot.VK(t,(function(t,r,o,i){var a=n instanceof Function?n(r):n,s=t.tr;if(r[1]){var c=o+r[0].indexOf(r[1]),l=c+r[1].length;l<i&&s.delete(l,i),c>o&&s.delete(o,c),i=o+r[1].length}return s.addMark(o,i,e.create(a)),s.removeStoredMark(e),s}))}var vt=(0,ot.Hw)({rules:[].concat((0,pt.Z)(ot.yR),[ot.LH,ot.pR,(0,ot.S0)(/^\s*>\s$/,lt.Z.nodes.blockquote),(0,ot.S0)(/^(\d+)\.\s$/,lt.Z.nodes.ordered_list,(function(t){return{order:+t[1]}}),(function(t,e){return e.childCount+e.attrs.order===+t[1]})),(0,ot.S0)(/^\s*([-+*])\s$/,lt.Z.nodes.bullet_list),(0,ot.zK)(/^```$/,lt.Z.nodes.code_block),ht(/(?:^|[^`])`([^`]+)`$/,lt.Z.marks.code),ht(/(?:\*\*|__)([^*_]+)(?:\*\*|__)$/,lt.Z.marks.strong),ht(/(?:^|[^*_])(?:\*|_)([^*_]+)(?:\*|_)$/,lt.Z.marks.em),ht(/(?:\+\+)([^+]+)(?:\+\+)$/,lt.Z.marks.underline),ht(/(?:~~)([^~]+)(?:~~)$/,lt.Z.marks.strikethrough),(0,ot.zK)(new RegExp("^(#{1,6})\\s$"),lt.Z.nodes.heading,(function(t){return{level:t[1].length}}))])}),mt=[new B.Z,new z,new m.ZP,new V.ZP,vt,ft,(0,r.q)(),(0,o.d)(),(0,i.m8)(),(0,a.columnResizing)({}),new et,(0,a.tableEditing)(),(0,nt.ZP)()];document.execCommand("enableObjectResizing",!1,!1),document.execCommand("enableInlineTableEditing",!1,!1)},871685:function(t,e,n){"use strict";n.d(e,{Z:function(){return o}});var r=/^http(s?):*\/\//i;function o(t){return t?r.test(t)?t:"http://"+t:"http://"}},828919:function(t,e,n){"use strict";n.d(e,{Z:function(){return ft}});var r=n(867696),o={attrs:{href:{},target:{default:"blank"},title:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:function(t){var e=t.getAttribute("href"),n=e&&0===e.indexOf("#")?"":"blank";return{href:t.getAttribute("href"),title:t.getAttribute("title"),target:n}}}],toDOM:function(t){var e=t.attrs;return["a",{href:e.href,title:e.title,target:e.target},0]}},i={parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM:function(){return["em",0]}},a={parseDOM:[{tag:"strong"},{tag:"b",getAttrs:function(t){return"normal"!==t.style.fontWeight&&null}},{style:"font-weight",getAttrs:function(t){return/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}}],toDOM:function(){return["strong",0]}},s={code:{parseDOM:[{tag:"code"}],toDOM:function(){return["code",0]}}},c={excludes:"superscript",parseDOM:[{tag:"sub"},{style:"vertical-align=sub"}],toDOM:function(){return["sub"]}},l={attrs:{color:""},inline:!0,group:"inline",parseDOM:[{style:"color",getAttrs:function(t){return{color:t}}}],toDOM:function(t){var e=t.attrs.color,n="";return e&&(n+="color: ".concat(e,";")),["span",{style:n},0]}},u=(n(21466),n(762850),n(462773),n(32593)),d=n.n(u),f=n(395465),p=n.n(f),h=n(70332),v=/([\d.]+)(px|pt)/i;function m(t){var e=function(t){var e=t.match(v);if(!e)return 0;var n=parseFloat(e[1]),r=e[2];return n&&r?("px"===r&&(n*=.7518796992481203),n):0}(t);return h.includes(e)?e:h.reduce((function(t,n){return d()(n-e)<d()(t-e)?n:t}),p())}var g={link:o,code:s,em:i,fontSize:{attrs:{pt:{default:null}},inline:!0,group:"inline",parseDOM:[{style:"font-size",getAttrs:function(t){var e={};if(!t)return e;var n=m(t);if(!n)return e;return{pt:n}}}],toDOM:function(t){var e=t.attrs.pt;return["span",e?{style:"font-size: ".concat(e,"pt;"),class:"pm-font-size-mark"}:null,0]}},strikethrough:{parseDOM:[{tag:"strike"},{style:"text-decoration:line-through"},{style:"text-decoration-line:line-through"}],toDOM:function(){return["strike"]}},strong:a,subscript:c,superscript:{excludes:"subscript",parseDOM:[{tag:"sup"},{style:"vertical-align=super"}],toDOM:function(){return["sup"]}},textColor:l,underline:{parseDOM:[{tag:"u"},{style:"text-decoration:underline",getAttrs:function(t){return"underline"===t&&null}}],toDOM:function(){return["u",0]}}},y=(n(627476),n(95767),n(898837),n(694882),n(298351),n(151119)),Z=n(603423),b=(n(798184),n(39115),n(296253),n(856997),n(991181),/(left|right|center|justify)/),w="data-indent",_=new Set(["","0%","0pt","0px"]);function S(t){var e=t.style,n=e.textAlign,r=e.paddingTop,o=e.paddingBottom,i=t.getAttribute("align")||n||"";return{align:i=b.test(i)?i:null,indent:parseInt(t.getAttribute(w),10),paddingTop:r,paddingBottom:o,id:t.getAttribute("id")||""}}function k(t){var e=t.attrs,n=e.align,r=e.indent,o=e.paddingTop,i=e.paddingBottom,a=e.id,s={},c="";return n&&"left"!==n&&(c+="text-align: ".concat(n,";")),o&&!_.has(o)&&(c+="padding-top: ".concat(o,";")),i&&!_.has(i)&&(c+="padding-bottom: ".concat(i,";")),c&&(s.style=c),r&&(s["data-indent"]=String(r)),a&&(s.id=a),["p",s,0]}var O=k,x=S,E={attrs:{align:{default:null},color:{default:null},id:{default:null},indent:{default:null},lineSpacing:{default:null},paddingBottom:{default:null},paddingTop:{default:null}},content:"inline*",group:"block",parseDOM:[{tag:"p",getAttrs:S}],toDOM:k};function D(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function P(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?D(Object(n),!0).forEach((function(e){(0,y.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var C={H1:1,H2:2,H3:3,H4:4,H5:5,H6:6};function M(t){var e=x(t),n=C[t.nodeName.toUpperCase()]||1;return e.level=n,e}var R=P(P({},E),{},{attrs:P(P({},E.attrs),{},{level:{default:1}}),content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",getAttrs:M},{tag:"h2",getAttrs:M},{tag:"h3",getAttrs:M},{tag:"h4",getAttrs:M},{tag:"h5",getAttrs:M},{tag:"h6",getAttrs:M}],toDOM:function(t){var e=O(t),n=t.attrs.level||1;return e[0]="h".concat(n),e}}),N={group:"inline",content:"inline*",inline:!0,atom:!0,toDOM:function(){return["footnote",0]},parseDOM:[{tag:"footnote"}]};function j(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function I(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?j(Object(n),!0).forEach((function(e){(0,y.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var T=I(I({},E),{},{attrs:I({},E.attrs),content:"inline*",group:"block",defining:!0,toDOM:function(t){var e=O(t);return e[0]="legend",e[1].class="figure-caption",e},parseDOM:[{tag:"legend",getAttrs:function(t){return x(t)}}]});function A(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function z(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?A(Object(n),!0).forEach((function(e){(0,y.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var V=z(z({},E),{},{attrs:z({},E.attrs),content:"inline*",group:"block",defining:!0,toDOM:function(t){var e=O(t);return e[0]="legend",e[1].class="table-caption",e},parseDOM:[{tag:"legend",getAttrs:function(t){return x(t)}}]}),B=/rotate\(([0-9.]+)rad\)/i,L=new Set(["0%","0pt","0px"]);function F(t){var e=t.style,n=e.cssFloat,r=e.display,o=e.marginTop,i=e.marginLeft,a=t.style,s=a.width,c=a.height,l=t.getAttribute("data-align")||t.getAttribute("align");l?l=/(left|right|center)/.test(l)?l:null:"left"!==n||r?"right"!==n||r?n||"block"!==r||(l="block"):l="right":l="left",s=s||t.getAttribute("width"),c=c||t.getAttribute("height");var u=null,d=null,f=t.parentElement;if(f instanceof HTMLElement){var p=f.style;if("inline-block"===p.display&&"hidden"===p.overflow&&p.width&&p.height&&i&&!L.has(i)&&o&&!L.has(o)&&(u={width:parseInt(p.width,10)||0,height:parseInt(p.height,10)||0,left:parseInt(i,10)||0,top:parseInt(o,10)||0}),p.transform){var h=p.transform.match(B);h&&h[1]&&(d=parseFloat(h[1])||null)}}return{align:l,alt:t.getAttribute("alt")||null,crop:u,height:parseInt(c,10)||null,rotate:d,src:t.getAttribute("src")||null,title:t.getAttribute("title")||null,width:parseInt(s,10)||null}}var U=F,H={inline:!0,attrs:{align:{default:null},alt:{default:"An inserted image"},crop:{default:null},height:{default:null},rotate:{default:null},src:{default:null},title:{default:"None"},width:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:F}],toDOM:function(t){return["img",t.attrs]}};function W(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function J(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?W(Object(n),!0).forEach((function(e){(0,y.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var q={attrs:{src:{},plotID:{default:null},align:{default:null},alt:{default:""},crop:{default:null},title:{default:""},meta:{default:null},width:{default:null},height:{default:null},rotate:{default:null}},inline:!0,group:"inline",draggable:!0,toDOM:function(t){return["div",{class:"img-container","data-plot-id":t.attrs.plotID,align:t.attrs.align},["img",{src:t.attrs.src,align:t.attrs.align,alt:t.attrs.alt,crop:t.attrs.crop,title:t.attrs.title,width:t.attrs.width,height:t.attrs.height,rotate:t.attrs.rotate}],["pre",{class:"img-tooltip"},t.attrs.meta]]},parseDOM:[{priority:51,tag:"div[data-plot-id]",getAttrs:function(t){var e=t.getAttribute("data-plot-id"),n=t.firstChild,r=U(n),o=t.lastChild.innerText;return J(J({},r),{},{meta:o,plotID:e})}}]};function K(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function $(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?K(Object(n),!0).forEach((function(e){(0,y.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var G={attrs:{src:{},plotID:{default:null},align:{default:null},alt:{default:""},crop:{default:null},title:{default:""},meta:{default:null},width:{default:null},height:{default:null},rotate:{default:null}},inline:!0,group:"inline",draggable:!0,toDOM:function(t){return["div",{class:"img-container","data-plot-id":t.attrs.plotID,align:t.attrs.align},["img",{src:t.attrs.src,align:t.attrs.align,alt:t.attrs.alt,crop:t.attrs.crop,title:t.attrs.title,width:t.attrs.width,height:t.attrs.height,rotate:t.attrs.rotate}],["pre",{class:"img-tooltip"},t.attrs.meta]]},parseDOM:[{priority:51,tag:"img[data-plot-id]",getAttrs:function(t){var e=t.getAttribute("align"),n=t.getAttribute("width"),r=U(t);e||(r.align="center"),n||(r.width=550);var o=t.getAttribute("data-plot-id"),i=t.getAttribute("data-plot-meta");return $($({},r),{},{meta:i,plotID:o})}}]},Y={content:"block+"},X={content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote"}],toDOM:function(){return["blockquote",0]}},Q={group:"block",parseDOM:[{tag:"hr"}],toDOM:function(){return["hr"]}},tt={content:"text*",marks:"",group:"block",code:!0,defining:!0,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:function(){return["pre",["code",0]]}},et={group:"inline"},nt={inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:function(){return["br"]}},rt=n(414256);function ot(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function it(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ot(Object(n),!0).forEach((function(e){(0,y.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ot(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function at(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function st(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?at(Object(n),!0).forEach((function(e){(0,y.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):at(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ct(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function lt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ct(Object(n),!0).forEach((function(e){(0,y.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ct(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ut(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var dt=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ut(Object(n),!0).forEach((function(e){(0,y.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ut(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({doc:Y,plot:G,plotContainer:q,footnote:N,paragraph:E,ordered_list:it(it({},rt.dq),{},{content:"list_item+",group:"block"}),bullet_list:st(st({},rt.iI),{},{content:"list_item+",group:"block"}),list_item:lt(lt({},rt.qb),{},{content:"paragraph block*",group:"block"}),blockquote:X,horizontal_rule:Q,heading:R,code_block:tt,text:et,image:H,hard_break:nt,figureCaption:T,tableCaption:V},(0,Z.tableNodes)({tableGroup:"block",cellContent:"block+"})),ft=new r.Schema({nodes:dt,marks:g})},925161:function(t,e,n){"use strict";n.d(e,{tk:function(){return g},be:function(){return y}});n(382139);var r=n(264659),o=n(673989),i=n(175663),a=n(750591),s=n(575630),c=(n(319371),n(52310),n(762850),n(462773),n(516037)),l=n(506565);function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,s.Z)(t);if(e){var o=(0,s.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,a.Z)(this,n)}}var d={name:"SelectionPlaceholderPlugin"},f=null,p={state:{init:function(){return l.EH.empty},apply:function(t,e){e=e.map(t.mapping,t.doc);var n=t.getMeta(this);if(!n)return e;if(n.add){var r=l.p.inline(n.add.from,n.add.to,{class:"selection-placeholder"},{id:d});e=e.add(t.doc,[r])}else if(n.remove){var o=e.find(null,null,v);e=e.remove(o)}return e}},props:{decorations:function(t){return f?f.getState(t):null}}},h=function(t){(0,i.Z)(n,t);var e=u(n);function n(){var t;return(0,r.Z)(this,n),t=e.call(this,p),f?(0,a.Z)(t,f):(f=(0,o.Z)(t),t)}return n}(c.Plugin);function v(t){return t.id===d}function m(t){if(!f)return null;if(!t.plugins.includes(f))return null;var e=f.getState(t).find(null,null,v);return(e.length?e[0]:null)||null}function g(t,e){e=e||t.tr;var n=f;return n&&e.selection&&!e.selection.empty?(null===m(t)&&(e=e.setMeta(n,{add:{from:e.selection.from,to:e.selection.to}})),e):e}function y(t,e){e=e||t.tr;var n=f;return n?(m(t)&&(e=e.setMeta(n,{remove:{}})),e):e}e.ZP=h},70698:function(t,e,n){"use strict";n.d(e,{Z:function(){return j}});var r=n(858255),o=(n(95767),n(530522),n(39115),n(296253),n(856997),n(991181),n(111246),n(440856),n(202784)),i=n(928316),a=(n(382139),n(607560)),s=n(264659),c=n(904730),l=n(673989),u=n(175663),d=n(750591),f=n(575630),p=n(151119),h=(n(850110),n(6059),n(574315)),v=(n(388416),n(798184),n(615581)),m=n(877119),g=n.n(m);function y(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Z(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function Z(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var b={x:-1e4,y:-1e4,w:0,h:0},w=new(function(){function t(){var e=this;(0,s.Z)(this,t),(0,p.Z)(this,"_bridges",new Map),(0,p.Z)(this,"_positions",new Map),(0,p.Z)(this,"_mx",0),(0,p.Z)(this,"_my",0),(0,p.Z)(this,"_rafID",0),(0,p.Z)(this,"_onScroll",(function(){e._rafID&&cancelAnimationFrame(e._rafID),e._rafID=requestAnimationFrame(e._syncPosition)})),(0,p.Z)(this,"_onResize",(function(t){e._rafID&&cancelAnimationFrame(e._rafID),e._rafID=requestAnimationFrame(e._syncPosition)})),(0,p.Z)(this,"_onMouseChange",(function(t){e._mx=Math.round(t.clientX),e._my=Math.round(t.clientY),e._rafID&&cancelAnimationFrame(e._rafID),e._rafID=requestAnimationFrame(e._syncPosition)})),(0,p.Z)(this,"_onClick",(function(t){var n,r,o=Date.now(),i=y(e._bridges);try{for(i.s();!(r=i.n()).done;){var a=(0,h.Z)(r.value,2),s=a[0];if(o-a[1]>350){var c=s.getDetails();c.modal&&c.autoDismiss&&(n=c)}}}catch(m){i.e(m)}finally{i.f()}if(n){var l=n,u=l.body,d=l.close,f=(0,v.mv)(t.clientX,t.clientY,1),p=u?(0,v.hs)(u):null;p&&(0,v.vY)(f,p)||d()}})),(0,p.Z)(this,"_syncPosition",(function(){e._rafID=0;var t,n=new Map,r=y(e._bridges);try{for(r.s();!(t=r.n()).done;){var o=(0,h.Z)(t.value,2),i=o[0],a=(o[1],i.getDetails());n.set(i,a);var s=a.anchor,c=a.body;c instanceof HTMLElement&&(a.bodyRect=(0,v.hs)(c)),s instanceof HTMLElement&&(a.anchorRect=(0,v.hs)(s))}}catch(Q){r.e(Q)}finally{r.f()}var l,u=(0,v.mv)(e._mx,e._my,2),d=new Set,f=y(n);try{for(f.s();!(l=f.n()).done;){var p=(0,h.Z)(l.value,2),m=p[0],Z=p[1],w=Z.anchor,_=Z.bodyRect,S=Z.anchorRect,k=Z.position,O=Z.body;if(_||S){var x=k(S,_),E=x.x,D=x.y,P="".concat(E,"-").concat(D);if(O&&_&&e._positions.get(m)!==P){var C=S?g()(0,S.x-E+S.w/2,_.w-S.w/2):0;e._positions.set(m,P);var M=O.style;M.position="absolute",M.left="".concat(E,"px"),M.top="".concat(D,"px"),M.setProperty("--editor-pop-up-anchor-offset-left","".concat(C,"px")),_.x=E,_.y=D}((0,v.vY)(u,_||b,0)||(0,v.vY)(u,S||b,0))&&w&&d.add(w)}}}catch(Q){f.e(Q)}finally{f.f()}for(;;){var R,N=d.size,j=y(n);try{for(j.s();!(R=j.n()).done;){var I,T=(0,h.Z)(R.value,2),A=(T[0],T[1]),z=A.anchor,V=A.body,B=y(d);try{for(B.s();!(I=B.n()).done;){var L=I.value;z&&V&&!d.has(z)&&V.contains(L)&&d.add(z)}}catch(Q){B.e(Q)}finally{B.f()}}}catch(Q){j.e(Q)}finally{j.f()}if(d.size===N)break}var F,U=Date.now(),H=y(e._bridges);try{for(H.s();!(F=H.n()).done;){var W=(0,h.Z)(F.value,2),J=W[0],q=W[1],K=n.get(J);if(K){var $=K.autoDismiss,G=K.anchor,Y=K.close,X=K.modal;$&&!X&&U-q>350&&!d.has(G)&&Y()}}}catch(Q){H.e(Q)}finally{H.f()}}))}return(0,c.Z)(t,[{key:"register",value:function(t){this._bridges.set(t,Date.now()),this._positions.set(t,null),1===this._bridges.size&&this._observe(),this._rafID=requestAnimationFrame(this._syncPosition)}},{key:"unregister",value:function(t){this._bridges.delete(t),this._positions.delete(t),0===this._bridges.size&&this._unobserve(),this._rafID&&cancelAnimationFrame(this._rafID)}},{key:"_observe",value:function(){document.addEventListener("mousemove",this._onMouseChange,!1),document.addEventListener("mouseup",this._onMouseChange,!1),document.addEventListener("click",this._onClick,!1),window.addEventListener("scroll",this._onScroll,!0),window.addEventListener("resize",this._onResize,!0)}},{key:"_unobserve",value:function(){document.removeEventListener("mousemove",this._onMouseChange,!1),document.removeEventListener("mouseup",this._onMouseChange,!1),document.removeEventListener("click",this._onClick,!1),window.removeEventListener("scroll",this._onScroll,!0),window.removeEventListener("resize",this._onResize,!0),this._rafID&&cancelAnimationFrame(this._rafID)}}]),t}()),_=n(59821),S=n(427249);function k(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,f.Z)(t);if(e){var o=(0,f.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,d.Z)(this,n)}}var O=(0,S.Z)("popup"),x=function(t){(0,u.Z)(n,t);var e=k(n);function n(t){var r;return(0,s.Z)(this,n),r=e.call(this,t),(0,p.Z)((0,l.Z)(r),"_getDetails",(function(){var t=r.props,e=t.close,n=t.popUpParams,o=n.anchor,i=n.autoDismiss,a=n.position,s=n.modal;return{anchor:o,autoDismiss:!1!==i,body:document.getElementById(r._id),close:e,modal:!0===s,position:a||(s?_.Oi:_.SC)}})),r._bridge=null,r._id=O(),r}return(0,c.Z)(n,[{key:"componentDidMount",value:function(){this._bridge={getDetails:this._getDetails},w.register(this._bridge)}},{key:"componentWillUnmount",value:function(){this._bridge&&w.unregister(this._bridge)}},{key:"render",value:function(){var t=this.props,e=t.View,n=t.viewProps,i=t.close;return(0,r.Z)("div",{"data-pop-up-id":this._id,id:this._id},void 0,o.createElement(e,(0,a.Z)({},n||{},{close:i})))}}]),n}(o.PureComponent),E=(0,S.Z)("create-popup"),D=0,P=0,C="pop-up-modal-mask-"+E();function M(){var t=document.getElementById(C);t&&t.parentElement&&t.parentElement.removeChild(t)}function R(t,e,n,r){var o=n&&n.container||document.body||document.documentElement,i=document.getElementById(t);if(!i&&e&&(i=document.createElement("div")),!i)return null;n&&n.modal&&i.setAttribute("data-pop-up-modal","y"),i.className="pop-up-element vars",i.id=t;var a=i.style,s=n&&n.modal?1:0;return n&&n.container||(a.zIndex=1005+3*P+s),r&&(a.zIndex+=r),i.setAttribute("role","dialog"),i.setAttribute("aria-modal","true"),o&&!i.parentElement&&o.appendChild(i),i}function N(t,e,o,a,s){var c=0,l=document.getElementsByClassName("editorview-wrapper fullscreen");n.g.DOM=l,l[0]&&(c+=1e3);var u=R(t,!0,s,c);if(u){var d=(0,r.Z)(x,{View:o,close:e,popUpParams:s,viewProps:a});i.render(d,u)}D>0?function(){var t=document.body||document.documentElement,e=document.getElementById(C);e||((e=document.createElement("div")).id=C,e.className="pop-up-modal-mask",e.setAttribute("data-mask-type","pop-up-modal-mask"),e.setAttribute("role","dialog"),e.setAttribute("aria-modal","true")),t&&!e.parentElement&&t.appendChild(e);var n=e.style,r=Array.from(document.querySelectorAll(".pop-up-element[data-pop-up-modal]")).reduce((function(t,e){return Math.max(t,Number(e.style.zIndex))}),0);n.zIndex=r-1}():M()}function j(t,e,n){var r=E(),o=null,a=e;e=e||{};var s=(n=n||{}).modal||!n.anchor;n.modal=s,P++,s&&D++;var c=function(t){if(o){s&&D--,P--,o=null,function(t){var e=R(t,!1);e&&(i.unmountComponentAtNode(e),e.parentElement&&e.parentElement.removeChild(e)),0===D&&M()}(r);var e=n&&n.onClose;e&&e(t)}},l=N.bind(null,r,c,t),u={};return o={close:c,update:function(t){l((a=t)||u,n||u)}},l(a||u,n||u),o}},273783:function(t,e,n){"use strict";n.d(e,{Z:function(){return E}});n(382139);var r=n(858255),o=n(607560),i=n(454530),a=n(264659),s=n(904730),c=n(175663),l=n(750591),u=n(575630),d=n(673989),f=n(151119),p=n(72779),h=n.n(p),v=n(202784),m=n(171696);function g(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,u.Z)(t);if(e){var o=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,l.Z)(this,n)}}var y=function(t){(0,c.Z)(n,t);var e=g(n);function n(t){var r;return(0,a.Z)(this,n),r=e.call(this,t),(0,f.Z)((0,d.Z)(r),"_onMouseEnter",(function(t){r._pressedTarget=null,t.preventDefault();var e=r.props,n=e.onMouseEnter,o=e.value;n&&n(o,t)})),(0,f.Z)((0,d.Z)(r),"_onMouseLeave",(function(t){r._pressedTarget=null;var e=t;r._onMouseUpCapture(e)})),(0,f.Z)((0,d.Z)(r),"_onMouseDown",(function(t){t.preventDefault(),r._pressedTarget=null,r._clicked=!1,3!==t.which&&2!==t.button&&(r.setState({pressed:!0}),r._pressedTarget=t.currentTarget,r._clicked=!1,r._mul||(document.addEventListener("mouseup",r._onMouseUpCapture,!0),r._mul=!0))})),(0,f.Z)((0,d.Z)(r),"_onMouseUp",(function(t){if(t.preventDefault(),r._clicked||"keypress"===t.type){var e=r.props,n=e.onClick,o=e.value;!e.disabled&&n&&n(o,t)}r._pressedTarget=null,r._clicked=!1})),(0,f.Z)((0,d.Z)(r),"_onMouseUpCapture",(function(t){r._mul&&(r._mul=!1,document.removeEventListener("mouseup",r._onMouseUpCapture,!0));var e=t.target;r._clicked=r._pressedTarget instanceof HTMLElement&&e instanceof HTMLElement&&(e===r._pressedTarget||e.contains(r._pressedTarget)||r._pressedTarget.contains(e)),r.setState({pressed:!1})})),r._clicked=!1,r._mul=!1,r._pressedTarget=null,r._unmounted=!1,r.state={pressed:!1},r}return(0,s.Z)(n,[{key:"componentWillUnmount",value:function(){this._unmounted=!0,this._mul&&(this._mul=!1,document.removeEventListener("mouseup",this._onMouseUpCapture,!0))}},{key:"render",value:function(){var t=this.props,e=t.className,n=t.disabled,o=t.active,i=t.id,a=t.style,s=t.title,c=t.children,l=this.state.pressed,u=h()(e,{active:o,disabled:n,pressed:l});return(0,r.Z)("span",{"aria-disabled":n,"aria-pressed":l,className:u,disabled:n,id:i,onKeyPress:n?m.Z:this._onMouseUp,onMouseDown:n?m.Z:this._onMouseDown,onMouseEnter:n?m.Z:this._onMouseEnter,onMouseLeave:n?null:this._onMouseLeave,onMouseUp:n?m.Z:this._onMouseUp,role:"button",style:a,tabIndex:n?null:0,title:s},void 0,c)}}]),n}(v.PureComponent),Z=n(427249),b=n(70698),w=n(59821);function _(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,u.Z)(t);if(e){var o=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,l.Z)(this,n)}}var S=(0,Z.Z)("tooltip-surface"),k=function(t){(0,c.Z)(n,t);var e=_(n);function n(){return(0,a.Z)(this,n),e.apply(this,arguments)}return(0,s.Z)(n,[{key:"render",value:function(){var t=this.props.tooltip;return(0,r.Z)("div",{className:"editor-tooltip-view editor-animation-fade-in"},void 0,t)}}]),n}(v.PureComponent),O=function(t){(0,c.Z)(n,t);var e=_(n);function n(t){var r;return(0,a.Z)(this,n),r=e.call(this,t),(0,f.Z)((0,d.Z)(r),"_onMouseEnter",(function(){if(!r._popUp){var t=r.props.tooltip;r._popUp=(0,b.Z)(k,{tooltip:t},{anchor:document.getElementById(r._id),onClose:r._onClose,position:w.lS})}})),(0,f.Z)((0,d.Z)(r),"_onMouseLeave",(function(){r._popUp&&r._popUp.close(),r._popUp=null})),(0,f.Z)((0,d.Z)(r),"_onClose",(function(){r._popUp=null})),r._id=S(),r._popUp=null,r}return(0,s.Z)(n,[{key:"componentWillUnmount",value:function(){this._popUp&&this._popUp.close()}},{key:"render",value:function(){var t=this.props,e=t.tooltip,n=t.children;return(0,r.Z)("span",{"aria-label":e,className:"editor-tooltip-surface","data-tooltip":e,id:this._id,onMouseDown:e&&this._onMouseLeave,onMouseEnter:e&&this._onMouseEnter,onMouseLeave:e&&this._onMouseLeave,role:"tooltip"},void 0,n)}}]),n}(v.PureComponent);function x(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,u.Z)(t);if(e){var o=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,l.Z)(this,n)}}var E=function(t){(0,c.Z)(n,t);var e=x(n);function n(){return(0,a.Z)(this,n),e.apply(this,arguments)}return(0,s.Z)(n,[{key:"render",value:function(){var t=this.props,e=t.icon,n=t.label,a=t.className,s=t.title,c=(0,i.Z)(t,["icon","label","className","title"]),l=h()(a,"editor-custom-button",{"use-icon":!!e});return(0,r.Z)(O,{tooltip:s},void 0,v.createElement(y,(0,o.Z)({},c,{className:l}),e,n))}}]),n}(v.PureComponent)},291798:function(t,e,n){"use strict";n.d(e,{Z:function(){return _t}});n(382139),n(627476),n(95767),n(898837),n(694882),n(298351);var r=n(417760),o=n(858255),i=n(56470),a=n(264659),s=n(904730),c=n(673989),l=n(175663),u=n(750591),d=n(575630),f=n(151119),p=(n(319371),n(977162)),h=n.n(p),v=n(72779),m=n.n(v),g=n(202784),y=n(928316),Z=n(427249),b=n(320765),w=(n(798184),n(39115),n(296253),n(856997),n(991181),n(850110),n(6059),n(530522),n(489375),Object.freeze({from:0,to:0}));function _(t){if(!window.getSelection)return console.warn("window.getSelection() is not supported"),w;var e=window.getSelection();if(!e.containsNode)return console.warn("selection.containsNode() is not supported"),w;if(!e.rangeCount)return w;var n=e.getRangeAt(0);if(!n)return w;var r=n.startContainer,o=n.endContainer,i=n.startOffset,a=n.endOffset;return r===t||o===t||r&&t.contains(r)||o&&t.contains(o)?{from:i,to:a}:w}var S=function(){function t(e){var n=this;(0,a.Z)(this,t),(0,f.Z)(this,"_observables",[]),(0,f.Z)(this,"_callback",null),(0,f.Z)(this,"_onClick",(function(){var t=n._callback;if(n._observables=n._observables.map((function(t){var e=t.target;return{target:e,selection:_(e)}})),t)return t(n.takeRecords(),n)})),(0,f.Z)(this,"_check",(function(){var t=!1,e=n._callback;if(n._observables=n._observables.map((function(e){var n=e.target,r=e.selection,o=_(n);return r===o||r.from===o.from&&r.to===o.to?e:(t=!0,{target:n,selection:o})})),t&&e)return e(n.takeRecords(),n)})),this._callback=e}return(0,s.Z)(t,[{key:"disconnect",value:function(){var t=this;this._observables.forEach((function(e){var n=e.target;n.removeEventListener("click",t._check,!1),n.removeEventListener("selectionchange",t._check,!1)})),this._observables=[]}},{key:"observe",value:function(t){if(window.getSelection){if(!this._observables.some((function(e){return e.target===t}))){var e={target:t,selection:_(t)};t.addEventListener("click",this._check,!1),t.addEventListener("selectionchange",this._check,!1),this._observables.push(e)}}else console.warn("window.getSelection() is not supported")}},{key:"takeRecords",value:function(){return this._observables.slice(0)}}]),t}();function k(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function O(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?k(Object(n),!0).forEach((function(e){(0,f.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function x(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return E(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function E(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var D="ProseMirror-selectednode",P=new Set,C=new Set;var M,R=new S((function(t,e){if(!window.getSelection)return console.warn("window.getSelection() is not supported"),void e.disconnect();var n=window.getSelection();if(!n.containsNode)return console.warn("selection.containsNode() is not supported"),void e.disconnect();var r,o=x(P);try{for(o.s();!(r=o.n()).done;){var i=r.value,a=i.dom;n.containsNode(a)?i.selectNode():i.deselectNode()}}catch(s){o.e(s)}finally{o.f()}0===P.size&&e.disconnect()})),N=new MutationObserver((function(t,e){var n=document.body;if(n){var r,o=[],i=x(C);try{for(i.s();!(r=i.n()).done;){var a=r.value,s=a.dom;n.contains(s)&&(C.delete(a),o.push(a),a.__renderReactComponent())}}catch(d){i.e(d)}finally{i.f()}var c,l=x(P);try{for(l.s();!(c=l.n()).done;){var u=c.value.dom;n.contains(u)||(P.delete(u),y.unmountComponentAtNode(u))}}catch(d){l.e(d)}finally{l.f()}o.forEach((function(t){return P.add(t)})),0===P.size&&e.disconnect()}})),j=function(){function t(e,n,r,o){(0,a.Z)(this,t),this.props={decorations:o,editorView:n,getPos:r,node:e,selected:!1,focused:!1},C.add(this);var i=this.createDOMElement();this.dom=i,this._selected=null,i.onClick=this._onClick,1===C.size&&(N.observe(document,{childList:!0,subtree:!0}),R.observe(document))}return(0,s.Z)(t,[{key:"update",value:function(t,e){return this.props=O(O({},this.props),{},{node:t}),this.__renderReactComponent(),!0}},{key:"stopEvent",value:function(){return!1}},{key:"selectNode",value:function(){this._selected=!0,this.dom.classList.add(D),this.__renderReactComponent()}},{key:"deselectNode",value:function(){this._selected=!1,this.dom.classList.remove(D),this.__renderReactComponent()}},{key:"createDOMElement",value:function(){throw new Error("not implemented")}},{key:"renderReactComponent",value:function(){throw new Error("not implemented")}},{key:"destroy",value:function(){}},{key:"__renderReactComponent",value:function(){var t=this.props,e=t.editorView,n=t.getPos;if(e.state&&e.state.selection){var r=e.state.selection.from,o=n();this.props.selected=this._selected,this.props.focused=e.focused&&o===r}else this.props.selected=!1,this.props.focused=!1;y.render(this.renderReactComponent(),this.dom)}}]),t}(),I=n(871199),T=n.n(I),A=n(676065),z=n.n(A);function V(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,d.Z)(t);if(e){var o=(0,d.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,u.Z)(this,n)}}var B="text-editor-frame-body";function L(t){return"number"==typeof t?t+"px":T()(t)?"auto":String(t)}g.PureComponent;var F=n(550171),U=n(273783);function H(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,d.Z)(t);if(e){var o=(0,d.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,u.Z)(this,n)}}var W={NONE:{value:null,text:"Inline"},LEFT:{value:"left",text:"Float left"},CENTER:{value:"center",text:"Center"},RIGHT:{value:"right",text:"Float right"}},J=function(t){(0,l.Z)(n,t);var e=H(n);function n(){var t;(0,a.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=e.call.apply(e,[this].concat(o)),(0,f.Z)((0,c.Z)(t),"_onClick",(function(e){t.props.onSelect({align:e})})),t}return(0,s.Z)(n,[{key:"render",value:function(){var t=this.props.value?this.props.value.align:null,e=this._onClick,n=Object.keys(W).map((function(n){var r=W[n],i=r.value,a=r.text;return(0,o.Z)(U.Z,{active:t===i,label:a,onClick:e,value:i},n)}));return(0,o.Z)("div",{className:"editor-inline-editor"},void 0,n)}}]),n}(g.PureComponent),q=n(877119),K=n.n(q),$=n(409961),G=n.n($);function Y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,d.Z)(t);if(e){var o=(0,d.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,u.Z)(this,n)}}var X=(0,Z.Z)("image-resize-box"),Q=20,tt={top:nt,top_right:rt,right:et,bottom_right:rt,bottom:nt,bottom_left:rt,left:et,top_left:rt};function et(t,e,n){t.style.width=e+"px"}function nt(t,e,n){t.style.height=n+"px"}function rt(t,e,n){t.style.width=Math.round(e)+"px",t.style.height=Math.round(n)+"px"}var ot=function(t){(0,l.Z)(n,t);var e=Y(n);function n(t){var r;return(0,a.Z)(this,n),r=e.call(this,t),(0,f.Z)((0,c.Z)(r),"_syncSize",(function(){if(r._active){var t=r.props,e=t.direction,n=t.width,o=t.height,i=(r._x2-r._x1)*(/left/.test(e)?-1:1),a=(r._y2-r._y1)*(/top/.test(e)?-1:1),s=r._el;if(G()(s))throw new Error("Encountered an error: `el` should not be null.");var c=tt[e];if(G()(c))throw new Error("Encountered an error: `fn` should not be null.");var l=n/o,u=K()(Q,n+Math.round(i),1e4),d=K()(Q,o+Math.round(a),1e4);c===rt&&(u=(d=Math.max(u/l,Q))*l),c(s,Math.round(u),Math.round(d)),r._ww=u,r._hh=d}})),(0,f.Z)((0,c.Z)(r),"_onMouseDown",(function(t){t.preventDefault(),t.stopPropagation(),r._end(),r._start(t)})),(0,f.Z)((0,c.Z)(r),"_onMouseMove",(function(t){t.preventDefault(),t.stopPropagation(),r._x2=t.clientX,r._y2=t.clientY,r._rafID=requestAnimationFrame(r._syncSize)})),(0,f.Z)((0,c.Z)(r),"_onMouseUp",(function(t){t.preventDefault(),t.stopPropagation(),r._x2=t.clientX,r._y2=t.clientY;var e=r.props.direction,n=r._el;if(G()(n))throw new Error("Encountered an error: `el` should not be null.");n.classList.remove(e),r._end(),r.props.onResizeEnd(r._ww,r._hh)})),r._active=!1,r._el=null,r._h="",r._rafID=0,r._w="",r._x1=0,r._x2=0,r._y1=0,r._y2=0,r._ww=0,r._hh=0,r}return(0,s.Z)(n,[{key:"componentWillUnmount",value:function(){this._end()}},{key:"_start",value:function(t){this._active&&this._end(),this._active=!0;var e=this.props,n=e.boxID,r=e.direction,o=e.width,i=e.height,a=document.getElementById(n);if(G()(a))throw new Error("Encountered an error: `el` should not be null.");a.className+=" "+r,this._el=a,this._x1=t.clientX,this._y1=t.clientY,this._x2=this._x1,this._y2=this._y1,this._w=this._el.style.width,this._h=this._el.style.height,this._ww=o,this._hh=i,document.addEventListener("mousemove",this._onMouseMove,!0),document.addEventListener("mouseup",this._onMouseUp,!0)}},{key:"_end",value:function(){if(this._active){this._active=!1,document.removeEventListener("mousemove",this._onMouseMove,!0),document.removeEventListener("mouseup",this._onMouseUp,!0);var t=this._el;if(G()(t))throw new Error("Encountered an error: `el` should not be null.");t.style.width=this._w,t.style.height=this._h,t.className="editor-image-resize-box",this._el=null,this._rafID&&cancelAnimationFrame(this._rafID),this._rafID=null}}},{key:"render",value:function(){var t=this.props.direction,e=m()((0,f.Z)({"editor-image-resize-box-control":!0},t,!0));return(0,o.Z)("span",{role:"button",tabIndex:-1,className:e,onMouseDown:this._onMouseDown})}}]),n}(g.PureComponent),it=function(t){(0,l.Z)(n,t);var e=Y(n);function n(t){var r;return(0,a.Z)(this,n),(r=e.call(this,t))._id=X(),r}return(0,s.Z)(n,[{key:"render",value:function(){var t=this.props,e=t.onResizeEnd,n=t.width,r=t.height,i=t.src,a={height:r+"px",width:n+"px"},s=this._id,c=Object.keys(tt).map((function(t){return(0,o.Z)(ot,{boxID:s,config:tt[t],direction:t,height:r,onResizeEnd:e,width:n},t)}));return(0,o.Z)("span",{className:"editor-image-resize-box",id:s,style:a},void 0,c,(0,o.Z)("img",{className:"editor-image-resize-box-image",alt:"Resize Box",src:i}))}}]),n}(g.PureComponent),at=n(59821),st=(n(388416),n(297209)),ct=null,lt=new Map;function ut(t){t.forEach(dt)}function dt(t){var e=t.target,n=lt.get(e);n&&n.forEach((function(e){return e(t)}))}var ft={observe:function(t,e){var n=t,r=ct||(ct=new st.default(ut));if(lt.has(n)){var o=lt.get(n);if(G()(o))throw new Error("Encountered an error: callbacks are missing.");o.push(e)}else{var i=[e];lt.set(n,i),r.observe(n)}},unobserve:function(t,e){var n=ct;if(n){var r=t;if(n.unobserve(r),e){var o=null;if(lt.has(r)){if(o=lt.get(r),G()(o))throw new Error("Encountered an error: callbacks are missing.");o=o.filter((function(t){return t!==e}))}o&&o.length?lt.set(r,o):lt.delete(r)}else lt.delete(r);lt.size||(n.disconnect(),ct=null)}}},pt=n(70698),ht=n(304600);function vt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function mt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?vt(Object(n),!0).forEach((function(e){(0,f.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function gt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,d.Z)(t);if(e){var o=(0,d.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,u.Z)(this,n)}}var yt=(0,Z.Z)("image-node-view"),Zt=1e5,bt={src:"",complete:!1,height:0,width:0};var wt=function(t){(0,l.Z)(n,t);var e=gt(n);function n(t){var r;return(0,a.Z)(this,n),r=e.call(this,t),(0,f.Z)((0,c.Z)(r),"_resolveOriginalSize",(0,i.Z)(h().mark((function t(){var e,n,o;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r._mounted){t.next=2;break}return t.abrupt("return");case 2:return r.setState({originalSize:bt}),e=r.props.node.attrs.src,n=e,t.next=7,(0,ht.Z)(n);case 7:if(o=t.sent,r._mounted){t.next=10;break}return t.abrupt("return");case 10:if(r.props.node.attrs.src===e){t.next=12;break}return t.abrupt("return");case 12:o.complete||(o.width=Q,o.height=Q),r.setState({originalSize:o});case 14:case"end":return t.stop()}}),t)})))),(0,f.Z)((0,c.Z)(r),"_onResizeEnd",(function(t,e){var n=r.props,o=n.getPos,i=n.node,a=n.editorView,s=o(),c=mt(mt({},i.attrs),{},{crop:null,width:t,height:e}),l=a.state.tr,u=a.state.selection;l=(l=l.setNodeMarkup(s,null,c)).setSelection(u.map(l.doc,l.mapping)),a.dispatch(l)})),(0,f.Z)((0,c.Z)(r),"_onChange",(function(t){if(r._mounted){var e=t?t.align:null,n=r.props,o=n.getPos,i=n.node,a=n.editorView,s=o(),c=mt(mt({},i.attrs),{},{align:e}),l=a.state.tr,u=a.state.selection;l=(l=l.setNodeMarkup(s,null,c)).setSelection(u.map(l.doc,l.mapping)),a.dispatch(l)}})),(0,f.Z)((0,c.Z)(r),"_onBodyRef",(function(t){if(t){r._body=t;var e=y.findDOMNode(t);e instanceof HTMLElement&&ft.observe(e,r._onBodyResize)}else{var n=r._body&&y.findDOMNode(r._body);n instanceof HTMLElement&&ft.unobserve(n),r._body=null}})),(0,f.Z)((0,c.Z)(r),"_onBodyResize",(function(t){var e=r._body?function(t){for(var e=t.parentElement;e&&!e.offsetParent;)e=e.parentElement;if(e&&e.offsetParent&&e.offsetParent.offsetWidth&&e.offsetParent.offsetWidth>0){var n=e.offsetParent,r=t.ownerDocument.defaultView.getComputedStyle(n),o=n.clientWidth-4;return"border-box"===r.boxSizing&&(o-=parseInt(r.paddingLeft,10)+parseInt(r.paddingRight,10)),Math.max(o,Q)}return Zt}(y.findDOMNode(r._body)):Zt;r.setState({maxSize:{width:e,height:Zt,complete:!!r._body}})})),r._body=null,r._id=yt(),r._inlineEditor=null,r._mounted=!1,r.state={maxSize:{width:Zt,height:Zt,complete:!1},originalSize:bt},r}return(0,s.Z)(n,[{key:"componentDidMount",value:function(){this._mounted=!0,this._resolveOriginalSize(),this._renderInlineEditor()}},{key:"componentDidUpdate",value:function(t){t.node.attrs.src!==this.props.node.attrs.src&&this._resolveOriginalSize(),this._renderInlineEditor()}},{key:"componentWillUnmount",value:function(){this._mounted=!1,this._inlineEditor&&this._inlineEditor.close(),this._inlineEditor=null}},{key:"_renderInlineEditor",value:function(){var t=this,e=document.getElementById(this._id);if(e&&"true"===e.getAttribute("data-active")){var n={value:this.props.node.attrs,onSelect:this._onChange};this._inlineEditor?this._inlineEditor.update(n):this._inlineEditor=(0,pt.Z)(J,n,{anchor:e,autoDismiss:!1,container:e.closest?e.closest(".".concat(B)):null,position:at.lS,onClose:function(){t._inlineEditor=null}})}else this._inlineEditor&&this._inlineEditor.close()}},{key:"render",value:function(){var t=this.state,e=t.originalSize,n=t.maxSize,r=this.props,i=r.editorView,a=r.node,s=r.selected,c=r.focused,l=i.readOnly,u=a.attrs,d=u.align,f=u.crop,p=u.rotate,h=e===bt,v=!h&&c&&!l&&e.complete,y=e.complete?e.src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",Z=h?1:e.width/e.height,w=!h&&!e.complete,_=u.width,S=u.height;h&&(_=_||24,S=S||24),_&&!S?S=_/Z:S&&!_?_=S*Z:_||S||(_=e.width,S=e.height);var k=1;_>n.width&&(!f||f.width>n.width)&&(S=(_=n.width)/Z,k=n.width/_);var O=m()("editor-image-view-body",{active:v,error:w,focused:c,loading:h,selected:s}),x=!v||f||p?null:(0,o.Z)(it,{height:S,onResizeEnd:this._onResizeEnd,src:y,width:_}),E={display:"inline-block",height:S+"px",left:"0",top:"0",width:_+"px",position:"relative"},D={};if(f){var P=mt({},f);1!==k&&(k=n.width/P.width,P.width*=k,P.height*=k,P.left*=k,P.top*=k),D.width=P.width+"px",D.height=P.height+"px",E.left=P.left+"px",E.top=P.top+"px"}p&&(D.transform="rotate(".concat(p,"rad)"));var C=null;u.meta&&(C=(0,o.Z)("pre",{className:"img-tooltip"},void 0,u.meta));var M=w?(0,o.Z)("span",{className:"editor-image-view-error"},void 0,F.Z.error," "):null,R=w?"".concat(b.a.t("TextEditor:unable-to-load-image")," ").concat(u.src||""):void 0,N=(0,o.Z)("img",{alt:"",className:"editor-image-view-body-img","data-align":d,height:S,id:"".concat(this._id,"-img"),src:y,width:_});return(0,o.Z)(g.Fragment,{},void 0,C,g.createElement("span",{className:O,"data-active":v?"true":void 0,"data-original-src":String(u.src),id:this._id,ref:this._onBodyRef,title:R},(0,o.Z)("span",{className:"editor-image-view-body-img-clip",style:D},void 0,(0,o.Z)("span",{style:E},void 0,M,N)),x))}}]),n}(g.PureComponent),_t=function(t){(0,l.Z)(n,t);var e=gt(n);function n(){return(0,a.Z)(this,n),e.apply(this,arguments)}return(0,s.Z)(n,[{key:"createDOMElement",value:function(){var t=this,e=document.createElement("span");return e.className="editor-image-view",e.addEventListener("dragstart",(function(e){var n=document.createElement("img");n.src=t.props.node.attrs.src,e.dataTransfer.setDragImage(n,0,0)}),!1),this._updateDOM(e),e}},{key:"update",value:function(t,e){return(0,r.Z)((0,d.Z)(n.prototype),"update",this).call(this,t,e),this._updateDOM(this.dom),!0}},{key:"renderReactComponent",value:function(){return g.createElement(wt,this.props)}},{key:"_updateDOM",value:function(t){var e=this.props.node.attrs.align,n="editor-image-view";e&&(n+=" align-"+e),t.className=n}}]),n}(j)},111057:function(t,e,n){"use strict";n(382139);var r=n(858255),o=n(264659),i=n(904730),a=n(673989),s=n(175663),c=n(750591),l=n(575630),u=n(151119),d=n(202784),f=n(320765),p=n(871685),h=n(273783),v=n(171696);function m(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,l.Z)(t);if(e){var o=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}var g=/\s/,y=function(t){(0,s.Z)(n,t);var e=m(n);function n(){var t;(0,o.Z)(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t=e.call.apply(e,[this].concat(i)),(0,u.Z)((0,a.Z)(t),"state",{url:t.props.href}),(0,u.Z)((0,a.Z)(t),"_onKeyDown",(function(e){13===e.keyCode&&(e.preventDefault(),t._apply())})),(0,u.Z)((0,a.Z)(t),"_onURLChange",(function(e){var n=e.target.value;t.setState({url:n})})),(0,u.Z)((0,a.Z)(t),"_cancel",(function(){t.props.close()})),(0,u.Z)((0,a.Z)(t),"_apply",(function(){var e=t.state.url;e&&!g.test(e)&&t.props.close((0,p.Z)(e))})),t}return(0,i.Z)(n,[{key:"render",value:function(){var t=this.props.href,e=this.state.url,n=!!e&&g.test(e),o=f.a.t("TextEditor:apply"),i=!!n;return t?(o=e?f.a.t("TextEditor:apply"):f.a.t("TextEditor:remove"),i=n):i=n||!e,(0,r.Z)("div",{className:"image-url-editor"},void 0,(0,r.Z)("form",{className:"editor-form",onSubmit:v.Z},void 0,(0,r.Z)("fieldset",{},void 0,(0,r.Z)("legend",{},void 0,f.a.t("TextEditor:add-link")),(0,r.Z)("input",{autoFocus:!0,onChange:this._onURLChange,onKeyDown:this._onKeyDown,placeholder:f.a.t("TextEditor:paste-url"),spellCheck:!1,type:"text",value:e||""})),(0,r.Z)("div",{className:"editor-form-buttons"},void 0,(0,r.Z)(h.Z,{label:f.a.t("TextEditor:cancel"),onClick:this._cancel}),(0,r.Z)(h.Z,{active:!0,disabled:i,label:o,onClick:this._apply}))))}}]),n}(d.PureComponent);e.Z=y},59821:function(t,e,n){"use strict";n.d(e,{SC:function(){return o},lS:function(){return i},Oi:function(){return a},ID:function(){return s},DL:function(){return c}});var r=n(615581);function o(t,e){var n={x:0,y:0,w:0,h:0};if(t&&e){n.x=t.x,n.y=t.y+t.h;var o=window.innerWidth,i=window.innerHeight;n.x+e.w>o&&(n.x=t.x-e.w+t.w),n.y+e.h>i&&(n.y=Math.max(t.y-e.h,2))}return t&&!(0,r.zb)(t)||(n.x=-1e4),n}function i(t,e){var n={x:0,y:0,w:0,h:0};return t&&e&&(n.x=Math.max(t.x-(e.w-t.w)/2,10),n.y=t.y+t.h),t&&!(0,r.zb)(t)||(n.x=-1e4),n}function a(t,e){var n={x:0,y:0,w:0,h:0};return e&&(n.x=(window.innerWidth-e.w)/2,n.y=(window.innerHeight-e.h)/2),e&&!(0,r.zb)(e)||(n.x=-1e4),n}function s(t,e){var n={x:0,y:0,w:0,h:0};return t&&e&&(n.x=t.x+t.w+1-e.w,n.y=t.y),t&&!(0,r.zb)(t)||(n.x=-1e4),n}function c(t,e){var n={x:0,y:0,w:0,h:0};return t&&e&&(n.x=t.x+(t.w-e.w)/2,n.y=t.y),t&&!(0,r.zb)(t)||(n.x=-1e4),n}},171696:function(t,e,n){"use strict";function r(t){t.preventDefault()}n.d(e,{Z:function(){return r}})},615581:function(t,e,n){"use strict";function r(t){return 0===t.w||0===t.h}function o(t,e,n){var r=n||0;return!(e.x-r>t.x+t.w+r||e.x+e.w+r<t.x-r||e.y-r>t.y+t.h+r||e.y+e.h+r<t.y-r)}function i(t,e,n){return{x:t-(n=n||0),y:e-n,w:2*n,h:2*n}}function a(t){if("contents"===document.defaultView.getComputedStyle(t).display&&1===t.children.length)return a(t.children[0]);var e=t.getBoundingClientRect();return{x:e.left,y:e.top,w:e.width,h:e.height}}n.d(e,{zb:function(){return r},vY:function(){return o},mv:function(){return i},hs:function(){return a}})},304600:function(t,e,n){"use strict";n.d(e,{Z:function(){return f}});n(627476),n(95767),n(898837),n(694882),n(298351);var r=n(151119),o=(n(175115),n(296253),n(940851),n(900883)),i=n(700601),a=n.n(i);var s=function(){return!!a()(window.navigator,"onLine")&&!window.navigator.onLine};function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var l={},u=[];function d(){var t=u.shift();t&&function(t,e,n){var i={complete:!1,height:0,naturalHeight:0,naturalWidth:0,src:t||"",width:0};if(s())return void e(i);var a=t||"";if(!a)return void e(i);if(l[a]){var u=Object.assign({},l[a]);return void e(u)}var f,p=o.parse(a),h=p.protocol,v=p.port;if(!/(http:|https:|data:)/.test(h||window.location.protocol)||v)return void e(i);var m=function(){f&&(i.width=f.width,i.height=f.height,i.naturalWidth=f.width,i.naturalHeight=f.height,i.complete=!0),e(i),y(),l[a]=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){(0,r.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},i)},g=function(){e(i),y()};function y(){if(f){if(f instanceof HTMLElement){var t=f.parentNode;t&&t.removeChild(f)}f.onload=null,f.onerror=null,f=null}d()}var Z=document.body;Z?((f=document.createElement("img")).style.cssText="position:fixed;left:-10000000000px;width:auto;height:auto;",f.onload=m,f.onerror=g,f.src=a,Z.appendChild(f)):((f=new Image).onload=m,f.onerror=g,f.src=a)}(t.src,t.resolve,t.reject)}var f=function(t){return new Promise((function(e,n){var r={src:t,resolve:e,reject:n};u.push(r),d()}))}},640987:function(t,e,n){"use strict";var r=n(264659),o=n(904730),i=n(151119),a=(n(296253),n(940851),n(630709));function s(t,e){var n=t[e];return"tr"===e&&n instanceof a.wx?n.setMeta("dryrun",!0):n}function c(t,e,n){return t[e]=n,!0}var l=function(){function t(){var e=this;(0,r.Z)(this,t),(0,i.Z)(this,"shouldRespondToUIEvent",(function(e){return e.type===t.EventType.CLICK})),(0,i.Z)(this,"active",(function(t){return!1})),(0,i.Z)(this,"enable",(function(t,n){return e.dryRun(t,n)})),(0,i.Z)(this,"dryRun",(function(t,n){var r=window.Proxy,o=r?new r(t,{get:s,set:c}):t;return e.run(o,null,n)})),(0,i.Z)(this,"run",(function(t,n,r,o){return e.waitForUserInput(t,n,r,o).then((function(o){e.executeWithUserInput(t,n,r,o)})).catch((function(t){console.error(t)})),!1})),(0,i.Z)(this,"waitForUserInput",(function(t,e,n,r){return Promise.resolve(void 0)})),(0,i.Z)(this,"executeWithUserInput",(function(t,e,n,r){return!1}))}return(0,o.Z)(t,[{key:"cancel",value:function(){}}]),t}();(0,i.Z)(l,"EventType",{CLICK:"mouseup",MOUSEENTER:"mouseenter"}),e.Z=l},781234:function(t,e,n){"use strict";n(21466);e.Z=function(t){var e=t.match(/[a-zA-Z0-9_\u0392-\u03c9\u0410-\u04F9]+|[\u4E00-\u9FFF\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af]+/g),n=0;if(null===e)return n;for(var r=0;r<e.length;r++)e[r].charCodeAt(0)>=19968?n+=e[r].length:n+=1;return n}},335700:function(t,e,n){"use strict";n(95767),n(530522),n(39115),n(296253),n(856997),n(991181);var r=n(911755),o=n.n(r),i=n(268874),a=n(770290),s=o()("isle:text-editor");e.Z=function(t,e){s("Handle drop event...");var n={x:e.clientX,y:e.clientY},r=t.posAtCoords({left:n.x,top:n.y}),o=r?r.pos:null,c=e.dataTransfer;if(c&&c.files&&c.files.length>0){e.preventDefault();var l=c.files,u=Array.from(l);(0,a.q)(t,u,n)&&(0,i.wM)(t)}else(0,i.yz)(t,o)}},720468:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return Ke}});n(382139);var r=n(607560),o=n(858255),i=n(264659),a=n(904730),s=n(673989),c=n(175663),l=n(750591),u=n(575630),d=n(151119),f=n(56470),p=n(977162),h=n.n(p),v=(n(6059),n(59357),n(319371),n(898837),n(217732),n(850110),n(202784)),m=(n(213980),n(313054)),g=n.n(m),y=n(912895),Z=n.n(y),b=n(198),w=n(780594),_=n.n(w),S=n(844601),k=n(208910),O=n(778886),x=n(927447),E=n(911755),D=n.n(E),P=n(867696),C=n(207315),M=n.n(C),R=n(224008),N=n.n(R),j=n(306830),I=n.n(j),T=n(294565),A=n(302467),z=n.n(A),V=n(569257),B=n.n(V),L=n(42111),F=n(42720),U=n(423879),H=n(819690),W=n(220517),J=n(741319),q=n(229511),K=n(550171),$=n(621150),G=(n(440856),n(516037)),Y=function(t,e,n){this.step=t,this.inverted=e,this.origin=n};var X=function(t,e){this.version=t,this.unconfirmed=e};var Q=new G.PluginKey("collab");function tt(t){return void 0===t&&(t={}),t={version:t.version||0,clientID:null==t.clientID?Math.floor(4294967295*Math.random()):t.clientID},new G.Plugin({key:Q,state:{init:function(){return new X(t.version,[])},apply:function(t,e){var n=t.getMeta(Q);return n||(t.docChanged?new X(e.version,e.unconfirmed.concat(function(t){for(var e=[],n=0;n<t.steps.length;n++)e.push(new Y(t.steps[n],t.steps[n].invert(t.docs[n]),t));return e}(t))):e)}},config:t,historyPreserveItems:!0})}function et(t,e,n,r){for(var o=Q.getState(t),i=o.version+e.length,a=Q.get(t).spec.config.clientID,s=0;s<n.length&&n[s]==a;)++s;var c=o.unconfirmed.slice(s);if(!(e=s?e.slice(s):e).length)return t.tr.setMeta(Q,new X(i,c));var l=c.length,u=t.tr;if(l)c=function(t,e,n){for(var r=t.length-1;r>=0;r--)n.step(t[r].inverted);for(var o=0;o<e.length;o++)n.step(e[o]);for(var i=[],a=0,s=t.length;a<t.length;a++){var c=t[a].step.map(n.mapping.slice(s));s--,c&&!n.maybeStep(c).failed&&(n.mapping.setMirror(s,n.steps.length-1),i.push(new Y(c,c.invert(n.docs[n.docs.length-1]),t[a].origin)))}return i}(c,e,u);else{for(var d=0;d<e.length;d++)u.step(e[d]);c=[]}var f=new X(i,c);return r&&r.mapSelectionBackward&&t.selection instanceof G.TextSelection&&(u.setSelection(G.TextSelection.between(u.doc.resolve(u.mapping.map(t.selection.anchor,-1)),u.doc.resolve(u.mapping.map(t.selection.head,-1)),-1)),u.updated&=-2),u.setMeta("rebased",l).setMeta("addToHistory",!1).setMeta(Q,f)}function nt(t){return Q.getState(t).version}var rt=n(630709),ot=n(506565),it=n(603423),at=n(151300),st=n.n(at),ct=n(437069),lt=n.n(ct),ut=n(150275),dt=n(8706),ft=n(814346),pt=n(234648),ht=n(828919),vt=(n(52310),function t(e,n){(0,i.Z)(this,t),this.id=n,this.text=e});function mt(t,e,n){return ot.p.inline(t,e,{class:"comment"},{comment:n})}var gt=function(){function t(e,n,r){(0,i.Z)(this,t),this.version=e,this.decos=n,this.unsent=r}return(0,a.Z)(t,[{key:"findComment",value:function(t){for(var e=this.decos.find(),n=0;n<e.length;n++)if(e[n].spec.comment.id===t)return e[n]}},{key:"commentsAt",value:function(t){return this.decos.find(t,t)}},{key:"apply",value:function(e){var n=e.getMeta(yt),r=n&&n.type;if(!n&&!e.docChanged)return this;var o=this;"receive"===r&&(o=o.receive(n,e.doc));var i=o.decos,a=o.unsent;return i=i.map(e.mapping,e.doc),"newComment"===r?(i=i.add(e.doc,[mt(n.from,n.to,n.comment)]),a=a.concat(n)):"deleteComment"===r&&(i=i.remove([this.findComment(n.comment.id)]),a=a.concat(n)),new t(o.version,i,a)}},{key:"receive",value:function(e,n){for(var r=e.version,o=e.events,i=e.sent,a=this.decos,s=0;s<o.length;s++){var c=o[s];if("delete"===c.type){var l=this.findComment(c.id);l&&(a=a.remove([l]))}else this.findComment(c.id)||(a=a.add(n,[mt(c.from,c.to,new vt(c.text,c.id))]))}return new t(r,a,this.unsent.slice(i))}},{key:"unsentEvents",value:function(){for(var t=[],e=0;e<this.unsent.length;e++){var n=this.unsent[e];if("newComment"===n.type){var r=this.findComment(n.comment.id);r&&t.push({type:"create",id:n.comment.id,from:r.from,to:r.to,text:n.comment.text})}else t.push({type:"delete",id:n.comment.id})}return t}}],[{key:"init",value:function(e){var n=e.comments.comments.map((function(t){return mt(t.from,t.to,new vt(t.text,t.id))}));return new t(e.comments.version,ot.EH.create(e.doc,n),[])}}]),t}(),yt=new G.Plugin({state:{init:gt.init,apply:function(t,e){return e.apply(t)}},props:{decorations:function(t){return this.getState(t).decos}}}),Zt=function(t){return new G.Plugin({props:{decorations:function(e){return function(t,e){var n=t.selection;if(!n.empty)return null;var r=yt.getState(t).commentsAt(n.from);if(!r.length)return null;return ot.EH.create(t.doc,[ot.p.widget(n.from,bt(r,e,t))])}(e,t)}}})};function bt(t,e,n){var r=document.createElement("div");r.className="tooltip-wrapper";var o=document.createElement("ul");o.className="commentList";for(var i=0;i<t.length;i++){var a=wt(t[i].spec.comment,e,n);o.appendChild(a)}return r.appendChild(o),r}function wt(t,e,n){var r=document.createElement("button");r.className="commentDelete",r.title="Delete annotation",r.innerHTML="x",r.addEventListener("click",(function(){return e(n.tr.setMeta(yt,{type:"deleteComment",comment:t}))}));var o=document.createElement("li");return o.className="commentText",o.innerHTML=t.text,o.appendChild(r),o}var _t=D()("isle:text-editor"),St="cursor-widget",kt=dt.D.length,Ot=new G.Plugin({state:{init:function(){return{decorations:ot.EH.empty,version:0}},apply:function(t,e){var n,r=t.getMeta(this);if(r&&r.cursors){var o=lt()(r.cursors);n=ot.EH.empty;for(var i=0;i<o.length;i++){var a=o[i];if(a!==r.clientID){var s=document.createElement("span");s.className="editor-collaborative-cursor";var c=document.createElement("span");c.className="editor-collaborative-cursor-line",c.style="background-color: ".concat(dt.D[i%kt]),s.appendChild(c);var l=document.createElement("span");l.innerHTML=a,l.className="editor-collaborative-cursor-text",l.style="background-color: ".concat(dt.D[i%kt]),s.appendChild(l);var u=r.cursors[a],d=u.from,f=u.to;if(_t("Should display cursor at position: "+d),d!==f){if(d>f){var p=f;f=d,d=p}n=n.add(t.doc,[ot.p.widget(d,s,{PLACEHOLDER_ID:St}),ot.p.inline(d,f,{style:"background-color: ".concat(dt.b[i%kt],";")})])}else n=n.add(t.doc,[ot.p.widget(d,s,{PLACEHOLDER_ID:St})])}}return{decorations:n,version:r.version||e.version+1}}return e}},props:{decorations:function(t){return this.getState(t).decorations}}}),xt=n(19509),Et=n(268874),Dt=n(291798),Pt=n(781234),Ct=n(335700),Mt=n(505455),Rt=n(964909);function Nt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,u.Z)(t);if(e){var o=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,l.Z)(this,n)}}var jt=D()("isle:collaborative-view"),It={mapSelectionBackward:!0};var Tt=function t(e,n){(0,i.Z)(this,t),this.edit=e,this.comm=n};var At=function(t){return(0,o.Z)("div",{className:"prose-statusbar"},void 0,t.nUsers&&t.docname?(0,o.Z)("span",{className:"docinfo"},void 0,t.t("connected-to"),":",(0,o.Z)("span",{className:"connected",style:{marginLeft:5}},void 0,(0,o.Z)("span",{className:"docname"},void 0,t.docname,", "),(0,o.Z)("span",{className:"users",style:{marginLeft:5}},void 0,(e=t.nUsers)+" user"+(1===e?"":"s")+":",t.userList.map((function(t,e){return(0,o.Z)(ut.Z,{tooltip:t,placement:"top"},"".concat(t,"-").concat(e),(0,o.Z)("span",{className:"prose-statusbar-user-badge",style:{backgroundColor:dt.D[e%dt.D.length]}}))}))))):null,t.nWords?(0,o.Z)("span",{},void 0,t.t("words"),": ",t.nWords):null,t.nChars?(0,o.Z)("span",{style:{marginLeft:5}},void 0,t.t("characters"),": ",t.nChars):null);var e},zt=function(t){(0,c.Z)(n,t);var e=Nt(n);function n(t){var r;return(0,i.Z)(this,n),r=e.call(this,t),(0,d.Z)((0,s.Z)(r),"replaceEditorState",(function(){if(!r.dispatchState)return setTimeout(r.replaceEditorState,100);var t=r.dispatchState.edit,e=new G.AllSelection(t.doc),n=st()(r.props.defaultValue)?Node.fromJSON(ht.Z,JSON.parse(r.props.defaultValue)):(0,Mt.Z)(r.props.defaultValue);r.dispatch({type:"transaction",transaction:t.tr.replaceWith(e.from,e.to,n)})})),(0,d.Z)((0,s.Z)(r),"send",(function(t,e){var n=e.steps,o=e.comments,i=e.cursor;jt("Send current actions to server...");var a={version:nt(t),steps:n?n.steps.map((function(t){return t.toJSON()})):[],cursor:i,clientID:r.props.session.user.name||r.props.session.anonymousIdentifier,comment:o||[]};r.props.session.sendCollaborativeEvents(r.props.id,a)})),(0,d.Z)((0,s.Z)(r),"onEditorState",(function(t){var e=0,n=0;t.doc.forEach((function(t){t.forEach((function(t){t.text&&(e+=t.text.length,n+=(0,Pt.Z)(t.text))}))})),r.nWords=n,r.nChars=e,r.props.onEditorState(t),r.forceUpdate()})),(0,d.Z)((0,s.Z)(r),"dispatchTransaction",(function(t){r.dispatch({type:"transaction",transaction:t})})),r.doc=st()(t.defaultValue)?t.defaultValue:(0,Mt.Z)(t.defaultValue).toJSON(),r.lastCursor={from:null,to:null},r.state={nUsers:null,userList:[]},r}return(0,a.Z)(n,[{key:"componentDidMount",value:function(){var t=this,e=this.props.session;this.unsubscribe=e.subscribe((function(n,r){n!==Rt.At&&n!==Rt.E7||t.dispatchState||t.props.session.joinCollaborativeEditing(t.props.id,t.doc),n===Rt.qG&&r.id==="".concat(e.namespaceID,"-").concat(e.lessonID,"-").concat(t.props.id)?(jt("Joined collaborative editing..."),t.handleStart(r.data)):n===Rt.ug&&r.id==="".concat(e.namespaceID,"-").concat(e.lessonID,"-").concat(t.props.id)?"polling"===t.dispatchState.comm&&t.handlePollResponse(r.data):n===Rt.t0&&r.id==="".concat(e.namespaceID,"-").concat(e.lessonID,"-").concat(t.props.id)?(jt("Received response after sending collaborative editing events..."),"send"===t.dispatchState.comm&&t.handleSendResponse(r.data)):n===Rt.q$&&r.id==="".concat(e.namespaceID,"-").concat(e.lessonID,"-").concat(t.props.id)&&(jt("Received info that other user updated the document "+JSON.stringify(r.data)+"[comm="+t.dispatchState.comm+"]"),"listening"===t.dispatchState.comm&&t.dispatch({type:"polling"}))})),this.dispatchState||this.props.session.joinCollaborativeEditing(this.props.id,this.doc)}},{key:"componentDidUpdate",value:function(t){this.props.defaultValue===t.defaultValue&&this.props.docId===t.docId||this.replaceEditorState()}},{key:"componentWillUnmount",value:function(){this.view&&this.view.destroy(),this.unsubscribe&&this.unsubscribe()}},{key:"dispatch",value:function(t){var e,n=this,r=null;if("loaded"===t.type){var o=G.EditorState.create({doc:t.doc,schema:ht.Z,plugins:ft.Z.concat([tt({version:t.version,clientID:this.props.session.user.name||this.props.session.anonymousIdentifier}),yt,Zt((function(t){return n.dispatch({type:"transaction",transaction:t})})),Ot]),comments:t.comments});this.dispatchState=new Tt(o,"listening"),this.setState({nUsers:t.users,userList:lt()(t.cursors)})}else if("restart"===t.type)this.dispatchState=new Tt(null,"start"),this.props.session.joinCollaborativeEditing(this.props.id);else if("listening"===t.type)this.dispatchState=new Tt(this.dispatchState.edit,"listening");else if("polling"===t.type)this.dispatchState=new Tt(this.dispatchState.edit,"polling"),this.poll();else if("recover"===t.type)this.dispatchState=new Tt(this.dispatchState.edit,"recover"),this.recover();else if("transaction"===t.type){r=this.dispatchState.edit.apply(t.transaction);var i=(0,it.fixTables)(r);i&&(r=r.apply(i.setMeta("addToHistory",!1)))}r&&(r.doc.content.size>4e4?("detached"!==this.dispatchState.comm&&jt("Document too big. Detached."),this.dispatchState=new Tt(r,"detached")):("listening"===this.dispatchState.comm||t.requestDone)&&(e=this.sendable(r))?(this.dispatchState=new Tt(r,"send"),this.send(r,e)):t.requestDone?this.dispatchState=new Tt(r,"listening"):this.dispatchState=new Tt(r,this.dispatchState.comm),this.onEditorState(this.dispatchState.edit));this.dispatchState.edit?this.view?this.view.updateState(this.dispatchState.edit):(jt("Create editor view..."),this.setView(new ot.tk(this.editorDiv,{state:this.dispatchState.edit,nodeViews:{footnote:function(t,e,n,r){return new xt.Z(t,e,n,r)},image:function(t,e,n,r){return new Dt.Z(t,e,n,r)},plot:function(t,e,n,r){return new Dt.Z(t,e,n,r)}},dispatchTransaction:this.dispatchTransaction,handleDOMEvents:{dragenter:function(t){jt("Handle drag enter event..."),(0,Et.yz)(t)},drop:Ct.Z}}))):this.setView(null)}},{key:"recover",value:function(){jt("Try to recover from an error..."),"recover"===this.dispatchState.comm&&this.dispatch({type:"polling"})}},{key:"poll",value:function(){var t=yt.getState(this.dispatchState.edit),e=Ot.getState(this.dispatchState.edit),n={version:nt(this.dispatchState.edit),commentVersion:t.version,cursorVersion:e.version};jt("Ask for collaborative editing events "+JSON.stringify(n)+"[comm="+this.dispatchState.comm+"]"),this.props.session.pollCollaborativeEditingEvents(this.props.id,n)}},{key:"setView",value:function(t){this.view&&this.view.destroy(),this.view=t}},{key:"handleSendResponse",value:function(t){if(jt("Handle send response..."),"invalid version"===t)jt("Went out of sync, trying to restart... "),this.dispatch({type:"restart"});else if("version not current"===t)jt("Version is not current, wait for new data..."),this.dispatch({type:"polling"}),this.poll();else if(t){var e=t.steps.map((function(t){return rt.h8.fromJSON(ht.Z,t)})),n=e?et(this.dispatchState.edit,e,function(t,e){for(var n=[],r=0;r<e;r++)n.push(t);return n}(t.clientID,e.length),It):this.dispatchState.edit.tr;n.setMeta(yt,{type:"receive",version:t.commentVersion||0,events:[],sent:t.comment.length}),this.dispatch({type:"transaction",transaction:n,requestDone:!0})}else this.dispatch({type:"recover"})}},{key:"handlePollResponse",value:function(t){if("invalid version"===t||"history no longer available"===t)jt("Too far behind, reverting to server version of document..."),this.dispatch({type:"restart"});else if(t)if(jt("Received response for version: ".concat(t.version," and commentVersion: ").concat(t.commentVersion)),t.steps){var e=Ot.getState(this.dispatchState.edit).version,n=et(this.dispatchState.edit,t.steps.map((function(t){return rt.h8.fromJSON(ht.Z,t)})),t.clientIDs,It);n.setMeta(Ot,{cursors:t.cursors,version:t.cursorVersion,clientID:this.props.session.user.name||this.props.session.anonymousIdentifier}),this.dispatch({type:"transaction",transaction:n,requestDone:!0}),t.cursorVersion!==e&&this.setState({nUsers:t.users,userList:lt()(t.cursors)})}else this.dispatchTransaction({type:"listening"});else this.dispatch({type:"recover"})}},{key:"sendable",value:function(t){var e,n,r=(e=t,0==(n=Q.getState(e)).unconfirmed.length?null:{version:n.version,steps:n.unconfirmed.map((function(t){return t.step})),clientID:Q.get(e).spec.config.clientID,get origins(){return this._origins||(this._origins=n.unconfirmed.map((function(t){return t.origin})))}}),o=t.selection,i={from:(o=o.toJSON()).head,to:o.anchor},a=yt.getState(t).unsentEvents();return r||a.length||i.from!==this.lastCursor.from||i.to!==this.lastCursor.to?(this.lastCursor=i,{steps:r,comments:a,cursor:i}):null}},{key:"handleStart",value:function(t){if(!t)return jt("Encountered error while starting. Aborting.");jt("Starting with version: ".concat(t.version," and commentVersion: ").concat(t.commentVersion)),this.dispatch({type:"loaded",doc:ht.Z.nodeFromJSON(t.doc),version:t.version,users:t.users,cursors:t.cursors,comments:{version:t.commentVersion,comments:t.comments}})}},{key:"render",value:function(){var t=this;return(0,o.Z)(v.Fragment,{},void 0,(0,o.Z)(pt.Z,{menu:this.props.menu,state:this.dispatchState?this.dispatchState.edit:null,dispatch:this.dispatchTransaction,view:this.view,fullscreen:this.props.fullscreen,showColorPicker:this.props.showColorPicker,onColorChoice:this.props.onColorChoice}),v.createElement("div",{ref:function(e){t.editorDiv=e,t.props.onMount(t.editorDiv)}}),(0,o.Z)(At,{nWords:this.nWords,nChars:this.nChars,nUsers:this.state.nUsers,userList:this.state.userList,docname:this.props.id,t:this.props.t}))}}]),n}(v.Component);zt.defaultProps={onColorChoice:function(){},onEditorState:function(){},onMount:function(){}};var Vt=(0,b.Z)("text-editor")(zt),Bt=(n(627476),n(95767),n(694882),n(298351),n(770561)),Lt=n(998283),Ft=n(72779),Ut=n.n(Ft),Ht=n(429658),Wt=["as","className","fluid","bsPrefix"],Jt=v.forwardRef((function(t,e){var n,o=t.as,i=void 0===o?"div":o,a=t.className,s=t.fluid,c=t.bsPrefix,l=(0,Lt.Z)(t,Wt),u=((n={})[c=(0,Ht.vE)(c,"jumbotron")]=!0,n[c+"-fluid"]=s,n);return v.createElement(i,(0,r.Z)({ref:e},l,{className:Ut()(a,u)}))}));Jt.defaultProps={fluid:!1},Jt.displayName="Jumbotron";var qt,Kt,$t,Gt,Yt,Xt,Qt=Jt,te=n(423184),ee=n(144571),ne=n(205342);function re(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function oe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?re(Object(n),!0).forEach((function(e){(0,d.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):re(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ie(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,u.Z)(t);if(e){var o=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,l.Z)(this,n)}}var ae=function(t){(0,c.Z)(r,t);var e,n=ie(r);function r(t){var e;(0,i.Z)(this,r),e=n.call(this,t),(0,d.Z)((0,s.Z)(e),"_createEditorView",(function(t){e.editorDiv=t,null!==t&&(e.editorView=new ot.tk(t,{state:e.state.editorState,dispatchTransaction:e.dispatchTransaction,editable:function(){return!1},nodeViews:{footnote:function(t,e,n,r){return new xt.Z(t,e,n,r)},image:function(t,e,n,r){return new Dt.Z(t,e,n,r)},plot:function(t,e,n,r){return new Dt.Z(t,e,n,r)},plotContainer:function(t,e,n,r){return new Dt.Z(t,e,n,r)}}}))})),(0,d.Z)((0,s.Z)(e),"addStep",(function(){if(e.state.running){var t=e.state.editorState,n=t.tr,r=e.state.document.steps[e.state.counter],o=oe(oe({},e.state.cursors),{},(0,d.Z)({},r.clientID,{from:r.from,to:r.to}));n.setMeta(Ot,{cursors:o,version:1,clientID:""});var i=rt.h8.fromJSON(ht.Z,r),a=i.invert(n.doc);a.clientID=r.clientID,n.maybeStep(i);var s=t.apply(n);e.editorView.updateState(s);var c=e.state.counter+1,l=e.state.invertedSteps.slice();l[e.state.counter]=a;var u=0,f=0;s.doc.forEach((function(t){t.forEach((function(t){t.text&&(u+=t.text.length,f+=(0,Pt.Z)(t.text))}))})),e.setState({counter:c,editorState:s,nChars:u,nWords:f,invertedSteps:l,cursors:o},(function(){c<e.state.document.steps.length&&(e.timeoutID=setTimeout(e.addStep,e.state.interval))}))}})),(0,d.Z)((0,s.Z)(e),"fastForward",(function(){if(e.state.running)return e.reset(null,e.fastForward);for(var t=e.state.editorState,n=e.state.invertedSteps.slice(),r=0;r<e.state.document.steps.length;r++){var o=t.tr,i=e.state.document.steps[r],a=rt.h8.fromJSON(ht.Z,i),s=a.invert(o.doc);s.clientID=i.clientID,o.maybeStep(a),t=t.apply(o),n[r]=s}e.editorView.updateState(t);var c=0,l=0;t.doc.forEach((function(t){t.forEach((function(t){t.text&&(c+=t.text.length,l+=(0,Pt.Z)(t.text))}))})),e.setState({counter:e.state.document.steps.length,editorState:t,nWords:l,nChars:c,invertedSteps:n,running:!1})})),(0,d.Z)((0,s.Z)(e),"subtractStep",(function(){if(e.state.running){var t=e.state.editorState,n=t.tr,r=e.state.counter-1,o=e.state.invertedSteps[r],i=oe(oe({},e.state.cursors),{},(0,d.Z)({},o.clientID,{from:o.from,to:o.to}));n.setMeta(Ot,{cursors:i,version:1,clientID:""}),n.maybeStep(o);var a=t.apply(n);e.editorView.updateState(a);var s=0,c=0;a.doc.forEach((function(t){t.forEach((function(t){t.text&&(s+=t.text.length,c+=(0,Pt.Z)(t.text))}))})),e.setState({counter:r,editorState:a,nChars:s,nWords:c},(function(){r>0&&(e.timeoutID=setTimeout(e.subtractStep,e.state.interval))}))}})),(0,d.Z)((0,s.Z)(e),"reset",(function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I();e.timeoutID&&clearTimeout(e.timeoutID);var r=e.props.defaultValue,o=st()(r)?Node.fromJSON(ht.Z,JSON.parse(r)):(0,Mt.Z)(r),i=G.EditorState.create({doc:o,schema:ht.Z,plugins:ft.Z.concat([Ot]),cursors:{}});e.editorView.updateState(i),e.setState({editorState:i,counter:0,nChars:0,nWords:0,running:!1},n)})),(0,d.Z)((0,s.Z)(e),"playBackward",(function(){e.setState({running:!0},e.subtractStep)})),(0,d.Z)((0,s.Z)(e),"playForward",(function(){e.setState({running:!0},e.addStep)})),(0,d.Z)((0,s.Z)(e),"stop",(function(){e.setState({running:!1}),e.timeoutID&&clearTimeout(e.timeoutID)})),(0,d.Z)((0,s.Z)(e),"handleRestore",(function(){e.props.onRestore(e.state.editorState.doc.content)}));var o=t.defaultValue,a=st()(o)?Node.fromJSON(ht.Z,JSON.parse(o)):(0,Mt.Z)(o);return e.state={editorState:G.EditorState.create({doc:a,schema:ht.Z,plugins:ft.Z.concat([Ot])}),document:null,counter:0,interval:100,running:!1,nWords:0,nChars:0,invertedSteps:[],cursors:{}},e}return(0,a.Z)(r,[{key:"componentDidMount",value:(e=(0,f.Z)(h().mark((function t(){var e,n;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((e=this.props.session).anonymous){t.next=6;break}return t.next=4,e.getTextEditorDocument(this.props.docId);case 4:"ok"===(n=t.sent).data.message&&this.setState({document:n.data.document});case 6:case"end":return t.stop()}}),t,this)}))),function(){return e.apply(this,arguments)})},{key:"componentWillUnmount",value:function(){this.timeoutID&&clearTimeout(this.timeoutID)}},{key:"render",value:function(){var t,e=this,n=this.state,r=n.document,i=n.counter,a=this.props,s=a.t,c=a.session.anonymous;return t=c?(0,o.Z)(Qt,{},void 0,s("history-only-available-for-users")):v.createElement("div",{ref:this._createEditorView}),(0,o.Z)(v.Fragment,{},void 0,(0,o.Z)(Bt.Z,{variant:"light",onClick:this.props.onClose},void 0,qt||(qt=(0,o.Z)("i",{className:"fas fa-arrow-left"}))),(0,o.Z)("span",{className:"title text-editor-playback-title"},void 0,s("document-history")),(0,o.Z)(te.Z,{},void 0,(0,o.Z)(ut.Z,{tooltip:s("jump-to-beginning"),show:!c,placement:"bottom"},void 0,(0,o.Z)(Bt.Z,{variant:"light",onClick:this.reset,disabled:c},void 0,Kt||(Kt=(0,o.Z)("i",{className:"fas fa-fast-backward"})))),(0,o.Z)(ut.Z,{tooltip:s("play-in-reverse"),show:!c&&r&&0!==i&&!this.state.running,placement:"bottom"},void 0,(0,o.Z)(Bt.Z,{variant:"light",onClick:this.playBackward,disabled:c||!r||0===i||this.state.running},void 0,$t||($t=(0,o.Z)("i",{className:"fas fa-play fa-rotate-180"})))),(0,o.Z)(ut.Z,{tooltip:s("stop"),show:!c&&this.state.running,placement:"bottom"},void 0,(0,o.Z)(Bt.Z,{variant:"light",onClick:this.stop,disabled:c||!this.state.running},void 0,Gt||(Gt=(0,o.Z)("i",{className:"fas fa-pause"})))),(0,o.Z)(ut.Z,{tooltip:s("play"),show:!c&&r&&r.steps.length>i&&!this.state.running,placement:"bottom"},void 0,(0,o.Z)(Bt.Z,{variant:"light",onClick:this.playForward,disabled:c||!r||r.steps.length<=i||this.state.running},void 0,Yt||(Yt=(0,o.Z)("i",{className:"fas fa-play"})))),(0,o.Z)(ut.Z,{tooltip:s("jump-to-end"),show:!c&&r&&r.steps.length>i,placement:"bottom"},void 0,(0,o.Z)(Bt.Z,{variant:"light",onClick:this.fastForward,disabled:c||!r||r.steps.length<=i},void 0,Xt||(Xt=(0,o.Z)("i",{className:"fas fa-fast-forward"}))))),(0,o.Z)("span",{style:{marginLeft:20,marginRight:10}},void 0,s("update-time")),(0,o.Z)(ee.Z,{inline:!0,defaultValue:this.state.interval,min:50,max:1e3,onChange:function(t){e.setState({interval:t})},numberInputStyle:{display:"none"}}),(0,o.Z)("span",{},void 0,"".concat(this.state.interval).concat("ms")),(0,o.Z)(ut.Z,{tooltip:s("restore-tooltip"),placement:"bottom"},void 0,(0,o.Z)(Bt.Z,{variant:"secondary",style:{margin:4,marginLeft:8},onClick:this.handleRestore},void 0,s("restore"))),t,(0,o.Z)(ne.Z,{nWords:this.state.nWords,nChars:this.state.nChars,t:s}))}}]),r}(v.Component);ae.defaultProps={};var se=ae,ce=function(t,e){return"<!doctype html>\n<html lang=en>\n\t<head>\n\t\t<meta charset=utf-8>\n\t\t<title>".concat(t,'</title>\n\t\t<link rel="shortcut icon" href="favicon.ico" />\n\t\t<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.9/dist/katex.min.css" crossorigin="anonymous">\n\t\t<style media="screen" type="text/css">\n\t\t\tbody {\n\t\t\t\tfont-family: \'Open Sans\', sans-serif;\n\t\t\t\tfont-size: 12pt;\n\t\t\t\tmargin-left: auto;\n\t\t\t\tmargin-right: auto;\n\t\t\t\tpadding: 10px;\n\t\t\t\twidth: 100%;\n\t\t\t\tmax-width: 1200px;\n\t\t\t\theight: 100%;\n\t\t\t\tdisplay: block;\n\t\t\t}\n\n\t\t\th1 {\n\t\t\t\tcolor: #2e4468;\n\t\t\t\tfont-size: 26pt;\n\t\t\t\tfont-weight: bold;\n\t\t\t\tletter-spacing: 1px;\n\t\t\t}\n\n\t\t\th2 {\n\t\t\t\tfont-size: 20pt;\n\t\t\t\tcolor: #3c763d;\n\t\t\t\tfont-weight: 600;\n\t\t\t}\n\n\t\t\th3 {\n\t\t\t\tfont-size: 18pt;\n\t\t\t\tcolor: #2e4468;\n\t\t\t\tfont-weight: 600;\n\t\t\t}\n\n\t\t\th4 {\n\t\t\t\tfont-size: 15pt;\n\t\t\t\tcolor: #ca5800;\n\t\t\t\tfont-weight: 600;\n\t\t\t}\n\n\t\t\th5 {\n\t\t\t\tfont-size: 12pt;\n\t\t\t\tfont-weight: 600;\n\t\t\t}\n\n\t\t\ttr {\n\t\t\t\tdisplay: table-row;\n\t\t\t\tvertical-align: inherit;\n\t\t\t\tborder-color: inherit;\n\t\t\t}\n\n\t\t\tth {\n\t\t\t\tcolor: #464a4c;\n\t\t\t\tbackground-color: #eceeef;\n\t\t\t\tpadding: .3rem;\n\t\t\t\tborder-top: 1px solid #eceeef;\n\t\t\t\ttext-align: left;\n\t\t\t\tfont-weight: bold;\n\t\t\t}\n\n\t\t\tth, td {\n\t\t\t\tdisplay: table-cell;\n\t\t\t}\n\n\t\t\ttd {\n\t\t\t\tpadding: .3rem;\n\t\t\t\tvertical-align: top;\n\t\t\t\tborder-top: 1px solid #eceeef;\n\t\t\t}\n\n\t\t\tthead {\n\t\t\t\tdisplay: table-header-group;\n\t\t\t\tvertical-align: middle;\n\t\t\t}\n\n\t\t\ttable {\n\t\t\t\twidth: 100%;\n\t\t\t\tmax-width: 100%;\n\t\t\t\tmargin-bottom: 1rem;\n\t\t\t\tdisplay: table;\n\t\t\t\tborder-spacing: 2px;\n\t\t\t\tborder-color: grey;\n\t\t\t\ttext-align: left;\n\t\t\t}\n\n\t\t\ta {\n\t\t\t\tcolor: #2e4468;\n\t\t\t}\n\n\t\t\tpre {\n\t\t\t\tdisplay: block;\n\t\t\t\tpadding: 9.5px;\n\t\t\t\tmargin: 0 0 10px;\n\t\t\t\tline-height: 1.42857143;\n\t\t\t\tcolor: #333;\n\t\t\t\tword-break: break-all;\n\t\t\t\tword-wrap: break-word;\n\t\t\t\tborder: 1px solid #ccc;\n\t\t\t\tborder-radius: 4px;\n\t\t\t}\n\n\t\t\tcode {\n\t\t\t\twhite-space: pre-wrap;\n\t\t\t}\n\n\t\t\tblockquote {\n\t\t\t\tfont-size: 22px;\n\t\t\t\tpadding: 10px 20px;\n\t\t\t\tmargin: 0px 0px 20px;\n\t\t\t\tborder-left: 5px solid lightgray;\n\t\t\t\tbackground-color: rgb(238, 238, 238);\n\t\t\t}\n\n\t\t\t.img-tooltip {\n\t\t\t\ttop: 24px;\n\t\t\t\tright: 24px;\n\t\t\t\twidth: max-content;\n\t\t\t\tbackground-color: lightgray;\n\t\t\t\tcolor: black;\n\t\t\t\tborder-radius: 5px;\n\t\t\t\ttext-align: left;\n\t\t\t\topacity: 0;\n\t\t\t\tpadding: 15px;\n\t\t\t\tposition: fixed;\n\t\t\t\tfont-size: 22px;\n\t\t\t\t-webkit-transition: opacity 0.5s;\n\t\t\t\t-moz-transition: opacity 0.5s;\n\t\t\t\t-ms-transition: opacity 0.5s;\n\t\t\t\t-o-transition: opacity 0.5s;\n\t\t\t\ttransition: opacity 0.5s;\n\t\t\t\tz-index: 9999;\n\t\t\t}\n\n\t\t\t.img-container {\n\t\t\t\tposition: relative;\n\t\t\t}\n\n\t\t\t.img-container:hover .img-tooltip {\n\t\t\t\topacity: 1;\n\t\t\t}\n\t\t</style>\n\t\t<script src="https://kit.fontawesome.com/3a7c01b4b9.js" crossorigin="anonymous"><\/script>\n\t</head>\n\t<body>\n\t').concat(e,"\n\t</body>\n</html>")},le=n(777866),ue=(n(296253),n(940851),n(925161)),de=n(320765),fe=n(26266),pe=n(273783),he=n(171696);function ve(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,u.Z)(t);if(e){var o=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,l.Z)(this,n)}}var me=function(t){(0,c.Z)(n,t);var e=ve(n);function n(){var t;(0,i.Z)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o)),(0,d.Z)((0,s.Z)(t),"state",{annotation:""}),(0,d.Z)((0,s.Z)(t),"_onKeyDown",(function(e){13===e.keyCode&&(e.preventDefault(),t._apply())})),(0,d.Z)((0,s.Z)(t),"_onTextChange",(function(e){var n=e.target.value;t.setState({annotation:n})})),(0,d.Z)((0,s.Z)(t),"_cancel",(function(){t.props.close()})),(0,d.Z)((0,s.Z)(t),"_apply",(function(){t.props.close(t.state.annotation)})),t}return(0,a.Z)(n,[{key:"render",value:function(){var t=this.state.annotation;return(0,o.Z)("div",{className:"annotation-editor"},void 0,(0,o.Z)("form",{className:"editor-form",onSubmit:he.Z},void 0,(0,o.Z)("fieldset",{},void 0,(0,o.Z)("legend",{},void 0,de.a.t("TextEditor:annotation-text")),(0,o.Z)(fe.Z,{autoFocus:!0,onChange:this._onTextChange,onKeyDown:this._onKeyDown,placeholder:de.a.t("TextEditor:enter-annotation"),spellCheck:!1,as:"textarea",rows:5,value:t||"",style:{marginBottom:20}})),(0,o.Z)("div",{className:"editor-form-buttons"},void 0,(0,o.Z)(pe.Z,{label:de.a.t("TextEditor:cancel"),onClick:this._cancel}),(0,o.Z)(pe.Z,{active:!0,disabled:0===t.length,label:de.a.t("TextEditor:submit"),onClick:this._apply}))))}}]),n}(v.PureComponent),ge=n(640987),ye=n(70698);function Ze(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,u.Z)(t);if(e){var o=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,l.Z)(this,n)}}function be(){return Math.floor(4294967295*Math.random())}var we=function(t){(0,c.Z)(n,t);var e=Ze(n);function n(){var t;(0,i.Z)(this,n);for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o)),(0,d.Z)((0,s.Z)(t),"_popUp",null),(0,d.Z)((0,s.Z)(t),"title","add-annotation"),(0,d.Z)((0,s.Z)(t),"content",K.Z.annotation),(0,d.Z)((0,s.Z)(t),"enable",(function(t){if(!(t.selection instanceof G.TextSelection))return!1;var e=t.selection;return e.from<e.to})),(0,d.Z)((0,s.Z)(t),"waitForUserInput",(function(e,n,r,o){return t._popUp?Promise.resolve(void 0):(n&&n((0,ue.tk)(e)),new Promise((function(e){t._popUp=(0,ye.Z)(me,{},{modal:!0,onClose:function(n){t._popUp&&(t._popUp=null,e(n))}})})))})),(0,d.Z)((0,s.Z)(t),"executeWithUserInput",(function(t,e,n,r){if(e){var o=t.selection,i=t.tr;e(i=(i=(i=n?(0,ue.be)(n.state):i).setSelection(o)).setMeta(yt,{type:"newComment",from:o.from,to:o.to,comment:new vt(r,be())}))}return n&&n.focus(),!0})),t}return n}(ge.Z),_e=n(588714),Se=n(782963),ke=n.n(Se),Oe=n(557106),xe=n.n(Oe),Ee=/width: (.+)px/g,De=/<pre class="img-tooltip">[\s\S]*?<\/pre>/g;function Pe(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t-4;return{"html-h1":{fontSize:n+16,color:"#2e4468",bold:!0,alignment:e?"center":null},"html-h2":{fontSize:n+14,color:"#3c763d",bold:!0,alignment:e?"center":null},"html-h3":{fontSize:n+8,color:"#2e4468",bold:!0,alignment:e?"center":null},"html-h4":{fontSize:n+4,color:"#ca5800",bold:!0,alignment:e?"center":null},"html-img":{alignment:"center"},"html-table":{alignment:"center"}}}var Ce=function(t,e,n,r){t=z()(t,Ee,(function(t,n){var o=parseFloat(n)*xe()(e.pageSize.width/r,1);return"width: ".concat(o,"px")})),t=z()(t,De,"");var o=ke()(t,{defaultStyles:{img:""}}),i={styles:Pe(n,function(t){return 3024===t.pageSize.width&&2160===t.pageSize.height}(e)),pageSize:e.pageSize,pageOrientation:e.pageOrientation,defaultStyle:{fontSize:n-4},pageMargins:[40,60,40,60]};return i.content=o,i},Me=n(5140),Re=D()("isle:img-to-str");var Ne=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"png";Re("Generate base64 encoded ".concat(r," string of ").concat(e," x ").concat(n," image..."));var o=document.createElement("canvas"),i=o.getContext("2d");return o.width=e,o.height=n,i.clearRect(0,0,e,n),i.drawImage(t,0,0,e,n),o.toDataURL("image/"+r)};n(697927);function je(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,u.Z)(t);if(e){var o=(0,u.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,l.Z)(this,n)}}var Ie,Te=(0,S.Z)((function(){return Promise.all([n.e(1982),n.e(1948)]).then(n.bind(n,797022))})),Ae=(0,S.Z)((function(){return Promise.all([n.e(1982),n.e(337)]).then(n.bind(n,936003))})),ze=(0,S.Z)((function(){return Promise.all([n.e(1982),n.e(9325)]).then(n.bind(n,957112))})),Ve=(0,S.Z)((function(){return Promise.all([n.e(3312),n.e(1982),n.e(3159)]).then(n.bind(n,120509))})),Be=D()("isle:text-editor"),Le=/<body[^>]*>((.|[\n\r])*)<\/body>/im,Fe=(0,L.Z)("text-editor"),Ue=M()("\n",15),He=g()({html:!0,xhtmlOut:!0,breaks:!0,typographer:!1});function We(t){return Je.apply(this,arguments)}function Je(){return(Je=(0,f.Z)(h().mark((function t(e){var n;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e).then((function(t){return t.blob()})).then(H.Z);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var qe=function(t){(0,c.Z)(n,t);var e=je(n);function n(t,r){var a,c;if((0,i.Z)(this,n),a=e.call(this,t),(0,d.Z)((0,s.Z)(a),"recordedText",(function(t){t+=" ",document.execCommand("insertText",!1,t)})),(0,d.Z)((0,s.Z)(a),"handleFileSelect",(function(t){Be("Opening file...");var e=t.target.files,n=new FileReader;n.onload=function(){Be("Successfully read file...");var t=n.result,e=Le.exec(t)[1];a.setState({value:e,docId:a.state.docId+1})},n.onerror=function(){Be("Encountered an error...")},n.readAsText(e[0])})),(0,d.Z)((0,s.Z)(a),"toggleSubmitModal",(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I();a.setState({showSubmitModal:!a.state.showSubmitModal},e)})),(0,d.Z)((0,s.Z)(a),"toggleGuides",(function(){a.setState({showGuides:!a.state.showGuides})})),(0,d.Z)((0,s.Z)(a),"toggleResetModal",(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I();a.setState({showResetModal:!a.state.showResetModal},e)})),(0,d.Z)((0,s.Z)(a),"togglePDFModal",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I();a.setState({showPDFModal:!a.state.showPDFModal},t)})),(0,d.Z)((0,s.Z)(a),"toggleHistory",(function(){a.setState({showHistory:!a.state.showHistory})})),(0,d.Z)((0,s.Z)(a),"submitReport",(0,f.Z)(h().mark((function t(){var e,n,r,o,i,s,c,l,u,d,f,p,v=arguments;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=v.length>0&&void 0!==v[0]?v[0]:null,n=v.length>1&&void 0!==v[1]?v[1]:null,!(r=a.context).anonymous){t.next=5;break}return t.abrupt("return",r.addNotification({title:a.props.t("sign-in"),message:a.props.t("sign-in-required"),level:"warning",position:"tr"}));case 5:o=P.DOMSerializer.fromSchema(ht.Z).serializeFragment(a.editorState.doc.content),(i=document.createElement("div")).appendChild(o),s=i.getElementsByTagName("img"),c=0;case 10:if(!(c<s.length)){t.next=25;break}if((l=s[c]).crossOrigin="Anonymous",!B()(l.src,"data:image/svg+xml")){t.next=18;break}Be("Convert from SVG to PNG..."),l.src=Ne(l,l.naturalWidth,l.naturalHeight),t.next=22;break;case 18:if(B()(l.src,"data:")){t.next=22;break}return t.next=21,We(l.src);case 21:l.src=t.sent;case 22:c++,t.next=10;break;case 25:u=z()(i.innerHTML,"<p></p>","<p> </p>"),d=document.title||"provisoric",f=ce(d,u),p=Ce(u,{pageSize:{width:612,height:792},pageOrientation:"portrait"},16,a.editorDiv.clientWidth),Z().createPdf(p).getBase64((function(t){if(a.props.sendSubmissionEmails){var o={text:a.props.t("report-submitted-message",{name:r.user.name}),subject:a.props.t("report-submitted"),attachments:[{filename:"report.html",content:f,contentType:"text/html"},{filename:"report.pdf",content:t,contentType:"application/pdf",encoding:"base64"}]};r.sendMail(o,r.user.email),e&&(o.text=n,r.sendMail(o,e.email))}var s=new FormData,c=new FormData,l="report.html";a.id&&(l=a.id+"_"+l);var u=new File([f],l,{type:"text/html"});s.append("file",u),l="report.pdf",l=a.id+"_"+l;var d=(0,U.Z)(t,"application/pdf"),p=new File([d],l,{type:"application/pdf"});c.append("file",p),r.uploadFile({formData:s,showNotification:!1}),r.uploadFile({formData:c,showNotification:!1}),r.addNotification({title:a.props.t("submitted"),message:a.props.t("submitted-msg"),level:"success",position:"tr"}),r.log({id:a.id,type:Me.W,value:i.innerText})}));case 32:case"end":return t.stop()}}),t)})))),(0,d.Z)((0,s.Z)(a),"resetEditor",(function(){var t,e;a.setState({value:He.render(a.props.defaultValue),docId:a.state.docId+1});var n=a.props.resetModal;t=n&&n.notificationTitle?n.notificationTitle:"Reset",e=n&&n.notification?n.notification:a.props.t("report-deleted-msg"),a.context.addNotification({title:t,message:e,level:"success",position:"tr"})})),(0,d.Z)((0,s.Z)(a),"requestTextDocuments",(function(){var t=a.context;a.getTextEditorDocuments||(a.getTextEditorDocuments=_()(t.getTextEditorDocuments,1e3)),a.getTextEditorDocuments()})),a.id=t.id||Fe(t),c||(c=He.render(t.defaultValue)),a.state={showResetModal:!1,showSubmitModal:!1,showPDFModal:!1,showColorPicker:!1,showGuides:!1,isFullscreen:!1,value:c,originalDefaultValue:t.defaultValue,docId:0,group:null,allGroups:null,selectedUserReport:null,showHistory:!1},a.menu=N()(q.ZP,2),a.menu.marks.push({title:"font-color",content:K.Z.color,enable:function(t){return(0,_e.Z)(t,"textColor")},run:function(t,e){a.setState({showColorPicker:!a.state.showColorPicker}),a.onColorChoice=function(n){var r=t.schema,o=t.tr,i=r.marks.textColor,s=n?{color:n.hex}:null;return(o=(0,le.Z)(t.tr.setSelection(t.selection),r,i,s)).docChanged||o.storedMarksSet?(e&&e(o),a.setState({showColorPicker:!a.state.showColorPicker}),!0):(a.setState({showColorPicker:!a.state.showColorPicker}),!1)}}}),a.menu.addons=[{title:"save-html",content:K.Z.save,run:function(t,e){var n=P.DOMSerializer.fromSchema(ht.Z).serializeFragment(t.doc.content),r=document.createElement("div");r.appendChild(n);var o=document.title||"provisoric",i=ce(o,r.innerHTML),s=new Blob([i],{type:"text/html"});(0,F.Z)(s,"".concat(o,"_").concat(a.state.docId,".html")),a.setState({docId:a.state.docId+1})}},{title:"export-pdf",content:K.Z.pdf,run:function(t,e){return a.togglePDFModal(),a.exportPDF=function(){var e=(0,f.Z)(h().mark((function e(n){var r,o,i,s,c,l,u,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=document.title||"provisoric",e.prev=1,i=P.DOMSerializer.fromSchema(ht.Z).serializeFragment(t.doc.content),(s=document.createElement("div")).appendChild(i),c=s.getElementsByTagName("img"),l=0;case 7:if(!(l<c.length)){e.next=22;break}if((u=c[l]).crossOrigin="Anonymous",!B()(u.src,"data:image/svg+xml")){e.next=15;break}Be("Convert from SVG to PNG..."),u.src=Ne(u,u.naturalWidth,u.naturalHeight),e.next=19;break;case 15:if(B()(u.src,"data:")){e.next=19;break}return e.next=18,We(u.src);case 18:u.src=e.sent;case 19:l++,e.next=7;break;case 22:d=z()(s.innerHTML,"<p></p>","<p> </p>"),o=Ce(d,n,16,a.editorDiv.clientWidth),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(1),a.context.addNotification({title:a.props.t("error-serializing-html"),message:"".concat(e.t0.message,". ").concat(a.props.t("check-syntax")),level:"error",position:"tr"});case 30:a.togglePDFModal((function(){try{Z().createPdf(o).download(r)}catch(t){a.context.addNotification({title:a.props.t("error-generating-pdf"),message:"".concat(t,". ").concat(a.props.t("check-syntax")),level:"error",position:"tr"})}}));case 31:case"end":return e.stop()}}),e,null,[[1,26]])})));return function(t){return e.apply(this,arguments)}}(),!1}}],a.props.canLoadHTML&&a.menu.addons.unshift({title:"open-html",run:function(t,e){var n=document.createElement("input");return n.type="file",n.accept=".html",n.addEventListener("change",a.handleFileSelect,!1),n.click(),!1},content:K.Z.open}),a.props.allowSubmissions&&a.menu.addons.push({title:"submit",content:K.Z.submit,run:function(t,e){return a.editorState=t,a.toggleSubmitModal(),!1}}),a.menu.addons=a.menu.addons.concat([{title:"toggle-fullscreen",run:function(){/fullscreen/.test(a.editorWrapper.className)?a.editorWrapper.className=a.editorWrapper.className.replace(/\s*fullscreen\b/,""):a.editorWrapper.className+=" fullscreen",a.state.isFullscreen?document.body.style.overflow=Ie:(Ie=document.body.style.overflow,document.body.style.overflow="hidden"),a.setState({isFullscreen:!a.state.isFullscreen})},content:K.Z.fullscreen},{title:"",content:(0,o.Z)(k.Z,{mode:"microphone",timeout:a.props.voiceTimeout,width:26,height:26,onFinalText:a.recordedText})},{title:"open-tutorials",run:a.toggleGuides,content:K.Z.guides},new we,{title:"show-history",content:K.Z.history,run:a.toggleHistory}]),t.defaultValue!==Ue){var l,u,p=a.props.resetModal;l=p&&p.tooltip?p.tooltip:"reset-to-default",u=p&&p.icon?p.icon:K.Z.reset,a.menu.addons.push({title:l,run:function(){a.toggleResetModal()},content:u})}return a}return(0,a.Z)(n,[{key:"componentDidMount",value:function(){var t=this,e=this.context;this.unsubscribe=e.subscribe((function(n,r){if(n===Rt.Fw||n===Rt.E7||n===Rt.Ys)t.forceUpdate();else if(n===Rt.WF){var o=e.allGroups.map((function(t){return t.name}));t.setState({group:e.group?e.group.name:o[0],allGroups:o})}else n===Rt.vB&&t.setState({group:null,allGroups:null})}))}},{key:"componentWillUnmount",value:function(){this.unsubscribe&&this.unsubscribe()}},{key:"generateDocumentId",value:function(){if("group"===this.props.mode)return this.state.group+"-"+this.id;var t=this.context;return this.state.selectedUserReport?this.id+"-"+this.state.selectedUserReport:"individual"===this.props.mode?this.id+"-"+(t.user.email||t.anonymousIdentifier):"cohort"===this.props.mode&&t.cohort?this.id+"-"+t.cohort:this.id}},{key:"renderView",value:function(){var t=this,e=this.context,n=(0,T.isPrimitive)(e.server),r=this.generateDocumentId();return this.state.showHistory?(0,o.Z)(se,{defaultValue:this.props.defaultValue,onClose:this.toggleHistory,onRestore:function(e){t.setState({showHistory:!t.state.showHistory},(function(){var n=P.DOMSerializer.fromSchema(ht.Z).serializeFragment(e),r=document.createElement("div");r.appendChild(n),t.setState({value:r.innerHTML,docId:t.state.docId+1})}))},editorState:this.editorState,docId:r,session:e,t:this.props.t},r):n?(0,o.Z)(Vt,{defaultValue:this.state.value,menu:this.menu,onMount:function(e){t.editorDiv=e},session:e,fullscreen:this.state.isFullscreen,showColorPicker:this.state.showColorPicker,onColorChoice:this.onColorChoice,id:r,onEditorState:function(e){t.editorState=e}},"".concat(r,"-{session.anonymous}")):(0,o.Z)($.Z,{defaultValue:this.state.value,menu:this.menu,className:"cancel",onMount:function(e){t.editorDiv=e},t:this.props.t,fullscreen:this.state.isFullscreen,showColorPicker:this.state.showColorPicker,onColorChoice:this.onColorChoice,id:W.Z?null:this.id,onEditorState:function(e){t.editorState=e},docId:this.state.docId})}},{key:"render",value:function(){var t=this,e=this.context;return"group"!==this.props.mode||this.state.group?(0,o.Z)(v.Fragment,{},void 0,v.createElement("div",{id:this.id,className:"editorview-wrapper",ref:function(e){t.editorWrapper=e},style:this.props.style},this.renderView(),"group"===this.props.mode?(0,o.Z)(O.Z,{owner:!0},void 0,(0,o.Z)(x.Z,{placeholder:this.props.t("select-group"),options:this.state.allGroups,value:this.state.group,onChange:function(e){t.setState({group:e})},style:{marginLeft:"20px",width:"320px",display:"inline-block"}})):null,"individual"===this.props.mode?(0,o.Z)(O.Z,{owner:!0},void 0,(0,o.Z)("div",{onFocus:this.requestTextDocuments,onMouseOver:this.requestTextDocuments},void 0,(0,o.Z)(x.Z,{placeholder:this.props.t("select-document-to-display"),options:e.textEditorDocuments.filter((function(e){return e.startsWith(t.id)})).map((function(e){return e.slice(t.id.length+1)})),value:this.state.selectedUserReport,onChange:function(e){t.setState({selectedUserReport:e})},clearable:!0,style:{marginLeft:"20px",width:"320px",display:"inline-block"}}))):null),this.state.showResetModal?v.createElement(Ae,(0,r.Z)({show:this.state.showResetModal,onHide:this.toggleResetModal,onSubmit:this.resetEditor,t:this.props.t},this.props.resetModal)):null,this.state.showSubmitModal?(0,o.Z)(Te,{show:this.state.showSubmitModal,onHide:this.toggleSubmitModal,onSubmit:this.submitReport,t:this.props.t}):null,(0,o.Z)(ze,{show:this.state.showGuides,onHide:this.toggleGuides,target:this.id,t:this.props.t}),this.state.showPDFModal?(0,o.Z)(Ve,{show:this.state.showPDFModal,onHide:this.togglePDFModal,exportPDF:this.exportPDF,t:this.props.t}):null):(0,o.Z)("h3",{style:this.props.style},void 0,this.props.t("available-when-grouped"))}}],[{key:"getDerivedStateFromProps",value:function(t,e){return t.defaultValue!==e.originalDefaultValue?(Be("Default value has changed..."),{value:t.defaultValue?He.render(t.defaultValue):t.defaultValue,originalDefaultValue:t.defaultValue}):null}}]),n}(v.Component);qe.defaultProps={allowSubmissions:!0,canLoadHTML:!0,defaultValue:Ue,mode:"individual",sendSubmissionEmails:!1,voiceTimeout:5e3,resetModal:null,style:{}},qe.contextType=J.Z;var Ke=(0,b.Z)("text-editor")(qe)},234648:function(t,e,n){"use strict";n.d(e,{Z:function(){return A}});var r=n(858255),o=(n(319371),n(202784)),i=n(911755),a=n.n(i),s=n(198),c=n(618589),l=n(226010),u=n(738314),d=n(836663),f=n(296781),p=n(155061),h=n(294565),v=n(150275),m=n(550171),g=(n(52310),n(141396)),y=n(557106),Z=n.n(y),b=n(783158),w=n.n(b);var _=function(t,e,n,r){var o=e;if(t.nodeSize<=2)return null;var i=function(t){return t.type===r};for(e=Z()(2,e),n=w()(n,t.nodeSize-2);o<=n;){var a=t.nodeAt(o);if(a&&a.marks){var s=a.marks.find(i);if(s)return s;o+=1}else o++}return null},S={1:26,2:20,3:18,4:15,5:12};var k,O,x,E,D,P,C,M=function(t){var e=t.schema,n=t.doc,r=t.selection,o=t.tr,i=e.marks.fontSize,a=e.nodes.heading,s=String(12);if(!i)return s;var c=r.from,l=r.to;if(r.empty){var u=(o.storedMarks||t.storedMarks||r.$cursor&&r.$cursor.marks&&r.$cursor.marks()||[]).find((function(t){return t.type===i}));return u?String(u.attrs.pt||s):s}var d=i?_(n,c,l,i):null;if(d)return String(d.attrs.pt);if(!a)return s;var f=(0,g.Tr)(a)(t.selection);if(!f)return s;var p=String(f.node.attrs.level);return S[p]||s},R=n(588714),N=JSON.parse('["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722","#795548","#607d8b","#000000"]'),j=a()("isle:text-editor"),I="#6e6e6e",T=function(t){return t.disabled?(0,r.Z)("button",{onMouseDown:t.onMouseDown,style:{active:t.active,color:t.active?"black":I,opacity:.2},disabled:!0,className:"menu-item","aria-label":t.t(t.title)},void 0,t.children):(0,r.Z)(v.Z,{tooltip:t.t(t.title),placement:"bottom"},"".concat(t.itemKey,"-tooltip"),(0,r.Z)("button",{onMouseDown:t.onMouseDown,style:{active:t.active,color:t.active?"black":I},className:"menu-item","aria-label":t.t(t.title)},void 0,t.children))},A=(0,s.Z)("text-editor")((function(t){var e=t.menu,n=t.children,i=t.state,a=t.dispatch,s=t.view,v=t.fullscreen,g=t.showColorPicker,y=t.onColorChoice,Z=t.t,b=function(t){return function(e){e.preventDefault(),t.run&&(j("Run command",t,e),t.run(i,a,s,e.nativeEvent))}},w=function(t,e){return(0,r.Z)(T,{itemKey:e,type:"button",active:!(!t.active||!i)&&t.active(i),disabled:!(!t.enable||!i)&&!t.enable(i),title:"string"==typeof t.title?Z(t.title):"",onMouseDown:b(t),t:Z},e,(0,h.isPrimitive)(t.content)?Z(t.content):t.content)},_=function(t,e){return t.enable&&i&&!t.enable(i)?(0,r.Z)(p.Z,{disabled:!0},"dropdown-item-".concat(e),(0,h.isPrimitive)(t.content)?Z(t.content):t.content):(0,r.Z)(p.Z,{onMouseDown:b(t)},"dropdown-item-".concat(e),(0,h.isPrimitive)(t.content)?Z(t.content):t.content)},S=function(t){return t?t.map(w):null};return(0,r.Z)("div",{className:"prose-menu-bar cancel"},void 0,n,S(e.blocks),e.headers?(0,r.Z)(o.Fragment,{},void 0,(0,r.Z)(l.Z,{title:"",variant:"outline-secondary",size:"sm",style:{display:"inline-block",marginRight:4},"aria-label":"Headers"},void 0,e.headers.map(_)),k||(k=(0,r.Z)("i",{className:"prose-separator"},void 0,"|"))):null,S(e.marks),v?S(e.extraMarks):null,(0,r.Z)("div",{style:{display:g?"initial":"none",position:"absolute",top:"50px",left:"100px",zIndex:2}},void 0,(0,r.Z)(c.Z,{width:"600px",colors:N,circleSize:16,onChangeComplete:y})),O||(O=(0,r.Z)("i",{className:"prose-separator"},void 0,"|")),e.fontSizes?(0,r.Z)(u.Z,{style:{display:"inline-block",marginLeft:4}},void 0,(0,r.Z)(f.Z,{size:"sm",variant:"outline-secondary",disabled:!i||!(0,R.Z)(i,"fontSize")},void 0,i?M(i):"12"),(0,r.Z)(d.Z,{style:{minWidth:"24px"}},void 0,e.fontSizes.map((function(t,e){return(0,r.Z)(p.Z,{style:{paddingLeft:6,paddingRight:6,paddingTop:3,paddingBottom:3},onMouseDown:b(t)},"font-buttons-".concat(e),t.content)})))):null,S(e.wraps),v&&e.alignment?(0,r.Z)(o.Fragment,{},void 0,x||(x=(0,r.Z)("i",{className:"prose-separator"},void 0,"|")),S(e.alignment)):null,e.insert?(0,r.Z)(o.Fragment,{},void 0,E||(E=(0,r.Z)("i",{className:"prose-separator"},void 0,"|")),(0,r.Z)(l.Z,{title:m.Z.insert,variant:"outline-secondary",size:"sm",style:{display:"inline-block"},name:"Insert"},void 0,e.insert.map(_))):null,e.tableEdits?(0,r.Z)(o.Fragment,{},void 0,D||(D=(0,r.Z)("i",{className:"prose-separator"},void 0,"|")),(0,r.Z)(l.Z,{title:m.Z.table,variant:"outline-secondary",size:"sm",style:{display:"inline-block"},name:"Table"},void 0,e.tableEdits.map(_))):null,v&&e.history?(0,r.Z)(o.Fragment,{},void 0,P||(P=(0,r.Z)("i",{className:"prose-separator"},void 0,"|")),e.history.map(w)):null,e.addons?C||(C=(0,r.Z)("i",{className:"prose-separator"},void 0,"|")):null,S(e.addons))}))},505455:function(t,e,n){"use strict";var r=n(867696),o=n(828919);e.Z=function(t){var e=document.createElement("div");return e.innerHTML=t,r.DOMParser.fromSchema(o.Z).parse(e)}},205342:function(t,e,n){"use strict";var r=n(858255);n(202784);e.Z=function(t){return(0,r.Z)("div",{className:"prose-statusbar"},void 0,(0,r.Z)("span",{},void 0,t.t("words"),": ",t.nWords),(0,r.Z)("span",{style:{marginLeft:5}},void 0,t.t("characters"),": ",t.nChars))}},621150:function(t,e,n){"use strict";n(382139);var r=n(858255),o=n(264659),i=n(904730),a=n(673989),s=n(175663),c=n(750591),l=n(575630),u=n(151119),d=n(202784),f=(n(213980),n(911755)),p=n.n(f),h=n(867696),v=n(506565),m=n(516037),g=n(603423),y=n(956842),Z=n(151300),b=n.n(Z),w=n(814346),_=n(234648),S=n(828919),k=n(19509),O=n(291798),x=n(268874),E=n(205342),D=n(781234),P=n(335700),C=n(505455);function M(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=(0,l.Z)(t);if(e){var o=(0,l.Z)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,c.Z)(this,n)}}var R=p()("isle:text-editor"),N=function(t){(0,s.Z)(n,t);var e=M(n);function n(t){var r,i;(0,o.Z)(this,n),r=e.call(this,t),(0,u.Z)((0,a.Z)(r),"_createEditorView",(function(t){r.editorDiv=t,null!==t&&(r.editorView=new v.tk(t,{state:r.state.editorState,dispatchTransaction:r.dispatchTransaction,nodeViews:{footnote:function(t,e,n,r){return new k.Z(t,e,n,r)},image:function(t,e,n,r){return new O.Z(t,e,n,r)},plot:function(t,e,n,r){return new O.Z(t,e,n,r)},plotContainer:function(t,e,n,r){return new O.Z(t,e,n,r)}},handleDOMEvents:{dragenter:function(t){R("Handle drag enter event..."),(0,x.yz)(t)},drop:P.Z,keydown:r.props.onKeyDown}})),r.props.onMount(r.editorDiv)})),(0,u.Z)((0,a.Z)(r),"onEditorState",(function(t){var e=0,n=0;r.props.showStatusBar&&t.doc.forEach((function(t){t.forEach((function(t){t.text&&(e+=t.text.length,n+=(0,D.Z)(t.text))}))})),r.props.onEditorState(t),r.setState({editorState:t,nWords:n,nChars:e})})),(0,u.Z)((0,a.Z)(r),"dispatchTransaction",(function(t){var e=r.state.editorState.apply(t);null!==r.editorView&&r.editorView.updateState(e);var n=(0,g.fixTables)(r.state.editorState);n&&(e=e.apply(n.setMeta("addToHistory",!1))),r.onEditorState(e)})),(0,u.Z)((0,a.Z)(r),"saveInBrowser",(function(){R("Saving document state to local storage..."),r.state.editorState&&localStorage.setItem(r.props.id,JSON.stringify(r.state.editorState.doc.toJSON()))})),t.id&&(i=localStorage.getItem(t.id)),i||(i=t.defaultValue);var s=b()(i)?h.Node.fromJSON(S.Z,JSON.parse(i)):(0,C.Z)(i);return r.state={editorState:m.EditorState.create({doc:s,schema:S.Z,plugins:w.Z})},r}return(0,i.Z)(n,[{key:"componentDidMount",value:function(){this.props.autoSave&&this.props.id&&(this.saveInterval=setInterval(this.saveInBrowser,this.props.intervalTime)),window.addEventListener("unload",this.saveInBrowser)}},{key:"componentDidUpdate",value:function(t){var e=this;if(this.props.defaultValue!==t.defaultValue||this.props.docId!==t.docId){R("Re-creating editor state...");var n=b()(this.props.defaultValue)?h.Node.fromJSON(S.Z,JSON.parse(this.props.defaultValue)):(0,C.Z)(this.props.defaultValue);this.setState({editorState:m.EditorState.create({doc:n,schema:S.Z,plugins:w.Z})},(function(){e.editorView.destroy(),e._createEditorView(e.editorDiv)}))}}},{key:"componentWillUnmount",value:function(){this.editorView&&this.editorView.destroy(),this.saveInterval&&clearInterval(this.saveInterval),window.removeEventListener("unload",this.saveInBrowser)}},{key:"markdown",get:function(){return y.Dm.serialize(this.state.editorState.doc)}},{key:"focus",value:function(){this.editorView&&this.editorView.focus()}},{key:"render",value:function(){return(0,r.Z)(d.Fragment,{},void 0,(0,r.Z)(_.Z,{menu:this.props.menu,state:this.state.editorState,dispatch:this.dispatchTransaction,view:this.editorView,fullscreen:this.props.fullscreen,showColorPicker:this.props.showColorPicker,onColorChoice:this.props.onColorChoice}),d.createElement("div",{className:this.props.className,ref:this._createEditorView}),this.props.showStatusBar?(0,r.Z)(E.Z,{nWords:this.state.nWords,nChars:this.state.nChars,t:this.props.t}):null)}}]),n}(d.Component);N.defaultProps={autoSave:!0,intervalTime:1e4,showStatusBar:!0,t:function(){},onColorChoice:function(){},onEditorState:function(){},onKeyDown:function(){},onMount:function(){}},e.Z=N},19509:function(t,e,n){"use strict";var r=n(264659),o=n(904730),i=n(151119),a=(n(319371),n(59357),n(850110),n(506565)),s=n(516037),c=n(757343),l=n(260593),u=n(630709),d=n(409961),f=n.n(d),p=n(783158),h=n.n(p),v=function(){function t(e,n,o){var a=this;(0,r.Z)(this,t),(0,i.Z)(this,"dispatchInner",(function(t){var e=a.innerView.state.applyTransaction(t),n=e.state,r=e.transactions;if(a.innerView.updateState(n),!t.getMeta("fromOutside")){for(var o=a.outerView.state.tr,i=u.KS.offset(a.getPos()+1),s=0;s<r.length;s++)for(var c=r[s].steps,l=0;l<c.length;l++)o.step(c[l].map(i));o.docChanged&&a.outerView.dispatch(o)}})),this.node=e,this.outerView=n,this.getPos=o,this.dom=document.createElement("footnote"),this.innerView=null}return(0,o.Z)(t,[{key:"selectNode",value:function(){this.dom.classList.add("ProseMirror-selectednode"),this.innerView||this.open()}},{key:"deselectNode",value:function(){this.dom.classList.remove("ProseMirror-selectednode"),this.innerView&&this.close()}},{key:"open",value:function(){var t=this,e=this.dom.appendChild(document.createElement("div"));e.className="footnote-tooltip",this.innerView=new a.tk(e,{state:s.EditorState.create({doc:this.node,plugins:[(0,l.h)({"Mod-z":function(){return(0,c.Yw)(t.outerView.state,t.outerView.dispatch)},"Mod-y":function(){return(0,c.KX)(t.outerView.state,t.outerView.dispatch)}})]}),dispatchTransaction:this.dispatchInner,handleDOMEvents:{mousedown:function(){t.outerView.hasFocus()&&t.innerView.focus()}}})}},{key:"close",value:function(){this.innerView.destroy(),this.innerView=null,this.dom.textContent=""}},{key:"update",value:function(t){if(!t.sameMarkup(this.node))return!1;if(this.node=t,this.innerView){var e=this.innerView.state,n=t.content.findDiffStart(e.doc.content);if(!f()(n)){var r=t.content.findDiffEnd(e.doc.content),o=r.a,i=r.b,a=n-h()(o,i);a>0&&(o+=a,i+=a),this.innerView.dispatch(e.tr.replace(n,i,t.slice(n,o)).setMeta("fromOutside",!0))}}return!0}},{key:"destroy",value:function(){this.innerView&&this.close()}},{key:"stopEvent",value:function(t){return this.innerView&&this.innerView.dom.contains(t.target)}},{key:"ignoreMutation",value:function(){return!0}}]),t}();e.Z=v},423879:function(t,e,n){"use strict";n(850110),n(446964);e.Z=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:512,r=atob(t),o=[],i=0;i<r.length;i+=n){for(var a=r.slice(i,i+n),s=new Array(a.length),c=0;c<a.length;c++)s[c]=a.charCodeAt(c);var l=new Uint8Array(s);o.push(l)}var u=new Blob(o,{type:e});return u}},819690:function(t,e,n){"use strict";n(296253),n(940851);e.Z=function(t){var e=new(0,window.FileReader);return e.readAsDataURL(t),new Promise((function(t){e.onloadend=function(){t(e.result)}}))}},42720:function(t,e,n){"use strict";n(59357),n(6059);var r=/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i;function o(t){setImmediate((function(){throw t}),0)}function i(t){return r.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t}var a=function(t){if(!(void 0===t||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var e,n=t.document,r=!1;n&&n.createElementNS&&(e=n.createElementNS("http://www.w3.org/1999/xhtml","a"),r="download"in e);var a=/constructor/i.test(t.HTMLElement)||t.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent),c=t.setImmediate||t.setTimeout,l=f.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(t,e,n){return e=e||t.name||"download",n||(t=i(t)),navigator.msSaveOrOpenBlob(t,e)}:(l.abort=function(){},l.readyState=l.INIT=0,l.WRITING=1,l.DONE=2,l.error=null,l.onwritestart=null,l.onprogress=null,l.onwrite=null,l.onabort=null,l.onerror=null,l.onwriteend=null,function(t,e,n){return new f(t,e||t.name||"download",n)})}function u(){return t.URL||t.webkitURL||t}function d(t){setTimeout((function(){"string"==typeof t?u().revokeObjectURL(t):t.remove()}),4e4)}function f(n,l,f){f||(n=i(n));var p,h=this,v="application/octet-stream"===n.type;function m(){!function(t,e,n){for(var r=(e=[].concat(e)).length;r--;){var i=t["on"+e[r]];if("function"==typeof i)try{i.call(t,n||t)}catch(a){o(a)}}}(h,"writestart progress write writeend".split(" "))}if(h.readyState=h.INIT,r)return p=u().createObjectURL(n),void c((function(){var t,n;e.href=p,e.download=l,t=e,n=new MouseEvent("click"),t.dispatchEvent(n),m(),d(p),h.readyState=h.DONE}),0);!function(){if((s||v&&a)&&t.FileReader){var e=new FileReader;return e.onloadend=function(){var n=s?e.result:e.result.replace(/^data:[^;]*;/,"data:attachment/file;");t.open(n,"_blank")||(t.location.href=n),n=void 0,h.readyState=h.DONE,m()},e.readAsDataURL(n),void(h.readyState=h.INIT)}p||(p=u().createObjectURL(n)),v?t.location.href=p:t.open(p,"_blank")||(t.location.href=p),h.readyState=h.DONE,m(),d(p)}()}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||(void 0).content);e.Z=a},974247:function(t,e,n){"use strict";n(296253),n(940851);e.Z=function(t){return new Promise((function(e,n){var r=window.FileReader;if(r){var o=new r;o.onload=function(t){var n=t.target.result;e({src:n,height:0,width:0,id:""})},o.onerror=function(){n(new Error("FileReader failed"))},o.readAsDataURL(t)}else n(new Error("FileReader is not available"))}))}},427249:function(t,e){"use strict";e.Z=function(t){var e=1;return function(){return e+=1,"".concat(t,"-").concat(e)}}},217732:function(t,e,n){"use strict";var r=n(542985),o=n(410875),i=n(542094),a="startsWith",s="".startsWith;r(r.P+r.F*n(708852)(a),"String",{startsWith:function(t){var e=i(this,t,a),n=o(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return s?s.call(e,r,n):e.slice(n,n+r.length)===r}})},423184:function(t,e,n){"use strict";var r=n(607560),o=n(998283),i=n(72779),a=n.n(i),s=n(202784),c=n(429658),l=["bsPrefix","size","toggle","vertical","className","as"],u=s.forwardRef((function(t,e){var n=t.bsPrefix,i=t.size,u=t.toggle,d=t.vertical,f=t.className,p=t.as,h=void 0===p?"div":p,v=(0,o.Z)(t,l),m=(0,c.vE)(n,"btn-group"),g=m;return d&&(g=m+"-vertical"),s.createElement(h,(0,r.Z)({},v,{ref:e,className:a()(f,g,i&&m+"-"+i,u&&m+"-toggle")}))}));u.displayName="ButtonGroup",u.defaultProps={vertical:!1,toggle:!1,role:"group"},e.Z=u}}]);