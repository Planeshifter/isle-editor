(self.webpackChunk=self.webpackChunk||[]).push([[7659],{729988:function(e,t,n){"use strict";n.r(t);n(382139);var o=n(264659),r=n(904730),i=n(673989),c=n(175663),a=n(750591),s=n(575630),u=n(151119),d=n(202784),f=n(928316),v=(n(213980),n(911755)),l=n.n(v),p=n(382470),m=n.n(p),y=n(521859),h=n.n(y),g=n(741319);function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=(0,s.Z)(e);if(t){var r=(0,s.Z)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return(0,a.Z)(this,n)}}var E=l()("isle:key-controls"),Z=/^[a-z]$/i,C=["input","textarea"],L=function(e){(0,c.Z)(n,e);var t=k(n);function n(e){var r;return(0,o.Z)(this,n),r=t.call(this,e),(0,u.Z)((0,i.Z)(r),"addListeners",(function(){var e=m()(r.props.actions);if(E("Add keydown event listeners for ".concat(r.props.container?"container":"document",": ").concat(e.join(", "))),r.props.container)try{f.findDOMNode(r.props.container).addEventListener("keydown",r.triggerEvent)}catch(t){E(t.message)}else document.addEventListener("keydown",r.triggerDocEvent)})),(0,u.Z)((0,i.Z)(r),"removeListeners",(function(e){var t=m()(r.props.actions);if(E("Remove keydown event listeners for ".concat(e?"container":"document",": ").concat(t.join(", "))),e)try{f.findDOMNode(e).removeEventListener("keydown",r.triggerEvent)}catch(n){E(n.message)}document.removeEventListener("keydown",r.triggerDocEvent)})),(0,u.Z)((0,i.Z)(r),"triggerEvent",(function(e){var t=e.key;E("Received key press for container: ".concat(t));var n=r.props.actions[t],o=e.ctrlKey||e.shiftKey||e.altKey||e.metaKey;if(document.activeElement===r.props.container&&!o&&h()(n)){if(Z.test(t)&&document.activeElement!==document.body){var i=document.activeElement;if(i&&(-1!==C.indexOf(i.tagName.toLowerCase())||i.isContentEditable)||"CANVAS"===i.tagName)return}e.preventDefault(),e.stopPropagation(),n(e)}})),(0,u.Z)((0,i.Z)(r),"triggerDocEvent",(function(e){var t=e.key,n=e.ctrlKey||e.shiftKey||e.altKey||e.metaKey;E("Received key press for document: ".concat(t));var o=r.props.actions[t];if(!n&&h()(o)){if(Z.test(t)&&document.activeElement!==document.body){var i=document.activeElement;if(i&&(-1!==C.indexOf(i.tagName.toLowerCase())||i.isContentEditable)||"CANVAS"===i.tagName)return}e.preventDefault(),e.stopPropagation(),o(e)}})),r}return(0,r.Z)(n,[{key:"componentDidMount",value:function(){E("Component has mounted..."),this.addListeners()}},{key:"componentDidUpdate",value:function(e){this.props.container!==e.container&&(E("Container has changed, re-attach event listeners..."),this.removeListeners(e.container),this.addListeners())}},{key:"componentWillUnmount",value:function(){E("Component has unmounted..."),this.removeListeners()}},{key:"render",value:function(){return null}}]),n}(d.Component);L.defaultProps={actions:{},container:null},L.contextType=g.Z,t.default=L}}]);