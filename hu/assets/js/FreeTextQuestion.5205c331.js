(self.webpackChunk=self.webpackChunk||[]).push([[2792],{956780:function(t,e,i){"use strict";var s=(0,i(844601).Z)((function(){return i.e(3269).then(i.bind(i,198164))}));e.Z=s},812383:function(t,e,i){"use strict";var s=i(454530),n=i(202784),o=(i(213980),["children"]),r=function(t){var e=t.children,i=(0,s.Z)(t,o);return n.createElement("div",i,e)};r.defaultProps={className:"",style:{}},e.Z=r},912740:function(t,e,i){"use strict";var s=(0,i(844601).Z)((function(){return i.e(6131).then(i.bind(i,357459))}));e.Z=s},810035:function(t,e,i){"use strict";var s=(0,i(844601).Z)((function(){return Promise.all([i.e(3312),i.e(4507)]).then(i.bind(i,149764))}));e.Z=s},208380:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return W}});i(382139);var s=i(858255),n=i(264659),o=i(904730),r=i(673989),a=i(175663),l=i(750591),u=i(575630),c=i(151119),p=i(202784),d=i(928316),h=(i(213980),i(198)),f=i(770561),v=i(482228),m=i(26266),b=i(10863),Z=i(31071),y=i(911755),g=i.n(y),x=i(294565),k=i(42111),N=i(462874),S=i(912740),w=i(358988),q=i(812383),P=i(744902),C=i(956780),D=i(172245),L=i(975249),T=i(228856),H=i(810035),E=i(741319),R=i(312093),z=i(509901),B=i(5140),F=i(964909),A=i(432261),M=JSON.parse('[{"command":"appendText","trigger":"insert","description":"Dictate your answer","params":["text"],"regexp":"/insert[a-z]* (?<text>[\\\\s\\\\S]+)/i"},{"command":"handleSolutionClick","trigger":"solution","description":"Toggle the solution"},{"command":"submitHandler","trigger":"submit","description":"Submit your answer"},{"command":"triggerHint","trigger":"hint","description":"Toggle hint"}]');function U(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,s=(0,u.Z)(t);if(e){var n=(0,u.Z)(this).constructor;i=Reflect.construct(s,arguments,n)}else i=s.apply(this,arguments);return(0,l.Z)(this,i)}}var Q=(0,k.Z)("free-text-question"),I=g()("isle:free-text-question"),O=function(t){(0,a.Z)(i,t);var e=U(i);function i(t,s){var o;(0,n.Z)(this,i),o=e.call(this,t),(0,c.Z)((0,r.Z)(o),"handleChange",(function(t){var e=t.target.value;o.setState({value:e}),o.beforeUnload||(window.addEventListener("beforeunload",z.Z),o.beforeUnload=!0),o.props.onChange(e)})),(0,c.Z)((0,r.Z)(o),"appendText",(function(t){o.setState({value:o.state.value+" "+t})})),(0,c.Z)((0,r.Z)(o),"sendSubmitNotification",(function(){var t=o.context;if(o.state.submitted)t.addNotification({title:o.props.t("answer-resubmitted"),message:o.props.resubmissionMsg,level:"success"});else{var e=o.props.submissionMsg;""===e&&(e=o.props.solution&&o.props.provideFeedback?o.props.t("submission-message-solution"):o.props.t("submission-message-no-solution")),t.addNotification({title:o.props.t("answer-submitted"),message:e,level:"success"})}})),(0,c.Z)((0,r.Z)(o),"submitHandler",(function(t){var e=o.context;o.props.disableSubmitNotification||o.sendSubmitNotification(),o.props.onSubmit(o.state.value),o.setState({submitted:!0}),window.removeEventListener("beforeunload",z.Z),o.beforeUnload=!1,e.log({id:o.id,type:B.Ql,value:o.state.value})})),(0,c.Z)((0,r.Z)(o),"handleSolutionClick",(function(){var t=o.context;o.state.solutionDisplayed?o.setState({solutionDisplayed:!1,value:o.state.studentAnswer}):(t.log({id:o.id,type:B.Lu,value:null}),o.setState({solutionDisplayed:!0,studentAnswer:o.state.value,value:o.props.solution}))})),(0,c.Z)((0,r.Z)(o),"logHint",(function(t){I("Logging hint..."),o.context.log({id:o.id,type:B.sF,value:t})})),I("Invoking constructor of FreeTextQuestion...");var a=s.currentUserActions;o.id=t.id||Q(t);var l=(0,R.Z)(a,o.id,B.Ql);return o.state={exhaustedHints:0===t.hints.length,value:(0,x.isPrimitive)(l)?l:"",solutionDisplayed:!1,submitted:(0,x.isPrimitive)(l),placeholder:t.placeholder,solution:t.solution,question:t.question},o}return(0,o.Z)(i,[{key:"componentDidMount",value:function(){var t=this,e=this.context;this.unsubscribe=e.subscribe((function(e){e===F.u&&t.setToLastAction()}))}},{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"setToLastAction",value:function(){var t=this.context.currentUserActions,e=(0,R.Z)(t,this.id,B.Ql);(0,x.isPrimitive)(e)&&e!==this.state.value&&this.setState({value:e,submitted:!0})}},{key:"triggerHint",value:function(){d.findDOMNode(this.hintButton).click()}},{key:"renderSubmitButton",value:function(){var t=this.context;return this.props.until&&t.startTime>this.props.until?(0,s.Z)("span",{className:"title",style:{marginLeft:4}},void 0,this.props.t("question-closed")):this.state.value.length>=1&&!this.state.solutionDisplayed?(0,s.Z)(w.Z,{className:"submit-button",variant:"primary",size:"sm",onClick:this.submitHandler,duration:5,style:{marginLeft:"4px"}},void 0,this.state.submitted?this.props.t("resubmit"):this.props.t("submit")):(0,s.Z)(L.Z,{placement:"top",positionLeft:100,overlay:(0,s.Z)(Z.Z,{id:"submitTooltip"},void 0,this.props.t("submit-tooltip")),rootClose:!0},void 0,(0,s.Z)("div",{style:{display:"inline-block"}},void 0,(0,s.Z)(f.Z,{className:"submit-button",variant:"primary",size:"sm",style:{pointerEvents:"none",marginLeft:"4px"},disabled:!0},void 0,this.props.t("submit"))))}},{key:"render",value:function(){var t=this,e=this.props.hints.length,i=(0,s.Z)(P.Z,{disabled:!(this.props.instantSolution||this.state.submitted&&this.state.exhaustedHints),onClick:this.handleSolutionClick,hasHints:this.props.hints.length>0});return(0,s.Z)(N.Z,{id:this.id,className:"free-text-question ".concat(this.props.className),style:this.props.style,fullscreen:!0,bodyStyle:{width:this.props.feedback?"calc(100%-60px)":"100%",display:"inline-block"}},void 0,(0,s.Z)(D.Z,{id:this.props.voiceID,reference:this,commands:M}),this.props.question?(0,s.Z)("div",{className:"title"},void 0,this.props.question):null,(0,s.Z)(b.Z,{},void 0,(0,s.Z)("label",{htmlFor:"".concat(this.id,"-textarea")},void 0,this.state.solutionDisplayed?this.props.t("solution"):this.props.t("your-answer")),this.state.solutionDisplayed?(0,s.Z)("div",{className:"free-text-question-solution-wrapper",style:{height:"calc(".concat(1.5*this.props.rows,"rem + 14px)")}},void 0,this.state.value):(0,s.Z)(m.Z,{id:"".concat(this.id,"-textarea"),as:"textarea",placeholder:this.props.placeholder||this.props.t("enter-your-answer-here"),onChange:this.handleChange,style:{resize:this.props.resizable?"both":"none"},maxLength:this.props.maxlength,rows:this.props.rows,value:this.state.value,disabled:this.state.solutionDisplayed})),(0,s.Z)(q.Z,{buttonLabel:this.props.t("answers"),id:this.id,info:B.Ql,data:{question:this.props.question,solution:this.props.solution},style:{float:"left"},points:this.props.points}),(0,s.Z)(v.Z,{className:"free-text-question-toolbar"},void 0,e>0?p.createElement(C.Z,{id:"".concat(this.id,"-hints"),onClick:this.logHint,ref:function(e){t.hintButton=e},hints:this.props.hints,onFinished:function(){t.setState({exhaustedHints:!0})},style:{marginRight:"4px"},placement:this.props.hintPlacement}):null,this.props.provideFeedback&&this.props.solution?i:null,this.props.chat?(0,s.Z)("div",{style:{display:"inline-block",marginLeft:"4px"}},void 0,(0,s.Z)(S.Z,{for:this.id})):null,this.renderSubmitButton()),this.props.feedback?(0,s.Z)(T.Z,{id:this.id+"_feedback",style:{marginRight:5,marginTop:-5}}):null,(0,s.Z)(H.Z,{for:this.id,points:this.props.points}))}}],[{key:"getDerivedStateFromProps",value:function(t,e){return t.placeholder!==e.placeholder||t.solution!==e.solution||t.question!==e.question?{value:"",solutionDisplayed:!1,submitted:!1,placeholder:t.placeholder,solution:t.solution,question:t.question}:null}}]),i}(p.Component);O.defaultProps={question:"",hints:[],hintPlacement:"top",feedback:!0,solution:"",instantSolution:!1,rows:5,chat:!1,placeholder:"",resizable:!1,disableSubmitNotification:!1,submissionMsg:"",resubmissionMsg:"You have successfully re-submitted your answer.",provideFeedback:!0,maxlength:2500,voiceID:null,until:null,points:10,className:"",style:{},onChange:function(){},onSubmit:function(){}},O.contextType=E.Z;var W=(0,h.Z)("questions/free-text")((0,A.W)(O))},744902:function(t,e,i){"use strict";var s=(0,i(844601).Z)((function(){return i.e(8905).then(i.bind(i,912358))}));e.Z=s},312093:function(t,e,i){"use strict";i(898837);var s=i(588703),n=i.n(s),o=i(830324),r=i.n(o);e.Z=function(t,e,i){if(r()(t)){var s=t[e];if(n()(s)&&(s=s.filter((function(t){return t.type===i}))).length>0)return s[0].value}return null}},770561:function(t,e,i){"use strict";var s=i(607560),n=i(998283),o=i(72779),r=i.n(o),a=i(202784),l=i(429658),u=i(482695),c=["bsPrefix","variant","size","active","className","block","type","as"],p=a.forwardRef((function(t,e){var i=t.bsPrefix,o=t.variant,p=t.size,d=t.active,h=t.className,f=t.block,v=t.type,m=t.as,b=(0,n.Z)(t,c),Z=(0,l.vE)(i,"btn"),y=r()(h,Z,d&&"active",o&&Z+"-"+o,f&&Z+"-block",p&&Z+"-"+p);if(b.href)return a.createElement(u.Z,(0,s.Z)({},b,{as:m,ref:e,className:r()(y,b.disabled&&"disabled")}));e&&(b.ref=e),v?b.type=v:m||(b.type="button");var g=m||"button";return a.createElement(g,(0,s.Z)({},b,{className:y}))}));p.displayName="Button",p.defaultProps={variant:"primary",active:!1,disabled:!1},e.Z=p},482228:function(t,e,i){"use strict";var s=i(607560),n=i(998283),o=i(72779),r=i.n(o),a=i(202784),l=i(429658),u=["bsPrefix","className"],c=a.forwardRef((function(t,e){var i=t.bsPrefix,o=t.className,c=(0,n.Z)(t,u),p=(0,l.vE)(i,"btn-toolbar");return a.createElement("div",(0,s.Z)({},c,{ref:e,className:r()(o,p)}))}));c.displayName="ButtonToolbar",c.defaultProps={role:"toolbar"},e.Z=c}}]);