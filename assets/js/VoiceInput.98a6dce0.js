(self.webpackChunk=self.webpackChunk||[]).push([[84331],{18620:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return N}});n(627476),n(95767),n(898837),n(694882),n(298351);var o=n(858255),r=n(151119),i=n(574315),c=n(202784),a=(n(213980),n(911755)),l=n.n(a),s=n(376699),u=n(31071),d=n(975249),f=n(741319),p=n(320765),v=(n(382139),n(264659)),h=n(904730),g=n(175663),m=n(750591),w=n(575630),y=n(24077),b=n.n(y);function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=(0,w.Z)(e);if(t){var r=(0,w.Z)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return(0,m.Z)(this,n)}}var k=function(e){(0,g.Z)(n,e);var t=Z(n);function n(){return(0,v.Z)(this,n),t.apply(this,arguments)}return(0,h.Z)(n,[{key:"render",value:function(){return(0,o.Z)("button",{onClick:this.props.onClick})}}]),n}(c.Component);k.defaultProps={onClick:function(){}};var C=b()||k;function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=l()("isle:voice-input");var O=function(e){var t,a=e.autorecord,l=e.bind,v=e.defaultValue,h=e.grammars,g=e.id,m=e.maxAlternatives,w=e.remote,y=e.startTooltip,b=e.stopTooltip,Z=e.speechInterface,k=e.onChange,S=e.onClick,O=e.onFinalText,N=e.onRecordingStart,P=e.onRecordingStop,j=e.onSegment,E=e.onSubmit,T=e.timeout,F=(0,c.useState)(a),A=(0,i.Z)(F,2),D=A[0],B=A[1],z=(0,c.useContext)(f.Z),I=(0,s.$)("Input").t,V=(0,c.useState)(l&&z.state?z.state[l]:v),Y=(0,i.Z)(V,2),G=Y[0],H=Y[1],K=(0,c.useRef)(),L=(0,c.useRef)(),M=(0,c.useCallback)((function(e){var t=e.target.value;H(t),k(t),l&&n.g.lesson.setState((0,r.Z)({},l,t))}),[l,k]),$=(0,c.useCallback)((function(e){switch(e.keyCode){case 13:E(G)}}),[G,E]),q=(0,c.useCallback)((function(){x("Set `isRecording` to false..."),B(!1),K.current&&K.current.stop(),P()}),[P]),J=(0,c.useCallback)((function(){K.current=null;var e=window.SpeechRecognition||window.webkitSpeechRecognition;if(e){var t=new e;t.lang=p.ag.language,t.continuous=!0,t.interimResults=!0,t.maxAlternatives=m,t.grammars=function(e){for(var t=t||webkitSpeechGrammarList,n=new t,o=0;o<e.length;o++){var r=e[o],i=r.src,c=r.weight;n.addFromString(i,c)}return n}(h),t.onerror=function(e){if(x("Encountered an error..."),"not-allowed"===e.error||"service-not-allowed"===e.error)return B(!1),z.addNotification({title:"Not allowed",message:"No permission to use the speech recognition service",level:"error",position:"tr"});try{t.start()}catch(n){x(n)}},t.onend=function(){x("onend: %s",g),D&&t.start()},t.onstart=function(){x("onstart: %s",g),N()},t.onresult=function(e){if(x("Processing result..."),void 0!==e.results)for(var t=e.resultIndex;t<e.results.length;++t){var n=e.results[t];if(e.results[t].isFinal){T&&(L.current=setTimeout(q,T)),x("Received final text");var o=void 0;if(m>1){o=new Array(n.length);for(var r=0;r<n.length;r++)o[r]=n[r].transcript}else o=n[0].transcript;H(o),O(o),Z&&Z.check(o,{onStart:function(){q()},onEnd:function(){J()}})}else{L.current&&clearTimeout(L.current);var i=void 0;if(m>1){i=new Array(n.length);for(var c=0;c<n.length;c++)i[c]=n[c].transcript}else i=n[0].transcript;H(i),j(i)}}else x("Something went wrong...")},t.start(),K.current=t}x("Set `isRecording` to true..."),B(!0)}),[h,g,D,m,N,z,Z,q,T,O,j]),Q=(0,c.useCallback)((function(e){return e?!0===D?b||I("click-to-stop-recording"):y||I("click-to-start-recording"):"Your browser does not support voice recognition. You may use the Chrome Browser instead"}),[D,y,b,I]);(0,c.useEffect)((function(){w&&(window.onkeydown=function(e){switch(e.keyCode){case w.stop:q();break;case w.start:D||J();break;case w.toggle:D?q():J()}}),a&&(x("Should record voice..."),J())}),[a,w,D,J,q]);var U=(0,c.useCallback)((function(e){S(e),D?q():J()}),[D,J,q,S]),W="voice-microphone";!0===D&&(W="voice-microphone voice-recording");var X=Q(function(){try{var e=e||webkitSpeechRecognition;return!!e}catch(t){return!1}}()),_=(0,o.Z)(u.Z,{id:"".concat(e.id,"-voice-input-tooltip")},void 0,X);switch(e.mode){case"full":return(0,o.Z)(c.Fragment,{},void 0,e.legend?(0,o.Z)("label",{},void 0,e.legend):null,(0,o.Z)("div",{className:"input voice-input ".concat(e.className),style:R({height:e.height,width:e.width},e.style)},void 0,(0,o.Z)("input",{className:"voice-input-text",type:"text",onKeyDown:$,onChange:M,placeholder:null!==e.placeholder?e.placeholder:I("enter-text"),value:G}),(0,o.Z)(d.Z,{placement:e.tooltipPlacement,overlay:_},void 0,(0,o.Z)(C,{onClick:U,className:W}))));case"status":return(0,o.Z)(c.Fragment,{},void 0,e.legend?(0,o.Z)("label",{},void 0,e.legend):null,(0,o.Z)("div",{className:"voice-input-status-text ".concat(e.className),style:R({height:e.height,width:e.width},e.style)},void 0,t||(t=(0,o.Z)("div",{className:"voice-input-status"},void 0,G)),(0,o.Z)(d.Z,{placement:"bottom",overlay:_},void 0,(0,o.Z)(C,{onClick:U,className:W}))));case"microphone":return(0,o.Z)(c.Fragment,{},void 0,e.legend?(0,o.Z)("label",{},void 0,e.legend):null,(0,o.Z)("div",{className:"voice-solo-microphone ".concat(e.className),style:R({height:e.height,width:e.width},e.style)},void 0,(0,o.Z)(d.Z,{placement:"bottom",overlay:_},void 0,(0,o.Z)(C,{onClick:U,className:W}))));case"none":return null}};O.defaultProps={autorecord:!1,defaultValue:"",grammars:[],legend:"",mode:"full",maxAlternatives:1,onChange:function(){},onClick:function(){},onFinalText:function(){},onSegment:function(){},onRecordingStart:function(){},onRecordingStop:function(){},onSubmit:function(){},placeholder:null,remote:null,className:"",style:{},timeout:null,stopTooltip:null,startTooltip:null,tooltipPlacement:"left",width:500,height:36};var N=O},24077:function(e,t,n){var o=n(202784);function r(e){return o.createElement("svg",e,[o.createElement("defs",{id:"defs3723",key:0}),o.createElement("path",{d:"m 75.897176,155.35465 h -20.741 c -4.834,0 -4.84,15.963 0,15.963 h 53.854004 c 4.839,0 4.833,-15.963 0,-15.963 H 88.718176 l -0.602,-10.14 c 35.693004,-3.164 48.733004,-32.896 47.931004,-63.961003 -0.198,-7.666 -13.296,-6.779 -12.443,0.979 3.413,71.099003 -86.068004,69.681003 -83.271004,-1.358 0.251,-6.389 -11.982,-6.453 -12.232,0.46 -0.598,28.619003 13.64,60.803003 48.257,63.880003 z M 107.47818,48.083647 c -0.528,-14.312 -6.628,-23.486 -14.452004,-27.655 -6.579,-3.506 -14.45,-3.5 -21.076,-0.113 -8.071,4.127 -14.504,13.346 -15.273,27.676 l 0.005,20.069 h 50.800004 z m -9.674004,-36.613 c 10.769004,5.739 19.146004,17.829 19.826004,36.254 l 0.008,44.158 c 0,12.720003 -7.705,26.975003 -18.903004,33.302003 -9.819,5.547 -21.804,5.594 -31.748,0.326 -10.292,-5.451 -18.583,-16.519 -20.432,-33.071003 l -0.031,-44.705 c 0,-14.39 7.714,-29.763 20.808,-36.458 9.579,-4.8959999 20.965,-4.8729999 30.472,0.194 z",id:"path3713",style:{clipRule:"evenodd",fillRule:"evenodd"},key:1})])}r.defaultProps={x:"0px",y:"0px",viewBox:"0 0 164 180",xmlSpace:"preserve",id:"svg3719",width:"32",height:"35"},e.exports=r,r.default=r}}]);