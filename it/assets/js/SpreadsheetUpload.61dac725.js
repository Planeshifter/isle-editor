(self.webpackChunk=self.webpackChunk||[]).push([[459],{515490:function(e,t,a){"use strict";a.r(t);var n=a(858255),o=a(574315),l=a(202784),r=(a(213980),a(376699)),i=a(260952),s=a(998856),d=a(423134),u=a.n(d),c=a(857906),p=a.n(c),f=a(741319),v=a(785745),g=a(432261);function Z(e){e.stopPropagation(),e.preventDefault()}var m=function(e){var t=e.title,a=e.onUpload,d=(0,l.useState)(0),c=(0,o.Z)(d,2),g=c[0],m=c[1],h=(0,l.useState)(!1),C=(0,o.Z)(h,2),b=C[0],k=C[1],x=(0,l.useState)(!0),w=(0,o.Z)(x,2),y=w[0],E=w[1],S=(0,r.$)("spreadsheet-upload").t,D=(0,l.useContext)(f.Z),F=(0,l.useRef)(null),T=(0,l.useCallback)((function(e){var t=e.target.result;m(0),k(!1),u()({noheader:!y,checkType:!0,ignoreEmpty:!0}).fromString(t).then((function(e){a(null,e)})).catch((function(e){D.addNotification({title:S("error-title"),message:"".concat(S("error-message"),": ").concat(e.message),level:"error",position:"tr"}),a(e)}))}),[y,D,a,S]),U=(0,l.useCallback)((function(){k(!0);var e=new FileReader,t=F.current.files[0];e.addEventListener("load",T,!1),e.addEventListener("progress",(function(e){if(e.lengthComputable){var t=e.loaded/e.total;m(t)}}),!1),e.readAsText(t,"utf-8")}),[T]),A=(0,l.useCallback)((function(e){e.stopPropagation(),e.preventDefault();var t=e.dataTransfer,a=new FileReader,n=null;if(t.items?"file"===t.items[0].kind&&(n=t.items[0].getAsFile()):n=t.files[0],n){if("text/csv"!==n.type)return D.addNotification({title:S("no-csv"),message:S("no-csv-message"),level:"error",position:"tr"});a.addEventListener("load",T,!1),a.readAsText(n,"utf-8")}}),[D,T,S]),L=(0,l.useCallback)((function(e){E(e)}),[]),P=p()(100*g);return(0,n.Z)(i.Z,{},void 0,(0,n.Z)(i.Z.Header,{as:"h2"},void 0,t||S("title")),(0,n.Z)(i.Z.Body,{},void 0,(0,n.Z)("label",{htmlFor:"CSVUpload"},void 0,S("csv-upload-prompt"),":"),l.createElement("input",{id:"CSVUpload",type:"file",accept:".csv",onChange:U,ref:F,style:{margin:"auto"}}),(0,n.Z)("p",{},void 0,S("or")),(0,n.Z)("div",{onDrop:A,onDragOver:Z,onDragEnd:Z,style:{minHeight:"150px",width:"250px",border:"1px solid blue",padding:"10px"}},void 0,(0,n.Z)("span",{},void 0,S("drop-file"))),(0,n.Z)(v.Z,{legend:S("first-row-names"),defaultValue:!0,onChange:L}),b?(0,n.Z)(s.Z,{now:P,label:"".concat(P,"%")}):null))};m.defaultProps={onUpload:function(){},title:null},t.default=(0,g.W)(m)}}]);