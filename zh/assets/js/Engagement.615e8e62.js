/*! For license information please see Engagement.615e8e62.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[159],{1529:function(e,t,s){"use strict";var n=s(367),i=s(368),r=s(370),a=s.n(r),o=s(0),l=s.n(o),c=s(377),u=s(645);function p(e,t,s){var n=(e-t)/(s-t)*100;return Math.round(1e3*n)/1e3}function d(e,t){var s,r=e.min,o=e.now,c=e.max,u=e.label,d=e.srOnly,f=e.striped,v=e.animated,h=e.className,m=e.style,y=e.variant,g=e.bsPrefix,b=Object(i.a)(e,["min","now","max","label","srOnly","striped","animated","className","style","variant","bsPrefix"]);return l.a.createElement("div",Object(n.a)({ref:t},b,{role:"progressbar",className:a()(h,g+"-bar",(s={},s["bg-"+y]=y,s[g+"-bar-animated"]=v,s[g+"-bar-striped"]=v||f,s)),style:Object(n.a)({width:p(o,r,c)+"%"},m),"aria-valuenow":o,"aria-valuemin":r,"aria-valuemax":c}),d?l.a.createElement("span",{className:"sr-only"},u):u)}var f=l.a.forwardRef((function(e,t){var s=e.isChild,r=Object(i.a)(e,["isChild"]);if(r.bsPrefix=Object(c.a)(r.bsPrefix,"progress"),s)return d(r,t);var p=r.min,f=r.now,v=r.max,h=r.label,m=r.srOnly,y=r.striped,g=r.animated,b=r.bsPrefix,w=r.variant,N=r.className,R=r.children,x=Object(i.a)(r,["min","now","max","label","srOnly","striped","animated","bsPrefix","variant","className","children"]);return l.a.createElement("div",Object(n.a)({ref:t},x,{className:a()(N,b)}),R?Object(u.b)(R,(function(e){return Object(o.cloneElement)(e,{isChild:!0})})):d({min:p,now:f,max:v,label:h,srOnly:m,striped:y,animated:g,bsPrefix:b,variant:w},t))}));f.displayName="ProgressBar",f.defaultProps={min:0,max:100,animated:!1,isChild:!1,srOnly:!1,striped:!1},t.a=f},2575:function(e,t,s){"use strict";var n=s(644);s.d(t,"a",(function(){return n.a}));var i=s(510);s.d(t,"b",(function(){return i.b}));var r=s(545);s.d(t,"c",(function(){return r.a}));s(748),s(1203),s(1116),s(1296)},2581:function(e,t,s){"use strict";var n=s(367),i=s(368),r=s(370),a=s.n(r),o=s(0),l=s.n(o),c=s(377),u=l.a.forwardRef((function(e,t){var s=e.bsPrefix,r=e.className,o=e.striped,u=e.bordered,p=e.borderless,d=e.hover,f=e.size,v=e.variant,h=e.responsive,m=Object(i.a)(e,["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"]),y=Object(c.a)(s,"table"),g=a()(r,y,v&&y+"-"+v,f&&y+"-"+f,o&&y+"-striped",u&&y+"-bordered",p&&y+"-borderless",d&&y+"-hover"),b=l.a.createElement("table",Object(n.a)({},m,{className:g,ref:t}));if(h){var w=y+"-responsive";return"string"==typeof h&&(w=w+"-"+h),l.a.createElement("div",{className:w},b)}return b}));t.a=u},441:function(e,t,s){"use strict";var n=s(367),i=s(368),r=s(370),a=s.n(r),o=s(0),l=s.n(o),c=s(377),u=["xl","lg","md","sm","xs"],p=l.a.forwardRef((function(e,t){var s=e.bsPrefix,r=e.className,o=e.noGutters,p=e.as,d=void 0===p?"div":p,f=Object(i.a)(e,["bsPrefix","className","noGutters","as"]),v=Object(c.a)(s,"row"),h=v+"-cols",m=[];return u.forEach((function(e){var t,s=f[e];delete f[e];var n="xs"!==e?"-"+e:"";null!=(t=null!=s&&"object"==typeof s?s.cols:s)&&m.push(""+h+n+"-"+t)})),l.a.createElement(d,Object(n.a)({ref:t},f,{className:a.a.apply(void 0,[r,v,o&&"no-gutters"].concat(m))}))}));p.displayName="Row",p.defaultProps={noGutters:!1},t.a=p},645:function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return a}));var n=s(0),i=s.n(n);function r(e,t){var s=0;return i.a.Children.map(e,(function(e){return i.a.isValidElement(e)?t(e,s++):e}))}function a(e,t){var s=0;i.a.Children.forEach(e,(function(e){i.a.isValidElement(e)&&t(e,s++)}))}},6626:function(e,t,s){"use strict";var n=s(6627);e.exports=n},6627:function(e,t,s){"use strict";var n=s(746).isPrimitive,i=s(369);e.exports=function(e){var t,s,r,a,o;if(!n(e))throw new TypeError("invalid argument. Must provide a positive integer. Value: `"+e+"`.");return s=new Array(e),r=0,o=-1,a=0,function(n){var l;if(0===arguments.length)return 0===a?null:r;if(o=(o+1)%e,i(n))a=e,r=NaN;else if(a<e)r+=(t=n-r)/(a+=1);else if(i(s[o])){for(a=1,r=n,l=0;l<e;l++)if(l!==o){if(i(s[l])){a=e,r=NaN;break}a+=1,t=s[l]-r,r+=t/a}}else!1===i(r)&&(t=n-s[o],r+=t/e);return s[o]=n,r}}},6628:function(e,t,s){"use strict";var n=s(6629);e.exports=n},6629:function(e,t,s){"use strict";var n=s(746).isPrimitive,i=s(369),r=s(381),a=s(399);e.exports=function(e){var t,s,o,l,c;if(!n(e))throw new TypeError("invalid argument. Must provide a positive integer. Value: `"+e+"`.");return t=new Array(e),s=r,o=a,c=-1,l=0,function(n){var r,a;if(0===arguments.length)return 0===l?null:o-s;c=(c+1)%e,0===n&&(n=0);if(i(n))l=e,s=n,o=n;else if(l<e)l+=1,n<s&&(s=n),n>o&&(o=n);else if(t[c]===s&&n>s||t[c]===o&&n<o||i(t[c])){for(s=n,o=n,a=0;a<e;a++)if(a!==c){if(r=t[a],i(r)){s=r,o=r;break}r<s&&(s=r),r>o&&(o=r)}}else n<s?s=n:n>o&&(o=n);return t[c]=n,o-s}}},6791:function(e,t,s){"use strict";s.r(t);s(386),s(374),s(387);var n=s(372),i=s.n(n),r=s(378),a=s.n(r),o=s(380),l=s.n(o),c=s(384),u=s.n(c),p=s(385),d=s.n(p),f=s(383),v=s.n(f),h=s(0),m=(s(364),s(635)),y=s(450),g=(s(793),s(395)),b=s.n(g),w=s(375),N=s.n(w),R=s(425),x=s.n(R),S=s(5288),C=s(401),k=s(768),P=s(1015),O=s(495),H=s(441),j=s(1056),D=s(616),T=s(818),E=s(2575),q=s(1203),z=s(2055),A=s(2057),V=s(2051);function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,n=v()(e);if(t){var i=v()(this).constructor;s=Reflect.construct(n,arguments,i)}else s=n.apply(this,arguments);return d()(this,s)}}var W=x()("isle:survey-generator"),F="survey-generator",G=function(e){u()(s,e);var t=M(s);function s(e){var n;return a()(this,s),n=t.call(this,e),N()(b()(n),"setQuestion",(function(e){W("Set the question text...");var t=!0;e.length>3&&(n.state.answers.length>1||"multiple-choice"!==n.state.type)&&(t=!1),n.setState({question:e,disabled:t})})),N()(b()(n),"setType",(function(e){n.setState({type:e})})),N()(b()(n),"toggleSurvey",(function(){var e=n.props.session;n.state.showSurvey?e.log({id:F,type:y.yc,value:null},"members"):e.log({id:F,type:y.uc,value:{answers:n.state.answers,type:n.state.type,question:n.state.question}},"members")})),N()(b()(n),"getAnswers",(function(e){var t=e.split("\n"),s=!0;n.state.question.length>3&&t.length>1&&(s=!1),n.setState({answers:t,disabled:s})})),N()(b()(n),"toggleAnonymous",(function(e){n.setState({anonymous:e})})),n.state={answers:[],question:"",type:"free-text",showSurvey:!1,anonymous:!0,disabled:!0},n}return l()(s,[{key:"componentDidMount",value:function(){var e=this,t=this.props.session;this.unsubscribe=t.subscribe((function(t,s){W("Received member action..."),t===m.n&&(s.type===y.uc?(W("Should start the survey..."),F===s.id&&e.setState({question:s.value.question,type:s.value.type,answers:s.value.answers,showSurvey:!0})):s.type===y.yc&&(W("Should stop the survey..."),F===s.id&&e.setState({showSurvey:!1})),e.forceUpdate())}))}},{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"render",value:function(){var e;e=this.state.showSurvey?i()("div",{},void 0,"multiple-choice"===this.state.type?i()(z.a,{user:!0,question:this.state.question,answers:this.state.answers,id:F+":multiple-choice-survey",anonymous:this.state.anonymous}):null,"number"===this.state.type?i()(A.a,{user:!0,question:this.state.question,id:F+":number-survey",anonymous:this.state.anonymous}):null,"free-text"===this.state.type?i()(V.a,{user:!0,question:this.state.question,answers:this.state.answers,id:F+":free-text-survey",anonymous:this.state.anonymous}):null,i()("label",{},void 0,this.state.anonymous?"":this.props.t("survey-not-anonymous")),i()(T.a,{owner:!0},void 0,i()(C.a,{disabled:this.state.disabled,onClick:this.toggleSurvey,style:{float:"right"}},void 0,this.props.t("stop-survey")))):i()(T.a,{owner:!0,banner:i()("h3",{},void 0,this.props.t("survey-not-started"))},void 0,i()(k.a,{},void 0,i()(H.a,{},void 0,i()(O.a,{md:3},void 0,i()(P.a,{htmlFor:"survey-select-input"},void 0,this.props.t("type"),":")),i()(O.a,{md:9},void 0,i()(E.c,{id:"survey-select-input",defaultValue:this.state.type,options:["multiple-choice","number","free-text"],onChange:this.setType})))),i()(k.a,{},void 0,i()(q.a,{legend:this.props.t("question"),onChange:this.setQuestion,rows:2})),"multiple-choice"===this.state.type?i()(k.a,{},void 0,i()(q.a,{legend:this.props.t("answer-options-new-line-delimited"),onChange:this.getAnswers})):null,i()(E.a,{tooltip:this.props.t("anonymous-survey-tooltip"),tooltipPlacement:"top",legend:this.props.t("anonymous-survey"),defaultValue:!0,onChange:this.toggleAnonymous}),i()(C.a,{disabled:this.state.disabled,onClick:this.toggleSurvey},void 0,this.props.t("start-survey")));var t=this.props.session;return i()(j.a,{dragHandleClassName:"card-header"},void 0,i()(D.a,{header:this.props.t("survey"),minimizable:!0,className:"survey-generator",onHide:t.isOwner()?this.props.onHide:null,hideTooltip:this.props.t("finish-survey")},void 0,e))}}]),s}(h.Component),L=Object(S.a)("Toolbar")(G),U=(s(508),s(2581)),B=s(3130),J=s(490),Q=s(789),I=Object(S.a)("Toolbar")((function(e){return i()(j.a,{dragHandleClassName:"card-header"},void 0,i()(D.a,{className:"engagement-meter-panel",header:e.t("poll-responses"),onHide:e.onHide,minimizable:!0,style:{width:400}},void 0,i()(B.a,{className:"engagement-table",showPageSizeOptions:!1,data:e.responses,resizable:!1,sortable:!1,columns:[{Header:"Pic",id:"pic",accessor:function(t){for(var s=e.session.userList,n=0;n<s.length;n++)if(s[n].name===t.name)return s[n].picture;return""},Cell:function(t){return i()("img",{className:"engagement-table-pic",alt:"User thumbnail",src:"".concat(e.session.server,"/thumbnail/").concat(t.value)})},maxWidth:38,minWidth:38,style:{color:"darkslategrey"}},{Header:e.t("name"),id:"nameCol",accessor:"name",width:180,Cell:function(e){return i()(J.a,{tooltip:"".concat(e.value," (").concat(e.original.email,")")},void 0,i()("span",{className:"engagement-table-name"},void 0,e.value))}},{Header:e.t("response"),id:"responseCol",accessor:"value",Cell:e.renderValue,maxWidth:38,minWidth:38},{Header:e.t("chat"),Cell:function(t){var s="Chat with ".concat(t.original.name);return i()(Q.a,{tooltip:e.t("chat-tooltip"),showTooltip:!1,for:s})}}],pageSize:8})))}));function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,n=v()(e);if(t){var i=v()(this).constructor;s=Reflect.construct(n,arguments,i)}else s=n.apply(this,arguments);return d()(this,s)}}var _="ENGAGEMENT_BINARY",K=function(e){u()(s,e);var t=Y(s);function s(e){var n;return a()(this,s),n=t.call(this,e),N()(b()(n),"toggleResponses",(function(){n.setState({showResponses:!n.state.showResponses})})),n.state={nLeft:0,nRight:0,responses:[],showResponses:!1},n}return l()(s,[{key:"componentDidMount",value:function(){var e,t,s,n=this,r=this.props.session;switch(r&&(this.unsubscribe=r.subscribe((function(e,t){if(e===m.n&&t.id===_&&t.type===y.cc){var s=n.state.responses.slice();s.push({name:t.name,email:t.email,value:t.value}),1===t.value?n.setState({nRight:n.state.nRight+1,responses:s}):-1===t.value&&n.setState({nLeft:n.state.nLeft+1,responses:s})}}))),this.props.type){case"yes:no":e="fas fa-times",t="fas fa-check",s=this.props.t("answer-yes-no");break;case"too-slow:too-fast":e="fas fa-backward",t="fas fa-forward",s=this.props.t("answer-slow-fast")}if(!r.isOwner())var a=r.addNotification({title:this.props.t("poll"),message:s,level:"info",position:"tc",dismissible:"none",autoDismiss:0,children:i()("div",{style:{marginBottom:"40px",marginTop:"10px"}},void 0,i()(C.a,{variant:"secondary",style:{float:"left"},onClick:function(){r.log({id:_,type:y.cc,value:-1}),r.removeNotification(a),r.addNotification({title:n.props.t("answer-recorded"),message:n.props.t("answer-recorded-message"),level:"success",position:"tc"})}},void 0,i()("i",{className:e})),i()(C.a,{variant:"secondary",style:{float:"right"},onClick:function(){r.log({id:_,type:y.cc,value:1}),r.removeNotification(a),r.addNotification({title:n.props.t("answer-recorded"),message:n.props.t("answer-recorded-message"),level:"success",position:"tc"})}},void 0,i()("i",{className:t})))})}},{key:"render",value:function(){var e,t;switch(this.props.type){case"yes:no":e="fas fa-times",t="fas fa-check";break;case"too-slow:too-fast":e="fas fa-backward",t="fas fa-forward"}var s=this.props.t,n=i()(U.a,{bordered:!0,size:"sm"},void 0,i()("thead",{},void 0,i()("tr",{},void 0,i()("th",{},void 0,i()("i",{className:e})),i()("th",{},void 0,i()("i",{className:t})))),i()("tbody",{},void 0,i()("tr",{},void 0,i()("td",{},void 0,this.state.nLeft),i()("td",{},void 0,this.state.nRight))));return i()(h.Fragment,{},void 0,i()(j.a,{dragHandleClassName:"card-header"},void 0,i()(T.a,{owner:!0},void 0,i()(D.a,{header:s("poll"),hideTooltip:s("finish-poll"),onHide:this.props.onHide,className:"engagement-meter-panel",minimizable:!0},void 0,n,i()(C.a,{variant:"link",onClick:this.toggleResponses},void 0,i()("small",{},void 0,s("toggle-details"))))),i()(T.a,{user:!0,notOwner:!0,header:s("poll")},void 0,i()(D.a,{header:s("poll"),className:"engagement-meter-panel",minimizable:!0},void 0,n))),this.state.showResponses?i()(I,{responses:this.state.responses,session:this.props.session,onHide:this.toggleResponses,renderValue:function(s){return-1===s.value?i()("i",{className:e}):i()("i",{className:t})}}):null)}}]),s}(h.Component),X=Object(S.a)("Toolbar")(K),Z=s(1529),$=s(6626),ee=s.n($),te=s(6628),se=s.n(te),ne=s(615),ie=s.n(ne),re=s(1020),ae=s.n(re);function oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,n=v()(e);if(t){var i=v()(this).constructor;s=Reflect.construct(n,arguments,i)}else s=n.apply(this,arguments);return d()(this,s)}}var le=i()("div",{className:"score-setter"}),ce=function(e){u()(s,e);var t=oe(s);function s(e){var n;return a()(this,s),n=t.call(this,e),N()(b()(n),"onControlledDrag",(function(e,t){var s=t.x,i=t.y;n.setState({controlledPosition:{x:s,y:i}})})),N()(b()(n),"onControlledDragStop",(function(e,t){var s=t.x,i=t.y;n.setState({controlledPosition:{x:s,y:i},progress:(s+100)/200*100})})),N()(b()(n),"handleSubmit",(function(){n.props.onSubmit(n.state.progress)})),n.state={progress:50,controlledPosition:{x:0,y:0}},n}return l()(s,[{key:"render",value:function(){return i()(h.Fragment,{},void 0,i()("div",{className:"score-bottom"},void 0,i()(ae.a,{bounds:{left:-100,right:100,top:0,bottom:0},onStop:this.onControlledDragStop,position:this.state.controlledPosition,onDrag:this.onControlledDrag},void 0,le),i()(Z.a,{style:{marginTop:23}},void 0,i()(Z.a,{animated:!0,variant:"success",now:this.state.progress}),i()(Z.a,{animated:!0,variant:"danger",now:100-this.state.progress}))),i()(C.a,{variant:"secondary",size:"sm",onClick:this.handleSubmit,style:{marginTop:10}},void 0,this.props.t("submit")))}}]),s}(h.Component);function ue(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,n=v()(e);if(t){var i=v()(this).constructor;s=Reflect.construct(n,arguments,i)}else s=n.apply(this,arguments);return d()(this,s)}}var pe=function(e){u()(s,e);var t=ue(s);function s(e){var n;return a()(this,s),n=t.call(this,e),N()(b()(n),"toggleResponses",(function(){n.setState({showResponses:!n.state.showResponses})})),n.state={mean:null,range:null,responses:[],showResponses:!1},n.id=e.id||"engagement-meter",n.meanAcc=ee()(6),n.rangeAcc=se()(6),n}return l()(s,[{key:"componentDidMount",value:function(){var e=this,t=this.props.session;if(t&&(this.unsubscribe=t.subscribe((function(t,s){if(t===m.n&&s.id===e.id&&s.type===y.cc){var n=e.meanAcc(s.value),i=e.rangeAcc(s.value),r=e.state.responses.slice();r.push({name:s.name,email:s.email,value:s.value}),e.setState({mean:n,range:i,responses:r})}}))),!t.isOwner())var s=t.addNotification({title:this.props.t("poll"),message:this.props.t("meter-prompt"),level:"info",position:"tc",dismissible:"none",autoDismiss:0,children:i()(ce,{t:this.props.t,onSubmit:function(t){var n=e.props.session;n.log({id:e.id,type:y.cc,value:t}),n.removeNotification(s),n.addNotification({title:e.props.t("answer-recorded"),message:e.props.t("answer-recorded-message"),level:"success",position:"tc"})}})})}},{key:"render",value:function(){return i()(h.Fragment,{},void 0,i()(j.a,{dragHandleClassName:"card-header"},void 0,i()(T.a,{owner:!0},void 0,i()(D.a,{header:this.props.t("poll"),hideTooltip:this.props.t("finish-poll"),onHide:this.props.onHide,className:"engagement-meter-panel",minimizable:!0},void 0,i()("div",{className:"score-bottom"},void 0,this.state.mean?i()(h.Fragment,{},void 0,i()(Z.a,{style:{marginTop:23}},void 0,i()(Z.a,{animated:!0,variant:"success",now:this.state.mean}),i()(Z.a,{animated:!0,variant:"danger",now:100-this.state.mean}))):null),this.state.mean?i()("p",{},void 0,this.props.t("mean"),": ",ie()(this.state.mean,-2)," (n: ",this.state.responses.length,")"):null,this.state.range?i()("p",{},void 0,this.props.t("range"),": ",ie()(this.state.range,-2)):null,i()(C.a,{variant:"link",onClick:this.toggleResponses},void 0,i()("small",{},void 0,this.props.t("toggle-details")))))),this.state.showResponses?i()(I,{responses:this.state.responses,session:this.props.session,onHide:this.toggleResponses,renderValue:function(e){return e.value}}):null)}}]),s}(h.Component),de=Object(S.a)("Toolbar")(pe);s(353);function fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,n=v()(e);if(t){var i=v()(this).constructor;s=Reflect.construct(n,arguments,i)}else s=n.apply(this,arguments);return d()(this,s)}}var ve=function(e){u()(s,e);var t=fe(s);function s(e){var n;return a()(this,s),(n=t.call(this,e)).state={inProgress:!1},n}return l()(s,[{key:"componentDidMount",value:function(){var e=this,t=this.props.session;this.unsubscribe=t.subscribe((function(t,s){if(t===m.n&&"engagement"===s.id){var n=s.type;n===y.fb?e.setState({inProgress:s.value}):n===y.eb&&e.setState({inProgress:!1})}}))}},{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"render",value:function(){switch(this.state.inProgress){case"yes:no":case"too-slow:too-fast":return i()(X,{type:this.state.inProgress,session:this.props.session,onHide:this.props.onHide});case"like:dislike":return i()(de,{session:this.props.session,onHide:this.props.onHide});case"survey":return i()(L,{session:this.props.session,onHide:this.props.onHide});default:return null}}}]),s}(h.Component);t.default=ve},789:function(e,t,s){"use strict";var n=s(371),i=Object(n.a)((function(){return s.e(143).then(s.bind(null,1271))}));t.a=i}}]);