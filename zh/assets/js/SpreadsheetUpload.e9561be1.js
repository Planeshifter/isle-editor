(self.webpackChunk=self.webpackChunk||[]).push([[459],{515490:function(e,t,a){"use strict";a.r(t);var n=a(858255),o=a(574315),l=a(202784),r=(a(213980),a(376699)),i=a(260952),s=a(998856),d=a(423134),u=a.n(d),p=a(857906),c=a.n(p),f=a(741319),v=a(785745),g=a(320765),Z=a(432261);function m(e){e.stopPropagation(),e.preventDefault()}(0,g.E4)("SpreadsheetUpload");var h=function(e){var t=e.title,a=e.onUpload,d=(0,l.useState)(0),p=(0,o.Z)(d,2),g=p[0],Z=p[1],h=(0,l.useState)(!1),C=(0,o.Z)(h,2),b=C[0],k=C[1],x=(0,l.useState)(!0),S=(0,o.Z)(x,2),w=S[0],y=S[1],E=(0,r.$)("SpreadsheetUpload").t,U=(0,l.useContext)(f.Z),D=(0,l.useRef)(null),F=(0,l.useCallback)((function(e){var t=e.target.result;Z(0),k(!1),u()({noheader:!w,checkType:!0,ignoreEmpty:!0}).fromString(t).then((function(e){a(null,e)})).catch((function(e){U.addNotification({title:E("error-title"),message:"".concat(E("error-message"),": ").concat(e.message),level:"error",position:"tr"}),a(e)}))}),[w,U,a,E]),T=(0,l.useCallback)((function(){k(!0);var e=new FileReader,t=D.current.files[0];e.addEventListener("load",F,!1),e.addEventListener("progress",(function(e){if(e.lengthComputable){var t=e.loaded/e.total;Z(t)}}),!1),e.readAsText(t,"utf-8")}),[F]),A=(0,l.useCallback)((function(e){e.stopPropagation(),e.preventDefault();var t=e.dataTransfer,a=new FileReader,n=null;if(t.items?"file"===t.items[0].kind&&(n=t.items[0].getAsFile()):n=t.files[0],n){if("text/csv"!==n.type)return U.addNotification({title:E("no-csv"),message:E("no-csv-message"),level:"error",position:"tr"});a.addEventListener("load",F,!1),a.readAsText(n,"utf-8")}}),[U,F,E]),L=(0,l.useCallback)((function(e){y(e)}),[]),P=c()(100*g);return(0,n.Z)(i.Z,{},void 0,(0,n.Z)(i.Z.Header,{as:"h2"},void 0,t||E("title")),(0,n.Z)(i.Z.Body,{},void 0,(0,n.Z)("label",{htmlFor:"CSVUpload"},void 0,E("csv-upload-prompt"),":"),l.createElement("input",{id:"CSVUpload",type:"file",accept:".csv",onChange:T,ref:D,style:{margin:"auto"}}),(0,n.Z)("p",{},void 0,E("or")),(0,n.Z)("div",{onDrop:A,onDragOver:m,onDragEnd:m,style:{minHeight:"150px",width:"250px",border:"1px solid blue",padding:"10px"}},void 0,(0,n.Z)("span",{},void 0,E("drop-file"))),(0,n.Z)(v.Z,{legend:E("first-row-names"),defaultValue:!0,onChange:L}),b?(0,n.Z)(s.Z,{now:P,label:"".concat(P,"%")}):null))};h.defaultProps={onUpload:function(){},title:null},t.default=(0,Z.W)(h)}}]);