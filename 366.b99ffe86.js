/*! For license information please see 366.b99ffe86.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[366],{1331:function(t,r,a){a(1377)("Float64",8,(function(t){return function(r,a,e){return t(this,r,a,e)}}))},1510:function(t,r,a){"use strict";var e=a(851),s=a.n(e),n=a(393);r.a=function(t,r){var a=s()(r);if(!s()(t))throw new TypeError("invalid input argument. Must provide an array. Value: `"+t+"`.");if(!a&&!Object(n.isPrimitive)(r))throw new TypeError("invalid input argument. Second argument must either be an array or number primitive. Value: `"+r+"`.");var e=t.length,i=new Array(e);if(a){if(e!==r.length)throw new Error("invalid input argument. Array to be added must have a length equal to that of the input array.");for(var o=0;o<e;o++)i[o]=t[o]-r[o]}else for(var c=0;c<e;c++)i[c]=t[c]-r;return i}},1964:function(t,r){t.exports=function(t){throw new Error('"'+t+'" is read-only')}},1965:function(t,r,a){"use strict";var e=a(2868);t.exports=e},2868:function(t,r,a){"use strict";var e=a(1115)(a(419));t.exports=e},4453:function(t,r,a){"use strict";a.r(r);var e=a(851),s=a.n(e);r.default=function(t,r){if(!s()(t))throw new TypeError("invalid argument. First argument must be a matrix or array of test data. Value: `"+t+"`");if(!s()(r))throw new TypeError("invalid argument. Second argument must be an array of labels for the test data. Value: `"+r+"`");for(var a=this.predict(t),e=r.length,n=0,i=0;i<e;i++)a[i]===r[i]&&(n+=1);return n/=e}},5534:function(t,r,a){a(1377)("Int32",4,(function(t){return function(r,a,e){return t(this,r,a,e)}}))},5792:function(t,r,a){"use strict";a.r(r);a(360),a(352),a(363);var e=a(353),s=a.n(e),n=a(354),i=a.n(n),o=a(369),c=a.n(o),u=a(357),h=a.n(u),p=a(358),l=a.n(p),v=a(355),f=a.n(v),d=a(350),y=a.n(d),m=a(362),g=a.n(m),b=a(0),w=(a(341),a(840)),A=a.n(w),x=a(397),O=a(447),P=a(983),j=a(1502),F=a.n(j),k=a(549),C=a.n(k),E=a(555),G=a.n(E),N=a(419),S=a.n(N),T=a(367),V=a.n(T),q=a(556),R=a(499),z=a(443),B=a(741),M=(a(389),a(1965)),_=a.n(M),D=a(851),I=a.n(D),J=a(2461),X=a.n(J),Y=(a(393),a(1964)),H=a.n(Y),L=a(445),U=a.n(L),K=(a(1331),a(371)),Q=a.n(K),W=a(374),Z=a.n(W),$=a(448),tt=a.n($),rt=a(863),at=a(1078),et=a(1106),st=a(1510);function nt(t,r){this.n=t.shape[0],this.p=t.shape[1],this.classes=A()(r.slice()),this.nclass=this.classes.length,this.fitGaussian(t,r)}nt.prototype.score=a(4453),nt.prototype.fitGaussian=function(t,r){var a=this;this.prior={};var e=[this.p,this.nclass];this.mu=F()(new Float64Array(e[0]*e[1]),{shape:e}),this.sigma=F()(new Float64Array(e[0]*e[1]),{shape:e});for(var s=0;s<this.nclass;s++){for(var n=[],i=this.classes[s],o=0;o<this.n;o++)r[o]===i&&n.push(o);var c=n.length;this.prior[i]=Q()(c/this.n);for(var u=function(r){var e=n.map((function(a){return t.get(a,r)})),i=Object(rt.a)(e),o=Object(at.a)(e);a.mu.set(r,s,i),a.sigma.set(r,s,o)},h=0;h<this.p;h++)u(h)}},nt.prototype.calcGaussianProb=function(t,r){for(var a=this.classes[r],e=this.prior[a],s=0;s<this.p;s++){var n=this.sigma.get(s,r),i=n*n,o=this.mu.get(s,r);e+=-.5*Q()(2*tt.a*i)-Z()(t[s]-o,2)/i}return e},nt.prototype.predictOne=function(t){for(var r=this.classes.length,a=new Array(r),e=0;e<r;e++)a[e]=this.calcGaussianProb(t,e);for(var s=a[0],n=this.classes[0],i=0;i<r;i++){var o=a[i];o>s&&(s=o,n=this.classes[i])}return n},nt.prototype.predict=function(t){var r=this.classes.length;if(_()(t)&&(t=F()(t)),X()(t)){for(var a=U()(t.shape,2),e=a[0],s=a[1],n=new Array(e),i=0;i<e;i++){for(var o=new Array(r),c=0;c<r;c++){for(var u=new Array(s),h=0;h<s;h++)u[h]=t.get(i,h);o[c]=this.calcGaussianProb(u,c)}for(var p=o[0],l=this.classes[0],v=0;v<r;v++){var f=o[v];f>p&&(p=f,l=this.classes[v])}n[i]=l}return n}return this.predictOne(t)},nt.prototype.predictProbs=function(t){if(_()(t)&&(t=F()(t)),X()(t)){for(var r=U()(t.shape,2),a=r[0],e=r[1],s=new Array(a),n=0;n<a;n++){for(var i=new Array(this.nclass),o=0;o<this.nclass;o++){for(var c=new Array(e),u=0;u<e;u++)c[u]=t.get(n,u);i[o]=this.calcGaussianProb(c,o)}for(var h=Object(et.a)(i),p=0,l=0;l<i.length;l++)p+=V()(i[l]-h);var v=h+Q()(p);i=Object(st.a)(i,v),s[n]=i.map((function(t){return V()(t)}))}return s}for(var f=new Array(this.nclass),d=0;d<this.nclass;d++)f[d]=this.calcGaussianProb(t,d);for(var y=Object(et.a)(f),m=0,g=0;g<f.length;g++)m+=V()(f[g]-y);var b=y+Q()(m);return H()("logLik"),(f=Object(st.a)(f,b)).map((function(t){return V()(t)}))};var it=nt,ot=(a(5534),function(t){for(var r=0,a=0;a<t.length;a++)r+=t[a];return r});function ct(t,r,a){this.n=t.shape[0],this.p=t.shape[1],this.classes=A()(r.slice()),this.nclass=this.classes.length,this.alpha=a,this.fitMultinomial(t,r)}ct.prototype.score=a(4453),ct.prototype.fitMultinomial=function(t,r){for(var a={},e=[this.p,this.nclass],s=F()(new Float64Array(e[0]*e[1]),{shape:e}),n=0;n<this.nclass;n++){for(var i=[],o=new Int32Array(this.p),c=this.classes[n],u=0;u<this.n;u++)r[u]===c&&i.push(u);var h=i.length;a[c]=Q()(h/this.n);for(var p=0,l=function(r){var a=i.map((function(a){return t.get(a,r)}));o[r]=ot(a),p+=o[r]},v=0;v<this.p;v++)l(v);for(var f=0;f<this.p;f++){var d=Q()(o[f]+this.alpha)-Q()(p+this.p*this.alpha);s.set(f,n,d)}}this.prior=a,this.cprob=s},ct.prototype.calcMultinomProb=function(t,r,a){var e=this.classes[r],s=this.prior[e];for(a=0;a<this.p;a++){s+=t[a]?t[a]*this.cprob.get(a,r):0}return s},ct.prototype.predictOne=function(t){for(var r=this.classes.length,a=new Array(r),e=0;e<r;e++){var s=this.classes[e];a[e]=this.prior[s];for(var n=0;n<this.p;n++){var i=t[n]?t[n]*this.cprob.get(n,e):0;a[e]+=i}}for(var o=a[0],c=this.classes[0],u=0;u<r;u++){var h=a[u];h>o&&(o=h,c=this.classes[u])}return c},ct.prototype.predict=function(t){var r=this.classes.length;if(_()(t)&&(t=F()(t)),X()(t)){for(var a=[],e=t.shape[0],s=0;s<e;s++){for(var n=new Array(r),i=0;i<r;i++){var o=this.classes[i];n[i]=this.prior[o];for(var c=0;c<this.p;c++){var u=t.get(s,c)?t.get(s,c)*this.cprob.get(c,i):0;n[i]+=u}}for(var h=n[0],p=this.classes[0],l=0;l<r;l++){var v=n[l];v>h&&(h=v,p=this.classes[l])}a[s]=p}return a}return this.predictOne(t)},ct.prototype.predictProbs=function(t){if(_()(t)&&(t=F()(t)),X()(t)){for(var r=t.shape[0],a=new Array(r),e=0;e<r;e++){for(var s=new Array(this.nclass),n=0;n<this.nclass;n++){var i=this.classes[n];s[n]=this.prior[i];for(var o=0;o<this.p;o++){var c=t.get(e,o)?t.get(e,o)*this.cprob.get(o,n):0;s[n]+=c}}for(var u=Object(et.a)(s),h=0,p=0;p<s.length;p++)h+=V()(s[p]-u);var l=u+Q()(h);s=Object(st.a)(s,l),a[e]=s.map((function(t){return V()(t)}))}return a}for(var v=new Array(this.nclass),f=0;f<this.nclass;f++){var d=this.classes[f];v[f]=this.prior[d];for(var y=0;y<this.p;y++){var m=t[y]*this.cprob.get(y,f);v[f]+=m}}for(var g=Object(et.a)(v),b=0,w=0;w<v.length;w++)b+=V()(v[w]-g);var A=g+Q()(b);return(v=Object(st.a)(v,A)).map((function(t){return V()(t)}))};function ut(t){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,e=f()(t);if(r){var s=f()(this).constructor;a=Reflect.construct(e,arguments,s)}else a=e.apply(this,arguments);return l()(this,a)}}var ht=0;function pt(t,r,a){for(var e=[],s=[],n={},i=0;i<t.length;i++){var o=r[t[i]];if(C()(a,t[i]))s.push(t[i]);else{for(var c=t[i].categories||A()(o.slice()),u=0;u<c.length;u++)s.push("".concat(t[i],"_").concat(c[u]));n[t[i]]=c}}for(var h=r[t[0]].length,p=0;p<h;p++){for(var l=[],v=0;v<t.length;v++){var f=r[t[v]];if(C()(a,t[v]))l.push(f[p]);else for(var d=n[t[v]],y=f[p],m=0;m<d.length;m++)l.push(y===d[m]?1:0)}e.push(l)}return{matrix:e=F()(e),predictors:s}}var lt=g()("span",{className:"title"},void 0,"A-priori probabilities:"),vt=g()("span",{className:"title"},void 0,"Conditionals:"),ft=g()("th",{},void 0,"Mean"),dt=g()("th",{},void 0,"SD"),yt=g()("th",{},void 0,"Yes"),mt=g()("th",{},void 0,"No"),gt=function(t,r,a){return g()("div",{},void 0,lt,g()(P.a,{bordered:!0,size:"sm"},void 0,g()("thead",{},void 0,g()("tr",{},void 0,r.classes.map((function(t,r){return g()("th",{},r,t)})))),g()("tbody",{},void 0,g()("tr",{},void 0,r.classes.map((function(t,a){return g()("th",{},a,V()(r.prior[t]).toFixed(3))}))))),vt,t.map((function(t,e){return C()(a,t)?g()(P.a,{bordered:!0,size:"sm"},e,g()("thead",{},void 0,g()("tr",{},void 0,g()("th",{},void 0,t),r.classes.map((function(t,r){return g()("th",{},r,t)})))),g()("tbody",{},void 0,g()("tr",{},void 0,ft,r.classes.map((function(t,a){return g()("td",{},"".concat(e,"-").concat(a),r.mu.get(e,a).toFixed(6))}))),g()("tr",{},void 0,dt,r.classes.map((function(t,a){return g()("td",{},"".concat(e,"-").concat(a),r.sigma.get(e,a).toFixed(6))}))))):g()(P.a,{bordered:!0,size:"sm"},e,g()("thead",{},void 0,g()("tr",{},void 0,g()("th",{},void 0,t),r.classes.map((function(t,r){return g()("th",{},r,t)})))),g()("tbody",{},void 0,g()("tr",{},void 0,yt,r.classes.map((function(t,a){return g()("td",{},"".concat(e,"-").concat(a),r.mu.get(e,a).toFixed(3))}))),g()("tr",{},void 0,mt,r.classes.map((function(t,a){return g()("td",{},"".concat(e,"-").concat(a),(1-r.mu.get(e,a)).toFixed(3))})))))})))},bt=g()(O.a.Header,{as:"h4"},void 0,"Naive Bayes",g()(B.a,{title:"Naive Bayes",content:""})),wt=function(t){h()(a,t);var r=ut(a);function a(t){var e;return s()(this,a),e=r.call(this,t),y()(c()(e),"compute",(function(){ht+=1;var t=e.state,r=t.y,a=t.x,s=e.props.data[r];S()(a)||(a=[a]);var n=pt(a,e.props.data,e.props.quantitative),i=n.matrix,o=n.predictors,c=function(t,r){if(_()(t))t=F()(t);else if(!X()(t)){throw new TypeError("invalid input argument. The first argument must be a matrix or an array-of-arrays. Value: `"+t+"`")}if(!I()(r))throw new TypeError("invalid input argument. The second argument must be array-like. Value: `"+r+"`");return new it(t,r)}(i,s);e.props.logAction(z.y,{y:r,x:a});var u={variable:" Summary",type:"Naive Bayes",value:g()("div",{style:{overflowX:"auto",width:"100%"}},void 0,g()("span",{className:"title"},void 0,"Naive Bayes for Response ",r," (model id: bayes",ht,")"),gt(o,c,e.props.quantitative),g()(R.a,{tooltip:"Predictions and residuals will be attached to data table"},void 0,g()(x.a,{variant:"secondary",size:"sm",onClick:function(){for(var t=G()(e.props.data,1),r=e.props.quantitative.slice(),s=pt(a,e.props.data,e.props.quantitative).matrix,n=c.predictProbs(s),i=function(a){var e="probs_"+c.classes[a]+"_bayes"+ht,s=n.map((function(t){return t[a]}));t[e]=s,C()(r,e)||r.push(e)},o=0;o<c.classes.length;o++)i(o);var u=c.predict(s),h="pred_bayes"+ht;t[h]=u;var p=e.props.categorical.slice();C()(p,h)||p.push(h),e.props.onGenerate(r,p,t)}},void 0,"Use this model to predict for currently selected data")))};e.props.onCreated(u)})),e.state={y:t.categorical[0],x:t.quantitative[0]},e}return i()(a,[{key:"render",value:function(){var t=this,r=this.props,a=r.categorical,e=r.quantitative,s=this.state,n=s.x,i=s.y;return g()(O.a,{style:{fontSize:"14px"}},void 0,bt,g()(O.a.Body,{},void 0,g()(q.a,{legend:"Outcome (Y):",options:a,defaultValue:i,onChange:function(r){return t.setState({y:r})}}),g()(q.a,{legend:"Predictors (X):",multi:!0,options:A()(e.concat(a)),defaultValue:n||"",onChange:function(r){return t.setState({x:r})}}),g()(x.a,{disabled:!n||0===n.length,variant:"primary",block:!0,onClick:this.compute},void 0,"Calculate")))}}]),a}(b.Component);wt.defaultProps={logAction:function(){}};r.default=wt}}]);