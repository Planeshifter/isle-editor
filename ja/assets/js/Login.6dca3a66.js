(self.webpackChunk=self.webpackChunk||[]).push([[4438],{664062:function(e,t,o){"use strict";o.r(t);o(382139);var s=o(858255),a=o(264659),n=o(904730),r=o(673989),i=o(175663),l=o(750591),p=o(575630),d=o(151119),u=(o(6059),o(202784)),c=o(928316),h=(o(213980),o(911755)),f=o.n(h),v=o(198),Z=o(770561),m=o(26266),w=o(10863),y=o(830650),g=o(398781),P=o(618245),I=o(81982),C=o(435376),b=o(203858),k=o(175891),T=o(741319);function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var o,s=(0,p.Z)(e);if(t){var a=(0,p.Z)(this).constructor;o=Reflect.construct(s,arguments,a)}else o=s.apply(this,arguments);return(0,l.Z)(this,o)}}var x=f()("isle:login"),E=function(e){(0,i.Z)(o,e);var t=N(o);function o(e){var s;return(0,a.Z)(this,o),s=t.call(this,e),(0,d.Z)((0,r.Z)(s),"handleInputChange",(function(e){e.stopPropagation();var t=e.target,o=t.value,a=t.name;s.setState((0,d.Z)({},a,o))})),(0,d.Z)((0,r.Z)(s),"handleForgotPassword",(function(e){(e.preventDefault(),""===s.state.email)?s.setState({showInputOverlay:!0,overlayTarget:c.findDOMNode(s.emailInput),invalidInputMessage:s.props.t("enter-email-before-password-reset")}):s.context.forgotPassword(s.state.email)})),(0,d.Z)((0,r.Z)(s),"hideAfterDelay",(function(){setTimeout((function(){s.setState({showInputOverlay:!1})}),2e3)})),(0,d.Z)((0,r.Z)(s),"handleKeyPress",(function(e){e.stopPropagation(),13===e.charCode&&s.handleSubmit(e)})),(0,d.Z)((0,r.Z)(s),"handleSubmit",(function(e){e.preventDefault();var t={password:s.state.password,email:s.state.email};if(s.state.showTFA)return t.token=s.state.token,s.context.login(t,(function(e,t,o){e||"ok"!==o.message||s.props.onClose()}));if(""===t.email)x("Email input field is empty, show message..."),s.setState({showInputOverlay:!0,overlayTarget:c.findDOMNode(s.emailInput),invalidInputMessage:s.props.t("enter-email")},s.hideAfterDelay);else if(""===t.password)x("Password input field is empty, show message..."),s.setState({showInputOverlay:!0,overlayTarget:c.findDOMNode(s.passwordInput),invalidInputMessage:s.props.t("enter-password")},s.hideAfterDelay);else{s.context.login(t,(function(e,t,o){if(!e){var a=o.message,n=o.type;"ok"===a?s.props.onClose():"finish-login-via-tfa"===a?s.setState({showTFA:!0}):s.setState({showInputOverlay:!0,overlayTarget:"no_user"===n?s.emailInput:s.passwordInput,invalidInputMessage:a},s.hideAfterDelay)}}))}})),s.state={email:"",password:"",show:e.show,showTFA:!1,token:""},s}return(0,n.Z)(o,[{key:"render",value:function(){var e=this;return(0,s.Z)(I.Z,{show:this.props.show,className:"login-modal",onHide:this.props.onClose},void 0,(0,s.Z)(I.Z.Header,{closeButton:!0},void 0,(0,s.Z)(I.Z.Title,{as:"h3"},void 0,this.props.t("login"))),(0,s.Z)(I.Z.Body,{},void 0,(0,s.Z)(g.Z,{horizontal:!0},void 0,(0,s.Z)(w.Z,{controlId:"form-email"},void 0,(0,s.Z)(y.Z,{},void 0,this.props.t("email")),u.createElement(m.Z,{name:"email",type:"email",placeholder:"Email",autoComplete:"username",onChange:this.handleInputChange,onKeyPress:this.handleKeyPress,ref:function(t){e.emailInput=t},disabled:this.state.showTFA})),(0,s.Z)(w.Z,{controlId:"form-password"},void 0,(0,s.Z)(y.Z,{},void 0,this.props.t("password")),u.createElement(m.Z,{name:"password",type:"password",placeholder:"Password",autoComplete:"current-password",onChange:this.handleInputChange,onKeyPress:this.handleKeyPress,ref:function(t){e.passwordInput=t},disabled:this.state.showTFA})),this.state.showTFA?(0,s.Z)(w.Z,{controlId:"form-tfa"},void 0,(0,s.Z)(y.Z,{},void 0,this.props.t("enter-tfa-token")),(0,s.Z)(m.Z,{name:"token",type:"text",placeholder:this.props.t("enter-token"),onChange:this.handleInputChange,onKeyPress:this.handleKeyPress,autoFocus:!0})):null)),(0,s.Z)(I.Z.Footer,{},void 0,(0,s.Z)("button",{className:"forgot-password-button",onClick:this.handleForgotPassword},void 0,this.props.t("forgot-password")),(0,s.Z)(Z.Z,{variant:"primary",type:"submit",onClick:this.handleSubmit},void 0,this.props.t("signin")),(0,s.Z)(Z.Z,{onClick:this.props.onClose},void 0,this.props.t("close"))),(0,s.Z)(P.Z,{show:this.state.showInputOverlay,target:this.state.overlayTarget,placement:"right",containerPadding:20},void 0,(0,s.Z)(C.Z,{id:"popover-contained"},void 0,(0,s.Z)(b.Z,{},void 0,this.props.t("invalid")),(0,s.Z)(k.Z,{},void 0,this.state.invalidInputMessage))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.show!==t.show?{email:"",password:"",show:e.show,showTFA:!1}:null}}]),o}(u.Component);E.defaultProps={onClose:function(){},show:!1},E.contextType=T.Z,t.default=(0,v.Z)("internal/login")(E)},435376:function(e,t,o){"use strict";var s=o(607560),a=o(998283),n=o(72779),r=o.n(n),i=o(202784),l=(o(840368),o(429658)),p=o(203858),d=o(175891),u=["bsPrefix","placement","className","style","children","content","arrowProps","popper","show"],c=i.forwardRef((function(e,t){var o=e.bsPrefix,n=e.placement,p=e.className,c=e.style,h=e.children,f=e.content,v=e.arrowProps,Z=(e.popper,e.show,(0,a.Z)(e,u)),m=(0,l.vE)(o,"popover"),w=((null==n?void 0:n.split("-"))||[])[0];return i.createElement("div",(0,s.Z)({ref:t,role:"tooltip",style:c,"x-placement":w,className:r()(p,m,w&&"bs-popover-"+w)},Z),i.createElement("div",(0,s.Z)({className:"arrow"},v)),f?i.createElement(d.Z,null,h):h)}));c.defaultProps={placement:"right"},c.Title=p.Z,c.Content=d.Z,t.Z=c},175891:function(e,t,o){"use strict";var s=o(607560),a=o(998283),n=o(72779),r=o.n(n),i=o(202784),l=o(429658),p=["as","bsPrefix","className","children"],d=i.forwardRef((function(e,t){var o=e.as,n=void 0===o?"div":o,d=e.bsPrefix,u=e.className,c=e.children,h=(0,a.Z)(e,p);return d=(0,l.vE)(d,"popover-body"),i.createElement(n,(0,s.Z)({ref:t},h,{className:r()(u,d)}),c)}));t.Z=d},203858:function(e,t,o){"use strict";var s=o(607560),a=o(998283),n=o(72779),r=o.n(n),i=o(202784),l=o(429658),p=["as","bsPrefix","className","children"],d=i.forwardRef((function(e,t){var o=e.as,n=void 0===o?"div":o,d=e.bsPrefix,u=e.className,c=e.children,h=(0,a.Z)(e,p);return d=(0,l.vE)(d,"popover-header"),i.createElement(n,(0,s.Z)({ref:t},h,{className:r()(d,u)}),c)}));t.Z=d}}]);