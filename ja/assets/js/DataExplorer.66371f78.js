(window.webpackJsonp=window.webpackJsonp||[]).push([[164],{1140:function(t,e,a){"use strict";e.a=function(t){var e=document.createElement("div");e.innerHTML=t,e.style.position="fixed",e.style.opacity=0,e.style.pointerEvents="none",document.body.appendChild(e),window.getSelection().removeAllRanges();var a=document.createRange();a.selectNode(e),window.getSelection().addRange(a),document.execCommand("copy"),document.body.removeChild(e)}},2598:function(t,e,a){"use strict";e.a=function t(e,a,r){if(!(r<=0)){var i=(a-e.scrollTop)/r*10;setTimeout((function(){e.scrollTop=e.scrollTop+i,e.scrollTop!==a&&t(e,a,r-10)}),10)}}},4117:function(t,e,a){"use strict";var r=a(404),i=a.n(r),n=(a(0),a(401),a(432)),o=a(499),s=i()("div",{className:"fa fa-times"}),l=function(t){return i()(o.a,{id:"clear_tooltip",placement:t.tooltipPlacement,tooltip:t.t("DataExplorer:delete")},void 0,i()(n.a,{variant:"outline-danger",size:"sm",onClick:t.onClick,style:t.style,disabled:t.disabled},void 0,s))};l.defaultProps={tooltipPlacement:"bottom",style:{},disabled:!1,t:function(){}},e.a=l},4118:function(t,e,a){"use strict";var r=a(3722),i=a.n(r),n=a(907),o=a.n(n),s=a(589),l=a.n(s),c=a(435),u=a.n(c),d=a(449),p=a.n(d),v=a(445),f=a.n(v),h=a(450),g=a.n(h),m=a(621),b=a.n(m),y=a(427),E=a.n(y),R=a(600),S=a.n(R),O=a(4119),A=[p.a,g.a,f.a,l.a,u.a];e.a=function(t,e){var a=[];for(var r in e)if(E()(e,r))for(var n=0;n<e[r].length;n++){b()(a[n])||(a[n]={});var s=e[r][n];a[n][r]=S()(s)?NaN:s}for(var l=i()(Function,["datum"].concat(o()(O),[t])),c=new Array(a.length),u=0;u<a.length;u++)c[u]=l.apply(void 0,[a[u]].concat(A));return c}},4119:function(t){t.exports=JSON.parse('["exp","ln","power","round","sqrt"]')},4120:function(t,e,a){"use strict";var r=a(1141),i=a.n(r),n=a(433),o=a(454),s=a.n(o);e.a=function(t,e,a){for(var r=[],o=0;o<t.length;o++){var l=void 0,c=t[o];if(Object(n.isPrimitive)(c)&&!s()(c))for(var u=0;i()(l);)u>=a.length||c<a[u]?l=e[u]:u+=1;else l=null;r.push(l)}return r}},4121:function(t,e,a){"use strict";a(792);var r=a(442),i=a(600),n=a.n(i),o=a(590),s=a.n(o);function l(t){return Object(r.isPrimitive)(t)?s()(t,".","[dot]"):t}e.a=function(t,e,a,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=[],s=r[t];if(!a)return s;if(i){if(n()(e))for(var c=0;c<s.length;c++){var u=s[c],d=Number(a[l(u)]);o.push(d)}else for(var p=r[e],v=0;v<s.length;v++){var f=l(s[v]),h=l(p[v]),g=a[f+"-"+h];o.push(Number(g))}return o}if(n()(e))for(var m=0;m<s.length;m++){var b=s[m],y=a[l(b)];"null"!==y&&"NA"!==y||(y=null),o.push(y)}else for(var E=r[e],R=0;R<s.length;R++){var S=l(s[R]),O=l(E[R]),A=a[S+"-"+O];o.push(A)}return o}},6499:function(t,e,a){"use strict";a.r(e);a(443),a(438),a(439),a(419),a(421);var r=a(516),i=a.n(r),n=a(404),o=a.n(n),s=(a(687),a(881),a(429),a(430),a(408),a(558),a(658),a(503),a(413)),l=a.n(s),c=a(415),u=a.n(c),d=a(425),p=a.n(d),v=a(417),f=a.n(v),h=a(418),g=a.n(h),m=a(416),b=a.n(m),y=a(410),E=a.n(y),R=a(0),S=a.n(R),O=(a(401),a(448)),A=a.n(O),T=a(4082),P=a(4081),_=a(453),D=a(432),x=a(6388),C=a(461),k=a(506),L=a(670),N=a(603),w=a(467),q=a(852),F=a(442),I=a(675),j=a.n(I),H=a(1101),X=a.n(H),V=a(3720),M=a.n(V),z=a(621),B=a.n(z),Q=a(446),U=a.n(Q),G=a(480),K=a.n(G),W=a(875),J=a.n(W),Y=a(600),Z=a.n(Y),$=a(1544),tt=a.n($),et=a(1588),at=a.n(et),rt=a(561),it=a.n(rt),nt=a(628),ot=a.n(nt),st=a(490),lt=a.n(st),ct=a(745),ut=a.n(ct),dt=a(606),pt=a(527),vt=a(1411),ft=a(481),ht=a(4758),gt=a.n(ht);function mt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,r=b()(t);if(e){var i=b()(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return g()(this,a)}}var bt=function(t){f()(a,t);var e=mt(a);function a(){return l()(this,a),e.apply(this,arguments)}return u()(a,[{key:"render",value:function(){for(var t=gt()(this.props.children,4),e=0;e<t.length;e++)for(var a=t[e],r=0;r<a.length;r++)a[r]?a[r]=o()(k.a,{xs:6,md:3},"cell".concat(e).concat(r),a[r]):a[r]=null;return o()(ft.a,{},void 0,t.map((function(t,e){return o()(C.a,{},"row".concat(e),t)})))}}]),a}(R.Component),yt=a(1521),Et=a(702),Rt=a(1030),St=a(524),Ot=a(810),At=a(405),Tt=Object(At.a)((function(){return Promise.all([a.e(411),a.e(284)]).then(a.bind(null,6482))})),Pt=a(1223),_t=a(1517),Dt=a(459),xt=a(2598);function Ct(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,r=b()(t);if(e){var i=b()(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return g()(this,a)}}var kt=function(t){f()(a,t);var e=Ct(a);function a(){return l()(this,a),e.apply(this,arguments)}return u()(a,[{key:"scrollToBottom",value:function(){this.outputPanel&&Object(xt.a)(this.outputPanel,this.outputPanel.scrollHeight,1e3)}},{key:"render",value:function(){var t=this;return S.a.createElement("div",{className:"data-explorer-output-panel",style:{height:.9*window.innerHeight-80},ref:function(e){t.outputPanel=e}},this.props.output)}}]),a}(R.Component),Lt=(a(1169),a(1545),a(4116)),Nt=a.n(Lt),wt=a(4762),qt=a.n(wt),Ft=a(863),It=a(536),jt=a(530),Ht=a(525),Xt=a(588),Vt=a(427),Mt=a.n(Vt),zt=a(662),Bt=a.n(zt),Qt=a(4763),Ut=a.n(Qt),Gt=a(444),Kt=a.n(Gt),Wt=a(1226),Jt=a(1224),Yt=a(1227),Zt=a(1228),$t=a(1203),te=a(1231),ee=a(1431),ae=a(1232),re=a(1233),ie=a(1163),ne=a(1234),oe=a(1302),se=a(1235),le=a(1435),ce=a(1434),ue=a(1437),de=a(1442),pe=a(1443),ve=a(1449),fe=a(1450),he=a(1456),ge=a(1461),me=a(1462),be=a(1463),ye=a(1464),Ee=a(1465),Re=a(1466),Se=a(1467),Oe=a(1468),Ae=a(1469),Te=a(1470),Pe=a(1471),_e=a(1472),De=a(2599),xe=a(725),Ce=a(659);function ke(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,r=b()(t);if(e){var i=b()(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return g()(this,a)}}var Le=function(t){f()(a,t);var e=ke(a);function a(){var t;return l()(this,a),t=e.call(this),E()(p()(t),"handleSearch",(function(e){t.setState({search:e.target.value}),t.props.onClick(e.target.value)})),t.state={search:""},t}return u()(a,[{key:"render",value:function(){return o()(Ce.a,{},void 0,o()(De.a,{size:"small"},void 0,o()(xe.a,{type:"text",placeholder:"Search actions...",onChange:this.handleSearch,onKeyPress:this.handleKeyPress,value:this.state.search})))}}]),a}(R.Component);Le.defaultProps={onClick:function(){}};var Ne=Le,we=a(2759);function qe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,r=b()(t);if(e){var i=b()(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return g()(this,a)}}var Fe=function(t){return{label:t,value:t}},Ie=function(t){f()(a,t);var e=qe(a);function a(t){var r;return l()(this,a),r=e.call(this,t),E()(p()(r),"handleChange",(function(t){r.props.onChange(t),r.setState({value:t})})),E()(p()(r),"handleSubmission",(function(){r.props.onSubmit(r.state.value)})),r.state={value:null},r}return u()(a,[{key:"render",value:function(){return o()(R.Fragment,{},void 0,o()(we.a,{inputId:this.props.id,isClearable:this.props.isClearable,onChange:this.handleChange,options:this.props.options.map(Fe),placeholder:"Leave note..."}),o()(D.a,{size:"sm",onClick:this.handleSubmission,style:{marginTop:4}},void 0,this.props.t("submit")))}}]),a}(R.Component);Ie.defaultProps={options:[],isClearable:!1,onChange:function(){},onSubmit:function(){}};var je=Ie;function He(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function Xe(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?He(Object(a),!0).forEach((function(e){E()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):He(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function Ve(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,r=b()(t);if(e){var i=b()(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return g()(this,a)}}function Me(t,e){for(var a=new RegExp(e,"i"),r=[],i=0;i<t.length;i++){var n=t[i],o=!1;if(n.type.search(a)>-1)o=!0;else for(var s in n.value)if(s.search(a)>-1||String(n.value[s]).search(a)>-1){o=!0;break}o&&r.push(n)}return r}var ze=o()("i",{className:"fas fa-sticky-note"}),Be=o()("i",{className:"fas fa-redo"}),Qe=function(t){f()(a,t);var e=Ve(a);function a(t){var r;return l()(this,a),r=e.call(this,t),E()(p()(r),"handleSearch",(function(t){Ut()(t,"")?r.setState({filtered:r.props.actions,searchWords:[]}):r.setState({filtered:Me(r.props.actions,t),searchWords:[t]})})),E()(p()(r),"renderListGroupItem",(function(t,e){var a=r.state.filtered.length-1,i=r.state.filtered[a-t],n=new Date(i.absoluteTime),s="",l=i.value,c="".concat(i.type," | Time: ").concat(n.toLocaleTimeString()," - ").concat(n.toLocaleDateString());for(var u in l)if(Mt()(l,u)&&"showDecision"!==u){var d=l[u];Bt()(d)||"plotId"===u||(s+="".concat(u,": ").concat(Kt()(d)?JSON.stringify(d):d),s+="\t")}var p=o()(It.a,{id:"history-note-popover-".concat(t),style:{width:250}},void 0,o()(jt.a,{},void 0,r.props.t("leave-note")),o()(Ht.a,{},void 0,o()(je,{options:["Did you consider any confounding variables?","You should check model diagnostics"],onSubmit:function(e){var a=e.value,i=Xe({},r.state.notes);i[t]?i[t]+="\n".concat(a):i[t]=a,r.setState({notes:i})},t:r.props.t})));return o()(Ft.a,{},void 0,o()("div",{className:"actionNote"},void 0,o()("span",{className:"title"},void 0,o()(qt.a,{searchWords:r.state.searchWords,autoEscape:!0,textToHighlight:c}))),o()("div",{className:"actionNote"},void 0,o()(qt.a,{searchWords:r.state.searchWords,autoEscape:!0,textToHighlight:s})),r.state.notes[t]?o()(_.a,{variant:"warning"},void 0,r.state.notes[t]):null,r.props.instructorFeedback?o()(Xt.a,{trigger:"click",placement:"left",rootClose:!0,overlay:p},void 0,o()(D.a,{variant:"info",size:"sm",style:{position:"absolute",top:5,right:45}},void 0,ze)):null,o()(D.a,{variant:"success",size:"sm",onClick:r.handleRecreationFactory(t),style:{position:"absolute",top:5,right:5}},void 0,Be))})),E()(p()(r),"handleRecreationFactory",(function(t){var e=r.state.filtered.length-1,a=r.state.filtered[e-t];return function(){var t,e=Xe(Xe({},r.props),a.value);switch(a.type){case"DATA_EXPLORER_BARCHART":t=S.a.createElement(Jt.a,e);break;case"DATA_EXPLORER_BOXPLOT":t=S.a.createElement(Wt.a,e);break;case"DATA_EXPLORER_CONTOURPLOT":t=S.a.createElement(Yt.a,e);break;case"DATA_EXPLORER_HISTOGRAM":t=S.a.createElement($t.a,e);break;case"DATA_EXPLORER_HEATMAP":t=S.a.createElement(Zt.a,e);break;case"DATA_EXPLORER_LINEPLOT":t=S.a.createElement(te.a,e);break;case"DATA_EXPLORER_MAP":t=S.a.createElement(ee.a,e);break;case"DATA_EXPLORER_MOSAIC":t=S.a.createElement(ae.a,e);break;case"DATA_EXPLORER_PIECHART":t=S.a.createElement(re.a,e);break;case"DATA_EXPLORER_QQPLOT":t=S.a.createElement(ie.a,e);break;case"DATA_EXPLORER_SCATTERPLOT":t=S.a.createElement(oe.a,e);break;case"DATA_EXPLORER_SPLOM":t=S.a.createElement(ne.a,e);break;case"DATA_EXPLORER_VIOLINPLOT":t=S.a.createElement(se.a,e);break;case"DATA_EXPLORER_FREQUENCY_TABLE":t=S.a.createElement(le.a,e);break;case"DATA_EXPLORER_CONTINGENCY_TABLE":t=S.a.createElement(ce.a,e);break;case"DATA_EXPLORER_TESTS_ANOVA":t=S.a.createElement(ue.a,e);break;case"DATA_EXPLORER_TESTS_KRUSKAL":t=S.a.createElement(ve.a,e);break;case"DATA_EXPLORER_TESTS_MEAN":t=S.a.createElement(fe.a,e);break;case"DATA_EXPLORER_TESTS_TWO_SAMPLE_MEAN":t=S.a.createElement(he.a,e);break;case"DATA_EXPLORER_TESTS_CHISQUARE":t=S.a.createElement(de.a,e);break;case"DATA_EXPLORER_TESTS_CORRTEST":t=S.a.createElement(pe.a,e);break;case"DATA_EXPLORER_TESTS_PROPTEST":t=S.a.createElement(ge.a,e);break;case"DATA_EXPLORER_TESTS_TWO_SAMPLE_PROPTEST":t=S.a.createElement(me.a,e);break;case"DATA_EXPLORER_KMEANS":t=S.a.createElement(Pe.a,e);break;case"DATA_EXPLORER_HIERARCHICAL_CLUSTERING":t=S.a.createElement(Te.a,e);break;case"DATA_EXPLORER_DECISION_TREE":t=S.a.createElement(be.a,e);break;case"DATA_EXPLORER_LASSO_REGRESSION":t=S.a.createElement(ye.a,e);break;case"DATA_EXPLORER_LINEAR_REGRESSION":t=S.a.createElement(Oe.a,e);break;case"DATA_EXPLORER_LOGISTIC_REGRESSION":t=S.a.createElement(Ee.a,e);break;case"DATA_EXPLORER_MULTIPLE_REGRESSION":t=S.a.createElement(Re.a,e);break;case"DATA_EXPLORER_NAIVE_BAYES":t=S.a.createElement(_e.a,e);break;case"DATA_EXPLORER_PCA":t=S.a.createElement(Ae.a,e);break;case"DATA_EXPLORER_RANDOM_FOREST":t=S.a.createElement(Se.a,e)}r.props.onCreated(t)}})),r.state={filtered:t.actions,searchWords:[],nActions:t.actions.length,notes:{}},r}return u()(a,[{key:"render",value:function(){return this.state.filtered?o()("div",{style:this.props.style},void 0,o()(Ne,{onClick:this.handleSearch}),o()("div",{style:{marginLeft:0,overflowY:"scroll",height:.75*window.innerHeight,border:"solid 1px rgba(0,0,0,0.125)"}},void 0,o()(Nt.a,{initialIndex:0,itemRenderer:this.renderListGroupItem,length:this.state.filtered.length,type:"simple",pageSize:50,minSize:10})),o()("span",{className:"title",style:{float:"right",marginRight:20}},void 0,this.state.filtered.length," ",this.props.t("actions"))):null}}],[{key:"getDerivedStateFromProps",value:function(t,e){return t.actions.length>e.nActions?{filtered:t.actions,nActions:t.actions.length}:null}}]),a}(R.Component);Qe.defaultProps={actions:[],instructorFeedback:!1};var Ue=Qe,Ge=(a(673),a(423)),Ke=a(620),We=a(742),Je=a(1436),Ye=a.n(Je),Ze=a(590),$e=a.n(Ze),ta=a(1140),ea=a(4117),aa=a(499);function ra(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,r=b()(t);if(e){var i=b()(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return g()(this,a)}}var ia=o()("div",{className:"fa fa-window-maximize"}),na=function(t){f()(a,t);var e=ra(a);function a(){var t;return l()(this,a),t=e.call(this),E()(p()(t),"toggleFullscreen",(function(){t.setState({fullscreen:!t.state.fullscreen})})),t.state={fullscreen:!1},t}return u()(a,[{key:"render",value:function(){var t=this.props.t;return o()(R.Fragment,{},void 0,o()(aa.a,{id:"fullscreen_tooltip",placement:"bottom",tooltip:t("toggle-fullscreen")},void 0,o()(D.a,{variant:"outline-danger",size:"sm",onClick:this.toggleFullscreen},void 0,ia)),o()(L.a,{show:this.state.fullscreen,onHide:this.toggleFullscreen,dialogClassName:"modal-100w"},void 0,o()(L.a.Header,{closeButton:!0},void 0,o()(L.a.Title,{as:"h1"},void 0,this.props.header?this.props.header:t("fullscreen-display"))),o()(L.a.Body,{className:"data-explorer-fullscreen-output",style:{height:.75*window.innerHeight}},void 0,this.props.body),o()(L.a.Footer,{},void 0,o()(D.a,{onClick:this.toggleFullscreen},void 0,t("close")))))}}]),a}(R.Component);na.defaultProps={header:null};var oa=na,sa=a(790),la=a.n(sa),ca=a(1024),ua=a(1062),da=a(911),pa=o()("i",{className:"fas fa-times"}),va=function(t){for(var e=[],a=function(a){var r=t.filters[a],i=void 0;if(U()(r.value))i=r.value.map((function(t,e){return o()(da.a,{variant:"secondary",style:{marginRight:4}},e,t)}));else if(Kt()(r.value)){var n=lt()(r.value);i=new Array(n.length);for(var s=0;s<n.length;s++){var l=n[s];i[s]=o()(da.a,{variant:"secondary",style:{marginRight:4}},l,o()("b",{},void 0,l,": "),r.value[l])}}e.push(o()(ua.a.Item,{},a,o()("span",{className:"title"},void 0,r.id,": "),i,t.removeButtons?o()(D.a,{variant:"danger",size:"sm",style:{float:"right"},onClick:function(){t.onRemove(a)}},void 0,pa):null))},r=0;r<t.filters.length;r++)a(r);return o()(ua.a,{},void 0,e)};function fa(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function ha(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,r=b()(t);if(e){var i=b()(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return g()(this,a)}}var ga=o()("i",{className:"fas fa-info"}),ma=function(t){f()(a,t);var e=ha(a);function a(){var t;return l()(this,a),t=e.call(this),E()(p()(t),"toggleOverlay",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot.a;t.setState({show:!t.state.show},e)})),t.state={show:!1},t}return u()(a,[{key:"render",value:function(){var t=this;return o()(R.Fragment,{},void 0,o()(aa.a,{id:"filter_info_tooltip",placement:"bottom",tooltip:this.props.t("show-dataset-info")},void 0,S.a.createElement(D.a,{variant:"outline-danger",size:"sm",ref:function(e){t.button=e},style:this.props.style,onClick:function(){t.toggleOverlay((function(){t.state.show?t.timeout=setTimeout(t.toggleOverlay,5e3):t.timeout&&clearTimeout(t.timeout)}))}},ga)),o()(ca.a,{target:this.button,show:this.state.show,placement:"left"},void 0,(function(e){e.placement,e.scheduleUpdate,e.arrowProps;var a=la()(e,["placement","scheduleUpdate","arrowProps"]),r=function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?fa(Object(a),!0).forEach((function(e){E()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):fa(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({backgroundColor:"lightcoral",padding:"10px 10px",marginRight:"5px",borderRadius:3,zIndex:1002},a.style);return t.props.filters?S.a.createElement("pre",i()({},a,{style:r}),o()(va,{filters:t.props.filters}),t.props.restoreButton?o()(aa.a,{tooltip:t.props.t("restore-dataset-tooltip"),placement:"right"},void 0,o()(D.a,{size:"sm",variant:"danger",onClick:function(){t.props.onActivateFilters(t.props.filters)},style:{marginTop:12}},void 0,t.props.t("restore-dataset"))):null):S.a.createElement("pre",i()({},a,{style:r}),t.props.t("entire-dataset-used"))})))}}]),a}(R.Component);ma.defaultProps={filters:null,onActivateFilters:function(){},restoreButton:!1,style:{}};var ba=ma,ya=A()("isle:data-explorer"),Ea=/<button[\s\S]*<\/button>/,Ra="N",Sa=function(t,e,a,r,i,n,s){return o()(Ke.a,{style:{float:"right",top:"-4px",zIndex:2}},void 0,o()(ba,{filters:i,onActivateFilters:n,t:s}),o()(oa,{header:t,body:e,t:s}),o()(ea.a,{onClick:function(){ya("Clear element with ID ".concat(r)),a(r)},t:s}))},Oa=function(t){return o()(R.Fragment,{},void 0,o()("button",{draggable:!0,className:"data-explorer-draggable-bar",onDragStart:function(t){var e=t.target.nextSibling.innerHTML;e=$e()(e,Ea,""),t.dataTransfer.setData("text/plain",e),t.dataTransfer.setData("text/html",e)},onClick:function(t){var e=t.target.nextSibling.outerHTML;e=$e()(e,Ea,""),Object(ta.a)(e)}},void 0,Ge.c.t("DataExplorer:drag-table")),t)},Aa=o()("th",{},void 0,"IQR"),Ta=o()("th",{},void 0,Ra),Pa=o()("th",{},void 0,Ra),_a=function(t){var e=t.group?t.group:"Correlation Matrix",a=o()("thead",{},void 0,o()("tr",{},void 0,o()("th",{},void 0,e," (N=",t.result.size,")"),t.variables.map((function(t,e){return o()("th",{},e,t)})))),r=o()("tbody",{},void 0,t.variables.map((function(e,a){return o()("tr",{},a,o()("th",{},void 0,e),t.result.value[a].map((function(t,e){return o()("td",{},e,t.toFixed(3))})))})));return S.a.createElement(We.a,i()({bordered:!0,size:"sm"},t),a,r)},Da=function(t,e,a,r,i,n){if(t.group){for(var s=[],l=lt()(t.result),c=0;c<l.length;c++){var u=l[c],d=o()(_a,{group:u,result:t.result[u],variables:t.variables},u);s.push(d)}return o()("pre",{},e,Sa("Correlation Matrix",s,a,e,r,i,n),Oa(s))}var p=o()(_a,{result:t.result,variables:t.variables});return o()("pre",{},e,Sa("Correlation Matrix",p,a,e,r,i,n),Oa(p))},xa=o()("th",{},void 0,Ra),Ca=o()("th",{},void 0,"IQR"),ka=o()("th",{},void 0,Ra),La=o()("th",{},void 0,Ra),Na=o()("th",{},void 0,Ra);var wa=function(t,e,a,r,i,n){if(t.type===Wt.a||t.type===Jt.a||t.type===Yt.a||t.type===Zt.a||t.type===$t.a||t.type===te.a||t.type===ae.a||t.type===re.a||t.type===ie.a||t.type===oe.a||t.type===ne.a||t.type===se.a||t.type===St.a){var s=t.props;return s.meta&&!s.meta.filters&&(s.meta.filters=r),o()("div",{},e,o()(Ke.a,{style:{float:"right",padding:"0.1rem 0.3rem",zIndex:2}},void 0,o()(ba,{filters:r,onActivateFilters:i,t:n}),o()(ea.a,{onClick:function(){a(e)},t:n})),o()("div",{style:{position:"relative",height:s.layout&&s.layout.height?s.layout.height:300,marginTop:0,marginBottom:40,marginRight:25}},void 0,t))}if(t.type===ue.a||t.type===pe.a||t.type===de.a||t.type===ve.a||t.type===fe.a||t.type===he.a||t.type===ge.a||t.type===me.a)return o()("pre",{},e,Sa("Test Output",t,a,e,r,i,n),t);if(t.type===ce.a||t.type===le.a)return o()("pre",{},e,Sa("Table Output",t,a,e,r,i,n),Oa(t));if(t.type===Oe.a||t.type===Re.a||t.type===ye.a||t.type===Ee.a||t.type===Ae.a||t.type===Pe.a||t.type===_e.a||t.type===Se.a)return o()("pre",{},e,Sa("Model Output",t,a,e,r,i,n),Oa(t));if(t.type===be.a||t.type===Te.a)return o()("pre",{},e,o()(Ke.a,{style:{float:"right",padding:"0.1rem 0.3rem",top:"-1px",zIndex:2}},void 0,o()(ba,{filters:r,onActivateFilters:i,style:{right:55,position:"absolute"},t:n}),o()(ea.a,{onClick:function(){a(e)},style:{right:-5,position:"absolute"},t:n})),o()("div",{style:{marginTop:25}},void 0,t));if("Statistics"===t.type){if(t.group){if(1===t.statistics.length&&"Correlation Matrix"===t.statistics[0])return Da(t,e,a,r,i);var l,c=Ye()(t.result);l=1===t.statistics.length&&"Range"===t.statistics[0]?o()("tr",{},void 0,o()("th",{className:"not-sortable"},void 0,Ge.c.t("DataExplorer:variable")),t.group.map((function(t,e){return o()("th",{},e,t)})),o()("th",{},void 0,Ge.c.t("DataExplorer:range")),o()("th",{},void 0,Ge.c.t("DataExplorer:min")),o()("th",{},void 0,Ge.c.t("DataExplorer:max")),xa):1===t.statistics.length&&"Interquartile Range"===t.statistics[0]?o()("tr",{},void 0,o()("th",{className:"not-sortable"},void 0,Ge.c.t("DataExplorer:variable")),t.group.map((function(t,e){return o()("th",{},e,t)})),Ca,o()("th",{},void 0,Ge.c.t("DataExplorer:lower")),o()("th",{},void 0,Ge.c.t("DataExplorer:upper")),ka):o()("tr",{},void 0,o()("th",{className:"not-sortable"},void 0,c.length>1?"Variable":c[0][0]),t.group.map((function(t,e){return o()("th",{},e,t)})),t.statistics.map((function(t,e){return o()("th",{},e,t)})),La);var u=o()(We.a,{bordered:!0,size:"sm"},void 0,o()("thead",{},void 0,l),o()("tbody",{},void 0,c.map((function(e){var a=Ye()(e[1]);return a=a.map((function(a,r){var i;return i=t.group.length>1?a[0].split(":").map((function(t,e){return o()("td",{},e,t)})):o()("td",{},void 0,a[0]),o()("tr",{},r,o()("td",{},void 0,c.length>1?e[0]:""),i,a[1].value.map((function(e,a){return U()(e)?1===t.statistics.length?e.map((function(t,e){return o()("td",{},e,t.toFixed(3))})):o()("td",{},a,e[0].toFixed(3)):o()("td",{},a,e.toFixed(3))})),o()("td",{},void 0,a[1].size," "))}))}))));return o()("pre",{},e,Sa(t.type,u,a,e,r,i,n),Oa(u))}if(1===t.statistics.length){if("Range"===t.statistics[0])return function(t,e,a,r,i,n){var s=o()(We.a,{bordered:!0,size:"sm"},void 0,o()("thead",{},void 0,o()("tr",{},void 0,o()("th",{},void 0,Ge.c.t("DataExplorer:variable")),o()("th",{},void 0,Ge.c.t("DataExplorer:range")),o()("th",{},void 0,Ge.c.t("DataExplorer:min")),o()("th",{},void 0,Ge.c.t("DataExplorer:max")),Pa)),o()("tbody",{},void 0,Ye()(t.result).map((function(t,e){return o()("tr",{},e,o()("td",{},void 0,t[0]),t[1].value[0].map((function(t,e){return o()("td",{},e,t.toFixed(3))})),o()("td",{},void 0,t[1].size))}))));return o()("pre",{},e,Sa("Range",s,a,e,r,i,n),Oa(s))}(t,e,a,r,i,n);if("Interquartile Range"===t.statistics[0])return function(t,e,a,r,i,n){var s=o()(We.a,{bordered:!0,size:"sm"},void 0,o()("thead",{},void 0,o()("tr",{},void 0,o()("th",{},void 0,Ge.c.t("DataExplorer:variable")),Aa,o()("th",{},void 0,Ge.c.t("DataExplorer:lower")),o()("th",{},void 0,Ge.c.t("DataExplorer:upper")),Ta)),o()("tbody",{},void 0,Ye()(t.result).map((function(t,e){return o()("tr",{},e,o()("td",{},void 0,t[0]),t[1].value[0].map((function(t,e){return o()("td",{},e,t.toFixed(3))})),o()("td",{},void 0,t[1].size))}))));return o()("pre",{},e,Sa("Interquartile Range",s,a,e,r,i,n),Oa(s))}(t,e,a,r,i,n);if("Correlation Matrix"===t.statistics[0])return Da(t,e,a,r,i,n)}var d=o()(We.a,{bordered:!0,size:"sm"},void 0,o()("thead",{},void 0,o()("tr",{},void 0,o()("th",{className:"not-sortable"},void 0,Ge.c.t("DataExplorer:variable")),t.statistics.map((function(t,e){return o()("th",{},e,t)})),Na)),o()("tbody",{},void 0,Ye()(t.result).map((function(t){return o()("tr",{},t[0],o()("td",{},void 0,t[0]),t[1].value.map((function(t,e){return U()(t)?o()("td",{},e,t[0].toFixed(3)):o()("td",{},e,t.toFixed(3))})),o()("td",{},void 0,t[1].size))}))));return o()("pre",{},e,Sa(t.type,d,a,e,r,i,n),Oa(d))}return null},qa=a(4118),Fa=a(4120),Ia=a(4121),ja=a(465),Ha=a(582);a(314);function Xa(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function Va(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?Xa(Object(a),!0).forEach((function(e){E()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):Xa(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function Ma(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var a,r=b()(t);if(e){var i=b()(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return g()(this,a)}}var za=Object(R.lazy)((function(){return a.e(441).then(a.bind(null,6481))})),Ba=A()("isle:data-explorer"),Qa=Object(dt.a)("data-explorer");function Ua(t,e){if(0===e.length)return!0;for(var a=lt()(t),r=0;r<e.length;r++)if(!K()(a,String(e[r])))return!1;return!0}var Ga=o()(_.a,{variant:"danger"},void 0,o()(T.a,{i18nKey:"variables-invalid-alert",ns:"DataExplorer"},void 0,"The ",o()("b",{},void 0,"quantitative")," or ",o()("b",{},void 0,"categorical")," data arrays contain variable names not present in the ",o()("b",{},void 0,"data")," object.")),Ka=o()(D.a,{variant:"secondary",size:"sm",className:"hide-toolbox-button",disabled:!0},void 0,"Loading..."),Wa=function(t){f()(a,t);var e=Ma(a);function a(t){var r;l()(this,a),r=e.call(this,t),E()(p()(r),"restoreTransformations",(function(t){var e=r.state;Ba("Restoring transformations...");for(var a=t.length-1;a>=0;a--){var i=t[a];switch(i.type){case ja.ab:if(Ba("Should add transformed variable ".concat(i.value.name)),!at()(r.props.data,i.value.name)){var n=Object(qa.a)(i.value.code,e.data);e=r.transformVariable(i.value.name,n,e)}break;case ja.d:var o=i.value,s=o.name,l=o.variable,c=o.breaks,u=o.catNames;if(Ba("Should add binned variable ".concat(s)),!at()(r.props.data,s)){var d=e.data[l],p=Object(Fa.a)(d,u,c);e=r.transformVariable(s,p,e)}break;case ja.f:var v=i.value,f=v.name,h=v.firstVar,g=v.secondVar,m=v.nameMappings,b=v.castNumeric;if(Ba("Should add recoded variable ".concat(f)),!at()(r.props.data,f)&&e.data[h]){var y=Object(Ia.a)(h,g,m,e.data,b);e=r.transformVariable(f,y,e)}break;case ja.j:e=r.deleteVariable(i.value,e)}}e.data=it()(e.data,1),r.setState(e)})),E()(p()(r),"resetStorage",(function(){var t=r.context;t.store.removeItem(r.id+"_data"),t.store.removeItem(r.id+"_quantitative"),t.store.removeItem(r.id+"_categorical"),r.setState({data:null,categorical:[],quantitative:[],ready:!1})})),E()(p()(r),"toggleStudentPlots",(function(){r.setState({showStudentPlots:!r.state.showStudentPlots})})),E()(p()(r),"clearOutput",(function(t){var e=r.state.output.slice();e[t]=null,r.setState({output:e})})),E()(p()(r),"clearPlots",(function(){r.setState({studentPlots:[]})})),E()(p()(r),"onUserAction",(function(t){var e,a=t.value;switch(tt()(a)&&(a=JSON.parse(a)),t.type){case"DATA_EXPLORER_SHARE_BARCHART":e=Object(Jt.b)(Va({data:r.state.data},a));break;case"DATA_EXPLORER_SHARE_BOXPLOT":e=Object(Wt.b)(Va({data:r.state.data},a));break;case"DATA_EXPLORER_SHARE_CONTOURCHART":e=Object(Yt.b)(Va({data:r.state.data},a));break;case"DATA_EXPLORER_SHARE_HEATMAP":e=Object(Zt.b)(Va({data:r.state.data},a));break;case"DATA_EXPLORER_SHARE_HISTOGRAM":e=Object($t.b)(Va({data:r.state.data},a));break;case"DATA_EXPLORER_SHARE_LINEPLOT":e=Object(te.b)(Va({data:r.state.data},a));break;case"DATA_EXPLORER_SHARE_MAP":e=Object(ee.b)(Va({data:r.state.data},a));break;case"DATA_EXPLORER_SHARE_MOSAIC":e=Object(ae.b)(Va({data:r.state.data},a));break;case"DATA_EXPLORER_SHARE_PIECHART":e=Object(re.b)(Va({data:r.state.data},a));break;case"DATA_EXPLORER_SHARE_QQPLOT":e=Object(ie.b)(Va({data:r.state.data},a));break;case"DATA_EXPLORER_SHARE_SCATTERPLOT":e=Object(oe.b)(Va({data:r.state.data},a));break;case"DATA_EXPLORER_SHARE_SPLOM":e=Object(ne.b)(Va({data:r.state.data},a));break;case"DATA_EXPLORER_SHARE_VIOLINPLOT":e=Object(se.b)(Va({data:r.state.data},a))}if(e){for(var i=r.state.studentPlots.slice(),n=JSON.stringify(e),o=!1,s=0;s<i.length;s++)if(i[s].config===n){i[s].count+=1,o=!0;break}o||i.push({config:n,count:1}),r.setState({studentPlots:i})}})),E()(p()(r),"onFilters",(function(t){r.setState({filters:t},r.onFilterCreate)})),E()(p()(r),"addToOutputs",(function(t){var e=r.state.output.slice();if(U()(t))for(var a=0;a<t.length;a++){var i=wa(t[a],e.length,r.clearOutput,r.state.subsetFilters,r.onFilters,r.props.t);e.push(i)}else{var n=wa(t,e.length,r.clearOutput,r.state.subsetFilters,r.onFilters,r.props.t);e.push(n)}r.setState({output:e})})),E()(p()(r),"transformVariable",(function(t,e,a){var i,n,o,s,l;return Ba("Attach transformed variable ".concat(t," to data...")),a?(s=it()(a.data,1),i=a.quantitative.slice(),n=a.categorical.slice(),o=a.groupVars.slice()):(s=it()(r.state.data,1),i=r.state.quantitative.slice(),n=r.state.categorical.slice(),o=r.state.groupVars.slice()),s[t]=e,j()(e)?K()(i,t)||(i.push(t),(l=n.indexOf(t))>0&&(n.splice(l,1),o=n.slice())):(K()(n,t)||(n.push(t),(l=i.indexOf(t))>0&&i.splice(l,1)),o=n.slice()),{data:s,categorical:n,quantitative:i,groupVars:o}})),E()(p()(r),"onGenerateTransformedVariable",(function(t,e){var a=r.context;if(at()(r.props.data,t))return a.addNotification({title:r.props.t("variable-exists"),message:r.props.t("variable-exists-msg"),level:"error",position:"tr"});a.addNotification({title:r.props.t("variable-created"),message:r.props.t("variable-created-msg",{name:t}),level:"success",position:"tr"}),r.setState(Va({},r.transformVariable(t,e)))})),E()(p()(r),"onColumnDelete",(function(t){Ba("Should remove variable with name "+t);var e=r.context;r.logAction(ja.j,t),e.addNotification({title:r.props.t("variable-removed"),message:r.props.t("variable-removed-msg",{variable:t}),level:"success",position:"tr"});var a=r.deleteVariable(t);a.data=it()(a.data,1),r.setState(a)})),E()(p()(r),"onColumnNameChange",(function(t,e){for(var a=r.state,i=lt()(r.state.data),n={},o=0;o<i.length;o++){var s=i[o];s===t?n[e]=r.state.data[t]:n[s]=r.state.data[s]}var l=a.quantitative.map((function(a){return a===t?e:a})),c=a.categorical.map((function(a){return a===t?e:a})),u=a.groupVars.map((function(a){return a===t?e:a}));r.setState({data:n,quantitative:l,categorical:c,groupVars:u})})),E()(p()(r),"onColumnDrag",(function(t){var e=r.state,a=function(e,a){return e=t.indexOf(String(e)),a=t.indexOf(String(a)),-1===e||-1===a?0:e<a?-1:e>a?1:0},i=e.quantitative.slice().sort(a),n=e.categorical.slice().sort(a),o=e.groupVars.slice().sort(a);r.setState({quantitative:i,categorical:n,groupVars:o})})),E()(p()(r),"deleteVariable",(function(t,e){var a,i=e||r.state;return delete(a=e?e.data:it()(r.state.data,1))[t],{data:a,quantitative:i.quantitative.filter((function(e){return e!==t})),categorical:i.categorical.filter((function(e){return e!==t})),groupVars:i.groupVars.filter((function(e){return e!==t})),filters:(i.filters||[]).filter((function(e){return e.id!==t}))}})),E()(p()(r),"onFileUpload",(function(t,e){var a=r.context;if(!t){for(var i={},n=lt()(e[0]).filter((function(t){return""!==t})),o=0;o<n.length;o++){var s=n[o];i[s]=new Array(e.length)}for(var l=0;l<e.length;l++)for(var c=0;c<n.length;c++){var u=n[c];i[u][l]=e[l][u]}var d=[],p=[];n.forEach((function(t){j()(i[t])?p.push(t):d.push(t)})),r.setState({quantitative:p,categorical:d,data:i},(function(){a.store.setItem(r.id+"_data",r.state.data,Ba)}))}})),E()(p()(r),"onFilterCreate",(function(){var t={data:r.filterCreate(r.state.data),oldData:r.state.data,subsetFilters:r.state.filters};r.setState(t)})),E()(p()(r),"filterCreate",(function(t){for(var e=new Set,a=0;a<r.state.filters.length;a++){var i=r.state.filters[a],n=t[i.id];if(K()(r.state.quantitative,i.id))for(var o=0;o<n.length;o++)n[o]>=i.value.min&&n[o]<=i.value.max||e.add(o);else for(var s=0;s<n.length;s++)K()(i.value,String(n[s]))||e.add(s)}for(var l=lt()(t),c={},u=t[l[0]].length,d=0;d<l.length;d++){c[l[d]]=[]}for(var p=[],v=0;v<u;v++)if(!e.has(v)){for(var f=0;f<l.length;f++){var h=l[f];c[h].push(t[h][v])}t.id?p.push(t.id[v]):p.push(v+1)}return c.id=p,c})),E()(p()(r),"onFilterAdd",(function(){var t=r.restoreData(),e={data:r.filterCreate(t),oldData:t,subsetFilters:r.state.filters};r.setState(e)})),E()(p()(r),"restoreData",(function(){for(var t=lt()(r.state.data),e=lt()(r.state.oldData),a=it()(r.props.data,1),i=[],n=0;n<r.props.quantitative.length;n++)i.push(String(r.props.quantitative[n]));for(var o=0;o<r.props.categorical.length;o++)i.push(String(r.props.categorical[o]));for(var s=r.state.data.id,l=r.props.data[e[0]].length,c=r.state.oldData.id||ut()(1,l+1,1),u=0;u<e.length;u++){var d=e[u];if("id"!==d&&!K()(i,d)){a[d]=new Array(l).fill(null);for(var p=0;p<c.length;p++){var v=c[p]-1;a[d][v]=r.state.oldData[d][p]}}}for(var f=0;f<t.length;f++){var h=t[f];if("id"!==h&&!K()(i,h)){Ba("Handle inserted variable: "+h),a[h]||(a[h]=new Array(l).fill(null));for(var g=0;g<s.length;g++){var m=s[g]-1;a[h][m]=r.state.data[h][g]}}}return a})),E()(p()(r),"onRestoreData",(function(){var t=r.restoreData();r.setState({data:t,subsetFilters:null,filters:[]})})),E()(p()(r),"on2dSelection",(function(t,e){var a=r.state.filters.filter((function(e){return e.id!==t.x&&e.id!==t.y}));a.push({id:t.x,value:{min:e.range.x[0],max:e.range.x[1]}}),a.push({id:t.y,value:{min:e.range.y[0],max:e.range.y[1]}}),r.setState({filters:a})})),E()(p()(r),"onQQPlotSelection",(function(t,e){if(e.range&&e.range.y){var a=r.state.filters.filter((function(e){return e.id!==t})),i=e.range.y;a.push({id:t,value:{min:i[0],max:i[1]}}),r.setState({filters:a})}})),E()(p()(r),"onBarchartSelection",(function(t,e){var a=r.state.filters.filter((function(e){return e.id!==t}));a.push({id:t,value:e.range.x}),r.setState({filters:a})})),E()(p()(r),"onHistogramSelection",(function(t,e){if(e.points&&e.points[0]){var a=e.points[0],i=a.fullData.xbins.size,n=e.points[e.points.length-1],o=r.state.filters.filter((function(e){return e.id!==t}));o.push({id:t,value:{min:a.x-i/2,max:n.x+i/2}}),r.setState({filters:o})}}));var i,n,o,s=t.data;t.data?(i=t.quantitative,n=t.categorical,o=t.categorical.slice()):(i=[],n=[],o=[]);var c=!1,u=!0;return B()(s)&&(i.length>0||n.length>0)&&(c=!0,u=Ua(s,i.concat(n))),r.id=t.id||Qa(t),r.state={data:s,quantitative:i,categorical:n,validVariables:u,output:[],groupVars:o,ready:c,showStudentPlots:!1,openedNav:t.opened||(U()(t.questions)&&t.questions.length>0?"questions":"data"),studentPlots:[],subsetFilters:null,unaltered:{data:t.data,quantitative:t.quantitative,categorical:t.categorical},filters:[]},r.logAction=function(t,e){r.state.subsetFilters&&(e=Va(Va({},e),{},{filters:r.state.subsetFilters})),r.context.log({id:r.id,type:t,value:e})},r}return u()(a,[{key:"componentDidMount",value:function(){var t=this,e=this.context;if(!this.props.data){var a=e.store.getItem(this.id+"_data"),r=e.store.getItem(this.id+"_quantitative"),i=e.store.getItem(this.id+"_categorical");Promise.all([a,r,i]).then((function(e){var a=e[0]||null,r=!1;J()(a)&&(a=null),Z()(a)||(r=!0);var i=e[1]||[],n=e[2]||[],o=(n||[]).slice();t.setState({data:a,quantitative:i,categorical:n,groupVars:o,ready:r})})).catch((function(t){Ba(t)}))}if(e.currentUserActions){var n=e.currentUserActions[this.id];this.props.data&&M()(n)&&this.restoreTransformations(n)}this.unsubscribe=e.subscribe((function(e,a){if(e===Ha.A){var r=a[t.id];t.props.data&&M()(r)&&t.restoreTransformations(r)}}))}},{key:"componentDidUpdate",value:function(t,e){Ba("Component did update..."),this.state.output!==e.output&&this.outputPanel&&this.outputPanel.scrollToBottom()}},{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"render",value:function(){var t=this;if(Ba("Render component..."),!this.state.data)return o()(Tt,{title:this.props.t("data-explorer"),onUpload:this.onFileUpload});if(!this.state.ready){var e=lt()(this.state.data);return o()(w.a,{},void 0,o()(w.a.Header,{as:"h3"},void 0,this.props.t("data-explorer")),o()(w.a.Body,{},void 0,o()("h4",{},void 0,this.props.t("select-quantitative-categorical"),":"),o()(pt.a,{legend:this.props.t("quantitative"),options:e,defaultValue:this.state.quantitative,multi:!0,onChange:function(e){t.setState({quantitative:e||[]})}}),o()(pt.a,{legend:this.props.t("categorical"),options:e,defaultValue:this.state.categorical,multi:!0,onChange:function(e){t.setState({categorical:e||[]})}}),o()(D.a,{disabled:X()(this.state.categorical)&&X()(this.state.quantitative),onClick:function(){var e=t.state.categorical.slice();t.setState({groupVars:e,ready:!0},(function(){var e=t.context;e.store.setItem(t.id+"_quantitative",t.state.quantitative,Ba),e.store.setItem(t.id+"_categorical",t.state.categorical,Ba)}))}},void 0,this.props.t("submit")),o()(_t.a,{data:this.state.data,id:this.id+"_table"})))}if(J()(this.state.data))return o()(_.a,{variant:"danger"},void 0,this.props.t("data-empty"));if(!this.state.validVariables)return Ga;var a=U()(this.props.questions)&&this.props.questions.length>0,r=this.props.style.height||.9*window.innerHeight-165;return o()(C.a,{className:"no-gutter data-explorer",style:this.props.style},void 0,o()(k.a,{xs:6,md:6},void 0,o()(w.a,{style:{height:this.props.style.height,minHeight:this.props.style.height||.9*window.innerHeight,padding:0}},void 0,o()(x.a,{className:"data-explorer-navbar",onSelect:function(e){return t.setState({openedNav:e})}},void 0,o()(N.a,{},void 0,a?o()(N.a.Item,{className:"explorer-data-nav"},void 0,o()(N.a.Link,{eventKey:"questions",active:"questions"===this.state.openedNav},void 0,this.props.t("questions"))):null,this.props.dataTable?o()(N.a.Item,{className:"explorer-data-nav"},void 0,o()(N.a.Link,{eventKey:"data",active:"data"===this.state.openedNav},void 0,this.props.t("data"))):null,this.props.editor?o()(N.a.Item,{className:"explorer-editor-nav"},void 0,o()(N.a.Link,{active:"editor"===this.state.openedNav,eventKey:"editor"},void 0,this.props.editorTitle?this.props.editorTitle:this.props.t("report"))):null,this.props.history?o()(N.a.Item,{className:"explorer-editor-nav"},void 0,o()(N.a.Link,{active:"history"===this.state.openedNav,eventKey:"history"},void 0,this.props.t("history"))):null,this.props.tabs.length>0?this.props.tabs.map((function(e,a){return o()(N.a.Item,{className:"explorer-tabs-nav"},a,o()(N.a.Link,{active:t.state.openedNav===e.title,eventKey:e.title},void 0,e.title))})):null),o()(R.Suspense,{fallback:Ka},void 0,o()(za,{id:"".concat(this.id,"-toolbox"),models:this.props.models,tables:this.props.tables,statistics:this.props.statistics,plots:this.props.plots,tests:this.props.tests,quantitative:this.state.quantitative,originalQuantitative:this.props.quantitative,categorical:this.state.categorical,logAction:this.logAction,onCreated:this.addToOutputs,data:this.state.data,showTestDecisions:this.props.showTestDecisions,onPlotDone:this.outputPanel?this.outputPanel.scrollToBottom:ot.a,groupingVariables:this.state.groupVars,on2dSelection:this.on2dSelection,onQQPlotSelection:this.onQQPlotSelection,transformer:this.props.transformer,onBarchartSelection:this.onBarchartSelection,showHistogramDensityOption:this.props.histogramDensities,onGenerateTransformedVariable:this.onGenerateTransformedVariable,onHistogramSelection:this.onHistogramSelection,onCategoricalGenerate:function(e,a){var r=e.slice();t.setState({categorical:e,groupVars:r,data:a})},onQuantitativeGenerate:function(e,a){t.setState({quantitative:e,data:a})},onBothGenerate:function(e,a,r){t.setState({quantitative:e,categorical:a,groupVars:a.slice(),data:r})},onTutorialStart:this.props.onTutorialStart,onTutorialCompletion:this.props.onTutorialCompletion}))),o()(w.a.Body,{style:{overflowY:"auto"}},void 0,a?o()(yt.a,{id:this.id+"_questions",height:r,size:"small",className:"data-explorer-questions",style:{display:"questions"!==this.state.openedNav?"none":null}},void 0,this.props.questions):null,o()("div",{style:{display:"data"!==this.state.openedNav?"none":null}},void 0,this.props.data?null:o()(D.a,{size:"small",onClick:this.resetStorage,style:{position:"absolute",top:"80px",zIndex:2}},void 0,this.props.t("clear-data")),S.a.createElement(_t.a,i()({},this.props.dataTableProps,{data:this.state.data,dataInfo:this.props.dataInfo,undeletableVars:lt()(this.props.data),filters:this.state.filters,onFilteredChange:function(e){Ba("Filters have changed..."),t.setState({filters:e})},onColumnDelete:this.onColumnDelete,onColumnNameChange:this.onColumnNameChange,onColumnDrag:this.onColumnDrag,deletable:!0,id:this.id+"_table"})),o()(C.a,{},void 0,o()(k.a,{md:4},void 0,this.state.filters.length>0&&this.state.subsetFilters!==this.state.filters?o()(Ot.a,{placement:"top",overlay:o()(q.a,{},void 0,this.props.t("create-filtered-dataset-tooltip"))},void 0,o()(D.a,{onClick:function(){t.state.subsetFilters?t.onFilterAdd():t.onFilterCreate()},variant:"secondary",size:"xsmall",style:{float:"left"}},void 0,this.props.t("create-filtered-dataset"))):null),o()(k.a,{md:8},void 0,this.state.subsetFilters?o()("div",{className:"data-explorer-subset-filter-display"},void 0,o()("p",{},void 0,o()("span",{style:{color:"white",paddingLeft:2}},void 0,this.props.t("filtered"),":"),this.state.subsetFilters?o()(Ot.a,{placement:"top",overlay:o()(q.a,{},void 0,this.props.t("restore-original-dataset-tooltip"))},void 0,o()(D.a,{onClick:this.onRestoreData,variant:"secondary",size:"small",style:{float:"right"}},void 0,this.props.t("restore-original-dataset"))):null),o()(va,{filters:this.state.subsetFilters,removeButtons:!0,onRemove:function(e){Ba("Removing filter at position "+e);var a=t.state.subsetFilters.slice();a.splice(e,1),a.length>0?t.setState({data:t.state.oldData,filters:a},t.onFilterCreate):t.onRestoreData()}})):null))),this.props.history?o()(Ue,{actions:this.context.currentUserActions[this.id],style:{display:"history"!==this.state.openedNav?"none":null},onCreated:this.addToOutputs,logAction:this.logAction,session:this.context,data:this.state.data,quantitative:this.state.quantitative,categorical:this.state.categorical,t:this.props.t}):null,this.props.editor?S.a.createElement(vt.a,i()({},this.props.editorProps,{mode:this.props.reportMode,id:this.id+"_editor",style:{display:"editor"!==this.state.openedNav?"none":null},submitButton:!0})):null,this.props.tabs.map((function(e,a){return t.state.openedNav===e.title?e.content:null}))))),o()(k.a,{xs:6,md:6},void 0,o()("div",{className:"card card-default",style:{height:this.props.style.height,minHeight:this.props.style.height||.9*window.innerHeight,padding:0}},void 0,o()("div",{className:"card-header clearfix"},void 0,o()("h3",{className:"data-explorer-output-header"},void 0,this.props.t("output")),o()(Et.a,{owner:!0},void 0,o()(L.a,{show:this.state.showStudentPlots,onHide:this.toggleStudentPlots,dialogClassName:"modal-100w"},void 0,o()(L.a.Header,{closeButton:!0},void 0,o()(L.a.Title,{},void 0,this.props.t("plots"))),o()(L.a.Body,{style:{height:.8*window.innerHeight,overflowY:"scroll"}},void 0,this.state.studentPlots.length>0?o()(bt,{},void 0,this.state.studentPlots.map((function(e,a){var r=JSON.parse(e.config);return o()("div",{style:{height:"450px"}},a,Object(F.isPrimitive)(r)?o()(Pt.a,{code:r,libraries:["MASS"]}):o()(St.a,{data:r.data,layout:r.layout,removeButtons:!0}),o()("span",{},void 0,o()("b",{},void 0,t.props.t("count"),": "),e.count))}))):o()(w.a,{body:!0,className:"bg-light"},void 0,this.props.t("no-plots-yet"))),o()(L.a.Footer,{},void 0,o()(D.a,{variant:"danger",onClick:this.clearPlots},void 0,this.props.t("clear-plots")),o()(D.a,{onClick:this.toggleStudentPlots},void 0,this.props.t("close")))),o()(D.a,{variant:"secondary",size:"sm",style:{float:"right"},onClick:this.toggleStudentPlots},void 0,this.props.t("open-shared-plots")),o()(Rt.a,{returnFullObject:!0,for:[this.id],onDatum:this.onUserAction}))),S.a.createElement(kt,{output:this.state.output,ref:function(e){t.outputPanel=e}}),o()(D.a,{size:"sm",variant:"outline-danger",block:!0,onClick:function(){t.setState({output:[]})}},void 0,this.props.t("clear-all")))))}}],[{key:"getDerivedStateFromProps",value:function(t,e){var a={};return t.data!==e.unaltered.data&&(a.data=t.data),t.data&&(t.quantitative!==e.unaltered.quantitative&&(a.quantitative=t.quantitative),t.categorical!==e.unaltered.categorical&&(a.categorical=t.categorical),a.validVariables=Ua(t.data,t.quantitative.concat(t.categorical))),J()(a)?null:(a.unaltered={data:t.data,quantitative:t.quantitative,categorical:t.categorical},a)}}]),a}(R.Component);Wa.defaultProps={data:{},dataInfo:{info:"",name:"",variables:null,showOnStartup:!1},dataTable:!0,dataTableProps:{},history:!1,tabs:[],questions:[],transformer:!0,statistics:["Mean","Median","Min","Max","Range","Interquartile Range","Standard Deviation","Variance","Correlation","Correlation Matrix","Skewness","Excess Kurtosis","First Quartile","Third Quartile","Quantile","Five-Number Summary"],plots:["Bar Chart","Pie Chart","Mosaic Plot","Histogram","Box Plot","Line Plot","Scatterplot","Scatterplot Matrix","Heat Map","Contour Chart","Violin Plot","QQ Plot"],tables:["Frequency Table","Contingency Table"],tests:["One-Sample Mean Test","Two-Sample Mean Test","One-Way ANOVA","One-Sample Proportion Test","Two-Sample Proportion Test","Correlation Test","Chi-squared Independence Test","Kruskal-Wallis Test"],models:["Simple Linear Regression","Multiple Linear Regression","LASSO","Decision Tree","Random Forest","Logistic Regression","Naive Bayes","PCA","Hierarchical Clustering","kmeans"],opened:null,categorical:[],quantitative:[],editor:!0,editorProps:null,editorTitle:null,reportMode:"individual",histogramDensities:!0,showTestDecisions:!0,onTutorialCompletion:function(){},onTutorialStart:function(){},style:{}},Wa.contextType=Dt.a;e.default=Object(P.a)("DataExplorer")(Wa)}}]);