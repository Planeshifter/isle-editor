(window.webpackJsonp=window.webpackJsonp||[]).push([[163],{3248:function(t,e,i){"use strict";i(827),i(351);e.a=function(t){var e=new(0,window.FileReader);return e.readAsDataURL(t),new Promise((function(t){e.onloadend=function(){t(e.result)}}))}},4747:function(t){t.exports=JSON.parse('{"DE":{"answer-submitted":"Antwort eingereicht.","drop-image":"Bild hier ablegen","model-solution":"Modell-L\xf6sung","or":"oder","question-closed":"Frage ist nun geschlossen.","reset":"Zur\xfccksetzen","resubmit":"Erneut einreichen","submit":"Abschicken","submitted":"Abgeschickt","upload":"Datei hochladen"},"EN":{"answer-submitted":"You have successfully submitted your answer.","drop-image":"Drop image here","model-solution":"Model Solution","or":"or","question-closed":"Question is now closed.","reset":"Reset","resubmit":"Resubmit","submit":"Submit","submitted":"Submitted","upload":"Uploaded submission"},"ES":{"answer-submitted":"Ha presentado con \xe9xito su respuesta.","drop-image":"Deje caer la imagen aqu\xed","model-solution":"Soluci\xf3n modelo","or":"o","question-closed":"La pregunta est\xe1 ahora cerrada.","reset":"Reiniciar","resubmit":"Volver a presentar","submit":"Presentar","submitted":"Presentado","upload":"Subir presentaci\xf3n"}}')},5855:function(t,e,i){"use strict";i.r(e);i(358),i(351),i(361);var n=i(570),s=i.n(n),o=i(359),a=i.n(o),r=(i(777),i(352)),l=i.n(r),u=i(353),d=i.n(u),c=i(366),p=i.n(c),h=i(356),m=i.n(h),g=i(357),f=i.n(g),b=i(354),v=i.n(b),S=i(350),y=i.n(S),w=i(0),k=i.n(w),D=(i(342),i(399)),N=i.n(D),R=i(653),q=i(2485),x=i(428),E=i(388),P=i(501),F=i.n(P),C=i(611),L=i(1256),H=i(1421),A=i(895),B=i(1652),O=i(1274),j=i(904),U=i(714),T=i(1714),z=i(709),J=i(416),M=i(3248),W=i(421),I=i(493),Q=i(4747);I.a.addResources("de","image-question",Q.DE),I.a.addResources("en","image-question",Q.EN),I.a.addResources("es","image-question",Q.ES);i(263);function V(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=v()(t);if(e){var s=v()(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return f()(this,i)}}var Y=Object(C.a)("image-question"),Z=N()("isle:image-question"),_=/src="([^"]*)"/,G=function(t){m()(i,t);var e=V(i);function i(t){var n;return l()(this,i),n=e.call(this,t),y()(p()(n),"logHint",(function(t){Z("Logging hint..."),n.context.log({id:n.id,type:W.nb,value:t})})),y()(p()(n),"sendSubmitNotification",(function(){n.context.addNotification({title:n.props.t("submitted"),message:n.props.t("answer-submitted"),level:"info"})})),y()(p()(n),"handleSubmit",(function(){var t=n.context;(n.props.disableSubmitNotification||n.sendSubmitNotification(),n.props.onSubmit(),n.setState({submitted:!0}),n.state.src)?t.log({id:n.id,type:W.ob,value:n.state.src}):document.getElementById(n.id+"-canvas").toBlob((function(e){Object(M.a)(e).then((function(e){t.log({id:n.id,type:W.ob,value:e}),n.setState({src:e})}))}))})),y()(p()(n),"ignoreDrag",(function(t){t.stopPropagation(),t.preventDefault()})),y()(p()(n),"handleFileUpload",(function(){var t=new FileReader,e=n.fileUpload.files[0];t.addEventListener("load",n.onFileRead,!1),t.readAsDataURL(e)})),y()(p()(n),"toggleSpinner",(function(){n.setState({isProcessing:!n.state.isProcessing})})),y()(p()(n),"onDrop",(function(t){t.stopPropagation(),t.preventDefault(),n.toggleSpinner();var e=t.dataTransfer,i=new FileReader,s=null;if(e.items&&e.items.length>0){var o=e.items[0];"file"===o.kind?s=o.getAsFile():"string"===o.kind&&o.getAsString((function(t){if(F()(t,"<img")){var e=t.match(_);e&&n.setState({src:e[1]},n.toggleSpinner)}else if(F()(t,"<thead")){var i=document.createElement("table");i.innerHTML=t,document.body.appendChild(i),Object(q.toJpeg)(i,{backgroundColor:"white",style:{fontSize:12},width:600}).then((function(t){n.setState({src:t},n.toggleSpinner),i.remove()}))}else{var s=document.createElement("pre");s.innerHTML=t,document.body.appendChild(s),Object(q.toJpeg)(s,{backgroundColor:"white",style:{fontSize:14}}).then((function(t){n.setState({src:t},n.toggleSpinner),s.remove()}))}}))}else e.files&&e.files.length>0&&(s=e.files[0]);s&&(n.mimeType=s.type,s&&(i.addEventListener("load",n.onFileRead,!1),i.readAsDataURL(s)))})),y()(p()(n),"onFileRead",(function(t){var e=t.target.result;n.setState({src:e})})),y()(p()(n),"handleSolutionClick",(function(){n.setState({displaySolution:!n.state.displaySolution})})),n.id=t.id||Y(t),n.state={submitted:!1,src:null,exhaustedHints:0===t.hints.length,displaySolution:!1,isProcessing:!1},n}return d()(i,[{key:"renderSubmitButton",value:function(){var t=this.context;return this.props.until&&t.startTime>this.props.until?a()("span",{className:"title",style:{marginLeft:4}},void 0,this.props.t("question-closed")):a()(O.a,{className:"submit-button",variant:"primary",size:"sm",onClick:this.handleSubmit},void 0,this.state.submitted?this.props.t("resubmit"):this.props.t("submit"))}},{key:"render",value:function(){var t,e=this,i=this.props.hints.length,n=a()(B.a,{disabled:!this.state.submitted||!this.state.exhaustedHints,onClick:this.handleSolutionClick,hasHints:this.props.hints.length>0});return this.state.isProcessing||(t=this.state.src?a()("div",{className:"center",style:{maxWidth:600}},void 0,this.state.displaySolution?a()(L.a,{alt:this.props.t("model-solution"),src:this.props.solution,width:"100%",height:"auto",style:{border:"solid 1px gold"}}):a()(L.a,{alt:this.props.t("upload"),src:this.state.src,width:"100%",height:"auto"})):a()(w.Fragment,{},void 0,a()("div",{className:"image-question-dropzone",onDrop:this.onDrop,onDragOver:this.ignoreDrag,onDragEnd:this.ignoreDrag},void 0,a()("span",{},void 0,this.props.t("drop-image"))),a()("p",{className:"center"},void 0,this.props.t("or")),k.a.createElement("input",{id:this.id+"-upload",className:"image-question-upload center",type:"file",accept:"image/*",onChange:this.handleFileUpload,ref:function(t){e.fileUpload=t}}),this.props.sketchpad?a()(w.Fragment,{},void 0,a()("p",{className:"center"},void 0,this.props.t("or")),k.a.createElement(T.a,s()({id:this.id,hideNavigationButtons:!0,hideSaveButtons:!0,hideTransmitButtons:!0,canvasWidth:900,canvasHeight:600},this.props.sketchpad))):null)),a()(x.a,{id:this.id,className:"image-question ".concat(this.props.className),style:this.props.style},void 0,a()(x.a.Body,{style:{width:this.props.feedback?"calc(100%-60px)":"100%",display:"inline-block"}},void 0,a()("label",{},void 0,this.props.question),a()(H.a,{running:this.state.isProcessing,width:256,height:128}),t,this.props.feedback?a()(z.a,{vertical:!0,id:this.id+"_feedback",style:{position:"absolute",right:"4px",top:"4px"}}):null,a()(A.a,{buttonLabel:"Answers",id:this.id,info:W.ob,data:{question:this.props.question,type:"image"}}),a()("div",{className:"image-question-toolbar"},void 0,i>0?a()(j.a,{onClick:this.logHint,hints:this.props.hints,placement:this.props.hintPlacement,onFinished:function(){e.setState({exhaustedHints:!0})}}):null,this.state.src?a()(E.a,{size:"sm",variant:"warning",onClick:function(){e.setState({src:null})}},void 0,this.props.t("reset")):null,this.renderSubmitButton(),this.props.solution?n:null,this.props.chat?a()(U.a,{for:this.id}):null)))}}]),i}(w.Component);G.defaultProps={question:"",hints:[],hintPlacement:"bottom",feedback:!0,chat:!1,disableSubmitNotification:!1,className:"",sketchpad:null,solution:null,until:null,style:{},onSubmit:function(){}},G.contextType=J.a;e.default=Object(R.a)("image-question")(G)},714:function(t,e,i){"use strict";var n=i(349),s=Object(n.a)((function(){return i.e(138).then(i.bind(null,1192))}));e.a=s},904:function(t,e,i){"use strict";var n=i(349),s=Object(n.a)((function(){return i.e(160).then(i.bind(null,1407))}));e.a=s}}]);