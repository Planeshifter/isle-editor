(self.webpackChunk=self.webpackChunk||[]).push([[7659],{729988:function(e,t,n){"use strict";n.r(t);n(382139);var o=n(264659),r=n(904730),i=n(673989),c=n(175663),a=n(750591),s=n(575630),u=n(151119),d=n(202784),f=n(928316),p=(n(213980),n(911755)),l=n.n(p),v=n(437069),m=n.n(v),y=n(777628),h=n.n(y),g=n(213939),k=n.n(g),E=n(294565),Z=n(741319);function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=(0,s.Z)(e);if(t){var r=(0,s.Z)(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return(0,a.Z)(this,n)}}var L=l()("isle:key-controls"),w=/^[a-z]$/i,D=["input","textarea"],K=function(e){(0,c.Z)(n,e);var t=C(n);function n(e){var r;return(0,o.Z)(this,n),r=t.call(this,e),(0,u.Z)((0,i.Z)(r),"addListeners",(function(){var e=m()(r.props.actions);if(L("Add keydown event listeners for ".concat(r.props.container?"container":"document",": ").concat(e.join(", "))),r.props.container)try{((0,E.isPrimitive)(r.props.container)?document.querySelector(r.props.container):f.findDOMNode(r.props.container)).addEventListener("keydown",r.triggerEvent)}catch(t){L(t.message)}else document.addEventListener("keydown",r.triggerDocEvent)})),(0,u.Z)((0,i.Z)(r),"removeListeners",(function(e){var t=m()(r.props.actions);if(L("Remove keydown event listeners for ".concat(e?"container":"document",": ").concat(t.join(", "))),e)try{((0,E.isPrimitive)(r.props.container)?document.querySelector(r.props.container):f.findDOMNode(r.props.container)).removeEventListener("keydown",r.triggerEvent)}catch(n){L(n.message)}document.removeEventListener("keydown",r.triggerDocEvent)})),(0,u.Z)((0,i.Z)(r),"triggerEvent",(function(e){var t=e.key;L("Received key press for container: ".concat(t));var n="";e.ctrlKey&&(n+="ctrl+"),e.shiftKey&&(t=h()(t),n+="shift+"),e.altKey&&(n+="alt+"),e.metaKey&&(n+="meta+");var o=r.props.actions[n+t];if(document.activeElement===r.props.container&&k()(o)){if(!n&&w.test(t)&&document.activeElement!==document.body){var i=document.activeElement;if(i&&(-1!==D.indexOf(i.tagName.toLowerCase())||i.isContentEditable)||"CANVAS"===i.tagName)return}e.preventDefault(),e.stopPropagation(),o(e)}})),(0,u.Z)((0,i.Z)(r),"triggerDocEvent",(function(e){var t=e.key;L("Received key press for document: ".concat(t));var n="";e.ctrlKey&&(n+="ctrl+"),e.shiftKey&&(t=h()(t),n+="shift+"),e.altKey&&(n+="alt+"),e.metaKey&&(n+="meta+");var o=r.props.actions[n+t];if(k()(o)){if(!n&&w.test(t)&&document.activeElement!==document.body){var i=document.activeElement;if(i&&(-1!==D.indexOf(i.tagName.toLowerCase())||i.isContentEditable)||"CANVAS"===i.tagName)return}e.preventDefault(),e.stopPropagation(),o(e)}})),r}return(0,r.Z)(n,[{key:"componentDidMount",value:function(){L("Component has mounted..."),this.addListeners()}},{key:"componentDidUpdate",value:function(e){this.props.container!==e.container&&(L("Container has changed, re-attach event listeners..."),this.removeListeners(e.container),this.addListeners())}},{key:"componentWillUnmount",value:function(){L("Component has unmounted..."),this.removeListeners()}},{key:"render",value:function(){return null}}]),n}(d.Component);K.defaultProps={actions:{},container:null},K.contextType=Z.Z,t.default=K}}]);