(window.webpackJsonp=window.webpackJsonp||[]).push([[173],{1026:function(e,t,n){"use strict";var i=n(371),a=Object(i.a)((function(){return n.e(170).then(n.bind(null,1503))}));t.a=a},1252:function(e,t,n){"use strict";var i=n(371),a=Object(i.a)((function(){return Promise.all([n.e(0),n.e(6),n.e(366),n.e(167)]).then(n.bind(null,1799))}));t.a=a},2556:function(e,t,n){"use strict";n(815),n(374);t.a=function(e){var t=new(0,window.FileReader);return t.readAsDataURL(e),new Promise((function(e){t.onloadend=function(){e(t.result)}}))}},6798:function(e,t,n){"use strict";n.r(t);var i=n(518),a=n.n(i),o=(n(860),n(372)),s=n.n(o),l=n(454),u=n.n(l),c=n(0),r=n.n(c),d=(n(364),n(425)),m=n.n(d),f=n(5288),b=n(5255),h=n(457),p=n(401),v=n(504),g=n.n(v),w=n(667),y=n(1390),k=n(1522),O=n(1019),j=n(1762),N=n(1404),S=n(1026),q=n(789),C=n(1815),L=n(794),D=n(1252),E=n(446),F=n(2556);var P=function(e){e.stopPropagation(),e.preventDefault()},R=n(450),x=n(397);n(282);Object(x.a)("ImageQuestion");var A=Object(w.a)("image-question"),B=m()("isle:image-question"),z=/src="([^"]*)"/,T=function(e){var t,n,i=Object(c.useRef)(e.id||A(e)),o=Object(c.useContext)(E.a),l=Object(c.useState)(!1),d=u()(l,2),m=d[0],f=d[1],v=Object(c.useState)(null),w=u()(v,2),x=w[0],T=w[1],H=Object(c.useState)(0===e.hints.length),I=u()(H,2),U=I[0],J=I[1],M=Object(c.useState)(!1),Q=u()(M,2),W=Q[0],_=Q[1],G=Object(c.useState)(!1),K=u()(G,2),V=K[0],X=K[1],Y=function(e){T(e.target.result)},Z=e.hints.length,$=s()(j.a,{disabled:!m||!U,onClick:function(){_(!W)},hasHints:e.hints.length>0}),ee=function(){X(!V)},te=function(){(e.disableSubmitNotification||o.addNotification({title:e.t("submitted"),message:e.t("answer-submitted"),level:"info"}),e.onSubmit(),f(!0),x)?o.log({id:i.current,type:R.nb,value:x}):document.getElementById(i+"-canvas").toBlob((function(e){Object(F.a)(e).then((function(e){o.log({id:i.current,type:R.nb,value:e}),T(e)}))}))};return V||(n=x?s()("div",{className:"center",style:{maxWidth:600}},void 0,s()(y.a,W?{alt:e.t("model-solution"),src:e.solution,width:"100%",height:"auto",style:{border:"solid 1px gold"}}:{alt:e.t("upload"),src:x,width:"100%",height:"auto"})):s()(c.Fragment,{},void 0,s()("div",{className:"image-question-dropzone",onDrop:function(e){e.stopPropagation(),e.preventDefault(),ee();var t=e.dataTransfer,n=new FileReader,i=null;if(t.items&&t.items.length>0){var a=t.items[0];"file"===a.kind?i=a.getAsFile():"string"===a.kind&&a.getAsString((function(e){if(g()(e,"<img")){var t=e.match(z);t&&(T(t[1]),ee())}else if(g()(e,"<thead")){var n=document.createElement("table");n.innerHTML=e,document.body.appendChild(n),Object(b.a)(n,{backgroundColor:"white",style:{fontSize:12},width:600}).then((function(e){T(e),ee(),n.remove()}))}else{var i=document.createElement("pre");i.innerHTML=e,document.body.appendChild(i),Object(b.a)(i,{backgroundColor:"white",style:{fontSize:14}}).then((function(e){T(e),ee(),i.remove()}))}}))}else t.files&&t.files.length>0&&(i=t.files[0]);i&&i&&(n.addEventListener("load",Y,!1),n.readAsDataURL(i))},onDragOver:P,onDragEnd:P},void 0,s()("span",{},void 0,e.t("drop-image"))),s()("p",{className:"center"},void 0,e.t("or")),r.a.createElement("input",{id:i.current+"-upload",className:"image-question-upload center",type:"file",accept:"image/*",onChange:function(){var e=new FileReader,n=t.files[0];e.addEventListener("load",Y,!1),e.readAsDataURL(n)},ref:function(e){t=e}}),e.sketchpad?s()(c.Fragment,{},void 0,s()("p",{className:"center"},void 0,e.t("or")),r.a.createElement(C.a,a()({id:i.current,hideNavigationButtons:!0,hideSaveButtons:!0,hideTransmitButtons:!0,canvasWidth:900,canvasHeight:600},e.sketchpad))):null)),s()(h.a,{id:i.current,className:"image-question ".concat(e.className),style:e.style},void 0,s()(h.a.Body,{style:{width:e.feedback?"calc(100%-60px)":"100%",display:"inline-block"}},void 0,s()("label",{},void 0,e.question),s()(k.a,{running:V,width:256,height:128}),n,e.feedback?s()(L.a,{vertical:!0,id:i.current+"_feedback",style:{position:"absolute",right:"4px",top:"4px"}}):null,s()(O.a,{buttonLabel:"Answers",id:i.current,info:R.nb,data:{question:e.question,type:"image"},points:e.points}),s()("div",{className:"image-question-toolbar"},void 0,Z>0?s()(S.a,{onClick:function(e){B("Logging hint..."),o.log({id:i.current,type:R.mb,value:e})},hints:e.hints,placement:e.hintPlacement,onFinished:function(){J(!0)}}):null,x?s()(p.a,{size:"sm",variant:"warning",onClick:function(){T(null)}},void 0,e.t("reset")):null,e.until&&o.startTime>e.until?s()("span",{className:"title",style:{marginLeft:4}},void 0,e.t("question-closed")):s()(N.a,{className:"submit-button",variant:"primary",size:"sm",onClick:te},void 0,m?e.t("resubmit"):e.t("submit")),e.solution?$:null,e.chat?s()(q.a,{for:i.current}):null),s()(D.a,{for:i.current,points:e.points})))};T.defaultProps={question:"",hints:[],hintPlacement:"bottom",feedback:!0,chat:!1,disableSubmitNotification:!1,className:"",sketchpad:null,solution:null,until:null,points:10,style:{},onSubmit:function(){}};t.default=Object(f.a)("ImageQuestion")(T)},789:function(e,t,n){"use strict";var i=n(371),a=Object(i.a)((function(){return n.e(141).then(n.bind(null,1271))}));t.a=a}}]);