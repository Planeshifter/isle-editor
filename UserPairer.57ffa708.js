(window.webpackJsonp=window.webpackJsonp||[]).push([[228],{3632:function(e,t,n){"use strict";n.r(t);n(357),n(354),n(360);var s=n(363),o=n.n(s),a=(n(424),n(356)),i=n.n(a),r=n(358),l=n.n(r),c=n(366),u=n.n(c),d=n(361),m=n.n(d),v=n(362),h=n.n(v),f=n(359),g=n.n(f),p=n(355),w=n.n(p),b=n(0),y=(n(8),n(400)),C=n(454),O=n(378),A=n(483),S=n(388),x=n.n(S),k=n(435),N=n.n(k),j=n(916),M=n.n(j),H=n(376),P=n.n(H),R=n(534),J=n(395),L=n(494),T=n(590),E=o()("thead",{},void 0,o()("tr",{},void 0,o()("th",{},void 0,"Email"),o()("th",{},void 0,"Receive From"),o()("th",{},void 0,"Send To")));var z=o()(L.a.Header,{closeButton:!0},void 0,o()(L.a.Title,{as:"h3"},void 0,"Assignments")),B=function(e){return o()(L.a,{show:e.show,onHide:e.onHide,dialogClassName:"modal-90w",backdropClassName:"modal-backdrop-second-order",style:{minHeight:"300px",boxShadow:"0 0 10px black",zIndex:2e3}},void 0,z,o()(L.a.Body,{style:{overflowY:"scroll",maxHeight:.8*window.innerHeight}},void 0,function(e){var t=[];for(var n in e)if(P()(e,n)){var s=e[n];t.push(o()("tr",{},void 0,o()("td",{},void 0,"".concat(s.name," (").concat(n,")")),o()("td",{},void 0,"".concat(s.from.name," (").concat(s.from.email,")")),o()("td",{},void 0,"".concat(s.to.name," (").concat(s.to.email,")"))))}return o()(T.a,{bordered:!0,size:"sm"},void 0,E,o()("tbody",{},void 0,t))}(e.assignments)))},D=n(397),U=n(464);n(344);function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,s=g()(e);if(t){var o=g()(this).constructor;n=Reflect.construct(s,arguments,o)}else n=s.apply(this,arguments);return h()(this,n)}}var V=o()("option",{value:"all"},void 0,"All Cohorts"),F=o()("span",{className:"user-pairer-title"},void 0,"Only pair users from:"),G=function(e){m()(n,e);var t=I(n);function n(e){var s;return i()(this,n),s=t.call(this,e),w()(u()(s),"onCohortChange",(function(e){for(var t,n=s.context.cohorts,o=0;o<n.length;o++)if(n[o].title===e.target.value){t=n[o];break}s.setState({selectedCohort:t})})),w()(u()(s),"createAssignments",(function(){var e=s.context,t=e.userList,n=M()(t.filter((function(e){return!(s.state.selectedCohort&&!N()(s.state.selectedCohort.members,e.email))&&((!s.props.filterOwners||!e.owner)&&null===e.exitTime)})).map((function(e){return{email:e.email,name:e.name}})));if(n.length<2)return s.setState({message:{variant:"warning",value:"There needs to be at least 2 users for the assignment to work"}});for(var o={},a=0;a<n.length;a++){var i=n[a].email;o[i]={to:n[a===n.length-1?0:a+1],from:n[0===a?n.length-1:a-1],name:n[a].name}}s.setState({assignments:o,message:{variant:"success",value:"".concat(n.length," users were successfully assigned with one another.")},showAssignments:!0},(function(){var t=JSON.stringify(s.state.assignments),n={id:s.props.id,type:D.Ic,value:t,noSave:!1};if(e.log(n,"owners"),e.isOwner())for(var a in o)P()(o,a)&&e.log({id:s.props.id,type:D.pb,value:JSON.stringify(s.state.assignments[a]),noSave:!0},a);s.props.onAssignmentOwner(s.state.assignments)}))})),w()(u()(s),"clearAssignments",(function(){var e=s.context;if(e.isOwner()){var t=s.state.assignments,n={id:s.props.id,type:D.a,value:!0};for(var o in e.log(n,"owners"),t)P()(t,o)&&e.log({id:s.props.id,type:D.Vb,value:o,noSave:!0},o);s.setState({showAssignments:!1,assignments:{},message:null})}})),w()(u()(s),"toggleModal",(function(){s.setState({showAssignmentModal:!s.state.showAssignmentModal})})),s.state={showAssignments:!1,showAssignmentModal:!1,assignments:{},message:e.id?null:{variant:"danger",value:"Component expects an ID to work."},selectedCohort:null},s}return l()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.context;this.unsubscribe=t.subscribe((function(n,s){if(n===U.v||n===U.M||n===U.y)e.forceUpdate();else if(n===U.L){var o=s.email;e.state.assignments[o]&&t.log({id:e.props.id,type:D.pb,value:JSON.stringify(e.state.assignments[o]),noSave:!0},o),e.forceUpdate()}else n===U.n&&s.id===e.props.id&&(s.type===D.Ic?(e.props.onAssignmentOwner(JSON.parse(s.value)),e.setState({showAssignments:!0})):s.type===D.a?(e.props.onClearOwner(),e.setState({showAssignments:!1})):s.type===D.pb?(e.props.onAssignmentStudent(JSON.parse(s.value)),e.forceUpdate()):s.type===D.Vb&&(e.props.onClearStudent(s.value),e.forceUpdate()))}))}},{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"renderCohortSelection",value:function(){var e=this.context.cohorts;if(!x()(e))return null;var t=o()("select",{className:"user-pairer-select",onChange:this.onCohortChange,onBlur:this.onCohortChange,value:this.state.selectedCohort?this.state.selectedCohort.title:"all"},void 0,V,e.map((function(e,t){return o()("option",{value:e.title},t,e.title)})));return o()("div",{style:{padding:"5px"}},void 0,F,t)}},{key:"render",value:function(){var e=this,t=this.context.userList;t=t.filter((function(t){return!(e.state.selectedCohort&&!N()(e.state.selectedCohort.members,t.email))&&((!e.props.filterOwners||!t.owner)&&null===t.exitTime)}));var n=this.state.message;return o()(R.a,{owner:!0},void 0,o()(y.a,{},void 0,o()(y.a.Body,{style:{textAlign:"left",fontSize:"18px"}},void 0,this.renderCohortSelection(),o()("p",{},void 0,"There are currently ",o()("b",{},void 0,t.length)," users (",this.props.filterOwners?"excluding":"including"," course owners) ",this.state.selectedCohort?'from cohort "'.concat(this.state.selectedCohort.title,'"'):"from all cohorts"," online."),n?o()(C.a,{variant:n.variant},void 0,n.value):null,o()(A.a,{},void 0,o()(O.a,{variant:"secondary",onClick:this.createAssignments},void 0,this.state.showAssignments?"Re-pair users":"Pair users"),this.state.showAssignments?o()(O.a,{variant:"warning",onClick:this.clearAssignments},void 0,"Clear Assignments"):null,this.state.showAssignments?o()(O.a,{variant:"info",onClick:this.toggleModal},void 0,"Show Assignments"):null),this.state.showAssignmentModal?o()(B,{assignments:this.state.assignments,show:this.state.showAssignmentModal,onHide:this.toggleModal}):null)))}}]),n}(b.Component);G.defaultProps={filterOwners:!0,onAssignmentOwner:function(){},onAssignmentStudent:function(){},onClearOwner:function(){},onClearStudent:function(){}},G.contextType=J.a;t.default=G},454:function(e,t,n){"use strict";var s=n(349),o=n(350),a=n(352),i=n.n(a),r=n(0),l=n.n(r),c=n(386),u=n(394),d=n(474),m=n(528),v=n(364),h=n(411),f=n(466),g=n(441),p={show:!0,transition:h.a,closeLabel:"Close alert"},w={show:"onClose"},b=l.a.forwardRef((function(e,t){var n=Object(c.a)(e,w),a=n.bsPrefix,r=n.show,d=n.closeLabel,m=n.className,h=n.children,g=n.variant,p=n.onClose,b=n.dismissible,y=n.transition,C=Object(o.a)(n,["bsPrefix","show","closeLabel","className","children","variant","onClose","dismissible","transition"]),O=Object(v.b)(a,"alert"),A=Object(u.a)((function(e){p(!1,e)})),S=l.a.createElement("div",Object(s.a)({role:"alert"},y?C:void 0,{ref:t,className:i()(m,O,g&&O+"-"+g,b&&O+"-dismissible")}),b&&l.a.createElement(f.a,{onClick:A,label:d}),h);return y?l.a.createElement(y,Object(s.a)({unmountOnExit:!0},C,{in:r}),S):r?S:null})),y=Object(m.a)("h4");y.displayName="DivStyledAsH4",b.displayName="Alert",b.defaultProps=p,b.Link=Object(d.a)("alert-link",{Component:g.a}),b.Heading=Object(d.a)("alert-heading",{Component:y}),t.a=b},483:function(e,t,n){"use strict";var s=n(349),o=n(350),a=n(352),i=n.n(a),r=n(0),l=n.n(r),c=n(364),u=l.a.forwardRef((function(e,t){var n=e.bsPrefix,a=e.size,r=e.toggle,u=e.vertical,d=e.className,m=e.as,v=void 0===m?"div":m,h=Object(o.a)(e,["bsPrefix","size","toggle","vertical","className","as"]),f=Object(c.b)(n,"btn-group"),g=f;return u&&(g=f+"-vertical"),l.a.createElement(v,Object(s.a)({},h,{ref:t,className:i()(d,g,a&&f+"-"+a,r&&f+"-toggle")}))}));u.displayName="ButtonGroup",u.defaultProps={vertical:!1,toggle:!1,role:"group"},t.a=u}}]);