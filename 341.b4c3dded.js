(window.webpackJsonp=window.webpackJsonp||[]).push([[341],{4932:function(e,t,n){"use strict";var o=n(643),a=n(709),i=n(2112);o.a.use(i.a).use(a.e).init({debug:!0,lng:"en",fallbackLng:"en",ns:["components"],defaultNS:"components",resources:{},react:{wait:!0},interpolation:{escapeValue:!1}}),t.a=o.a},4933:function(e,t,n){"use strict";var o=n(385),a=Object(o.a)((function(){return Promise.all([n.e(0),n.e(5),n.e(7),n.e(327),n.e(348)]).then(n.bind(null,5717))}));t.a=a},4934:function(e,t,n){"use strict";n(394);var o=n(400),a=n.n(o),i=(n(392),n(387),n(395)),s=n.n(i),r=n(397),c=n.n(r),l=n(413),d=n.n(l),u=n(401),p=n.n(u),h=n(402),f=n.n(h),g=n(399),v=n.n(g),m=n(391),b=n.n(m),y=n(0),x=(n(372),n(448)),w=n.n(x),C=n(762),S=n(2102),N=n(693),R=n.n(N),k=n(1485),T=n.n(k);function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=v()(e);if(t){var a=v()(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return f()(this,n)}}var D=w()("isle:lesson:contextmenu"),A=["input","textarea"];var I=function(e){p()(n,e);var t=E(n);function n(e){var o;return s()(this,n),o=t.call(this,e),b()(d()(o),"handleSelectionChange",(function(e){if(!o.state.contextMenuIsOpen){var t,n=window.getSelection(),a=(t=document.activeElement)&&~A.indexOf(t.tagName.toLowerCase())?!t.readOnly&&!t.disabled:(t=getSelection().anchorNode)?(t=t.parentNode).isContentEditable:void 0,i=document.activeElement;if(-1!==A.indexOf(i.tagName.toLowerCase())){var s=i.value.slice(i.selectionStart,i.selectionEnd);return o.setState({lastText:s,lastActive:i,editable:a})}if(n.isCollapsed&&"Range"!==n.type)setTimeout((function(){o.forceUpdate()}),150);else if(o.lastSelection=n,n.getRangeAt&&n.rangeCount){var r=n.getRangeAt(0),c=n.toString();o.setState({lastActive:i,lastRange:r,lastText:c,editable:a})}}})),b()(d()(o),"highlightText",(function(e){D("Highlight the selected text..."),document.designMode="on";var t=window.getSelection();t.removeAllRanges(),t.addRange(o.state.lastRange),document.execCommand("styleWithCSS",!1,!0),document.execCommand("backColor",!1,"yellow"),document.designMode="off"})),b()(d()(o),"removeHighlight",(function(e){D("Highlight the selected text...");var t=window.getSelection();t.removeAllRanges(),t.addRange(o.state.lastRange),document.designMode="on",document.execCommand("styleWithCSS",!1,!0),document.execCommand("backColor",!1,"inherit"),document.designMode="off"})),b()(d()(o),"cutSelection",(function(){var e=o.state.lastActive;if(-1!==A.indexOf(e.tagName.toLowerCase()))return e.value=R()(e.value,o.state.lastText,""),navigator.clipboard.writeText(o.state.lastText);var t=window.getSelection();t.removeAllRanges(),t.addRange(o.state.lastRange),document.execCommand("cut")})),b()(d()(o),"copyToClipboard",(function(e){D("Copying selection to clipboard... "),navigator.clipboard.writeText(o.state.lastText)})),b()(d()(o),"copyFromClipboard",(function(){navigator.clipboard.readText().then((function(e){if(!e)return o.props.session.addNotification({title:o.props.t("clipboard-empty"),message:o.props.t("clipboard-empty-message"),level:"error",position:"tr"});var t=o.state.lastActive;t&&t.focus(),document.execCommand("insertText",!1,e)}))})),b()(d()(o),"textToSpeech",(function(){var e=o.state.lastText;D("Read aloud: "+e);var t=o.props.session;if(T()(window.speechSynthesis.getVoices()))return t.addNotification({title:o.props.t("voice-not-supported"),message:o.props.t("voice-not-supported-message"),level:"error",position:"tr"});var n=new SpeechSynthesisUtterance(e);n.lang=t.config.language||"en-US",window.speechSynthesis.speak(n)})),o.state={lastRange:null,lastText:"",contextMenuIsOpen:!1,editable:!1},o}return c()(n,[{key:"componentDidMount",value:function(){document.addEventListener("selectionchange",this.handleSelectionChange)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("selectionchange",this.handleSelectionChange)}},{key:"render",value:function(){var e=this,t=[],n=window.getSelection(),o=document.activeElement,i=o&&-1!==A.indexOf(o.tagName.toLowerCase());if((!n.isCollapsed||"Range"===n.type)&&(this.state.editable&&t.push(a()(S.c,{onClick:this.cutSelection},0,this.props.t("cut"))),t.push(a()(S.c,{onClick:this.copyToClipboard},1,this.props.t("copy"))),t.push(a()(S.c,{onClick:this.textToSpeech},2,this.props.t("read-aloud"))),!i&&!o.isContentEditable&&(t.push(a()(S.c,{onClick:this.highlightText},3,this.props.t("highlight"))),n&&n.focusNode))){var s=n.focusNode.parentElement;s&&s.style&&"yellow"===s.style.backgroundColor&&t.push(a()(S.c,{onClick:this.removeHighlight},4,this.props.t("remove-highlight")))}return i?t.push(a()(S.c,{onClick:this.copyFromClipboard},5,this.props.t("paste"))):o.isContentEditable||t.push(a()(S.c,{onClick:function(t){e.props.addNote({left:t.pageX,top:t.pageY})}},6,this.props.t("add-note"))),a()(S.a,{id:"lessonWindow",onShow:function(){D("Context menu has been opened..."),e.setState({contextMenuIsOpen:!0})},onHide:function(){D("Context menu has been closed..."),e.setState({contextMenuIsOpen:!1})}},void 0,t)}}]),n}(y.Component);t.a=Object(C.a)()(I)},4935:function(e,t,n){"use strict";var o=n(400),a=n.n(o),i=(n(0),n(299),a()("div",{className:"forbidden-wrapper"},void 0,a()("h3",{className:"forbidden-header"},void 0,"Lesson not available (yet)")));t.a=function(){return i}},4936:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o,a=n(400),i=n.n(a);n(881),n(0),n(300),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=i()("div",{id:"pwa-notification"},void 0,"A new version of this lesson is available. Click ",i()("button",{onClick:function(){console.log("Skip waiting and immediately reload newest data..."),!1,o.postMessage({type:"SKIP_WAITING"})}},void 0,"here")," to update."),r=function(){return s}},4937:function(e){e.exports=JSON.parse('{"EN":{"add-note":"Add Note","clipboard-empty":"Clipboard is empty","clipboard-empty-message":"Failed to insert text. The clipboard is currently empty.","copy":"Copy","cut":"Cut","highlight":"Highlight","paste":"Paste","read-aloud":"Read aloud","remove-highlight":"Remove Highlight","voice-not-supported":"Not supported.","voice-not-supported-message":"The text-to-speech functionality is currently not supported on your browser. Please try Google Chrome."},"DE":{"add-note":"Notiz hinzuf\xfcgen","clipboard-empty":"Zwischenablage ist leer","clipboard-empty-message":"Das Einf\xfcgen von Text ist fehlgeschlagen. Die Zwischenablage ist derzeit leer.","copy":"Kopieren","cut":"Ausschneiden","highlight":"Hervorheben","paste":"Einf\xfcgen","read-aloud":"Vorlesen","remove-highlight":"Hervorhebung entfernen","voice-not-supported":"Nicht unterst\xfctzt.","voice-not-supported-message":"Die Text-to-Speech-Funktionalit\xe4t wird derzeit von Ihrem Browser nicht unterst\xfctzt. Bitte versuchen Sie Google Chrome."},"ES":{"add-note":"A\xf1ade una nota","clipboard-empty":"El portapapeles est\xe1 vac\xedo","clipboard-empty-message":"No se insert\xf3 el texto. El portapapeles est\xe1 actualmente vac\xedo.","copy":"Kopieren","cut":"Cortar","highlight":"Destacar","paste":"Pegar","read-aloud":"Lea en voz alta","remove-highlight":"Eliminar el resalte","voice-not-supported":"No se apoya.","voice-not-supported-message":"La funci\xf3n de texto a voz no es actualmente compatible con su navegador. Prueba con Google Chrome."}}')},5793:function(e,t,n){"use strict";n.r(t),function(e){n(392),n(387),n(394);var o=n(400),a=n.n(o),i=n(395),s=n.n(i),r=n(397),c=n.n(r),l=n(413),d=n.n(l),u=n(401),p=n.n(u),h=n(402),f=n.n(h),g=n(399),v=n.n(g),m=n(391),b=n.n(m),y=n(0),x=n.n(y),w=(n(372),n(4927)),C=n.n(w),S=n(2102),N=n(3136),R=n.n(N),k=n(4932),T=n(4933),E=n(2126),D=n(1001),A=n(476),I=n(486),L=n(668),O=n(4934),M=n(4935),z=n(4936),H=n(4937);function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=v()(e);if(t){var a=v()(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return f()(this,n)}}k.a.addResources("de","components",H.DE),k.a.addResources("en","components",H.EN),k.a.addResources("es","components",H.ES);var W={Containers:{tc:{margin:"30px auto 0px auto"}},NotificationItem:{info:{border:"solid 8px #007bff",borderRadius:6,padding:20},success:{boxShadow:"1px 1px 3px 1px darkslategrey"}},Title:{success:{color:"#3c763d"}}},F=a()(M.a,{}),G=a()(T.a,{}),U=a()(z.a,{}),j=function(t){p()(o,t);var n=P(o);function o(e){var t;return s()(this,o),t=n.call(this,e),b()(d()(t),"restoreNotes",(function(e){for(var n=e.lesson,o=0;o<n.length;o++){var a=n[o];if(a.type===I.qb){var i=a.value,s=i.left,r=i.top,c=i.noteID,l=!1,d=0,u=0,p=null,h=null,f=e[c];if(f)for(var g=f.length-1;g>=0;g--)switch(f[g].type){case I.bb:l=!0;break;case I.Ac:h=f[g].value;break;case I.yc:p=f[g].value;break;case I.zc:d+=f[g].value.x,u+=f[g].value.y}s+=d,r+=u,l||t.addNote({left:s,top:r,noteID:c,title:h,body:p})}}})),b()(d()(t),"addNote",(function(e){var n=e.left,o=e.top,i=e.noteID,s=e.body,r=e.title;i||(i=Object(D.a)(3),t.context.log({id:"lesson",type:I.qb,value:{top:o,left:n,noteID:i}}));var c=a()(E.a,{id:i,color:"green",editable:!0,minimizable:!0,removable:!0,draggable:{default:{x:n,y:o}},title:r,body:s},t.state.notes.length),l=t.state.notes.slice();l.push(c),t.setState({notes:l})})),t.state={visible:!0,notes:[]},t}return c()(o,[{key:"componentDidMount",value:function(){var e=this,t=this.context;t.onLessonMount(),this.unsubscribe=t.subscribe((function(n,o){if(n===L.z){var a=o;R()(a.lesson)&&e.restoreNotes(a)}else n!==L.u&&n!==L.w||e.setState({visible:t.isActive()||t.isOwner()})}))}},{key:"render",value:function(){return this.state.visible?a()(y.Fragment,{},void 0,a()(S.b,{attributes:{className:"contextmenu-fullscreen"},holdToDisplay:-1,disableIfShiftIsPressed:!0,id:"lessonWindow"},void 0,a()("div",{id:"Lesson",className:this.props.className,style:this.props.style},void 0,this.props.children,this.state.notes,G,U)),a()(O.a,{addNote:this.addNote,session:this.context}),x.a.createElement(C.a,{ref:function(t){e.notificationSystemISLE=t},allowHTML:!0,style:W})):F}}]),o}(y.Component);j.defaultProps={className:"",style:{}},j.contextType=A.a,t.default=j}.call(this,n(52))}}]);