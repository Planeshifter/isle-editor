(window.webpackJsonp=window.webpackJsonp||[]).push([[358],{1674:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(1675)),i=n(771),a=/url\((['"]?)([^'"]+?)\1\)/g;function u(t){var e=[];return t.replace(a,(function(t,n,r){return e.push(r),t})),e.filter((function(t){return!i.isDataUrl(t)}))}function c(t,e,n,r){var a=n?function(t,e){if(t.match(/^[a-z]+:\/\//i))return t;if(t.match(/^\/\//))return window.location.protocol+t;if(t.match(/^[a-z]+:/i))return t;var n=document.implementation.createHTMLDocument(),r=n.createElement("base"),o=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(o),e&&(r.href=e),o.href=t,o.href}(e,n):e;return Promise.resolve(a).then((function(t){return o.default(t,r)})).then((function(t){return i.toDataURL(t,i.getMimeType(e))})).then((function(n){return t.replace(new RegExp("(url\\(['\"]?)("+function(t){return t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")}(e)+")(['\"]?\\))","g"),"$1"+n+"$3")})).then((function(t){return t}),(function(){return a}))}function s(t){return-1!==t.search(a)}e.shouldEmbed=s,e.default=function(t,e,n){return s(t)?Promise.resolve(t).then(u).then((function(r){return r.reduce((function(t,r){return t.then((function(t){return c(t,r,e,n)}))}),Promise.resolve(t))})):Promise.resolve(t)}},1675:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(771);e.default=function(t,e){return e.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+(new Date).getTime()),(window.fetch?window.fetch(t).then((function(t){return t.blob()})).then((function(t){return new Promise((function(e,n){var r=new FileReader;r.onloadend=function(){return e(r.result)},r.onerror=n,r.readAsDataURL(t)}))})).then(r.getDataURLContent).catch((function(){return new Promise((function(t,e){e()}))})):new Promise((function(e,n){var o=new XMLHttpRequest;o.onreadystatechange=function(){if(4===o.readyState)if(200===o.status){var i=new FileReader;i.onloadend=function(){e(r.getDataURLContent(i.result))},i.readAsDataURL(o.response)}else n(new Error("Failed to fetch resource: "+t+", status: "+o.status))},o.ontimeout=function(){n(new Error("Timeout of 30000ms occured while fetching resource: "+t))},o.responseType="blob",o.timeout=3e4,o.open("GET",t,!0),o.send()}))).catch((function(n){var r="";if(e.imagePlaceholder){var o=e.imagePlaceholder.split(/,/);o&&o[1]&&(r=o[1])}var i="Failed to fetch resource: "+t;return n&&(i="string"==typeof n?n:n.message),i&&console.error(i),r}))}},1902:function(t,e){t.exports=function(t){throw new Error('"'+t+'" is read-only')}},2480:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=r(n(2481)),i=r(n(2483)),a=r(n(2484)),u=r(n(2485)),c=r(n(2486)),s=n(771);function l(t,e){return void 0===e&&(e={}),{width:e.width||s.getNodeWidth(t),height:e.height||s.getNodeHeight(t)}}function f(t,e){void 0===e&&(e={});var n=l(t,e),r=n.width,s=n.height;return o.default(t,e.filter,!0).then((function(t){return i.default(t,e)})).then((function(t){return a.default(t,e)})).then((function(t){return c.default(t,e)})).then((function(t){return u.default(t,r,s)}))}function h(t,e){return void 0===e&&(e={}),f(t,e).then(s.createImage).then(s.delay(100)).then((function(n){var r=document.createElement("canvas"),o=r.getContext("2d"),i=s.getPixelRatio(),a=l(t,e),u=a.width,c=a.height;return r.width=u*i,r.height=c*i,r.style.width=""+u,r.style.height=""+c,o.scale(i,i),e.backgroundColor&&(o.fillStyle=e.backgroundColor,o.fillRect(0,0,r.width,r.height)),o.drawImage(n,0,0),r}))}function d(t,e){void 0===e&&(e={});var n=l(t,e),r=n.width,o=n.height;return h(t,e).then((function(t){return t.getContext("2d").getImageData(0,0,r,o).data}))}function p(t,e){return void 0===e&&(e={}),h(t,e).then((function(t){return t.toDataURL()}))}function v(t,e){return void 0===e&&(e={}),h(t,e).then((function(t){return t.toDataURL("image/jpeg",e.quality||1)}))}function m(t,e){return void 0===e&&(e={}),h(t,e).then(s.canvasToBlob)}e.toSvgDataURL=f,e.toCanvas=h,e.toPixelData=d,e.toPng=p,e.toJpeg=v,e.toBlob=m,e.default={toSvgDataURL:f,toCanvas:h,toPixelData:d,toPng:p,toJpeg:v,toBlob:m}},2481:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(771),i=r(n(2482));function a(t){return t instanceof HTMLCanvasElement?o.createImage(t.toDataURL()):t.tagName&&"svg"===t.tagName.toLowerCase()?Promise.resolve(t).then((function(t){return o.svgToDataURL(t)})).then(o.createImage):Promise.resolve(t.cloneNode(!1))}function u(t,e){return e instanceof Element?Promise.resolve().then((function(){return function(t,e){var n=window.getComputedStyle(t),r=e.style;n.cssText?r.cssText=n.cssText:o.toArray(n).forEach((function(t){r.setProperty(t,n.getPropertyValue(t),n.getPropertyPriority(t))}))}(t,e)})).then((function(){return i.default(t,e)})).then((function(){return function(t,e){t instanceof HTMLTextAreaElement&&(e.innerHTML=t.value),t instanceof HTMLInputElement&&e.setAttribute("value",t.value)}(t,e)})).then((function(){return e})):e}function c(t,e,n){return n||!e||e(t)?Promise.resolve(t).then(a).then((function(n){return function(t,e,n){var r=o.toArray(t.childNodes);return 0===r.length?Promise.resolve(e):r.reduce((function(t,r){return t.then((function(){return c(r,n)})).then((function(t){t&&e.appendChild(t)}))}),Promise.resolve()).then((function(){return e}))}(t,n,e)})).then((function(e){return u(t,e)})):Promise.resolve(null)}e.default=c},2482:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(771);function o(t,e,n){var o="."+t+":"+e,i=n.cssText?function(t){var e=t.getPropertyValue("content");return t.cssText+" content: "+e+";"}(n):function(t){return r.toArray(t).map((function(e){return e+": "+t.getPropertyValue(e)+(t.getPropertyPriority(e)?" !important":"")+";"})).join(" ")}(n);return document.createTextNode(o+"{"+i+"}")}e.default=function(t,e){[":before",":after"].forEach((function(n){return function(t,e,n){var i=window.getComputedStyle(t,n),a=i.getPropertyValue("content");if(""!==a&&"none"!==a){var u=r.uuid(),c=document.createElement("style");c.appendChild(o(u,n,i)),e.className=e.className+" "+u,e.appendChild(c)}}(t,e,n)}))}},2483:function(t,e,n){"use strict";var r=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var o=n(771),i=r(n(1674));function a(t){if(void 0===t)return[];var e=t,n=[],r=new RegExp("(\\/\\*[\\s\\S]*?\\*\\/)","gi");e=e.replace(r,"");for(var o,i=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");null!==(o=i.exec(e));)n.push(o[0]);e=e.replace(i,"");for(var a=new RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");null!==(o=a.exec(e));)n.push(o[0]);return n}function u(t,e){return fetch(t).then((function(e){return{url:t,cssText:e.text()}}),(function(t){console.log("ERROR FETCHING CSS: ",t.toString())}))}function c(t){return t.cssText.then((function(e){var n=e,r=(n.match(/url\([^)]+\)/g)||[]).map((function(e){var r=e.replace(/url\(([^]+)\)/g,"$1");if(!r.startsWith("https://")){var o=t.url;r=new URL(r,o).href}return new Promise((function(t,o){fetch(r).then((function(t){return t.blob()})).then((function(r){var o=new FileReader;o.addEventListener("load",(function(r){n=n.replace(e,"url("+o.result+")"),t([e,o.result])})),o.readAsDataURL(r)})).catch(o)}))}));return Promise.all(r).then((function(){return n}))}))}function s(t){var e=[],n=[];return t.forEach((function(e){if("cssRules"in e)try{o.toArray(e.cssRules).forEach((function(t){t.type===CSSRule.IMPORT_RULE&&n.push(u(t.href).then(c).then((function(t){a(t).forEach((function(t){e.insertRule(t,e.cssRules.length)}))})).catch((function(t){console.log("Error loading remote css",t.toString())})))}))}catch(i){var r=t.find((function(t){return null===t.href}))||document.styleSheets[0];null!=e.href&&n.push(u(e.href).then(c).then((function(t){a(t).forEach((function(t){r.insertRule(t,e.cssRules.length)}))})).catch((function(t){console.log("Error loading remote stylesheet",t.toString())}))),console.log("Error inlining remote css file",i.toString())}})),Promise.all(n).then((function(){return t.forEach((function(t){if("cssRules"in t)try{o.toArray(t.cssRules).forEach((function(t){e.push(t)}))}catch(n){console.log("Error while reading CSS rules from "+t.href,n.toString())}})),e}))}function l(t){return t.filter((function(t){return t.type===CSSRule.FONT_FACE_RULE})).filter((function(t){return i.shouldEmbed(t.style.getPropertyValue("src"))}))}function f(t){return new Promise((function(e,n){t.ownerDocument||n(new Error("Provided element is not within a Document")),e(o.toArray(t.ownerDocument.styleSheets))})).then(s).then(l)}e.parseWebFontRules=f,e.default=function(t,e){return f(t).then((function(t){return Promise.all(t.map((function(t){var n=t.parentStyleSheet?t.parentStyleSheet.href:null;return i.default(t.cssText,n,e)})))})).then((function(t){return t.join("\n")})).then((function(e){var n=document.createElement("style"),r=document.createTextNode(e);return n.appendChild(r),t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n),t}))}},2484:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(771),i=r(n(1675)),a=r(n(1674));function u(t,e){return t instanceof Element?Promise.resolve(t).then((function(t){return function(t,e){var n=t.style.getPropertyValue("background");return n?Promise.resolve(n).then((function(t){return a.default(t,null,e)})).then((function(e){return t.style.setProperty("background",e,t.style.getPropertyPriority("background")),t})):Promise.resolve(t)}(t,e)})).then((function(t){return function(t,e){return t instanceof HTMLImageElement&&!o.isDataUrl(t.src)?Promise.resolve(t.src).then((function(t){return i.default(t,e)})).then((function(e){return o.toDataURL(e,o.getMimeType(t.src))})).then((function(e){return new Promise((function(n,r){t.onload=n,t.onerror=r,t.src=e}))})).then((function(){return t}),(function(){return t})):Promise.resolve(t)}(t,e)})).then((function(t){return function(t,e){var n=o.toArray(t.childNodes).map((function(t){return u(t,e)}));return Promise.all(n).then((function(){return t}))}(t,e)})):Promise.resolve(t)}e.default=u},2485:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(771);e.default=function(t,e,n){var o="http://www.w3.org/2000/svg",i=document.createElementNS(o,"svg"),a=document.createElementNS(o,"foreignObject");return i.setAttributeNS("","width",""+e),i.setAttributeNS("","height",""+n),a.setAttributeNS("","width","100%"),a.setAttributeNS("","height","100%"),a.setAttributeNS("","x","0"),a.setAttributeNS("","y","0"),a.setAttributeNS("","externalResourcesRequired","true"),i.appendChild(a),a.appendChild(t),r.svgToDataURL(i)}},2486:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=t.style;return e.backgroundColor&&(n.backgroundColor=e.backgroundColor),e.width&&(n.width=e.width+"px"),e.height&&(n.height=e.height+"px"),e.style&&Object.assign(n,e.style),t}},4301:function(t,e,n){"use strict";n.d(e,"a",(function(){return ft})),n.d(e,"c",(function(){return ht})),n.d(e,"b",(function(){return dt})),n.d(e,"d",(function(){return pt}));n(775);var r=n(1902),o=n.n(r),i=(n(732),n(1023)),a=n.n(i),u=n(500),c=n.n(u),s=n(380),l=n.n(s),f=n(368),h=n.n(f),d=n(484),p=n.n(d),v=n(698),m=n.n(v),g=(n(357),n(350),n(360),n(351)),y=n.n(g),w=n(352),b=n.n(w),C=n(354),T=n.n(C),P=n(355),x=n.n(P),S=n(353),R=n.n(S),D=n(358),M=n.n(D),_=n(0),E=n.n(_),N=n(2480),L=n(384),k=n(456),I=n.n(k),A=n(827),U=n(365),j=n.n(U),F=n(349),O=n.n(F),V=(n(341),n(387)),B=n(625),H=n(461);function q(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=R()(t);if(e){var o=R()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return x()(this,n)}}var z=M()("div",{className:"fa fa-window-maximize"}),W=M()(B.a.Header,{closeButton:!0},void 0,M()(B.a.Title,{as:"h1"},void 0,"Decision Tree")),$=function(t){T()(n,t);var e=q(n);function n(){var t;return y()(this,n),t=e.call(this),O()(j()(t),"toggleFullscreen",(function(){t.setState({fullscreen:!t.state.fullscreen})})),t.state={fullscreen:!1},t}return b()(n,[{key:"render",value:function(){return M()(_.Fragment,{},void 0,M()(H.a,{id:"fullscreen_tooltip",placement:"bottom",tooltip:"Toggle FullScreen"},void 0,M()(V.a,{variant:"outline-danger",size:"sm",onClick:this.toggleFullscreen,style:{position:"absolute",top:"10px",right:"32px"}},void 0,z)),M()(B.a,{show:this.state.fullscreen,onHide:this.toggleFullscreen,dialogClassName:"modal-100w"},void 0,W,M()(B.a.Body,{style:{height:.75*window.innerHeight,width:"100%",fontSize:32,overflow:"scroll"}},void 0,M()("div",{className:"decision-tree decision-tree-fullscreen"},void 0,this.props.tree)),M()(B.a.Footer,{},void 0,M()(V.a,{onClick:this.toggleFullscreen},void 0,"Close"))))}}]),n}(_.Component);n(95);function G(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=R()(t);if(e){var o=R()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return x()(this,n)}}var J=/^[+-]?[\d.]+e?[+-]?\d*$/;function X(t){if(!t)return null;if(t.category){var e=t.category;return(Object(L.isPrimitive)(e)||J.test(e))&&(e=Number(e),I()(e)||(e=e.toFixed(6))),M()("ul",{},void 0,M()("li",{},void 0,M()("span",{className:"decision-tree-leaf"},void 0," Predict: ",e," ")))}return M()("ul",{},void 0,M()("li",{},void 0,M()("span",{},void 0,M()("b",{},void 0," ",t.attribute," ",t.predicateName," ",t.pivot," ?")),M()("ul",{},void 0,M()("li",{},void 0,M()("span",{},void 0,"no ( ",t.notMatchedCount," obs) "),X(t.notMatch)),M()("li",{},void 0,M()("span",{},void 0,"yes ( ",t.matchedCount," obs) "),X(t.match)))))}var K=M()("div",{className:"fa fa-times"}),Y=function(t){T()(n,t);var e=G(n);function n(t){var r;return y()(this,n),(r=e.call(this,t)).setState({plotValue:null,plotKey:null,fullscreen:!1}),r}return b()(n,[{key:"componentDidMount",value:function(){var t=this;this.treeWrapper.scrollLeft=.4*this.tree.clientWidth,Object(N.toJpeg)(this.tree,{backgroundColor:"white",style:{fontSize:22}}).then((function(e){var n='<img src="'.concat(e,'" style="display: block; margin: 0 auto; max-width: 100%; max-height: 100%" />');t.setState({plotKey:"\x3c!--IMAGE_LOG:".concat(Object(A.a)(6),"_").concat(Object(A.a)(6),"--\x3e"),plotValue:n})}))}},{key:"render",value:function(){var t=this,e=X(this.props.tree);return E.a.createElement("div",{className:"decision-tree-wrapper",ref:function(e){t.treeWrapper=e}},M()("div",{className:"decision-tree-draggable-bar",draggable:"true",onDragStart:function(e){e.dataTransfer.setData("text/html",t.state.plotValue),e.dataTransfer.setData("text/plain",t.state.plotKey)},style:{float:"left"}},void 0,"Drag Plot"),M()($,{variant:"outline-danger",size:"sm",onClick:function(){t.setState({fullscreen:!t.state.fullscreen})},tree:e},void 0,K),E.a.createElement("div",{className:"decision-tree",ref:function(e){t.tree=e}},e))}}]),n}(_.Component);var Q=function(t,e,n,r,o){for(var i=[],a=[],u=t[n],c=e.length-1;c>=0;c--){var s=e[c];r(u[s],o)?i.push(s):a.push(s)}return{match:i,notMatch:a}};function Z(t,e){for(var n={},r=e.length-1;r>=0;r--){n[t[e[r]]]=0}for(var o=e.length-1;o>=0;o--){n[t[e[o]]]+=1}return n}function tt(t,e){var n,r=Z(t,e),o=0;for(var i in r)r[i]>o&&(o=r[i],n=i);return n}function et(t,e){var n=Z(t,e),r=0;for(var o in n)if(l()(n,o)){var i=n[o]/e.length;r+=i*(1-i)}return r}function nt(t,e){var n=Z(t,e),r=0;for(var o in n)if(l()(n,o)){var i=n[o]/e.length;r+=-i*h()(i)}return r}function rt(t,e){var n=e.length,r=0,o=0,i=0,a=0;if(!n)return null;if(n<2)return 0;for(var u=0;u<n;u++){var c=t[e[u]];i+=(r=c-o)*(c-(o+=r/(a+=1)))}return i/(a-1)}function ot(t,e){var n=e.length;if(!n)return null;for(var r=0,o=0;o<n;o++){r+=(t[e[o]]-r)/(o+1)}return r}var it={"==":function(t,e){return t==e},">=":function(t,e){return t>=e}};function at(t){var e=this,n=t.data[t.response].length;this.importances={};for(var r=0;r<t.predictors.length;r++)this.importances[t.predictors[r]]=0;this.root=ut({data:t.data,response:t.response,predictors:t.predictors,indices:t.indices?t.indices:m()(0,n,1),minItemsCount:t.minItemsCount||50,minBucket:t.minBucket||p()((t.minItemsCount||50)/3),scoreThreshold:t.scoreThreshold||.01,maxTreeDepth:t.maxTreeDepth||20,quantitative:t.quantitative,criterion:"gini"===t.criterion?et:nt},this.importances),this.predict=function(n,r){if(void 0===r){for(var o=n[t.predictors[0]].length,i=new Array(o),a=0;a<o;a++)i[a]=st(e.root,n,a);return i}return st(e.root,n,r)}}function ut(t,e){var n=t.data,r=t.predictors,i=t.indices,u=t.response,s=t.minItemsCount,l=t.scoreThreshold,f=t.maxTreeDepth,h=t.quantitative,d=t.criterion,p=t.minBucket,v=t.nTry,m=i.length;if(0===f||m<=s)return{category:tt(n[u],i)};var g=d(n[u],i),y={},w={gain:0};v&&(o()("predictors"),r=a()(r,{size:v}));for(var b=m-1;b>=0;b--)for(var C=i[b],T=0;T<r.length;T++){var P=r[T],x=n[P][C],S=void 0,R=P+(S=c()(h,P)?">=":"==")+x;if(!y[R]){y[R]=!0;var D=it[S],M=Q(n,i,P,D,x),_=d(n[u],M.match),E=d(n[u],M.notMatch),N=0;N+=_*M.match.length,N+=E*M.notMatch.length;var L=g-(N/=m);L>w.gain&&M.match.length>p&&M.notMatch.length>p&&((w=M).predicateName=S,w.predicate=D,w.attribute=P,w.pivot=x,w.gain=L)}}if(!w.gain||w.gain/g<l)return{category:tt(n[u],i)};t.maxTreeDepth=f-1,e[w.attribute]+=w.gain,t.indices=w.match;var k=ut(t,e);t.indices=w.notMatch;var I=ut(t,e);return{attribute:w.attribute,predicate:w.predicate,predicateName:w.predicateName,pivot:w.pivot,match:k,notMatch:I,matchedCount:w.match.length,notMatchedCount:w.notMatch.length}}function ct(t){var e=t.data,n=t.predictors,r=t.indices,i=t.response,u=t.minItemsCount,s=t.scoreThreshold,l=t.maxTreeDepth,f=t.quantitative,h=t.minBucket,d=t.nTry,p=r.length;if(0===l||p<=u)return{category:ot(e[i],r)};var v=rt(e[i],r),m={},g={gain:0};d&&(o()("predictors"),n=a()(n,{size:d}));for(var y=p-1;y>=0;y--)for(var w=r[y],b=0;b<n.length;b++){var C=n[b],T=e[C][w],P=void 0,x=C+(P=c()(f,C)?">=":"==")+T;if(!m[x]){m[x]=!0;var S=it[P],R=Q(e,r,C,S,T),D=rt(e[i],R.match),M=rt(e[i],R.notMatch),_=0;_+=D*R.match.length,_+=M*R.notMatch.length;var E=v-(_/=p);E>g.gain&&R.match.length>h&&R.notMatch.length>h&&((g=R).predicateName=P,g.predicate=S,g.attribute=C,g.pivot=T,g.gain=E)}}if(!g.gain||g.gain/v<s)return{category:ot(e[i],r)};t.maxTreeDepth=l-1,t.indices=g.match;var N=ct(t);t.indices=g.notMatch;var L=ct(t);return{attribute:g.attribute,predicate:g.predicate,predicateName:g.predicateName,pivot:g.pivot,match:N,notMatch:L,matchedCount:g.match.length,notMatchedCount:g.notMatch.length}}function st(t,e,n){for(;;){if(t.category)return t.category;var r=e[t.attribute][n];t=(0,t.predicate)(r,t.pivot)?t.match:t.notMatch}}function lt(t,e,n){for(var r={},o=0;o<t.length;o++){var i=t[o].predict(e,n);r[i]=r[i]?r[i]+1:1}var a,u=-1;for(var c in r)l()(r,c)&&r[c]>u&&(u=r[c],a=c);return a}var ft=at,ht=function(t){var e=this,n=t.data[t.response].length;this.root=ct({data:t.data,response:t.response,predictors:t.predictors,indices:t.indices?t.indices:m()(0,n,1),minItemsCount:t.minItemsCount||50,minBucket:t.minBucket||p()((t.minItemsCount||50)/3),scoreThreshold:t.scoreThreshold||.01,maxTreeDepth:t.maxTreeDepth||20,quantitative:t.quantitative}),this.predict=function(n,r){if(void 0===r){for(var o=n[t.predictors[0]].length,i=new Array(o),a=0;a<o;a++)i[a]=Number(st(e.root,n,a));return i}return Number(st(e.root,n,r))}},dt=function(t){var e=this;this.trees=function(t){for(var e=[],n=t.data[t.response].length,r=m()(0,n,1),o=0;o<t.nTrees;o++)e[o]=a()(r);for(var i=[],u=0;u<t.nTrees;u++){t.indices=e[u];var c=new at(t);i.push(c)}return i}(t),this.importances={};for(var n=0;n<t.predictors.length;n++){var r=t.predictors[n];this.importances[r]=0;for(var o=0;o<this.trees.length;o++)this.importances[r]+=this.trees[o].importances[r];this.importances[r]/=this.trees.length}this.predict=function(n,r){if(void 0===r){for(var o=n[t.predictors[0]].length,i=new Array(o),a=0;a<o;a++)i[a]=lt(e.trees,n,a);return i}return lt(e.trees,n,r)}},pt=Y},5798:function(t,e,n){"use strict";n.r(e);n(357),n(350),n(360);var r=n(358),o=n.n(r),i=n(351),a=n.n(i),u=n(352),c=n.n(u),s=n(365),l=n.n(s),f=n(354),h=n.n(f),d=n(355),p=n.n(d),v=n(353),m=n.n(v),g=n(349),y=n.n(g),w=n(0),b=(n(341),n(387)),C=n(427),T=n(760),P=n.n(T),x=n(500),S=n.n(x),R=n(402),D=n.n(R),M=n(507),_=n.n(M),E=n(375),N=n.n(E),L=n(369),k=n.n(L),I=n(684),A=n(508),U=n(461),j=n(469),F=n(1445),O=n(420),V=n(672),B=n(4301);function H(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=m()(t);if(e){var o=m()(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p()(this,n)}}var q=0;function z(t,e){return t?"Classificiation"===e?N()(k()(t.length)):t.length<3?1:N()(t.length/3):1}var W=o()(C.a.Header,{as:"h4"},void 0,"Random Forest",o()(V.a,{title:"Random Forest",content:"Instead of growing a single decision tree, a random forest as an ensemble method constructs many decision trees at once and returns the average of the predictions (regression case) or the majority vote (classification case) of the individual trees"})),$=function(t){h()(n,t);var e=H(n);function n(t){var r;return a()(this,n),r=e.call(this,t),y()(l()(r),"compute",(function(){var t,e,n=r.state,i=n.y,a=n.x,u=n.type,c=n.nTrees,s=n.nTry,l=n.impurityMeasure;q+=1,t=D()(a)?a:[a],"Classification"===u&&(e=new B.b({response:i,predictors:t,data:r.props.data,quantitative:r.props.quantitative,criterion:l,nTrees:c,nTry:s,scoreThreshold:r.state.scoreThreshold,maxTreeDepth:r.state.maxTreeDepth,minItemsCount:r.state.minItemsCount})),r.props.logAction(O.C,{y:i,x:a,type:u,nTrees:c,nTry:s});for(var f=[],h=0;h<t.length;h++){var d=t[h];f.push(e.importances[d])}var p={variable:"Random Forest",type:"Random Forest",value:o()("div",{style:{overflowX:"auto",width:"100%"}},void 0,o()("span",{className:"title"},void 0,"Random Forest for ",i," (model id: forest",q,")"),o()("p",{},void 0,"Created from ",c," trees by checking ",s," features at each split."),o()(I.a,{editable:!0,data:[{type:"bar",x:t,y:f}],layout:{xaxis:{title:"Variable"},yaxis:{title:"Importance"}}}),o()(U.a,{tooltip:"Predictions will be attached to data table"},void 0,o()(b.a,{variant:"secondary",size:"sm",style:{marginTop:10},onClick:function(){var t=_()(r.props.data,1);if("Classification"===u){var n=r.props.categorical.slice(),o=e.predict(t).map((function(t){return String(t)})),a="pred_forest"+q;t[a]=o,S()(n,a)||n.push(a),a="correct_forest"+q;var c=r.props.data[i];t[a]=o.map((function(t,e){return t===String(c[e])?"Yes":"No"})),S()(n,a)||n.push(a),r.props.onGenerate(r.props.quantitative,n,t)}}},void 0,"Use this model to predict for currently selected data")))};r.props.onCreated(p)})),r.state={y:t.categorical[0],x:t.quantitative[0],type:"Classification",nTrees:50,nTry:1,impurityMeasure:"gini",scoreThreshold:.01,maxTreeDepth:20,minItemsCount:50},r}return c()(n,[{key:"render",value:function(){var t=this,e=this.props,n=e.categorical,r=e.quantitative,i=this.state,a=i.x,u=i.y,c=i.type,s=i.nTrees,l=i.nTry;return o()(C.a,{style:{fontSize:"14px",maxWidth:600}},void 0,W,o()(C.a.Body,{},void 0,o()(A.a,{legend:"Type",options:["Classification"],defaultValue:c,onChange:function(e){e!==t.state.type&&t.setState({type:e,y:"Classification"===e?n[0]:r[0],nTry:z(t.state.x,e)})}}),o()(A.a,{legend:"Outcome (Y):",options:"Classification"===c?n:r,defaultValue:u,onChange:function(e){return t.setState({y:e})}}),o()(A.a,{legend:"Predictors (X):",multi:!0,options:P()(r.concat(n)),defaultValue:a||"",onChange:function(e){t.setState({x:e,nTry:z(e,c)})}}),o()(j.b,{legend:"Number of trees",defaultValue:s,inputStyle:{float:"right"},onChange:function(e){return t.setState({nTrees:e})},tooltipPlacement:"top",min:1}),o()(j.b,{legend:"# of predictors to check at each split",defaultValue:l,inputStyle:{float:"right"},onChange:function(e){return t.setState({nTry:e})},tooltipPlacement:"top",min:1,max:D()(a)?a.length:1}),o()(F.a,{header:"Change tree features...",headerStyle:{fontSize:"1rem"}},void 0,o()(j.b,{legend:"Score threshold for split",min:0,max:1,step:.001,defaultValue:this.state.scoreThreshold,onChange:function(e){return t.setState({scoreThreshold:e})}}),o()(j.b,{legend:"Maximum tree depth",min:1,max:50,defaultValue:this.state.maxTreeDepth,onChange:function(e){return t.setState({maxTreeDepth:e})}}),o()(j.b,{legend:"Minimum # of observations in leaf nodes",min:1,defaultValue:this.state.minItemsCount,onChange:function(e){return t.setState({minItemsCount:e})}})),"Classification"===c?o()(A.a,{legend:"Impurity Measure",defaultValue:this.state.impurityMeasure,options:["gini","entropy"],onChange:function(e){return t.setState({impurityMeasure:e})}}):null,o()(b.a,{disabled:!a||0===a.length,variant:"primary",block:!0,onClick:this.compute},void 0,"Calculate")))}}]),n}(w.Component);$.defaultProps={logAction:function(){}},e.default=$},771:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o="application/font-woff",i="image/jpeg",a={woff:o,woff2:o,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:i,jpeg:i,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"};function u(t){var e=/\.([^./]*?)$/g.exec(t);return e?e[1]:""}function c(t){var e=u(t).toLowerCase();return a[e]||""}function s(t){return new Promise((function(e,n){var r=new Image;r.onload=function(){e(r)},r.onerror=n,r.crossOrigin="anonymous",r.src=t}))}function l(t){return t.split(/,/)[1]}function f(t,e){var n=window.getComputedStyle(t).getPropertyValue(e);return parseFloat(n.replace("px",""))}function h(){return window.devicePixelRatio||1}e.uuid=(r=0,function(){return r+=1,"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+r}),e.parseExtension=u,e.getMimeType=c,e.delay=function(t){return function(e){return new Promise((function(n){setTimeout((function(){n(e)}),t)}))}},e.createImage=s,e.isDataUrl=function(t){return-1!==t.search(/^(data:)/)},e.toDataURL=function(t,e){return"data:"+e+";base64,"+t},e.getDataURLContent=l,e.canvasToBlob=function(t){return t.toBlob?new Promise((function(e){t.toBlob(e)})):function(t){return new Promise((function(e){for(var n=window.atob(t.toDataURL().split(",")[1]),r=n.length,o=new Uint8Array(r),i=0;i<r;i+=1)o[i]=n.charCodeAt(i);e(new Blob([o],{type:"image/png"}))}))}(t)},e.toArray=function(t){for(var e=[],n=0,r=t.length;n<r;n+=1)e.push(t[n]);return e},e.getNodeWidth=function(t){var e=f(t,"border-left-width"),n=f(t,"border-right-width");return t.scrollWidth+e+n},e.getNodeHeight=function(t){var e=f(t,"border-top-width"),n=f(t,"border-bottom-width");return t.scrollHeight+e+n},e.getPixelRatio=h,e.svgToDataURL=function(t){return Promise.resolve().then((function(){return(new XMLSerializer).serializeToString(t)})).then(encodeURIComponent).then((function(t){return"data:image/svg+xml;charset=utf-8,"+t}))},e.getBlobFromImageURL=function(t){return s(t).then((function(e){var n=e.width,r=e.height,o=document.createElement("canvas"),i=o.getContext("2d"),a=h();return o.width=n*a,o.height=r*a,o.style.width=""+n,o.style.height=""+r,i.scale(a,a),i.drawImage(e,0,0),l(o.toDataURL(c(t)))}))}}}]);