(window.webpackJsonp=window.webpackJsonp||[]).push([[212],{5814:function(e,t,n){"use strict";var i=n(365),o=Object(i.a)((function(){return Promise.all([n.e(0),n.e(5),n.e(175)]).then(n.bind(null,6552))}));t.a=o},5815:function(e,t,n){"use strict";n(385);var i=n(367),o=n.n(i),a=(n(382),n(369),n(373)),s=n.n(a),r=n(375),c=n.n(r),l=n(390),d=n.n(l),u=n(379),p=n.n(u),f=n(380),h=n.n(f),v=n(377),g=n.n(v),m=n(371),b=n.n(m),y=n(0),w=(n(359),n(6674)),x=n(421),C=n.n(x),S=n(1829),N=n(620),k=n.n(N),R=n(1402),T=n.n(R);function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=g()(e);if(t){var o=g()(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h()(this,n)}}var I=C()("isle:lesson:contextmenu"),D=["input","textarea"];var L=function(e){p()(n,e);var t=O(n);function n(e){var i;return s()(this,n),i=t.call(this,e),b()(d()(i),"handleSelectionChange",(function(e){if(!i.state.contextMenuIsOpen){var t,n=window.getSelection(),o=(t=document.activeElement)&&~D.indexOf(t.tagName.toLowerCase())?!t.readOnly&&!t.disabled:(t=getSelection().anchorNode)?(t=t.parentNode).isContentEditable:void 0,a=document.activeElement;if(-1!==D.indexOf(a.tagName.toLowerCase())){var s=a.value.slice(a.selectionStart,a.selectionEnd);return i.setState({lastText:s,lastActive:a,editable:o})}if(n.isCollapsed&&"Range"!==n.type)setTimeout((function(){i.forceUpdate()}),150);else if(i.lastSelection=n,n.getRangeAt&&n.rangeCount){var r=n.getRangeAt(0),c=n.toString();i.setState({lastActive:a,lastRange:r,lastText:c,editable:o})}}})),b()(d()(i),"highlightText",(function(e){I("Highlight the selected text..."),document.designMode="on";var t=window.getSelection();t.removeAllRanges(),t.addRange(i.state.lastRange),document.execCommand("styleWithCSS",!1,!0),document.execCommand("backColor",!1,"yellow"),document.designMode="off"})),b()(d()(i),"removeHighlight",(function(e){I("Highlight the selected text...");var t=window.getSelection();t.removeAllRanges(),t.addRange(i.state.lastRange),document.designMode="on",document.execCommand("styleWithCSS",!1,!0),document.execCommand("backColor",!1,"inherit"),document.designMode="off"})),b()(d()(i),"cutSelection",(function(){var e=i.state.lastActive;if(-1!==D.indexOf(e.tagName.toLowerCase()))return e.value=k()(e.value,i.state.lastText,""),navigator.clipboard.writeText(i.state.lastText);var t=window.getSelection();t.removeAllRanges(),t.addRange(i.state.lastRange),document.execCommand("cut")})),b()(d()(i),"copyToClipboard",(function(e){I("Copying selection to clipboard... "),navigator.clipboard.writeText(i.state.lastText)})),b()(d()(i),"copyFromClipboard",(function(){navigator.clipboard.readText().then((function(e){if(!e)return i.props.session.addNotification({title:i.props.t("clipboard-empty"),message:i.props.t("clipboard-empty-message"),level:"error",position:"tr"});var t=i.state.lastActive;t&&t.focus(),document.execCommand("insertText",!1,e)}))})),b()(d()(i),"textToSpeech",(function(){var e=i.state.lastText;I("Read aloud: "+e);var t=i.props.session;if(T()(window.speechSynthesis.getVoices()))return t.addNotification({title:i.props.t("voice-not-supported"),message:i.props.t("voice-not-supported-message"),level:"error",position:"tr"});var n=new SpeechSynthesisUtterance(e);n.lang=t.config.language||"en-US",window.speechSynthesis.speak(n)})),i.state={lastRange:null,lastText:"",contextMenuIsOpen:!1,editable:!1},i}return c()(n,[{key:"componentDidMount",value:function(){document.addEventListener("selectionchange",this.handleSelectionChange)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("selectionchange",this.handleSelectionChange)}},{key:"render",value:function(){var e=this,t=[],n=window.getSelection(),i=document.activeElement,a=i&&-1!==D.indexOf(i.tagName.toLowerCase());if((!n.isCollapsed||"Range"===n.type)&&(this.state.editable&&t.push(o()(S.c,{onClick:this.cutSelection},0,this.props.t("cut"))),t.push(o()(S.c,{onClick:this.copyToClipboard},1,this.props.t("copy"))),t.push(o()(S.c,{onClick:this.textToSpeech},2,this.props.t("read-aloud"))),!a&&!i.isContentEditable&&(t.push(o()(S.c,{onClick:this.highlightText},3,this.props.t("highlight"))),n&&n.focusNode))){var s=n.focusNode.parentElement;s&&s.style&&"yellow"===s.style.backgroundColor&&t.push(o()(S.c,{onClick:this.removeHighlight},4,this.props.t("remove-highlight")))}return a?t.push(o()(S.c,{onClick:this.copyFromClipboard},5,this.props.t("paste"))):i.isContentEditable||(t.push(o()(S.c,{onClick:function(t){var n=t.pageX/window.innerWidth,i=t.pageY/window.innerHeight;e.props.addNote({left:n,top:i,visibility:"private"})}},6,this.props.t("add-personal-note"))),this.props.session.isOwner()&&(t.push(o()(S.c,{onClick:function(t){var n=t.pageX/window.innerWidth,i=t.pageY/window.innerHeight;e.props.addNote({left:n,top:i,visibility:"instructor"})}},7,this.props.t("add-instructor-note"))),t.push(o()(S.c,{onClick:function(t){var n=t.pageX/window.innerWidth,i=t.pageY/window.innerHeight;e.props.addNote({left:n,top:i,visibility:"public"})}},8,this.props.t("add-student-note"))))),o()(S.a,{id:"lessonWindow",onShow:function(){I("Context menu has been opened..."),e.setState({contextMenuIsOpen:!0})},onHide:function(){I("Context menu has been closed..."),e.setState({contextMenuIsOpen:!1})},disableIfShiftIsPressed:!0},void 0,t)}}]),n}(y.Component);t.a=Object(w.a)("Lesson")(L)},5816:function(e,t,n){"use strict";var i=n(367),o=n.n(i),a=(n(0),n(6674));n(283);t.a=Object(a.a)("Lesson")((function(e){return o()("div",{className:"forbidden-wrapper"},void 0,o()("h3",{className:"forbidden-header"},void 0,e.t("not-available-yet")))}))},6664:function(e,t,n){"use strict";var i=n(367),o=n.n(i),a=n(456),s=n.n(a),r=n(0),c=n(5158),l=n(627),d=n(1136),u=n(365),p=Object(u.a)((function(){return n.e(170).then(n.bind(null,6760))})),f=n(392),h=(n(282),o()("i",{className:"fas fa-info-circle"}));t.a=function(){var e=Object(c.a)("Lesson").t,t=Object(r.useState)(!1),n=s()(t,2),i=n[0],a=n[1];return o()(r.Fragment,{},void 0,i?o()(p,{run:i,onFinish:function(){a(!1)}}):null,o()(l.a,{placement:"left",overlay:o()(d.a,{id:"interface-tour-button"},void 0,e("start-interface-tour"))},void 0,o()("button",{onClick:function(){i?a(!1):(Object(f.a)("InterfaceTour"),a(!0))},className:"interface-tour-button","aria-label":e(i?"end-interface-tour":"start-interface-tour")},void 0,h)))}},6701:function(e,t,n){"use strict";n.r(t),function(e){n(382),n(369),n(385);var i=n(367),o=n.n(i),a=n(373),s=n.n(a),r=n(375),c=n.n(r),l=n(390),d=n.n(l),u=n(379),p=n.n(u),f=n(380),h=n.n(f),v=n(377),g=n.n(v),m=n(371),b=n.n(m),y=n(0),w=n.n(y),x=(n(359),n(5809)),C=n.n(x),S=n(1829),N=n(6702),k=n(392),R=n(5814),T=n(1863),O=n(895),I=n(441),D=n(443),L=n(615),M=n(6664),E=n(5815),A=n(5816);function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=g()(e);if(t){var o=g()(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return h()(this,n)}}var W={Containers:{tc:{margin:"30px auto 0px auto"}},NotificationItem:{info:{border:"solid 8px #007bff",borderRadius:6,padding:20},success:{boxShadow:"1px 1px 3px 1px darkslategrey"}},Title:{success:{color:"#3c763d"}}},j={private:"green",public:"orange",instructor:"pink"},P=o()(A.a,{}),U=o()(R.a,{}),_=o()(M.a,{}),F=function(t){p()(i,t);var n=H(i);function i(e,t){var o;return s()(this,i),o=n.call(this,e),b()(d()(o),"addNote",(function(e){var t=e.left,n=e.top,i=e.visibility,a=e.noteID;(o.context.saveStickyNote({left:t,top:n,visibility:i}),a)||(a=Object(O.a)(3),o.context.log({id:"lesson",type:D.ob,value:{top:n,left:t,noteID:a}}))})),o.state={visible:!t.lessonID||(t.isActive()||t.isOwner())},o}return c()(i,[{key:"componentDidMount",value:function(){var e=this,t=this.context;t.onLessonMount(),this.unsubscribe=t.subscribe((function(n,i){n===L.K?e.forceUpdate():n!==L.u&&n!==L.x||e.setState({visible:t.isActive()||t.isOwner()})}))}},{key:"render",value:function(){var t=this.context;return this.state.visible?o()(N.a,{i18n:k.c},void 0,o()(S.b,{attributes:{className:"contextmenu-fullscreen"},holdToDisplay:-1,disableIfShiftIsPressed:!0,id:"lessonWindow"},void 0,o()("div",{id:"Lesson",className:this.props.className,style:this.props.style},void 0,this.props.children,t.stickyNotes.map((function(e,n){return o()(T.a,{color:j[e.visibility],watermark:e.visibility,editable:!0,minimizable:!0,removable:!0,draggable:{default:{x:e.left*window.innerWidth,y:e.top*window.innerHeight}},title:e.title,body:e.body,onDelete:function(){t.deleteStickyNote(e._id)},onMove:function(n){var i=n.top,o=n.left;t.updateStickyNote({noteID:e._id,top:i,left:o})},onTitleChange:function(n){t.updateStickyNote({noteID:e._id,title:n})},onBodyChange:function(n){t.updateStickyNote({noteID:e._id,body:n})}},e._id)})),U,_)),o()(E.a,{addNote:this.addNote,session:this.context}),w.a.createElement(C.a,{ref:function(t){e.notificationSystemISLE=t},allowHTML:!0,style:W})):P}}]),i}(y.Component);F.defaultProps={className:"",style:{}},F.contextType=I.a,t.default=F}.call(this,n(21))}}]);