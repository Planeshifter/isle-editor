(window.webpackJsonp=window.webpackJsonp||[]).push([[212],{5704:function(t,e,n){"use strict";var o=n(364),i=Object(o.a)((function(){return Promise.all([n.e(0),n.e(5),n.e(175)]).then(n.bind(null,6444))}));e.a=i},5705:function(t,e,n){"use strict";n(378);var o=n(366),i=n.n(o),a=(n(377),n(368),n(370)),s=n.n(a),r=n(371),c=n.n(r),l=n(388),u=n.n(l),d=n(375),p=n.n(d),f=n(376),h=n.n(f),v=n(374),g=n.n(v),m=n(372),b=n.n(m),y=n(0),w=(n(358),n(6530)),x=n(417),C=n.n(x),S=n(1828),N=n(619),k=n.n(N),R=n(1532),T=n.n(R);function O(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=g()(t);if(e){var i=g()(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return h()(this,n)}}var I=C()("isle:lesson:contextmenu"),D=["input","textarea"];var L=function(t){p()(n,t);var e=O(n);function n(t){var o;return s()(this,n),o=e.call(this,t),b()(u()(o),"handleSelectionChange",(function(t){if(!o.state.contextMenuIsOpen){var e,n=window.getSelection(),i=(e=document.activeElement)&&~D.indexOf(e.tagName.toLowerCase())?!e.readOnly&&!e.disabled:(e=getSelection().anchorNode)?(e=e.parentNode).isContentEditable:void 0,a=document.activeElement;if(-1!==D.indexOf(a.tagName.toLowerCase())){var s=a.value.slice(a.selectionStart,a.selectionEnd);return o.setState({lastText:s,lastActive:a,editable:i})}if(n.isCollapsed&&"Range"!==n.type)setTimeout((function(){o.forceUpdate()}),150);else if(o.lastSelection=n,n.getRangeAt&&n.rangeCount){var r=n.getRangeAt(0),c=n.toString();o.setState({lastActive:a,lastRange:r,lastText:c,editable:i})}}})),b()(u()(o),"highlightText",(function(t){I("Highlight the selected text..."),document.designMode="on";var e=window.getSelection();e.removeAllRanges(),e.addRange(o.state.lastRange),document.execCommand("styleWithCSS",!1,!0),document.execCommand("backColor",!1,"yellow"),document.designMode="off"})),b()(u()(o),"removeHighlight",(function(t){I("Highlight the selected text...");var e=window.getSelection();e.removeAllRanges(),e.addRange(o.state.lastRange),document.designMode="on",document.execCommand("styleWithCSS",!1,!0),document.execCommand("backColor",!1,"inherit"),document.designMode="off"})),b()(u()(o),"cutSelection",(function(){var t=o.state.lastActive;if(-1!==D.indexOf(t.tagName.toLowerCase()))return t.value=k()(t.value,o.state.lastText,""),navigator.clipboard.writeText(o.state.lastText);var e=window.getSelection();e.removeAllRanges(),e.addRange(o.state.lastRange),document.execCommand("cut")})),b()(u()(o),"copyToClipboard",(function(t){I("Copying selection to clipboard... "),navigator.clipboard.writeText(o.state.lastText)})),b()(u()(o),"copyFromClipboard",(function(){navigator.clipboard.readText().then((function(t){if(!t)return o.props.session.addNotification({title:o.props.t("clipboard-empty"),message:o.props.t("clipboard-empty-message"),level:"error",position:"tr"});var e=o.state.lastActive;e&&e.focus(),document.execCommand("insertText",!1,t)}))})),b()(u()(o),"textToSpeech",(function(){var t=o.state.lastText;I("Read aloud: "+t);var e=o.props.session;if(T()(window.speechSynthesis.getVoices()))return e.addNotification({title:o.props.t("voice-not-supported"),message:o.props.t("voice-not-supported-message"),level:"error",position:"tr"});var n=new SpeechSynthesisUtterance(t);n.lang=e.config.language||"en-US",window.speechSynthesis.speak(n)})),o.state={lastRange:null,lastText:"",contextMenuIsOpen:!1,editable:!1},o}return c()(n,[{key:"componentDidMount",value:function(){document.addEventListener("selectionchange",this.handleSelectionChange)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("selectionchange",this.handleSelectionChange)}},{key:"render",value:function(){var t=this,e=[],n=window.getSelection(),o=document.activeElement,a=o&&-1!==D.indexOf(o.tagName.toLowerCase());if((!n.isCollapsed||"Range"===n.type)&&(this.state.editable&&e.push(i()(S.c,{onClick:this.cutSelection},0,this.props.t("cut"))),e.push(i()(S.c,{onClick:this.copyToClipboard},1,this.props.t("copy"))),e.push(i()(S.c,{onClick:this.textToSpeech},2,this.props.t("read-aloud"))),!a&&!o.isContentEditable&&(e.push(i()(S.c,{onClick:this.highlightText},3,this.props.t("highlight"))),n&&n.focusNode))){var s=n.focusNode.parentElement;s&&s.style&&"yellow"===s.style.backgroundColor&&e.push(i()(S.c,{onClick:this.removeHighlight},4,this.props.t("remove-highlight")))}return a?e.push(i()(S.c,{onClick:this.copyFromClipboard},5,this.props.t("paste"))):o.isContentEditable||(e.push(i()(S.c,{onClick:function(e){var n=e.pageX/window.innerWidth,o=e.pageY/window.innerHeight;t.props.addNote({left:n,top:o,visibility:"private"})}},6,this.props.t("add-personal-note"))),this.props.session.isOwner()&&(e.push(i()(S.c,{onClick:function(e){var n=e.pageX/window.innerWidth,o=e.pageY/window.innerHeight;t.props.addNote({left:n,top:o,visibility:"instructor"})}},7,this.props.t("add-instructor-note"))),e.push(i()(S.c,{onClick:function(e){var n=e.pageX/window.innerWidth,o=e.pageY/window.innerHeight;t.props.addNote({left:n,top:o,visibility:"public"})}},8,this.props.t("add-student-note"))))),i()(S.a,{id:"lessonWindow",onShow:function(){I("Context menu has been opened..."),t.setState({contextMenuIsOpen:!0})},onHide:function(){I("Context menu has been closed..."),t.setState({contextMenuIsOpen:!1})}},void 0,e)}}]),n}(y.Component);e.a=Object(w.a)("Lesson")(L)},5706:function(t,e,n){"use strict";var o=n(366),i=n.n(o),a=(n(0),n(6530));n(282);e.a=Object(a.a)("Lesson")((function(t){return i()("div",{className:"forbidden-wrapper"},void 0,i()("h3",{className:"forbidden-header"},void 0,t.t("not-available-yet")))}))},6520:function(t,e,n){"use strict";var o=n(366),i=n.n(o),a=n(524),s=n.n(a),r=n(0),c=n(5047),l=n(626),u=n(1137),d=n(364),p=Object(d.a)((function(){return n.e(170).then(n.bind(null,6649))})),f=n(399),h=(n(281),i()("i",{className:"fas fa-info-circle"}));e.a=function(){var t=Object(c.a)("Lesson").t,e=Object(r.useState)(!1),n=s()(e,2),o=n[0],a=n[1];return i()(r.Fragment,{},void 0,o?i()(p,{run:o,onFinish:function(){a(!1)}}):null,i()(l.a,{placement:"left",overlay:i()(u.a,{id:"interface-tour-button"},void 0,t("start-interface-tour"))},void 0,i()("button",{onClick:function(){o?a(!1):(Object(f.a)("InterfaceTour"),a(!0))},className:"interface-tour-button","aria-label":t(o?"end-interface-tour":"start-interface-tour")},void 0,h)))}},6557:function(t,e,n){"use strict";n.r(e),function(t){n(377),n(368),n(378);var o=n(366),i=n.n(o),a=n(370),s=n.n(a),r=n(371),c=n.n(r),l=n(388),u=n.n(l),d=n(375),p=n.n(d),f=n(376),h=n.n(f),v=n(374),g=n.n(v),m=n(372),b=n.n(m),y=n(0),w=n.n(y),x=(n(358),n(5699)),C=n.n(x),S=n(1828),N=n(6558),k=n(399),R=n(5704),T=n(1864),O=n(896),I=n(439),D=n(443),L=n(615),M=n(6520),E=n(5705),A=n(5706);function H(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=g()(t);if(e){var i=g()(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return h()(this,n)}}var W={Containers:{tc:{margin:"30px auto 0px auto"}},NotificationItem:{info:{border:"solid 8px #007bff",borderRadius:6,padding:20},success:{boxShadow:"1px 1px 3px 1px darkslategrey"}},Title:{success:{color:"#3c763d"}}},j={private:"green",public:"orange",instructor:"pink"},P=i()(A.a,{}),U=i()(R.a,{}),_=i()(M.a,{}),F=function(e){p()(o,e);var n=H(o);function o(t,e){var i;return s()(this,o),i=n.call(this,t),b()(u()(i),"addNote",(function(t){var e=t.left,n=t.top,o=t.visibility,a=t.noteID;(i.context.saveStickyNote({left:e,top:n,visibility:o}),a)||(a=Object(O.a)(3),i.context.log({id:"lesson",type:D.ob,value:{top:n,left:e,noteID:a}}))})),i.state={visible:!e.lessonID||(e.isActive()||e.isOwner())},i}return c()(o,[{key:"componentDidMount",value:function(){var t=this,e=this.context;e.onLessonMount(),this.unsubscribe=e.subscribe((function(n,o){n===L.K?t.forceUpdate():n!==L.u&&n!==L.x||t.setState({visible:e.isActive()||e.isOwner()})}))}},{key:"render",value:function(){var e=this.context;return this.state.visible?i()(N.a,{i18n:k.c},void 0,i()(S.b,{attributes:{className:"contextmenu-fullscreen"},holdToDisplay:-1,disableIfShiftIsPressed:!0,id:"lessonWindow"},void 0,i()("div",{id:"Lesson",className:this.props.className,style:this.props.style},void 0,this.props.children,e.stickyNotes.map((function(t,n){return i()(T.a,{color:j[t.visibility],watermark:t.visibility,editable:!0,minimizable:!0,removable:!0,draggable:{default:{x:t.left*window.innerWidth,y:t.top*window.innerHeight}},title:t.title,body:t.body,onDelete:function(){e.deleteStickyNote(t._id)},onMove:function(n){var o=n.top,i=n.left;e.updateStickyNote({noteID:t._id,top:o,left:i})},onTitleChange:function(n){e.updateStickyNote({noteID:t._id,title:n})},onBodyChange:function(n){e.updateStickyNote({noteID:t._id,body:n})}},t._id)})),U,_)),i()(E.a,{addNote:this.addNote,session:this.context}),w.a.createElement(C.a,{ref:function(e){t.notificationSystemISLE=e},allowHTML:!0,style:W})):P}}]),o}(y.Component);F.defaultProps={className:"",style:{}},F.contextType=I.a,e.default=F}.call(this,n(22))}}]);