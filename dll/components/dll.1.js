/*! For license information please see dll.1.js.LICENSE.txt */
(window.webpackJsonp_name_hash_=window.webpackJsonp_name_hash_||[]).push([[1],{3681:function(e,t,n){"use strict";n.r(t);var a=n(5),o=n.n(a),r=n(6),i=n.n(r),s=n(3),l=n.n(s),c=n(7),u=n.n(c),d=n(8),p=n.n(d),m=n(4),f=n.n(m),h=n(2),g=n.n(h),b=n(0),v=n.n(b),E=n(22),y=n.n(E),x=n(10),w=n(338),S=n(89),C=n.n(S),k=n(25),T=n.n(k),O=n(104),N=n.n(O),R=n(841),M=n(842),_=n(93),L=n(39),P=n(389),A=n(1664),D=n(3689),B=n(1658),I=n(129),G=n(3692),z=n(30),V=n(3712),U=n(3716),j=n(3693),F=n(14),H=n(55),W=n(3722),K=n(3723),q=n(3730),J=n(3733);n(3736);function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var o=f()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return p()(this,n)}}var Y=Object(b.lazy)((function(){return n.e(3).then(n.bind(null,3756))})),Q=y()("isle:statusbar");function Z(e){var t=(new Date).getTime()-e.startTime;return t=C()(t/6e4)}function $(e){e.stopPropagation()}var ee=function(e){u()(n,e);var t=X(n);function n(e,a){var r;return o()(this,n),r=t.call(this,e),g()(l()(r),"closeSignup",(function(){r.setState({visibleSignup:!1})})),g()(l()(r),"closeLogin",(function(){r.setState({visibleLogin:!1})})),g()(l()(r),"closeLogout",(function(){r.setState({visibleLogout:!1})})),g()(l()(r),"toggleBarVisibility",(function(e){e&&e.stopPropagation();var t=r.context;t.togglePresentationView(),Q("Toggle visibility of statusbar..."),t.config.hideStatusBar||r.setState({showStatusBar:!r.state.showStatusBar})})),g()(l()(r),"toggleGroupManager",(function(e){e&&e.stopPropagation(),r.setState({showGroupManager:!r.state.showGroupManager})})),g()(l()(r),"toggleBlackScreen",(function(e){e&&e.stopPropagation();var t=document.getElementById("blackscreen"),n=r.context;t?(t.parentElement.removeChild(t),n.log({id:"statusbar",type:F.TOGGLE_BLACKSCREEN,value:!1},"members")):((t=document.createElement("div")).setAttribute("id","blackscreen"),document.getElementById("Lesson").appendChild(t),n.log({id:"statusbar",type:F.TOGGLE_BLACKSCREEN,value:!0},"members"))})),g()(l()(r),"toggleBar",(function(){r.hidden?(Object(G.default)(r.statusbar,"top",0,300),r.statusbar.style.opacity=1,r.hidden=!1):(Object(G.default)(r.statusbar,"top",-32,300),r.statusbar.style.opacity=.95,r.hidden=!0)})),g()(l()(r),"onMouseOver",(function(){r.hidden&&(r.statusbar.style.opacity=1)})),g()(l()(r),"onMouseOut",(function(){r.hidden&&(r.statusbar.style.opacity=.95)})),g()(l()(r),"login",(function(e){e.stopPropagation(),r.setState({visibleLogin:!0})})),g()(l()(r),"signup",(function(e){e.stopPropagation(),r.setState({visibleSignup:!0})})),g()(l()(r),"logout",(function(e){e.stopPropagation(),r.setState({visibleLogout:!0})})),g()(l()(r),"handleLogout",(function(){r.context.logout(),r.closeLogout()})),g()(l()(r),"handleBarClick",(function(e){r.toggleBar()})),g()(l()(r),"handleBarKeyPress",(function(){r.toggleBar()})),g()(l()(r),"toggleProgress",(function(){var e=r.context;e.setProgress(),r.state.isProgressLeaving||e.isOwner()||(r.state.showProgressBar?r.progressTimeout=setTimeout((function(){r.setState({showProgressBar:!1,isProgressLeaving:!1,duration:Z(r.context)}),r.progressTimeout=null}),12e3):r.setState({showProgressBar:!0,duration:Z(r.context)}))})),g()(l()(r),"jumpToUnfinished",(function(e){Q("Jump to next unfinished question..."),e.stopPropagation();var t=r.context.unfinished;if(T()(t)){var n=t[0];if(n){var a=document.getElementById(n);if(null===a.offsetParent){var o=a.cloneNode(!0),i=document.createElement("div");i.id="unfinished-container",o.id="unfinished-elem",o.classList.add("focus-glow"),i.append(o),document.body.appendChild(i),setTimeout((function(){var e=document.getElementById("unfinished-container");e&&e.parentNode.removeChild(e)}),4e3)}else a.classList.add("focus-glow"),a.scrollIntoView(),setTimeout((function(){a.classList.remove("focus-glow")}),4e3)}}})),r.state={visibleSignup:!1,visibleLogin:!1,visibleLogout:!1,showGroupManager:!1,showStatusBar:!a.config.hideStatusBar,showProgressBar:!1,isProgressLeaving:!1,progress:0,duration:"0"},r.hidden=!0,r}return i()(n,[{key:"componentDidMount",value:function(){var e=this,t=!1,n=this.context;this.unsubscribe=n.subscribe((function(a,o){if(setTimeout((function(){!t&&n.anonymous&&n.live&&(!function(){var t=e.context;!D.default&&e.state.showStatusBar&&t.addNotification({title:"Login",message:"Please connect with your ISLE account or create a new one.",level:"success",autoDismiss:t.config.noLoginDismiss?0:15,position:"tl",children:v.a.createElement("div",{style:{marginBottom:"30px"}},v.a.createElement(x.default,{size:"sm",style:{float:"right",marginRight:"10px"},onClick:e.signup},"Sign up"),v.a.createElement(x.default,{size:"sm",variant:"primary",style:{float:"right",marginRight:"10px"},onClick:e.login},"Login"))})}(),t=!0)}),3e3),a===H.SELF_INITIAL_PROGRESS)e.setState({progress:C()(100*Number(o))});else if(a===H.SELF_UPDATED_PROGRESS||a===H.SELF_UPDATED_SCORE){var r={showProgressBar:!0,isProgressLeaving:!0};a===H.SELF_UPDATED_PROGRESS&&(r.progress=C()(100*Number(o))),e.setState(r),e.progressTimeout&&(clearTimeout(e.progressTimeout),e.progressTimeout=null),e.progressTimeout=setTimeout((function(){e.setState({showProgressBar:!1,isProgressLeaving:!1,duration:Z(n)}),e.progressTimeout=null}),4e3)}else if(a===H.DISCONNECTED_FROM_SERVER||a===H.LOGGED_IN||a===H.LOGGED_OUT||a===H.SERVER_IS_LIVE||a===H.RECEIVED_USER_RIGHTS)e.forceUpdate();else if(a===H.MEMBER_ACTION&&o.type===F.TOGGLE_BLACKSCREEN)if(o.value){var i=document.createElement("div");i.setAttribute("id","blackscreen"),document.getElementById("Lesson").appendChild(i)}else{var s=document.getElementById("blackscreen");s&&s.parentElement.removeChild(s)}else a!==H.CREATED_GROUPS||e.state.showGroupManager||e.toggleGroupManager()})),this.renderTextInterval=setInterval(this.renderRecordedText,1e3)}},{key:"componentWillUnmount",value:function(){this.unsubscribe(),this.renderTextInterval&&clearInterval(this.renderTextInterval)}},{key:"render",value:function(){var e=this,t=this.context,n=100===this.state.progress,a=function(t){e.context.anonymous||t.stopPropagation()},o=t.isOwner()||D.default,r=t.user.picture,i=v.a.createElement(b.Fragment,null,r?v.a.createElement("img",{className:"statusbar-profile",alt:"User Profile Pic",src:r,onClick:$}):null,v.a.createElement(L.default,{placement:"bottom",tooltip:"Time spent in current session"},v.a.createElement("div",{className:"progress-time",onClick:$},"DUR: ",this.state.duration," MIN"))),s=t.namespaceName+"-"+t.lessonName;return v.a.createElement(b.Fragment,null,v.a.createElement(U.default,null),v.a.createElement(V.default,null),o?v.a.createElement(K.default,{active:this.state.showGroupManager,onHide:this.toggleGroupManager}):v.a.createElement(q.default,null),v.a.createElement("div",null,v.a.createElement("div",{className:"statusbar unselectable",role:"button",tabIndex:0,ref:function(t){e.statusbar=t},onClick:this.handleBarClick,onKeyPress:this.handleBarKeyPress,onMouseOver:this.onMouseOver,onFocus:this.onMouseOver,onMouseOut:this.onMouseOut,onBlur:this.onMouseOut,style:{top:"-32px",display:this.state.showStatusBar?null:"none"}},v.a.createElement("div",{className:"statusbar-left"}),v.a.createElement("div",{className:"statusbar-middle"},v.a.createElement(W.default,{session:this.context}),o?v.a.createElement(L.default,{placement:"bottom",tooltip:"Enter presentation mode (F7)"},v.a.createElement("span",{role:"button",tabIndex:0,onClick:this.toggleBarVisibility,onKeyPress:this.toggleBarVisibility,className:"statusbar-presentation-mode statusbar-icon","aria-label":"Toggle presentation mode"},v.a.createElement("span",{className:"fa fa-xs fa-eye-slash"}))):null,o?v.a.createElement(L.default,{placement:"bottom",tooltip:"Black out screen for everyone"},v.a.createElement("span",{role:"button",tabIndex:0,"aria-label":"Black out screen",onClick:this.toggleBlackScreen,onKeyPress:this.toggleBlackScreen,className:"statusbar-blackscreen-mode statusbar-icon"},v.a.createElement("span",{className:"fa fa-xs fa-stop"}))):null,o?v.a.createElement(L.default,{placement:"bottom",tooltip:"Group Manager"},v.a.createElement("span",{role:"button",tabIndex:0,"aria-label":"Group Manager",onClick:this.toggleGroupManager,onKeyPress:this.toggleGroupManager,className:"statusbar-group-manager statusbar-icon"},v.a.createElement("span",{className:"fa fa-xs fa-user-friends"}))):null,t.cohort?v.a.createElement("div",{className:"statusbar-cohort"},t.cohort):null,v.a.createElement(L.default,{placement:"bottom",tooltip:t.live?"The connection to the ISLE server is active":"The connection to the ISLE server is broken"},v.a.createElement("div",{className:"statusbar-presence",style:{backgroundColor:t.live?"rgb(130, 224, 160)":"rgb(209, 107, 71)"}},v.a.createElement("div",{className:"statusbar-inner-presence"}))),v.a.createElement("div",{role:"button",tabIndex:0,style:{cursor:this.context.anonymous?"pointer":"help"},className:"statusbar-username",onClick:a,onKeyPress:a,onMouseEnter:this.toggleProgress,onFocus:this.toggleProgress,onMouseOut:this.toggleProgress,onBlur:this.toggleProgress,"aria-label":"User Progress"},t.anonymous?"Anonymous ".concat(t.anonymousIdentifier):t.user.name),t.config.hideVideoChat?null:v.a.createElement(B.default,{for:s,buttonVariant:"link",buttonLabel:v.a.createElement("i",{className:"fa fa-xs fa-video"}),tooltipPlacement:"bottom",tooltip:"Video Chat",className:"statusbar-icon statusbar-video-chat",onClick:$}),t.config.hideTextChat?null:v.a.createElement(I.default,{for:s,buttonVariant:"link",anonymousSubmissions:!0,buttonLabel:v.a.createElement("i",{className:"fas fa-comments"}),tooltipPlacement:"bottom",tooltip:"Text Chat",className:"statusbar-icon statusbar-text-chat",onClick:$}),t.anonymous?v.a.createElement("div",null,v.a.createElement(x.default,{size:"sm",className:"statusbar-button",variant:"outline-secondary",style:{float:"right",marginRight:"-20px"},onClick:this.signup,disabled:!t.live},"Sign up"),v.a.createElement(x.default,{size:"sm",className:"statusbar-button",variant:"outline-secondary",style:{float:"right",marginRight:"10px"},onClick:this.login,disabled:!t.live},"Login")):v.a.createElement(b.Fragment,null,v.a.createElement(x.default,{size:"sm",className:"statusbar-button",variant:"outline-secondary",style:{float:"right",marginRight:"10px"},onClick:this.logout},"Log Out"),v.a.createElement("a",{href:t.server,target:"_blank"},v.a.createElement(x.default,{size:"sm",className:"statusbar-button",variant:"outline-secondary",style:{float:"right",marginRight:"10px"}},"Go to Dashboard"))),v.a.createElement("div",{className:"statusbar-text"},"ISLE")),v.a.createElement("div",{className:"statusbar-right"}),v.a.createElement("div",{className:"statusbar-progress ".concat(this.state.isProgressLeaving?"progress-fade-out":""," "),style:{display:!t.config.hideProgressBar&&this.state.showProgressBar?"inherit":"none"}},v.a.createElement(_.default,{user:!0},i,N()(t.responseVisualizers)?v.a.createElement("div",{className:"outer-statusbar-progress-bar"}):v.a.createElement(L.default,{placement:"bottom",tooltip:n?"Completed!":"Click to preview unfinished",show:T()(t.unfinished)},v.a.createElement("div",{className:"outer-statusbar-progress-bar"},v.a.createElement(w.default,{label:"COMPLETION RATE: ".concat(this.state.progress,"%"),variant:"success",now:this.state.progress,style:{animation:"anim-fade-in 0.7s",border:"solid 1px darkgrey"},onClick:this.jumpToUnfinished}))),v.a.createElement(J.default,null)))),v.a.createElement(b.Suspense,{fallback:null},v.a.createElement(_.default,{owner:!0},v.a.createElement(Y,null))),this.state.showStatusBar||!o&&!D.default?null:v.a.createElement(L.default,{placement:"bottom",tooltip:"Exit presentation mode (F7)"},v.a.createElement("span",{className:"statusbar-presentation-mode-lone-icon",role:"button",tabIndex:0,onClick:this.toggleBarVisibility,onKeyPress:this.toggleBarVisibility},v.a.createElement("span",{className:"fa fa-xs fa-eye-slash"})))),v.a.createElement(M.default,{show:this.state.visibleLogin,onClose:this.closeLogin}),v.a.createElement(R.default,{show:this.state.visibleSignup,onClose:this.closeSignup}),v.a.createElement(j.default,{show:this.state.visibleLogout,close:this.closeLogout,title:"Logout",message:"Do you really want to log out? To log in again, you will need your password.",onConfirm:this.handleLogout}),v.a.createElement(P.default,{actions:{F7:this.toggleBarVisibility}}),n&&!t.config.hideProgressBar?v.a.createElement(A.default,{title:"100%",upper:"Congratulations!",lower:"Lesson Completed!",upperArc:120,lowerArc:120,noOrnaments:!0,removable:!0,style:{position:"fixed",right:"0px",bottom:"5%",transform:"rotate(-17deg) scale(".concat(window.innerWidth/1920,")"),transformOrigin:"100% 100%",animation:"anim-fade-in 1s forwards",background:"linear-gradient(to right, white, silver, white)",fontFamily:"Courier",zIndex:1002},innerStyle:{background:"linear-gradient(to right, ghostwhite, #ffc107, ghostwhite, #ffc107, silver)"}}):null)}}]),n}(b.Component);ee.contextType=z.SessionContext,t.default=ee},3689:function(e,t,n){"use strict";n.r(t),function(e){var a=n(160),o=n.n(a),r=n(131),i=n.n(r),s=n(49),l="object"===(void 0===e?"undefined":o()(e))&&i()(e.versions)&&Object(s.isPrimitive)(e.versions.electron)&&Object(s.isPrimitive)(e.versions.chrome)&&("browser"===e.type||"renderer"===e.type);t.default=l}.call(this,n(372))},3690:function(e,t,n){"use strict";n.r(t);var a=n(85),o=n.n(a),r=n(960),i=n.n(r);t.default=function(e){return i()(e,"px")&&(e=parseFloat(o()(e,"px",""))),e}},3692:function(e,t,n){"use strict";n.r(t);var a=n(3690);t.default=function e(t,n,o,r){if(!(r<=0)){var i=Object(a.default)(t.style[n]),s=(o-i)/r*10;setTimeout((function(){var i=Object(a.default)(t.style[n])+s;t.style[n]="".concat(i,"px"),t.style[n]!==o&&e(t,n,o,r-10)}),10)}}},3693:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(1),i=n.n(r),s=n(10),l=n(33),c=function(e){return o.a.createElement(l.default,{show:e.show,onHide:e.close},o.a.createElement(l.default.Header,null,o.a.createElement(l.default.Title,null,e.title)),o.a.createElement(l.default.Body,null,e.message),o.a.createElement(l.default.Footer,null,o.a.createElement(s.default,{onClick:e.close},"Cancel"),o.a.createElement(s.default,{variant:"danger",onClick:e.onConfirm},"Confirm")))};c.propTypes={close:i.a.func.isRequired,message:i.a.string.isRequired,onConfirm:i.a.func.isRequired,show:i.a.bool.isRequired,title:i.a.string.isRequired},t.default=c},3694:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(25),i=n.n(r);t.default=function(e){var t=e.session,n=t.cohorts;if(!i()(n))return null;var a=function(e){t.selectCohort(e.target.value)},r=o.a.createElement("select",{id:e.id,className:"cohort-select",onChange:a,onBlur:a,value:t.selectedCohort?t.selectedCohort.title:"all"},o.a.createElement("option",{value:"all"},"All Cohorts"),n.map((function(e,t){return o.a.createElement("option",{key:t,value:e.title},e.title)})));return o.a.createElement("div",{style:{padding:"5px"}},o.a.createElement("label",{htmlFor:e.id,style:{marginRight:5}},e.label),r)}},3712:function(e,t,n){"use strict";n.r(t);var a=n(5),o=n.n(a),r=n(6),i=n.n(r),s=n(7),l=n.n(s),c=n(8),u=n.n(c),d=n(4),p=n.n(d),m=n(0),f=n.n(m),h=n(30),g=n(55),b=n(3713);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=p()(e);if(t){var o=p()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return u()(this,n)}}var E=function(e){l()(n,e);var t=v(n);function n(e){return o()(this,n),t.call(this,e)}return i()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.context;this.unsubscribe=t.subscribe((function(t){t!==g.VIDEO_CHAT_STARTED&&t!==g.VIDEO_CHAT_ENDED||e.forceUpdate()}))}},{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"render",value:function(){return this.context.videoChats.map((function(e){return f.a.createElement(b.default,{key:e.name,roomName:e.name,roomSubject:e.subject||e.name})}))}}]),n}(m.Component);E.contextType=h.SessionContext,t.default=E},3713:function(e,t,n){"use strict";n.r(t);var a=n(5),o=n.n(a),r=n(6),i=n.n(r),s=n(3),l=n.n(s),c=n(7),u=n.n(c),d=n(8),p=n.n(d),m=n(4),f=n.n(m),h=n(2),g=n.n(h),b=n(0),v=n.n(b),E=n(39),y=n(10),x=n(74),w=n.n(x),S=n(158),C=n(67),k=n(30);n(3714);function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var o=f()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return p()(this,n)}}var O={DEFAULT_BACKGROUND:"#fffff8",DISABLE_VIDEO_BACKGROUND:!0,SHOW_JITSI_WATERMARK:!1,SHOW_WATERMARK_FOR_GUESTS:!1,INVITATION_POWERED_BY:!1,DEFAULT_REMOTE_DISPLAY_NAME:"Anonymous",DISPLAY_WELCOME_PAGE_CONTENT:!1,TOOLBAR_BUTTONS:["microphone","camera","closedcaptions","desktop","fullscreen","fodeviceselection","info","profile","settings","videoquality","filmstrip","shortcuts","tileview","download","help"],SETTINGS_SECTIONS:["devices","language"],MOBILE_APP_PROMO:!0,HIDE_KICK_BUTTON_FOR_GUESTS:!0,SHOW_CHROME_EXTENSION_BANNER:!1},N=function(e){u()(n,e);var t=T(n);function n(e){var a;return o()(this,n),a=t.call(this,e),g()(l()(a),"handleClose",(function(e){var t=a.context;t.isOwner()&&a.api.executeCommand("hangup"),t.leaveVideoChat(a.props.roomName)})),g()(l()(a),"handleCompress",(function(e){a.setState({minimized:!a.state.minimized},(function(){a.state.minimized?a.rnd.updateSize({width:160,height:100}):a.rnd.updateSize({width:w()(.3*window.innerWidth,400),height:w()(.3*window.innerHeight,400)})}))})),g()(l()(a),"stopScreenSharing",(function(e){a.api.executeCommand("toggleShareScreen")})),a.state={minimized:!1,screensharing:!1},a}return i()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.context;t.isOwner()?(O.TOOLBAR_BUTTONS.includes("mute-everyone")||O.TOOLBAR_BUTTONS.push("mute-everyone"),O.TOOLBAR_BUTTONS.includes("recording")||O.TOOLBAR_BUTTONS.push("recording"),O.TOOLBAR_BUTTONS.includes("livestreaming")||O.TOOLBAR_BUTTONS.push("livestreaming"),O.TOOLBAR_BUTTONS.includes("invite")||O.TOOLBAR_BUTTONS.push("invite"),O.SETTINGS_SECTIONS.includes("moderator")||O.SETTINGS_SECTIONS.push("moderator"),O.TOOLBAR_BUTTONS.includes("sharedvideo")||O.TOOLBAR_BUTTONS.push("sharedvideo")):O.TOOLBAR_BUTTONS.includes("raisehand")||O.TOOLBAR_BUTTONS.push("raisehand");var n={roomName:this.props.roomName,width:"100%",height:"100%",parentNode:this.videoChatContainer,userInfo:{email:t.user.email},interfaceConfigOverwrite:O,noSSL:!1,jwt:t.jitsi.token};this.api=new window.JitsiMeetExternalAPI(t.jitsi.server,n),this.api.executeCommand("displayName",t.user.name),this.api.executeCommand("subject",this.props.roomSubject),this.api.executeCommand("avatarUrl",t.user.picture),this.api.addEventListener("screenSharingStatusChanged",(function(t){e.setState({screensharing:t.on,minimized:t.on},(function(){e.state.minimized?e.rnd.updateSize({width:160,height:100}):e.rnd.updateSize({width:w()(.3*window.innerWidth,400),height:w()(.3*window.innerHeight,400)})}))}))}},{key:"render",value:function(){var e,t,n=this;this.state.minimized?t={display:"none"}:(e={height:"100%",width:"100%"},t={height:"100%",width:"100%"});var a=v.a.createElement(C.default,{className:"video-chat-panel",style:e},v.a.createElement("div",{className:"video-chat-iframe",ref:function(e){n.videoChatContainer=e},style:t}),this.state.minimized?v.a.createElement("h3",{style:{marginTop:22}},this.state.screensharing?v.a.createElement("span",null,"Sharing screen ",v.a.createElement(y.default,{onClick:this.stopScreenSharing,variant:"secondary",size:"sm"},"Stop sharing")):"Video active"):null,v.a.createElement(E.default,{tooltip:this.state.minimized?"Maximize":"Minimize"},v.a.createElement(y.default,{size:"sm",onClick:this.handleCompress,className:"video-chat-minimized-button"},v.a.createElement("i",{className:this.state.minimized?"far fa-window-maximize":"fas fa-window-minimize"}))),v.a.createElement(E.default,{tooltip:"Leave video"},v.a.createElement(y.default,{size:"sm",onClick:this.handleClose,className:"video-chat-button"},v.a.createElement("i",{className:"fas fa-video-slash"}))));return v.a.createElement(S.default,{default:{width:w()(.3*window.innerWidth,400),height:w()(.3*window.innerHeight,400)},ref:function(e){n.rnd=e},minWidth:160,minHeight:100,resizable:!this.state.minimized,lockAspectRatio:!0,cancel:".video-chat-iframe"},a)}}]),n}(b.Component);N.contextType=k.SessionContext,t.default=N},3714:function(e,t,n){var a=n(37),o=n(3715);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var r={insert:"head",singleton:!1};a(o,r);e.exports=o.locals||{}},3715:function(e,t,n){(t=n(38)(!1)).push([e.i,".video-chat-panel {\n\tposition: fixed;\n}\n\n.video-chat-button {\n\tposition: absolute;\n\ttop: 0px;\n\tleft: 0px;\n}\n\n.video-chat-minimized-button {\n\tposition: absolute;\n\ttop: 0px;\n\tright: 0px;\n}\n",""]),e.exports=t},3716:function(e,t,n){"use strict";n.r(t);var a=n(5),o=n.n(a),r=n(6),i=n.n(r),s=n(3),l=n.n(s),c=n(7),u=n.n(c),d=n(8),p=n.n(d),m=n(4),f=n.n(m),h=n(2),g=n.n(h),b=n(0),v=n.n(b),E=n(255),y=n.n(E),x=n(74),w=n.n(x),S=n(88),C=n.n(S),k=n(30),T=n(55),O=n(3717);function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var o=f()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return p()(this,n)}}var R=function(e){u()(n,e);var t=N(n);function n(e){var a;o()(this,n),a=t.call(this,e),g()(l()(a),"getStatusbarInfo",(function(){var e=w()(.34*window.innerWidth,300),t=(window.innerWidth-e)/2;a.setState({statusbarWidth:e,side:t})}));var r=w()(.34*window.innerWidth,300),i=(window.innerWidth-r)/2;return a.state={statusbarWidth:r,side:i},a}return i()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.context;this.unsubscribe=t.subscribe((function(t){t!==T.REMOVED_CHAT&&t!==T.RECEIVED_CHAT_HISTORY||e.forceUpdate()})),window.addEventListener("resize",this.getStatusbarInfo)}},{key:"componentWillUnmount",value:function(){this.unsubscribe(),window.removeEventListener("resize",this.getStatusbarInfo)}},{key:"getChatPosition",value:function(e){var t=this.context,n=y()(t.chats.length/2),a=.6*this.state.side,o=C()((this.state.side-10-10*n)/n,a),r=10+e*(o+10);return e>n-1&&(r+=this.state.statusbarWidth,1===n&&1===e&&(r+=o+10)),{left:r,width:o}}},{key:"render",value:function(){var e=this;return this.context.chats.map((function(t,n){var a=e.getChatPosition(n);return v.a.createElement(O.default,{chat:t,idx:n,key:n,left:a.left,width:a.width})}))}}]),n}(b.Component);R.contextType=k.SessionContext,t.default=R},3717:function(e,t,n){"use strict";n.r(t);var a=n(5),o=n.n(a),r=n(6),i=n.n(r),s=n(3),l=n.n(s),c=n(7),u=n.n(c),d=n(8),p=n.n(d),m=n(4),f=n.n(m),h=n(2),g=n.n(h),b=n(0),v=n.n(b),E=n(1),y=n.n(E),x=n(22),w=n.n(x),S=n(344),C=n.n(S),k=n(85),T=n.n(k),O=n(379),N=n(168),R=n(192),M=n(429),_=n(391),L=n(10),P=n(101),A=n.n(P),D=n(158),B=n(154),I=n(39),G=n(93),z=n(111),V=n(643),U=n(3689),j=n(30),F=n(55),H=n(961),W=n(608),K=n(3718),q=n(3719);n(3720);function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var o=f()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return p()(this,n)}}var X=w()("isle:statusbar:chat"),Y=C()({html:!1,xhtmlOut:!0,breaks:!1,typographer:!1}),Q=function(e){u()(n,e);var t=J(n);function n(e){var a;return o()(this,n),a=t.call(this,e),g()(l()(a),"onScroll",(function(){a.chatbody.scrollTop+a.chatbody.clientHeight>=a.chatbody.scrollHeight&&a.context.markChatMessagesAsRead(a.props.chat.name)})),g()(l()(a),"sendMessage",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=a.editorView.markdown;if(0!==n.length){n=T()(n,"\\\n","\n");var o=a.context;o.sendChatMessage(a.props.chat.name,n,t),Object(V.default)(a.chatbody,a.chatbody.scrollHeight,1e3),a.setState({defaultValue:"",docId:a.state.docId+1})}})),g()(l()(a),"sendAnonymousChatMessage",(function(e){a.sendMessage(e,!0)})),g()(l()(a),"handleEditorStateChange",(function(){a.state.hasNews&&a.setState({hasNews:!1})})),g()(l()(a),"insertText",(function(e){e=a.editorView.markdown+" "+e,a.setState({defaultValue:e})})),g()(l()(a),"closeChat",(function(){a.context.leaveChat(a.props.chat.name)})),g()(l()(a),"onMouseOver",(function(){a.state.opened||(a.chat.style.opacity=a.state.opened?.7:1)})),g()(l()(a),"onMouseOut",(function(){a.state.opened||(a.chat.style.opacity=a.state.opened?1:.7)})),g()(l()(a),"toggleMaximize",(function(){var e={maximized:!a.state.maximized};e.maximized&&!a.state.opened&&(e.opened=!0),a.setState(e)})),g()(l()(a),"toggleChat",(function(){a.setState({opened:!a.state.opened,hasNews:!1})})),a.state={opened:!0,hasNews:!1,maximized:!1,defaultValue:"",docId:0},a}return i()(n,[{key:"componentDidMount",value:function(){var e=this;X("Component has mounted. Subscribe to session: ");var t=this.context;this.unsubscribe=t.subscribe((function(t){t===F.CHAT_MESSAGE||t===F.MEMBER_HAS_JOINED_CHAT||t===F.MEMBER_HAS_LEFT_CHAT?e.setState({hasNews:!0}):t===F.MARK_MESSAGES&&e.setState({hasNews:!1})}))}},{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"renderMembers",value:function(){var e=this.props.chat,t=v.a.createElement(R.default,{id:"userlistPopover"},v.a.createElement(M.default,null,"Members of ",e.name," chat:"),v.a.createElement(_.default,null,v.a.createElement(O.default,null,e.members.map((function(e,t){return v.a.createElement(N.default,{style:{padding:"3px 3px"},key:t},e.name)})))));return v.a.createElement(z.default,{trigger:["hover","focus"],placement:"bottom",overlay:t},v.a.createElement("div",{className:"chat-members",style:{display:this.state.opened?"block":"none"}},e.members.map((function(t,n){return v.a.createElement("span",{key:n},t.name,n!==e.members.length-1?", ":null)}))))}},{key:"renderChatBody",value:function(){var e=this,t=this.props.chat,n=this.context;return v.a.createElement("div",{className:"chat-body-outer",style:{display:this.state.opened?"block":"none"}},v.a.createElement("div",{className:"chat-body cancel",ref:function(t){e.chatbody=t},onScroll:this.onScroll,style:{height:this.state.maximized?"calc(85vh - 150px)":"150px"}},t.messages.map((function(e,t){var a={__html:Y.renderInline(e.content)};return v.a.createElement("div",{className:e.unread?"chat-message unread":"chat-message",key:t},v.a.createElement("img",{className:"chat-picture unselectable",src:n.server+"/thumbnail/"+(e.picture&&!e.anonymous?e.picture:"anonymous.jpg"),alt:"Profile Pic"}),v.a.createElement("div",{className:"chat-message-right"},v.a.createElement("span",{className:"chat-user"},e.anonymous?v.a.createElement(b.Fragment,null,v.a.createElement("span",{style:{marginRight:4}},"Anonymous"),v.a.createElement(G.default,{owner:!0},v.a.createElement(I.default,{tooltip:e.user,placement:"right"},v.a.createElement("i",{className:"fas fa-user-secret"})))):e.user)," - ",v.a.createElement("span",{className:"chat-time"},Object(K.default)(e.time)),v.a.createElement("br",null),v.a.createElement("span",{className:"chat-message-content",dangerouslySetInnerHTML:a})))}))),v.a.createElement(H.default,{className:"chat-textarea cancel",onEditorState:this.handleEditorStateChange,showStatusBar:!1,showColorPicker:!1,defaultValue:this.state.defaultValue,docId:this.state.docId,menu:{marks:W.marks,wraps:W.wraps,insert:[W.insert[0],W.insert[1],W.insert[5]]},ref:function(t){e.editorView=t},onKeyDown:function(t,n){n.stopPropagation(),"Enter"!==n.key||n.shiftKey||(n.preventDefault(),e.sendMessage())}}),v.a.createElement(L.default,{size:"sm",variant:"default",onClick:this.sendMessage,style:{float:"left"}},"Send Message"),this.props.chat.anonymousSubmissions?v.a.createElement(L.default,{size:"sm",variant:"default",onClick:this.sendAnonymousChatMessage,style:{float:"left",marginLeft:"4px"}},"Send Anonymously"):null,v.a.createElement(B.default,{id:this.props.chat.name,reference:this,commands:q}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.chat,a=t.left,o=t.width,r={position:U.default?"absolute":"fixed",left:a};this.state.maximized&&this.state.opened?r.width="40vw":r.width=o,r.minWidth="275px";var i="chat_"+n.name;return v.a.createElement(D.default,{cancel:".cancel",onEscape:this.props.chat.canLeave?this.closeChat:A.a},v.a.createElement("div",{id:i,className:"chat-outer-div",style:r,ref:function(t){e.chat=t}},v.a.createElement("div",{className:"chat-div",style:{opacity:this.state.opened?1:.7},onMouseOver:this.onMouseOver,onFocus:this.onMouseOver,onMouseOut:this.onMouseOut,onBlur:this.onMouseOut,tabIndex:0,role:"button"},n.name,v.a.createElement("span",{className:"chat-presence",style:{display:this.state.hasNews?"inline":"none"}}),n.canLeave?v.a.createElement(I.default,{tooltip:"Close (Esc)",placement:"bottom"},v.a.createElement("button",{className:"chat-header-button",onClick:this.closeChat,"aria-label":"Close (Esc)"},v.a.createElement("i",{className:"fas fa-times"}))):null,v.a.createElement(I.default,{tooltip:this.state.maximized?"Shrink":"Enlarge",placement:"bottom"},v.a.createElement("button",{className:"chat-header-button",onClick:this.toggleMaximize,"aria-label":this.state.maximized?"Shrink":"Enlarge"},v.a.createElement("i",{className:"far fa-window-maximize"}))),v.a.createElement(I.default,{tooltip:this.state.opened?"Minimize":"Maximize",placement:"left"},v.a.createElement("button",{className:"chat-header-button",onClick:this.toggleChat,"aria-label":this.state.opened?"Minimize":"Maximize"},v.a.createElement("i",{className:"far fa-window-minimize"})))),this.renderMembers(),this.renderChatBody()))}}]),n}(b.Component);Q.defaultProps={left:400,width:600},Q.propTypes={chat:y.a.object.isRequired,left:y.a.number,width:y.a.number},Q.contextType=j.SessionContext,t.default=Q},3718:function(e,t,n){"use strict";n.r(t),t.default=function(e){return new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",month:"short",day:"numeric"})}},3719:function(e){e.exports=JSON.parse('[{"command":"insertText","trigger":["insert"],"description":"Dictate your message","params":["text"],"regexp":"/insert[a-z]* (?<text>[\\\\s\\\\S]+)/i"},{"command":"sendMessage","trigger":["send"],"description":"Send message"}]')},3720:function(e,t,n){var a=n(37),o=n(3721);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var r={insert:"head",singleton:!1};a(o,r);e.exports=o.locals||{}},3721:function(e,t,n){(t=n(38)(!1)).push([e.i,".chat-outer-div {\n\ttop: 0;\n\tz-index: 1005;\n\tfont-size: 13px;\n\tfont-family: Open Sans;\n\tbox-shadow: 2px 2px 10px darkslategrey;\n\tbackground-color: #6c757d;\n}\n\n.chat-div {\n\tposition: absolute;\n\theight: 20px;\n\twidth: 100%;\n\ttop: 0;\n\tbackground-color: rgb(108, 117, 125);\n\tborder-left: solid 1px darkgrey;\n\tborder-bottom: solid 1px darkgrey;\n\tborder-right: solid 1px darkgrey;\n\tpadding-left: 5px;\n\tcolor: white;\n\tcursor: pointer;\n}\n\n.chat-presence {\n\twidth: 10px;\n\tmargin-left: 6px;\n\theight: 10px;\n\tbottom: 4px;\n\tbackground-color: darkorange;\n\tposition: absolute;\n\tborder-radius: 50%;\n\tbox-shadow: 0px 0px 3px darkgrey;\n}\n\n.chat-members {\n\tposition: relative;\n\theight: 20px;\n\tmargin-top: 20px;\n\twidth: 100%;\n\tbackground-color: whitesmoke;\n\tborder-left: solid 1px darkgrey;\n\tborder-bottom: solid 1px darkgrey;\n\tborder-right: solid 1px darkgrey;\n\tpadding-left: 5px;\n\toverflow: hidden;\n}\n\n.chat-body {\n\toverflow-y: scroll;\n\tpadding-left: 3px;\n\tpadding-right: 3px;\n\tpadding-top: 3px;\n}\n\n.chat-body-outer {\n\tbackground-color: white;\n\ttop: 32px;\n\tborder-left: solid 1px darkgrey;\n\tborder-bottom: solid 1px darkgrey;\n\tborder-right: solid 1px darkgrey;\n}\n\n.chat-picture {\n\twidth: 32px;\n\theight: 32px;\n\tborder-radius: 3px;\n}\n\n.chat-message {\n\twhite-space: pre-wrap;\n\tfont-family: Open Sans;\n\tfont-size: 1.1em;\n\tdisplay: flex;\n}\n\n.chat-message-right {\n\tflex: 1 1 0;\n\tpadding-left: 8px;\n}\n\n.chat-message-right img {\n\twidth: 50%;\n\theight: auto;\n}\n\n.chat-message-content {\n\tword-wrap: break-word;\n}\n\n.unread {\n\tbackground: linen;\n}\n\n.chat-user {\n\tcolor: steelblue;\n\tfont-weight: 600;\n}\n\n.chat-header-button {\n\tfloat: right;\n\theight: 20px;\n\tbackground: darkgrey;\n\ttext-align: center;\n\tborder: none;\n\tcursor: pointer;\n}\n\n.chat-time {\n\tfont-size: 0.8em;\n\tcolor: dimgray;\n}\n\n.chat-textarea {\n\tfont-size: 13px;\n\tline-height: 16px;\n\tmax-height: 150px;\n\toverflow-y: auto;\n\tbackground: white;\n}\n\n.chat-textarea:focus {\n\tbackground-color: ghostwhite;\n}\n\n.chat-textarea:hover:not(:focus) {\n\tbackground-color: gainsboro;\n\tcursor: text;\n}\n\n.chatexit:hover {\n\tbackground: lightcoral;\n}\n",""]),e.exports=t},3722:function(e,t,n){"use strict";n.r(t);var a=n(5),o=n.n(a),r=n(6),i=n.n(r),s=n(3),l=n.n(s),c=n(7),u=n.n(c),d=n(8),p=n.n(d),m=n(4),f=n.n(m),h=n(2),g=n.n(h),b=n(0),v=n.n(b),E=n(1),y=n.n(E),x=n(22),w=n.n(x),S=n(104),C=n.n(S),k=n(10),T=n(33),O=n(759),N=n(280),R=n(39),M=n(55);function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var o=f()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return p()(this,n)}}var L=w()("isle:statusbar:voice-control"),P=function(e){u()(n,e);var t=_(n);function n(e){var a;return o()(this,n),a=t.call(this,e),g()(l()(a),"handleFinalVoiceInput",(function(e){var t=e[0],n=a.state.transcript;n.push(t),a.setState({transcript:n,recordedText:t,isSegment:!1},a.renderRecordedText),setTimeout((function(){a.setState({recordedText:null},a.renderRecordedText)}),3e3);var o=a.props.session;o.log({id:M.VOICE_TEXT,type:M.VOICE_TEXT,value:t,noSave:!0},"members"),o.speechInterface.check(e,{onStart:function(){a.voiceInput.stop()},onEnd:function(){a.voiceInput.start()}})})),g()(l()(a),"handleVoiceInput",(function(e){L("Received voice input: "+e);var t=e[0];a.setState({recordedText:t,isSegment:!0},a.renderRecordedText),a.props.session.log({id:M.VOICE_TEXT_SEGMENT,type:M.VOICE_TEXT_SEGMENT,value:t,noSave:!0},"members")})),g()(l()(a),"handleStartRecording",(function(){a.props.session.setVoiceRecordingStatus(!0)})),g()(l()(a),"handleStopRecording",(function(){a.setState({recordedText:null},a.renderRecordedText),a.props.session.setVoiceRecordingStatus(!1)})),g()(l()(a),"toggleTranscriptEditor",(function(e){e&&e.stopPropagation(),a.setState({showTranscriptEditor:!a.state.showTranscriptEditor})})),g()(l()(a),"handleVoiceInputChange",(function(e){e.stopPropagation()})),g()(l()(a),"renderRecordedText",(function(){a.state.recordedText?a.displayedText.innerHTML=a.state.recordedText:a.displayedText.innerHTML=""})),a.state={recordedText:null,transcript:[],showTranscriptEditor:!1,isSegment:!1},a}return i()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.session;this.unsubscribe=t.subscribe((function(t,n){t===M.MEMBER_ACTION&&(n.type===M.VOICE_TEXT?(e.setState({recordedText:n.value,isSegment:!1},e.renderRecordedText),setTimeout((function(){e.setState({recordedText:null},e.renderRecordedText)}),3e3)):n.type===M.VOICE_TEXT_SEGMENT&&e.setState({recordedText:n.value,isSegment:!0},e.renderRecordedText))}))}},{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"render",value:function(){var e=this,t=this.props.session,n="";if(this.state.showTranscriptEditor){var a=new Date;n+="# Transcript for ISLE lesson ".concat(t.namespaceName+"/"+t.lessonName),C()(t.user)||(n+="\n## by ".concat(t.user.name," (").concat(t.user.email,")")),n+="\n### ".concat(a.toLocaleDateString()," - ").concat(a.toLocaleTimeString()),n+="\n\n\n",n+=this.state.transcript.join("\n")}return v.a.createElement(b.Fragment,null,v.a.createElement("div",{className:"statusbar-voice",style:{display:t.config.hideVoiceControl?"none":"inherit"}},v.a.createElement(N.default,{id:"statusbar-voice",onClick:this.handleVoiceInputChange,ref:function(t){e.voiceInput=t},mode:"microphone",width:18,height:18,stopTooltip:"Disable voice recording / control (F9)",startTooltip:"Enable voice recording / control (F9)",onSegment:this.handleVoiceInput,onFinalText:this.handleFinalVoiceInput,onRecordingStart:this.handleStartRecording,onRecordingStop:this.handleStopRecording,maxAlternatives:5,remote:{toggle:120}})),this.state.transcript.length>0?v.a.createElement(R.default,{placement:"bottom",tooltip:"Open transcript"},v.a.createElement("span",{role:"button",tabIndex:0,onClick:this.toggleTranscriptEditor,onKeyPress:this.toggleTranscriptEditor,className:"statusbar-transcript-editor statusbar-icon"},v.a.createElement("span",{className:"fa fa-xs fa-closed-captioning"}))):null,v.a.createElement("span",{ref:function(t){e.displayedText=t},style:{color:this.state.isSegment?"darkslategray":"black"},className:"statusbar-voice-text"}),this.state.showTranscriptEditor?v.a.createElement(T.default,{show:this.state.showTranscriptEditor,onHide:this.toggleTranscriptEditor,dialogClassName:"modal-100w"},v.a.createElement(T.default.Header,{closeButton:!0},v.a.createElement(T.default.Title,{as:"h3"},"Transcript")),v.a.createElement(T.default.Body,{style:{height:.8*window.innerHeight}},v.a.createElement(O.default,{id:"".concat(t.namespaceName,"-").concat(t.lessonName,"-transcript"),defaultValue:n,allowSubmissions:!1,resetModal:{title:"Load latest transcript",body:"Clicking this button will discard the current file and load the latest transcript.",buttonLabel:"Confirm",tooltip:"Load latest transcript",notificationTitle:"Transcript loaded",notification:"The current file has been successfully discarded and the latest transcript loaded into the editor.",icon:v.a.createElement("i",{className:"prosemirror-icon fa fa-closed-captioning"})},canLoadHTML:!1})),v.a.createElement(T.default.Footer,null,v.a.createElement(k.default,{onClick:this.toggleTranscriptEditor},"Close"))):null)}}]),n}(b.Component);P.propTypes={session:y.a.object.isRequired},t.default=P},3723:function(e,t,n){"use strict";n.r(t);var a=n(5),o=n.n(a),r=n(6),i=n.n(r),s=n(3),l=n.n(s),c=n(7),u=n.n(c),d=n(8),p=n.n(d),m=n(4),f=n.n(m),h=n(2),g=n.n(h),b=n(0),v=n.n(b),E=n(1),y=n.n(E),x=n(22),w=n.n(x),S=n(290),C=n.n(S),k=n(3724),T=n(124),O=n(10),N=n(104),R=n.n(N),M=n(41),_=n.n(M),L=n(32),P=n.n(L),A=n(49),D=n(255),B=n.n(D),I=n(45),G=n.n(I),z=n(173),V=n.n(z),U=n(345),j=n.n(U),F=n(85),H=n.n(F),W=n(67),K=n(129),q=n(1658),J=n(158),X=n(39),Y=n(760),Q=n(28),Z=n(20),$=n(961),ee=n(608),te=n(30),ne=n(3725),ae=n(3726),oe=n(3693),re=n(3694),ie=n(3727),se=n(55),le=n(14);n(3728);function ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var o=f()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return p()(this,n)}}function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function de(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(n),!0).forEach((function(t){g()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pe=w()("isle:group-manager"),me={multiValue:function(e){return de(de({},e),{},{boxShadow:"0 0 2px black",marginRight:"4px"})},control:function(e){return de(de({},e),{},{borderRadius:"0 0 4px 4px"})}},fe={MultiValueLabel:function(e){return v.a.createElement(X.default,{tooltip:e.data.value.email,placement:"bottom"},v.a.createElement("span",null,v.a.createElement("img",{className:"group-manager-profile-pic",alt:"User Profile",src:e.data.value.picture}),v.a.createElement(T.y.MultiValueLabel,e)))}};function he(e,t){var n=e;if(!t)return n.filter((function(e){return!e.owner&&!e.exitTime&&P()(e.email,"@")}));for(var a=t.members,o=[],r=0;r<n.length;r++){var i=n[r];!i.owner&&P()(a,i.email)&&o.push(i)}return o}function ge(e,t){var n=0;if(t)for(var a=t.members,o=0;o<e.length;o++){var r=e[o];r.owner||r.exitTime||!P()(a,r.email)||(n+=1)}else for(var i=0;i<e.length;i++){var s=e[i];s.owner||s.exitTime||!P()(s.email,"@")||(n+=1)}return n}function be(e){for(var t=[],n=_()(e.responseVisualizers),a=0;a<n.length;a++){var o=n[a],r=e.responseVisualizers[o].ref.props.data.question;r=Object(A.isPrimitive)(r)?r:C()(r),t.push("".concat(r," (").concat(o,")"))}return t}function ve(e,t){t=j()(t);for(var n={},a=G()(t.length/e),o=0;o<e;o++)n[o]=t.slice(a*o,a*(o+1));for(var r=a*e;r<t.length;r++){n[r%e].push(t[r])}return n}function Ee(e){var t,n=e.nGroups,a=e.users,o=e.mode,r=e.progress,i=e.matching,s=V()(ie,{size:n,replace:!1});switch(o){case"random":t=ve(n,a);break;case"progress":t=function(e,t,n,a){var o={},r=G()(t.length/e);if(t=t.sort((function(e,t){return n[e.email]-n[t.email]})),"similar"===a)for(var i=t.length%e,s=0,l=0;s<e;s++){var c=r*s+l;s<i&&(l+=1);var u=r*(s+1)+l;o[s]=t.slice(c,u)}else{for(var d=0;d<e;d++)o[d]=[];for(var p=0,m=!1;t.length>0;)o[p].push(m?t.shift():t.pop()),p<e-1?p+=1:(p=0,m=!m)}return o}(n,a,r,i);break;case"answers":t=ve(n,a)}for(var l=[],c=0;c<s.length;c++)l[c]=new ae.default(s[c],t[c]);return l}var ye=function(e){u()(n,e);var t=ce(n);function n(e){var a;return o()(this,n),a=t.call(this,e),g()(l()(a),"handleGroupCreation",(function(){var e=a.context,t=Ee({nGroups:a.state.nGroups,users:he(e.userList,e.selectedCohort),mode:a.state.activeMode,progress:e.userProgress,matching:a.state.matching});e.createGroups(t)})),g()(l()(a),"reuseLastGroups",(function(){a.context.createGroups(a.state.lastGroups)})),g()(l()(a),"updateGroups",(function(){for(var e=a.context,t=e.allGroups,n=function(e){for(var n=a.state.toRemove[e].value,o=n.email,r=n.group,i=0;i<t.length;i++)if(t[i].name===r){t[i].members=t[i].members.filter((function(e){return e.email!==o}));break}},o=0;o<a.state.toRemove.length;o++)n(o);for(var r=function(n){for(var o=a.state.toAdd[n].value,r=0;r<t.length;r++){var i=t[r];if(i.name===o.group&&0===i.members.filter((function(e){return e.email===o.email})).length){var s=e.userList.filter((function(e){return e.email===o.email}));i.members.push(s[0]);break}}},i=0;i<a.state.toAdd.length;i++)r(i);e.deleteGroups(),e.createGroups(t),a.setState({toAdd:[],toRemove:[]})})),g()(l()(a),"handleGroupDeletion",(function(){var e=a.context;e.log({id:"group-manager",type:le.GROUP_MODE_END,value:!0},"members"),setTimeout(e.deleteGroups,6e4),a.setState({showCloseModal:!1})})),g()(l()(a),"sendMessageToAll",(function(){var e=a.editorView.markdown;if(0!==e.length){e=H()(e,"\\\n","\n");for(var t=a.context,n=0;n<t.allGroups.length;n++){var o=t.allGroups[n].name;t.sendChatMessage(o,e)}a.setState({message:"",docId:a.state.docId+1})}})),g()(l()(a),"toggleCloseConfirm",(function(){a.setState({showCloseModal:!a.state.showCloseModal})})),a.state={activeMode:"random",matching:"similar",nGroups:1,isClosing:!1,showCloseModal:!1,notAssigned:[],toRemove:[],toAdd:[],lastGroups:null,message:"",docId:0},a}return i()(n,[{key:"componentDidMount",value:function(){var e=this;pe("Component did mount...");var t=this.context;t&&(this.unsubscribe=t.subscribe((function(n,a){if(n===se.USER_JOINED&&t.allGroups.length>0&&!a.owner){if(!Object(ne.default)(t.allGroups,a)){var o=e.state.notAssigned.slice(),r=t.server+"/thumbnail/"+a.picture,i={value:{email:a.email,picture:r},label:a.name};o.push(i),e.setState({notAssigned:o})}}else if(n===se.DELETED_GROUPS)t.removeNotification(e.closeNotification),e.setState({isClosing:!1,lastGroups:a});else if(n===se.MEMBER_ACTION&&a.type===le.GROUP_MODE_END)e.closeNotification=t.addNotification({title:"Groups will close soon.",message:"You have initiated closing the group mode. Please wait while students finish their work.",level:"info",position:"tr",dismissible:"none",autoDismiss:0,children:v.a.createElement(Y.default,{style:{position:"relative"},duration:60,active:!0})}),e.setState({isClosing:!0});else if(n===se.CREATED_GROUPS){var s=e.state.notAssigned.filter((function(e){for(var n=0;n<t.allGroups.length;n++)for(var a=t.allGroups[n].members,o=0;o<a.length;o++)if(a[o].email===e.value.email)return!1;return!0}));e.setState({notAssigned:s})}else if(n===se.USER_JOINED||n===se.SELECTED_COHORT)e.forceUpdate();else if(n===se.USER_LEFT){var l=e.state.notAssigned.filter((function(e){return e.value.email!==a}));e.setState({notAssigned:l})}})))}},{key:"componentWillUnmount",value:function(){pe("Component will unmount..."),this.unsubscribe()}},{key:"renderModeOptions",value:function(){var e=this,t=v.a.createElement(Z.default,{options:["similar","dissimilar"],value:this.state.matching,inline:!0,onChange:function(t){e.setState({matching:t})},style:{width:150}}),n=v.a.createElement(Z.default,{options:be(this.context),inline:!0,style:{width:412}});switch(this.state.activeMode){case"progress":return v.a.createElement("div",null,v.a.createElement("p",null,"Create groups by pairing students with ",t," progress."));case"answers":return v.a.createElement("div",null,v.a.createElement("p",null,"Create groups by pairing students with ",t," answers",v.a.createElement("br",null),"to the question ",n,"."));default:return v.a.createElement("div",null,v.a.createElement("p",null,"Create groups by randomly placing students into groups."))}}},{key:"renderGroups",value:function(){for(var e=this,t=this.context,n=[],a=function(a){var o=t.allGroups[a],r=o.name,i=o.members.map((function(e){var n=t.server+"/thumbnail/"+e.picture;return{value:{email:e.email,picture:n,group:r},label:e.name}}));n[a]=v.a.createElement("div",{key:a},v.a.createElement("h3",{className:"group-manager-header"},v.a.createElement("span",{className:"group-manager-header-name"},"Group ",r),e.props.video?v.a.createElement(q.default,{showTooltip:!1,for:r,subject:r,style:{float:"right",marginTop:-2,marginLeft:5}}):null,v.a.createElement(K.default,{showTooltip:!1,for:r,style:{float:"right",marginTop:-2}})),v.a.createElement(k.default,{components:fe,isMulti:!0,isClearable:!1,defaultValue:i,options:e.state.notAssigned,styles:me,menuPlacement:"bottom",onChange:function(t,n){if("remove-value"===n.action){var a=e.state.notAssigned.slice();a.push(n.removedValue);var o=e.state.toRemove.slice();o.push(n.removedValue),e.setState({notAssigned:a,toRemove:o})}else if("select-option"===n.action){var i=e.state.toAdd.slice();n.option.value.group=r,i.push(n.option);var s=e.state.notAssigned.filter((function(e){return e.value.email!==n.option.value.email}));e.setState({notAssigned:s,toAdd:i})}}}))},o=0;o<t.allGroups.length;o++)a(o);return this.state.notAssigned.length>0&&n.push(v.a.createElement("span",{className:"group-manager-not-assigned-warning"},"There are currently ",this.state.notAssigned.length," users not assigned to any group.")),n}},{key:"renderBody",value:function(){var e=this,t=this.context,n=ge(t.userList,t.selectedCohort),a=G()(n/this.state.nGroups),o="(group sizes: ".concat(a);return n%this.state.nGroups!=0?o+="-".concat(a+1,")"):o+=")",t.allGroups.length>0?v.a.createElement(b.Fragment,null,this.renderGroups(),v.a.createElement("div",{className:"group-manager-editor-wrapper"},v.a.createElement($.default,{className:"group-manager-textarea cancel",showStatusBar:!1,defaultValue:this.state.message,showColorPicker:!1,menu:{marks:ee.marks,wraps:ee.wraps,insert:[ee.insert[0],ee.insert[1],ee.insert[5]]},ref:function(t){e.editorView=t},onKeyDown:function(t,n){n.stopPropagation(),"Enter"!==n.key||n.shiftKey||(n.preventDefault(),e.sendMessageToAll())}}))):v.a.createElement(b.Fragment,null,v.a.createElement(re.default,{id:"group-manager-cohort-select",label:"Pair users from:",session:this.context}),v.a.createElement(Q.default,{legend:"Number of Groups",value:this.state.nGroups,min:1,max:G()(B()(n/2+1e-9),99),onChange:function(t){e.setState({nGroups:t})},inline:!0,inputStyle:{width:50}}),v.a.createElement("span",{className:"title"},o),v.a.createElement("hr",null),v.a.createElement("div",null,v.a.createElement(X.default,{tooltip:"Random assignment",placement:"bottom"},v.a.createElement(O.default,{active:"random"===this.state.activeMode,size:"lg",variant:"outline-secondary",onClick:function(){"random"!==e.state.activeMode&&e.setState({activeMode:"random"})},"aria-label":"Random assignment"},v.a.createElement("span",{className:"fa fa-dice"}))),v.a.createElement(X.default,{tooltip:"Match by progress",placement:"bottom"},v.a.createElement(O.default,{active:"progress"===this.state.activeMode,size:"lg",variant:"outline-secondary",style:{marginLeft:6},onClick:function(){"progress"!==e.state.activeMode&&e.setState({activeMode:"progress"})},"aria-label":"Match by progress"},v.a.createElement("span",{className:"fa fa-trophy"}))),v.a.createElement(X.default,{tooltip:"Match by answers",placement:"bottom"},v.a.createElement(O.default,{active:"answers"===this.state.activeMode,disabled:R()(t.responseVisualizers),size:"lg",variant:"outline-secondary",style:{marginLeft:6},onClick:function(){"answers"!==e.state.activeMode&&e.setState({activeMode:"answers"})},"aria-label":"Match by answers"},v.a.createElement("span",{className:"fa fa-poll"})))),v.a.createElement("br",null),this.renderModeOptions())}},{key:"renderFooter",value:function(){var e=this.context,t=ge(e.userList);return e.allGroups.length>0?v.a.createElement(b.Fragment,null,v.a.createElement(X.default,{tooltip:"Broadcast message to all groups",placement:"bottom"},v.a.createElement(O.default,{onClick:this.sendMessageToAll},"Broadcast Message")),v.a.createElement(X.default,{tooltip:"Students have sixty seconds to finish their work once group closure is initiated",placement:"bottom"},v.a.createElement(O.default,{variant:"danger",disabled:this.state.isClosing,onClick:this.toggleCloseConfirm,style:{float:"right"}},"Close Groups")),this.state.toAdd.length>0||this.state.toRemove.length>0?v.a.createElement(X.default,{tooltip:"Apply changes to the group compositions and send them out",placement:"bottom"},v.a.createElement(O.default,{onClick:this.updateGroups,style:{float:"right",marginRight:6}},"Update Groups")):null):v.a.createElement(b.Fragment,null,v.a.createElement(X.default,{tooltip:"Reuse the last group assignment",placement:"bottom",show:this.state.lastGroups},v.a.createElement(O.default,{variant:"secondary",disabled:!this.state.lastGroups,onClick:this.reuseLastGroups},"Reopen Last Groups")),v.a.createElement(X.default,{tooltip:"Create group assignments via the selected method",placement:"bottom",show:t>0},v.a.createElement(O.default,{disabled:0===t,onClick:this.handleGroupCreation,style:{float:"right"}},"Create Groups")))}},{key:"render",value:function(){return this.props.active?v.a.createElement(b.Fragment,null,v.a.createElement(J.default,{cancel:".card-body",default:{x:.4*window.innerWidth}},v.a.createElement(W.default,{minimizable:!0,header:v.a.createElement("span",null,v.a.createElement("span",{className:"fa fa-xs fa-user-friends",style:{marginRight:5}}),"Group Manager"),onHide:this.props.onHide,style:{width:600},bodyStyle:{maxHeight:"75vh"},footer:this.renderFooter()},this.renderBody())),v.a.createElement(oe.default,{show:this.state.showCloseModal,close:this.toggleCloseConfirm,title:"Close Groups",message:"Do you really want to close the groups?",onConfirm:this.handleGroupDeletion})):null}}]),n}(b.Component);ye.contextType=te.SessionContext,ye.propTypes={video:y.a.bool},ye.defaultProps={video:!1},t.default=ye},3724:function(e,t,n){"use strict";n.r(t),n.d(t,"defaultProps",(function(){return y})),n.d(t,"makeCreatableSelect",(function(){return x}));n(260);var a=n(13),o=n(140),r=n(214),i=n(174),s=n(175),l=n(176),c=n(177),u=n(178),d=n(15),p=n(27),m=n(0),f=n.n(m),h=(n(73),n(46),n(1),n(343),n(163)),g=n(437),b=(n(307),n(795),n(796),n(1022)),v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=String(e).toLowerCase(),a=String(t.value).toLowerCase(),o=String(t.label).toLowerCase();return a===n||o===n},E={formatCreateLabel:function(e){return'Create "'.concat(e,'"')},isValidNewOption:function(e,t,n){return!(!e||t.some((function(t){return v(e,t)}))||n.some((function(t){return v(e,t)})))},getNewOptionData:function(e,t){return{label:t,value:e,__isNew__:!0}}},y=Object(r.default)({allowCreateWhileLoading:!1,createOptionPosition:"last"},E),x=function(e){var t,n;return n=t=function(t){function n(e){var t;Object(i.default)(this,n),t=Object(l.default)(this,Object(c.default)(n).call(this,e)),Object(p.default)(Object(d.default)(Object(d.default)(t)),"select",void 0),Object(p.default)(Object(d.default)(Object(d.default)(t)),"onChange",(function(e,n){var a=t.props,r=a.getNewOptionData,i=a.inputValue,s=a.isMulti,l=a.onChange,c=a.onCreateOption,u=a.value,d=a.name;if("select-option"!==n.action)return l(e,n);var p=t.state.newOption,m=Array.isArray(e)?e:[e];if(m[m.length-1]!==p)l(e,n);else if(c)c(i);else{var f=r(i,i),g={action:"create-option",name:d};l(s?[].concat(Object(o.default)(Object(h.f)(u)),[f]):f,g)}}));var a=e.options||[];return t.state={newOption:void 0,options:a},t}return Object(u.default)(n,t),Object(s.default)(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.allowCreateWhileLoading,n=e.createOptionPosition,a=e.formatCreateLabel,r=e.getNewOptionData,i=e.inputValue,s=e.isLoading,l=e.isValidNewOption,c=e.value,u=e.options||[],d=this.state.newOption;d=l(i,Object(h.f)(c),u)?r(i,a(i)):void 0,this.setState({newOption:d,options:!t&&s||!d?u:"first"===n?[d].concat(Object(o.default)(u)):[].concat(Object(o.default)(u),[d])})}},{key:"focus",value:function(){this.select.focus()}},{key:"blur",value:function(){this.select.blur()}},{key:"render",value:function(){var t=this,n=this.state.options;return f.a.createElement(e,Object(a.default)({},this.props,{ref:function(e){t.select=e},options:n,onChange:this.onChange}))}}]),n}(m.Component),Object(p.default)(t,"defaultProps",y),n},w=x(g.S),S=Object(b.m)(w);t.default=S},3725:function(e,t,n){"use strict";n.r(t),t.default=function(e,t){for(var n=0;n<e.length;n++)for(var a=e[n],o=0;o<a.members.length;o++)if(a.members[o].email===t.email)return a;return null}},3726:function(e,t,n){"use strict";n.r(t);var a=n(5),o=n.n(a);t.default=function e(t,n){o()(this,e),this.name=t,this.members=n}},3727:function(e){e.exports=JSON.parse('["daffodil","dahlia","daisy","dandelion","forget-me-not","foxglove","geranium","lily","orchid","pansy","poppy","primrose","rose","snowdrop","sunflower","tulip","waterlily","bluebell","buttercup","carnation","chrysanthemum","crocus","alder","ash","beech","birch","cedar","elm","fir","hazel","hawthorn","holly","lime","maple","oak","plane","pine","poplar","sycamore","weeping-willow","willow","yew","apple-tree","cherry-tree","chestnut-tree","coconut-tree","fig-tree","horse-chestnut-tree","olive-tree","pear-tree","plum-tree"]')},3728:function(e,t,n){var a=n(37),o=n(3729);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var r={insert:"head",singleton:!1};a(o,r);e.exports=o.locals||{}},3729:function(e,t,n){(t=n(38)(!1)).push([e.i,".group-manager-profile-pic {\n\twidth: 32px;\n\theight: 32px;\n\tfloat: left;\n}\n\n.group-manager-header {\n\tbackground: gainsboro;\n\tborder-radius: 4px 4px 0 0;\n\tborder-left: solid 1px darkgray;\n\tborder-right: solid 1px darkgray;\n\tborder-top: solid 1px darkgray;\n\tpadding: 4px 2px 4px 8px;\n\tmargin-bottom: 0;\n\tmargin-top: 8px;\n}\n\n.group-manager-header-name {\n\tfont-variant: petite-caps;\n}\n\n.group-manager-editor-wrapper {\n\tmargin-top: 6px;\n\tmargin-bottom: 6px;\n\tborder: 2px solid darkgray;\n}\n\n.group-manager-textarea {\n\tfont-size: 13px;\n\tline-height: 16px;\n\tmax-height: 125px;\n\toverflow-y: auto !important;\n\tbackground: white;\n}\n\n.group-manager-not-assigned-warning {\n\tcolor: orange;\n}\n",""]),e.exports=t},3730:function(e,t,n){"use strict";n.r(t);var a=n(5),o=n.n(a),r=n(6),i=n.n(r),s=n(7),l=n.n(s),c=n(8),u=n.n(c),d=n(4),p=n.n(d),m=n(0),f=n.n(m),h=n(1),g=n.n(h),b=n(379),v=n(168),E=n(67),y=n(158),x=n(1658),w=n(760),S=n(30),C=n(55),k=n(14);n(3731);function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=p()(e);if(t){var o=p()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return u()(this,n)}}var O=function(e){l()(n,e);var t=T(n);function n(e){return o()(this,n),t.call(this,e)}return i()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.context;this.unsubscribe=t.subscribe((function(n,a){n===C.CREATED_GROUPS?e.forceUpdate():n===C.DELETED_GROUPS?(t.removeNotification(e.closeNotification),e.forceUpdate()):n===C.MEMBER_ACTION&&a.type===k.GROUP_MODE_END&&(e.closeNotification=t.addNotification({title:"Groups will close soon.",message:"The instructor has closed the group mode. Please finish your work in the remaining time.",level:"info",position:"tr",dismissible:"none",autoDismiss:0,children:f.a.createElement(w.default,{style:{position:"relative"},duration:60,active:!0})}))}))}},{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"renderMembers",value:function(){var e=this.context,t=e.group.members;return f.a.createElement(b.default,null,t.map((function(t,n){var a=e.server+"/thumbnail/"+t.picture;return f.a.createElement(v.default,{className:"group-client-list-item",key:n},f.a.createElement("img",{className:"group-client-user-picture",alt:"User Profile",src:a,height:"".concat(40,"px"),width:"".concat(40,"px")}),f.a.createElement("span",null,t.name))})))}},{key:"render",value:function(){var e=this.context;return e.group?f.a.createElement(y.default,{default:{x:window.innerWidth-280}},f.a.createElement(E.default,{minimizable:!0,header:f.a.createElement("span",null,f.a.createElement("span",{className:"fa fa-xs fa-user-friends",style:{marginRight:5}}),f.a.createElement("span",{className:"group-name"},"Group ",e.group.name)),className:"group-client-panel"},this.renderMembers(),this.props.video?f.a.createElement(x.default,{for:e.group.name}):null)):null}}]),n}(m.Component);O.contextType=S.SessionContext,O.propTypes={video:g.a.bool},O.defaultProps={video:!1},t.default=O},3731:function(e,t,n){var a=n(37),o=n(3732);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var r={insert:"head",singleton:!1};a(o,r);e.exports=o.locals||{}},3732:function(e,t,n){(t=n(38)(!1)).push([e.i,".group-client-user-picture {\n\tfloat: left;\n\tmargin-right: 6px;\n}\n\n.group-client-list-item {\n\tpadding: 0 4px 0 0;\n\talign-items: center;\n\tdisplay: flex;\n}\n\n.group-name {\n\tfont-variant: all-petite-caps;\n}\n\n.group-client-panel {\n\twidth: max-content;\n\tz-index: 1001;\n}\n",""]),e.exports=t},3733:function(e,t,n){"use strict";n.r(t);var a=n(5),o=n.n(a),r=n(6),i=n.n(r),s=n(3),l=n.n(s),c=n(7),u=n.n(c),d=n(8),p=n.n(d),m=n(4),f=n.n(m),h=n(2),g=n.n(h),b=n(0),v=n.n(b),E=n(22),y=n.n(E),x=n(39),w=n(30),S=n(55);n(3734);function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=f()(e);if(t){var o=f()(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return p()(this,n)}}var k=y()("isle:statusbar-score"),T=function(e){u()(n,e);var t=C(n);function n(e,a){var r;return o()(this,n),r=t.call(this,e),g()(l()(r),"handleClick",(function(e){e.stopPropagation()})),r.state={score:a.get("score"),isReceiving:!1,addition:4},r}return i()(n,[{key:"componentDidMount",value:function(){var e=this;k("Component did mount...");var t=this.context;t&&(this.unsubscribe=t.subscribe((function(t,n){t===S.SELF_UPDATED_SCORE&&e.addScore(n)})))}},{key:"componentWillUnmount",value:function(){k("Component will unmount..."),this.unsubscribe()}},{key:"addScore",value:function(e){var t=this;this.setState({addition:e,isReceiving:!0}),setTimeout((function(){var n=t.state.score+e;t.setState({score:n,isReceiving:!1})}),2e3)}},{key:"getAnimation",value:function(){return this.state.isReceiving&&this.rect?v.a.createElement("div",{className:"receiving-score",style:{left:this.rect.x,top:this.rect.y,transformOrigin:"".concat(this.rect.width/2,"px ").concat(this.rect.height/2,"px")}},"+",this.state.addition,v.a.createElement("div",{className:"receiving-score-outer-circle2"}),v.a.createElement("div",{className:"receiving-score-outer-circle"})):null}},{key:"render",value:function(){var e=this;return v.a.createElement(b.Fragment,null,v.a.createElement(x.default,{placement:"bottom",tooltip:"Achievement points"},v.a.createElement("div",{className:"statusbar-score",role:"button",ref:function(t){if(t){var n=t.getBoundingClientRect();n&&n.x>0&&n.y>0&&(e.rect=n)}},onClick:this.handleClick,onKeyPress:this.handleClick,tabIndex:0},this.state.score)),this.getAnimation())}}]),n}(b.Component);T.contextType=w.SessionContext,t.default=T},3734:function(e,t,n){var a=n(37),o=n(3735);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var r={insert:"head",singleton:!1};a(o,r);e.exports=o.locals||{}},3735:function(e,t,n){(t=n(38)(!1)).push([e.i,"#Lesson .statusbar-score {\n\tposition: relative;\n\tfloat: left;\n\twidth: 44px;\n\tanimation: anim-fade-in 0.7s;\n\tcolor: darkslategray;\n\tfont-weight: 600;\n\tbackground-color: #e9ecef;\n\theight: 16px;\n\tfont-size: 10px;\n\tborder: solid 1px darkgray;\n\ttext-align: center;\n\tborder-radius: 0.25rem;\n}\n\n@keyframes anim-scale-down-rotate {\n\t0% {\n\t\ttransform: scale(1) rotate(20deg);\n\t}\n\n\t100% {\n\t\ttransform: scale(0) rotate(-20deg);\n\t}\n}\n\n#Lesson .receiving-score {\n\tposition: fixed;\n\twidth: 100px;\n\theight: 100px;\n\tbackground-color: rgb(130, 224, 160) !important;\n\tborder-radius: 50%;\n\tz-index: 100;\n\tfont-size: 70px;\n\ttext-align: center;\n\tfont-family: Open Sans Condensed;\n\tanimation: focus-in 0.6s, anim-scale-down-rotate 2s 0.3s forwards;\n\ttransform: rotate(20deg);\n}\n\n.receiving-score-outer-circle {\n\tposition: absolute;\n\ttop: 0;\n\tbottom: 0;\n\tleft: 0;\n\tright: 0;\n\tmargin: auto;\n\tborder-radius: 50%;\n\tborder-right: solid 3px white;\n\twidth: 90%;\n\theight: 90%;\n\tanimation: rotating 4s infinite;\n}\n\n\n.receiving-score-outer-circle2 {\n\tposition: absolute;\n\ttop: 0;\n\tbottom: 0;\n\tleft: 0;\n\tright: 0;\n\tmargin: auto;\n\tborder-radius: 50%;\n\tborder-left: solid 2px var(--bg);\n\twidth: 90%;\n\theight: 90%;\n\tanimation: rotating-reverse 2.3s infinite;\n}\n\n@-webkit-keyframes rotating {\n\tfrom {\n\t\t-webkit-transform: rotate(0deg);\n\t}\n\n\tto {\n\t\t-webkit-transform: rotate(720deg);\n\t}\n}\n\n@-webkit-keyframes rotating-reverse {\n\tfrom {\n\t\t-webkit-transform: rotate(720deg);\n\t}\n\n\tto {\n\t\t-webkit-transform: rotate(0deg);\n\t}\n}\n",""]),e.exports=t},3736:function(e,t,n){var a=n(37),o=n(3737);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var r={insert:"head",singleton:!1};a(o,r);e.exports=o.locals||{}},3737:function(e,t,n){(t=n(38)(!1)).push([e.i,".statusbar {\n\tposition: fixed;\n\twidth: 34%;\n\tmin-width: 420px;\n\theight: 48px;\n\tleft: 0;\n\tright: 0;\n\tmargin: auto;\n\tz-index: 1004;\n\topacity: 0.95;\n\tcursor: pointer;\n\ttransition: opacity 0.4s ease-in-out;\n}\n\n.statusbar-progress {\n\tposition: absolute;\n\theight: 12px;\n\ttop: 50px;\n\tmargin: auto;\n\tleft: 0;\n\tright: 0;\n\twidth: 83%;\n}\n\n.statusbar-cohort {\n\tposition: absolute;\n\ttop: 3px;\n\tleft: 10px;\n\tfont-family: 'Open Sans Condensed';\n\tfont-variant-caps: petite-caps;\n\tfont-size: 16px;\n\tcolor: #6c757d;\n}\n\n.statusbar-icon {\n\topacity: 0.6;\n\tposition: absolute;\n\tz-index: 2;\n\twidth: 18px;\n\theight: 18px;\n}\n\n.statusbar-icon:hover {\n\topacity: 1;\n}\n\n.outer-statusbar-progress-bar {\n\tfloat: left;\n\tmargin-left: 3px;\n\tmargin-right: 3px;\n\twidth: calc(100% - 126px);\n\theight: 16px;\n}\n\n.statusbar-progress .progress-bar {\n\tfont-variant: small-caps;\n\tcolor: darkslategray;\n\tfont-size: 10px;\n\tfont-weight: 600;\n}\n\n.statusbar-progress .bg-success {\n\tbackground-color: rgb(130, 224, 160) !important;\n}\n\n.statusbar-progress .progress-time {\n\tanimation: anim-fade-in 0.7s;\n\tfloat: left;\n\tcolor: darkslategray;\n\ttext-align: center;\n\tfont-weight: 600;\n\tbackground-color: #e9ecef;\n\twidth: 70px;\n\theight: 16px;\n\tfont-size: 10px;\n\tborder: solid 1px darkgray;\n\tborder-radius: 0.25rem;\n}\n\n.progress-fade-out {\n\tanimation: anim-fade-out 2s 2s forwards;\n}\n\n.statusbar:hover {\n\topacity: 1;\n}\n\n.statusbar-upper {\n\tposition: absolute;\n\tleft: 0;\n\ttop: 0;\n\twidth: 100%;\n\theight: 32px;\n\tbackground: purple;\n\tz-index: 2;\n}\n\n.statusbar-smooth {\n\tbackground-color: rgb(232, 232, 232);\n}\n\n.statusbar-button {\n\tmargin-top: 2px;\n\tfont-family: Open Sans Condensed;\n\tfont-weight: 700;\n\tfont-variant-caps: all-petite-caps;\n\tfont-size: 20px;\n\tpadding-left: 0.5rem;\n\tpadding-right: 0.5rem;\n\tline-height: 1;\n\tpadding-top: 0;\n\tpadding-bottom: 0.15rem;\n\tbox-shadow: 0 0 2px grey inset;\n\tborder-radius: 0;\n\tborder: solid 1px darkgray;\n}\n\n.statusbar-button:hover {\n\tbackground: #c49978;\n\tbox-shadow: 0 0 4px white inset;\n}\n\n.statusbar-left {\n\tposition: absolute;\n\tleft: 0;\n\twidth: 20%;\n\theight: 100%;\n\tbackground-color: rgb(232, 232, 232);\n\ttransform: skewX(45deg);\n\tborder-left: solid 1px darkgrey;\n\tborder-bottom: solid 1px darkgrey;\n\toverflow: hidden;\n\tborder-bottom-left-radius: 10px;\n}\n\n.statusbar-middle {\n\tposition: absolute;\n\tleft: 10%;\n\twidth: 80%;\n\theight: 100%;\n\tbackground-color: rgb(232, 232, 232);\n\tborder-bottom: solid 1px darkgrey;\n\tz-index: 5;\n}\n\n.statusbar-right {\n\tposition: absolute;\n\tleft: 80%;\n\twidth: 20%;\n\theight: 100%;\n\tbackground-color: rgb(232, 232, 232);\n\ttransform: skewX(-45deg);\n\tborder-bottom: solid 1px darkgrey;\n\tborder-right: solid 1px darkgrey;\n\tborder-bottom-right-radius: 10px;\n}\n\n.statusbar-text {\n\tcolor: #2e4468;\n\tbottom: -1px;\n\theight: auto;\n\tposition: absolute;\n\tright: 0px;\n\tfont-size: 12px;\n\tfont-family: Open Sans Condensed;\n\tfont-weight: 700;\n\tz-index: 2;\n}\n\n.statusbar-voice {\n\tleft: 0px;\n\tbottom: 5px;\n\tposition: absolute;\n\tz-index: 2;\n}\n\n.statusbar-presentation-mode {\n\tleft: 36px;\n\tbottom: 3px;\n}\n\n.statusbar-blackscreen-mode {\n\tleft: 56px;\n\tbottom: 3px;\n}\n\n.statusbar-group-manager {\n\tleft: 72px;\n\tbottom: 3px;\n}\n\n.statusbar-video-chat {\n\tright: 60px;\n\tbottom: 0px;\n\tfont-size: 12px;\n\tbox-shadow: none;\n\tpadding: 0;\n}\n\n.statusbar-text-chat {\n\tright: 42px;\n\tbottom: 0px;\n\tfont-size: 12px;\n\tbox-shadow: none;\n\tpadding: 0;\n}\n\n.statusbar-transcript-editor {\n\tleft: 18px;\n\tbottom: 3px;\n}\n\n#blackscreen {\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\tz-index: 1003;\n\twidth: 100vw;\n\theight: 100vh;\n\tbackground-color: #000;\n\topacity: 0.95;\n\tanimation: anim-fade-in 2s;\n}\n\n.statusbar-voice-text {\n\tposition: fixed;\n\tfont-size: 2em;\n\ttop: 20px;\n\tmargin: auto;\n\tpadding-right: 10px;\n\tpadding-left: 10px;\n\tright: 0;\n\tleft: 0;\n\tz-index: 1004;\n\twidth: 55vw;\n\tmin-width: 420px;\n\tbackground: #add8e6;\n\tpointer-events: none;\n}\n\n.statusbar-username {\n\tbottom: -1px;\n\theight: auto;\n\tmargin-left: 35%;\n\tposition: absolute;\n\tfont-size: 14px;\n\tfont-family: Open Sans;\n\tfont-variant-caps: all-petite-caps;\n}\n\n@-webkit-keyframes turn {\n\tfrom {\n\t\t-webkit-transform: rotate(0deg);\n\t}\n\n\tto {\n\t\t-webkit-transform: rotate(360deg);\n\t}\n}\n\n.statusbar-presence {\n\twidth: 10px;\n\tleft: 30%;\n\theight: 10px;\n\tbottom: 3px;\n\tposition: absolute;\n\tborder-radius: 50%;\n\tborder: solid 1px black;\n\tz-index: 2;\n}\n\n.statusbar-inner-presence {\n\tposition: absolute;\n\ttop: -3px;\n\tleft: -3px;\n\twidth: 14px;\n\theight: 14px;\n\tborder-left: solid 1px darkslategray;\n\tborder-radius: 50%;\n\tz-index: 1;\n\t-webkit-animation: turn 5s linear infinite;\n\t-webkit-animation-duration: 2s;\n}\n\n.statusbar-profile {\n\twidth: 33px;\n\theight: 33px;\n\tborder: solid 1px darkgray;\n\tborder-radius: 0.25rem;\n\tmargin-left: -35px;\n\tmargin-top: -18px;\n\tfloat: left;\n}\n\n#unfinished-container {\n\tposition: fixed;\n\twidth: 100%;\n\theight: 100%;\n\ttop: 0;\n\tleft: 0;\n\tz-index: 2;\n\tbackground-color: rgba(0, 0, 0, 0.5);\n}\n\n#unfinished-elem {\n\tposition: absolute;\n\tanimation: swing-in-right-fwd 1.2s;\n\ttop: 50%;\n\tleft: 50%;\n\twidth: 100%;\n}\n\n.statusbar-presentation-mode-lone-icon {\n\tleft: 12px;\n\tposition: fixed;\n\ttop: 6px;\n\tcursor: pointer;\n\topacity: 0.75;\n\tz-index: 2;\n}\n\n.cohort-select {\n\twidth: 150px;\n\tbackground-color: ghostwhite;\n\tpadding: 2px;\n}\n",""]),e.exports=t}}]);