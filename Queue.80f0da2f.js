(window.webpackJsonp=window.webpackJsonp||[]).push([[189],{1040:function(e,t,n){"use strict";t.a=function(e){var t=1;return function(){return t+=1,"".concat(e,"-").concat(t)}}},4325:function(e,t,n){"use strict";n.r(t);n(362),n(355),n(365),n(861);var i=n(368),s=n.n(i),a=(n(523),n(993),n(994),n(359)),u=n.n(a),o=n(361),r=n.n(o),c=n(378),l=n.n(c),d=n(366),h=n.n(d),p=n(367),m=n.n(p),f=n(364),v=n.n(f),q=n(357),b=n.n(q),g=n(0),S=(n(338),n(413)),y=n.n(S),z=n(5306),w=n(715),x=n(417),k=n(965),H=n(793),N=n(1058),C=n(2905),Q=n(544),E=n.n(Q),T=n(454),W=n.n(T),O=n(1040),R=n(509),P=n(784),D=n(972),L=n(618),K=n(442),j=n(453),F=n(635),I=(n(116),n(609)),M=n(5359);I.a.addResources("de","queue",M.DE),I.a.addResources("en","queue",M.EN),I.a.addResources("es","queue",M.ES);n(288);function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=v()(e);if(t){var s=v()(this).constructor;n=Reflect.construct(i,arguments,s)}else n=i.apply(this,arguments);return m()(this,n)}}var B=y()("isle:queue"),U=Object(O.a)("queue"),_=s()("i",{className:"fas fa-check"}),J=s()("br",{}),Z=s()("br",{}),A=function(e){h()(n,e);var t=Y(n);function n(e){var i;return u()(this,n),i=t.call(this,e),b()(l()(i),"handleText",(function(e){i.setState({questionText:e.target.value})})),b()(l()(i),"handleEscape",(function(e){e.target.className&&e.target.className.includes("queue-panel")&&i.props.onHide()})),b()(l()(i),"handleKeyPress",(function(e){13===e.charCode&&i.state.questionText.length>0&&i.enterQueue()})),b()(l()(i),"enterQueue",(function(){B("Send the signal to enter the queue..."),i.setState({inQueue:!0,spot:i.state.queueSize+1},(function(){i.context.log({id:i.id,type:j.hb,value:i.state.questionText,noSave:!1},"members")}))})),b()(l()(i),"leaveQueue",(function(){i.context.log({id:i.id,type:j.ub,value:i.state.spot},"members")})),b()(l()(i),"renderChatButton",(function(e){var t=i.context,n=e.original.name+"-"+t.user.name;return s()(P.a,{tooltip:i.props.t("queue-start-chat"),for:n})})),b()(l()(i),"renderButtonRemovable",(function(e){return s()(R.a,{placement:"left",tooltip:i.props.t("mark-and-remove")},void 0,s()(x.a,{variant:"secondary",size:"sm",onClick:function(){i.context.log({id:i.id,type:j.ub,value:e.index+1},"members")}},void 0,_))})),B("Invoking constructor..."),i.id=e.id||U(),i.state={arr:[],inQueue:!1,spot:null,questionText:"",queueSize:0},i}return r()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.context;t&&(B("We have a session, subscribe the component..."),this.unsubscribe=t.subscribe((function(n,i){if(n===F.L&&t.isOwner())t.log({id:e.id,type:j.ec,value:e.state.queueSize,noSave:!0},"members");else if(n===F.M&&t.isOwner()){for(var s=-1,a=0;a<e.state.arr.length;a++){e.state.arr[a].email===i&&(s=a)}if(s>=0){var u=e.state.arr.slice();u.splice(s-1,1);var o=e.state.queueSize-1;e.setState({arr:u,queueSize:o},(function(){t.log({id:e.id,type:j.ec,value:o,noSave:!0},"members")}))}}if(i&&i.id===e.id)if(i.type===j.hb){B("Someone is entering the queue");var r=e.state.queueSize+1;t.isOwner()&&(e.state.arr.push({name:i.name,email:i.email,question:i.value,spot:r}),e.setState({arr:e.state.arr,queueSize:r},(function(){t.log({id:e.id,type:j.ec,value:e.state.queueSize,noSave:!0},"members"),e.props.onNewQuestion()})))}else if(i.type===j.ub){B("Someone has been removed from the queue");var c=Number(i.value),l=W()(e.state.queueSize-1,0);if(e.state.spot)c<e.state.spot?e.setState({spot:W()(e.state.spot-1,0)}):c===e.state.spot&&e.setState({spot:null,inQueue:!1,questionText:""});else if(t.isOwner()){var d=e.state.arr.slice();d.splice(c-1,1),e.setState({arr:d,queueSize:l},(function(){t.log({id:e.id,type:j.ec,value:l,noSave:!0},"members")}))}}else if(i.type===j.ec){var h=Number(i.value);e.props.onQueueSize(h),e.setState({queueSize:h})}else e.forceUpdate()})))}},{key:"componentWillUnmount",value:function(){this.unsubscribe&&this.unsubscribe()}},{key:"render",value:function(){var e,t=this.context;if(this.props.show){if(t.isOwner())return B("User is an owner..."),e=s()(L.a,{className:"queue-panel",tabIndex:0,role:"button",header:this.props.t("queue"),onHide:this.props.onHide,minimizable:!0},void 0,0===this.state.arr.length?s()("p",{},void 0,this.props.t("no-questions")):s()(C.a,{className:"queue-table",showPageSizeOptions:!1,data:this.state.arr,resizable:!1,sortable:!1,columns:[{Header:" # ",id:"queueSpot",accessor:"spot",width:36},{Header:"Pic",id:"pic",accessor:function(e){for(var n=t.userList,i=0;i<n.length;i++)if(n[i].name===e.name)return n[i].picture;return""},Cell:function(e){return s()("img",{className:"queue-table-pic",alt:"User thumbnail",src:"".concat(t.server,"/thumbnail/").concat(e.value)})},maxWidth:46,minWidth:46,style:{color:"darkslategrey"}},{Header:this.props.t("name"),id:"nameCol",accessor:"name",width:150,Cell:function(e){return s()(R.a,{tooltip:"".concat(e.value," (").concat(e.original.email,")")},void 0,s()("span",{className:"queue-table-name"},void 0,e.value))}},{Header:this.props.t("cohort"),id:"cohortCol",accessor:function(e){for(var n=t.cohorts,i=0;i<n.length;i++)if(E()(n[i].members,e.email))return n[i].title;return""}},{Header:this.props.t("question"),id:"qCol",accessor:"question",width:350,style:{"white-space":"unset"}},{Header:this.props.t("chat"),Cell:this.renderChatButton},{Header:"",accessor:"remove",Cell:this.renderButtonRemovable,filterable:!1,width:45}],pageSize:8})),this.props.draggable&&(e=s()(D.a,{bounds:"#Lesson",cancel:".queue-table",onEscape:this.handleEscape,resizable:!0,minWidth:300,minHeight:150},void 0,e)),e;var n=this.state.questionText,i=this.state.spot,a=this.state.queueSize;if(this.state.inQueue){var u="Queue_"+t.user.name+"_"+this.state.spot;return e=s()(L.a,{className:"queue-panel",tabIndex:0,role:"button",header:this.props.t("queue"),onHide:this.props.onHide,minimizable:!0},void 0,s()("p",{},void 0,s()(z.a,{i18nKey:"queue-status"},void 0,"Your question: ",s()("i",{},void 0,{question:n}),J,"You are currently at position ",s()("strong",{},void 0,{spot:i})," on the queue.",Z,"There are ",s()("strong",{},void 0,{size:a})," individual(s) in the queue.")),s()(P.a,{for:u,showTooltip:!1}),s()(x.a,{style:{marginLeft:10},size:"sm",onClick:this.leaveQueue},void 0,this.props.t("remove-myself-from-queue"))),this.props.draggable&&(e=s()(D.a,{bounds:"#Lesson",onEscape:this.handleEscape,resizable:!0,minWidth:300,minHeight:150},void 0,e)),e}return e=s()(L.a,{className:"queue-panel",tabIndex:0,role:"button",header:this.props.t("queue"),onHide:this.props.onHide,minimizable:!0},void 0,s()("p",{},void 0,this.props.t("queue-prompt")),s()(H.a,{},void 0,s()(N.a,{},void 0,this.props.t("question")),s()(k.a,{type:"text",id:"queue_form",value:this.state.questionText,onChange:this.handleText,onKeyPress:this.handleKeyPress,width:500})),s()(x.a,{disabled:0===this.state.questionText.length,onClick:this.enterQueue},void 0,this.props.t("submit-question")),s()("span",{style:{marginLeft:8}},void 0,this.props.t("queue-size",{n:this.state.queueSize}))),this.props.draggable&&(e=s()(D.a,{bounds:"#Lesson",cancel:"#queue_form",onEscape:this.handleEscape,resizable:!0,minWidth:300,minHeight:150},void 0,e)),e}return null}}]),n}(g.Component);A.defaultProps={draggable:!0,show:!0,onHide:function(){},onQueueSize:function(){},onNewQuestion:function(){}},A.contextType=K.a;t.default=Object(w.a)("queue")(A)},5359:function(e){e.exports=JSON.parse('{"DE":{"cohort":"Kohorte","mark-and-remove":"Mark question as answered and remove","name":"Name","no-questions":"Zur Zeit sind keine Fragen in der Warteschlange.","queue":"Warteschlange","queue-prompt":"Sie k\xf6nnen unten eine Frage einreichen und es wird sich in K\xfcrze jemand bei Ihnen melden!","queue-status":"Deine Frage: <1>{{question}}</1><br /> Du bist momentan an Position <4>{{spot}}</> der Warteschlange.<br /> Es befinden sich <8>{{size}}</8> andere Personen in der Warteschlange. ","queue-size":"(es befinden sich derzeit {{n}} Einzelperson(en) in der Warteschlange)","queue-start-chat":"Chat mit Sch\xfcler beginnen","question":"Frage","remove-myself-from-queue":"Mich aus der Warteschlange entfernen","submit-question":"Frage einreichen"},"EN":{"cohort":"Cohort","mark-and-remove":"Mark question as answered and remove","name":"Name","no-questions":"There are currently no questions in the queue.","queue":"Queue","queue-prompt":"You can submit a question below and someone will be with you shortly!","queue-status":"Your question: <1>{{question}}</1><br /> You are currently at position <4>{{spot}}</4> on the queue.<br /> There are <8>{{size}}</8> individual(s) in the queue. ","queue-size":"(there are currently {{n}} individual(s) in the queue)","queue-start-chat":"Start chat with student","question":"Question","remove-myself-from-queue":"Remove me from queue","submit-question":"Submit Question"},"ES":{}}')},784:function(e,t,n){"use strict";var i=n(351),s=Object(i.a)((function(){return n.e(102).then(n.bind(null,1259))}));t.a=s},972:function(e,t,n){"use strict";var i=n(351),s=Object(i.a)((function(){return Promise.all([n.e(0),n.e(310),n.e(114)]).then(n.bind(null,2122))}));t.a=s}}]);