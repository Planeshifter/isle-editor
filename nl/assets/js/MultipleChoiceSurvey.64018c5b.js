(window.webpackJsonp=window.webpackJsonp||[]).push([[217],{5272:function(t,e,n){"use strict";n.r(e);n(386),n(374),n(387);var s=n(372),i=n.n(s),a=n(378),r=n.n(a),o=n(380),u=n.n(o),c=n(395),l=n.n(c),d=n(384),p=n.n(d),v=n(385),f=n.n(v),m=n(383),h=n.n(m),b=n(375),w=n.n(b),y=n(0),S=(n(364),n(5288)),A=n(401),g=n(495),C=n(441),O=n(467),k=n(1307),x=n(457),q=n(425),D=n.n(q),M=n(1431),R=n.n(M),B=n(2557),N=n.n(B),j=n(667),J=n(704),T=n(818),P=n(1019),Q=n(1324),z=n(446),F=n(450),L=n(397),Y=n(1011),E=function(t){return t.disabled?i()(Y.a,{},void 0,t.answerContent):i()(Y.a,{onClick:t.onAnswerSelected,active:t.active},void 0,t.answerContent)};n(298);function G(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,s=h()(t);if(e){var i=h()(this).constructor;n=Reflect.construct(s,arguments,i)}else n=s.apply(this,arguments);return f()(this,n)}}Object(L.a)("Survey");var H=D()("isle:multiple-choice-survey"),I=Object(j.a)("multiple-choice-survey"),K=function(t){p()(n,t);var e=G(n);function n(t){var s;r()(this,n),s=e.call(this,t),w()(l()(s),"submitQuestion",(function(){var t=s.props.t,e=s.context;e.log({id:s.id,type:F.Bb,value:s.state.active,anonymous:s.props.anonymous},"members"),s.props.allowMultipleAnswers||s.setState({submitted:!0}),e.addNotification({title:t("submitted"),message:t("answer-submitted"),level:"success"}),s.props.onSubmit(s.state.active)})),w()(l()(s),"onData",(function(t){var e=s.props.t;H("MultipleChoiceSurvey is receiving data: "+JSON.stringify(t));var n,a=N()(t),r=a.map((function(t){return{x:s.props.answers[t[0]],y:t[1]}}));n=i()("table",{className:"table table-bordered"},void 0,i()("tr",{},void 0,i()("th",{},void 0,e("category")),i()("th",{},void 0,e("count")),i()("th",{},void 0,e("relative-frequency"))),a.map((function(t,e){return i()("tr",{},e,t.map((function(t,n){return 0===n?t=s.props.answers[t]:2===n&&(t=t.toFixed(3)),i()("td",{},"".concat(e,":").concat(n),t)})))}))),s.setState({data:r,freqTable:n})})),w()(l()(s),"renderAnswerOptionsSingle",(function(t,e){return i()(E,{no:e,answerContent:t,active:s.state.active===e,submitted:s.state.submitted,onAnswerSelected:function(){s.state.submitted||s.setState({active:e,answerSelected:!0})}},e)})),w()(l()(s),"renderAnswerOptionsMultiple",(function(t,e){return i()(E,{no:e,answerContent:t,active:s.state.active[e],submitted:s.state.submitted,onAnswerSelected:function(){if(!s.state.submitted){var t=s.state.active.slice();t[e]=!t[e],s.setState({active:t})}}},t)}));var a=t.multipleAnswers?new Array(t.answers.length):null;return s.id=t.id||I(t),s.state={data:[],submitted:!1,active:a,answerSelected:!1},s}return u()(n,[{key:"renderChart",value:function(){var t=this.props.t;return R()(this.state.data)?i()("h3",{},void 0,t("no-responses-yet")):i()(J.a,{data:[{x:this.state.data.map((function(t){return t.x})),y:this.state.data.map((function(t){return t.y})),type:"bar"}],layout:{width:400,height:300},removeButtons:!0})}},{key:"render",value:function(){var t,e=this.props,n=e.answers,s=e.multipleAnswers,a=e.question,r=e.t;return t=s?this.state.submitted:this.state.submitted||!this.state.answerSelected,i()(T.a,{user:!0,banner:i()("h2",{},void 0,r("sign-in"))},void 0,i()(x.a,{id:this.id,style:this.props.style},void 0,i()(x.a.Body,{style:{overflowY:"auto"}},void 0,i()(O.a,{},void 0,i()(C.a,{},void 0,i()(g.a,{md:6},void 0,i()(x.a,{body:!0,className:"multiple-choice-survey"},void 0,i()("p",{},void 0,i()("label",{},void 0,a)),s?i()("span",{},void 0,r("multiple-answers")):null,i()(k.a,{fill:!0},void 0,s?n.map(this.renderAnswerOptionsMultiple):n.map(this.renderAnswerOptionsSingle)),i()(A.a,{size:"small",variant:"success",block:!0,fill:!0,onClick:this.submitQuestion,disabled:t},void 0,this.state.submitted?"Submitted":"Submit"))),i()(g.a,{md:6},void 0,i()(Q.a,{for:[this.id],onData:this.onData}),this.renderChart(),i()("p",{},void 0,this.state.freqTable)))),i()(P.a,{buttonLabel:r("responses"),id:this.id,data:{type:"factor",levels:this.props.answers},info:F.Bb}))))}}]),n}(y.Component);K.defaultProps={question:"",allowMultipleAnswers:!1,anonymous:!1,answers:[],multipleAnswers:!1,style:{},onSubmit:function(){}},K.contextType=z.a;e.default=Object(S.a)("Survey")(K)}}]);