/*! For license information please see Engagement.cb38917a.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[295],{1354:function(e,t,s){"use strict";var n=s(406),a=s(408),r=s(409),i=s.n(r),o=s(0),l=s.n(o),c=s(411),u=s(562);function d(e,t,s){var n=(e-t)/(s-t)*100;return Math.round(1e3*n)/1e3}function p(e,t){var s,r=e.min,o=e.now,c=e.max,u=e.label,p=e.srOnly,f=e.striped,v=e.animated,m=e.className,h=e.style,b=e.variant,g=e.bsPrefix,y=Object(a.a)(e,["min","now","max","label","srOnly","striped","animated","className","style","variant","bsPrefix"]);return l.a.createElement("div",Object(n.a)({ref:t},y,{role:"progressbar",className:i()(m,g+"-bar",(s={},s["bg-"+b]=b,s[g+"-bar-animated"]=v,s[g+"-bar-striped"]=v||f,s)),style:Object(n.a)({width:d(o,r,c)+"%"},h),"aria-valuenow":o,"aria-valuemin":r,"aria-valuemax":c}),p?l.a.createElement("span",{className:"sr-only"},u):u)}var f=l.a.forwardRef((function(e,t){var s=e.isChild,r=Object(a.a)(e,["isChild"]);if(r.bsPrefix=Object(c.a)(r.bsPrefix,"progress"),s)return p(r,t);var d=r.min,f=r.now,v=r.max,m=r.label,h=r.srOnly,b=r.striped,g=r.animated,y=r.bsPrefix,w=r.variant,N=r.className,O=r.children,R=Object(a.a)(r,["min","now","max","label","srOnly","striped","animated","bsPrefix","variant","className","children"]);return l.a.createElement("div",Object(n.a)({ref:t},R,{className:i()(N,y)}),O?Object(u.b)(O,(function(e){return Object(o.cloneElement)(e,{isChild:!0})})):p({min:d,now:f,max:v,label:m,srOnly:h,striped:b,animated:g,bsPrefix:y,variant:w},t))}));f.displayName="ProgressBar",f.defaultProps={min:0,max:100,animated:!1,isChild:!1,srOnly:!1,striped:!1},t.a=f},2642:function(e,t,s){"use strict";var n=s(553);s.d(t,"a",(function(){return n.a}));var a=s(487);s.d(t,"b",(function(){return a.b}));var r=s(506);s.d(t,"c",(function(){return r.a}));s(581),s(772),s(745),s(851)},2712:function(e,t,s){"use strict";var n=s(406),a=s(408),r=s(409),i=s.n(r),o=s(0),l=s.n(o),c=s(411),u=l.a.forwardRef((function(e,t){var s=e.bsPrefix,r=e.className,o=e.striped,u=e.bordered,d=e.borderless,p=e.hover,f=e.size,v=e.variant,m=e.responsive,h=Object(a.a)(e,["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"]),b=Object(c.a)(s,"table"),g=i()(r,b,v&&b+"-"+v,f&&b+"-"+f,o&&b+"-striped",u&&b+"-bordered",d&&b+"-borderless",p&&b+"-hover"),y=l.a.createElement("table",Object(n.a)({},h,{className:g,ref:t}));if(m){var w=b+"-responsive";return"string"==typeof m&&(w=w+"-"+m),l.a.createElement("div",{className:w},y)}return y}));t.a=u},477:function(e,t,s){"use strict";var n=s(406),a=s(408),r=s(409),i=s.n(r),o=s(0),l=s.n(o),c=s(411),u=["xl","lg","md","sm","xs"],d=l.a.forwardRef((function(e,t){var s=e.bsPrefix,r=e.className,o=e.noGutters,d=e.as,p=void 0===d?"div":d,f=Object(a.a)(e,["bsPrefix","className","noGutters","as"]),v=Object(c.a)(s,"row"),m=v+"-cols",h=[];return u.forEach((function(e){var t,s=f[e];delete f[e];var n="xs"!==e?"-"+e:"";null!=(t=null!=s&&"object"==typeof s?s.cols:s)&&h.push(""+m+n+"-"+t)})),l.a.createElement(p,Object(n.a)({ref:t},f,{className:i.a.apply(void 0,[r,v,o&&"no-gutters"].concat(h))}))}));d.displayName="Row",d.defaultProps={noGutters:!1},t.a=d},562:function(e,t,s){"use strict";s.d(t,"b",(function(){return r})),s.d(t,"a",(function(){return i}));var n=s(0),a=s.n(n);function r(e,t){var s=0;return a.a.Children.map(e,(function(e){return a.a.isValidElement(e)?t(e,s++):e}))}function i(e,t){var s=0;a.a.Children.forEach(e,(function(e){a.a.isValidElement(e)&&t(e,s++)}))}},606:function(e,t,s){"use strict";var n=s(405),a=Object(n.a)((function(){return s.e(193).then(s.bind(null,865))}));t.a=a},6255:function(e,t,s){"use strict";var n=s(6256);e.exports=n},6256:function(e,t,s){"use strict";var n=s(530).isPrimitive,a=s(415);e.exports=function(e){var t,s,r,i,o;if(!n(e))throw new TypeError("invalid argument. Must provide a positive integer. Value: `"+e+"`.");return s=new Array(e),r=0,o=-1,i=0,function(n){var l;if(0===arguments.length)return 0===i?null:r;if(o=(o+1)%e,a(n))i=e,r=NaN;else if(i<e)r+=(t=n-r)/(i+=1);else if(a(s[o])){for(i=1,r=n,l=0;l<e;l++)if(l!==o){if(a(s[l])){i=e,r=NaN;break}i+=1,t=s[l]-r,r+=t/i}}else!1===a(r)&&(t=n-s[o],r+=t/e);return s[o]=n,r}}},6257:function(e,t,s){"use strict";var n=s(6258);e.exports=n},6258:function(e,t,s){"use strict";var n=s(530).isPrimitive,a=s(415),r=s(427),i=s(457);e.exports=function(e){var t,s,o,l,c;if(!n(e))throw new TypeError("invalid argument. Must provide a positive integer. Value: `"+e+"`.");return t=new Array(e),s=r,o=i,c=-1,l=0,function(n){var r,i;if(0===arguments.length)return 0===l?null:o-s;c=(c+1)%e,0===n&&(n=0);if(a(n))l=e,s=n,o=n;else if(l<e)l+=1,n<s&&(s=n),n>o&&(o=n);else if(t[c]===s&&n>s||t[c]===o&&n<o||a(t[c])){for(s=n,o=n,i=0;i<e;i++)if(i!==c){if(r=t[i],a(r)){s=r,o=r;break}r<s&&(s=r),r>o&&(o=r)}}else n<s?s=n:n>o&&(o=n);return t[c]=n,o-s}}},6447:function(e,t,s){"use strict";s.r(t);s(421);var n=s(407),a=s.n(n),r=s(414),i=s.n(r),o=s(416),l=s.n(o),c=s(418),u=s.n(c),d=s(419),p=s.n(d),f=s(417),v=s.n(f),m=s(0),h=(s(404),s(533)),b=s(458),g=s(448),y=s.n(g),w=(s(664),s(450)),N=s.n(w),O=s(1971),R=s(423),x=s(589),C=s(687),j=s(490),k=s(477),P=s(714),S=s(518),H=s(645),E=s(2642),T=s(772),z=s(1496),B=s(1498),D=s(1493),V=s(1513),A=N()("isle:survey-generator"),M="survey-generator",q=function(e){var t=e.session,s=e.onHide,n=Object(m.useState)([]),r=y()(n,2),i=r[0],o=r[1],l=Object(m.useState)(""),c=y()(l,2),u=c[0],d=c[1],p=Object(m.useState)("free-text"),f=y()(p,2),v=f[0],g=f[1],w=Object(m.useState)(!1),N=y()(w,2),q=N[0],F=N[1],G=Object(m.useState)(!0),L=y()(G,2),W=L[0],J=L[1],U=Object(m.useState)(!0),I=y()(U,2),Y=I[0],_=I[1],K=Object(O.a)("Toolbar").t,Q=Object(V.a)();Object(m.useEffect)((function(){var e=t.subscribe((function(e,t){A("Received member action..."),e===h.n&&M===t.id&&(t.type===b.uc?(A("Should start the survey..."),d(t.value.question),g(t.value.type),o(t.value.answers),F(!0)):t.type===b.yc?(A("Should stop the survey..."),F(!1)):Q())}));return function(){e()}}),[Q,t]),Object(m.useEffect)((function(){var e;e=!(u.length>3&&(i.length>1||"multiple-choice"!==v)),_(e)}),[i,u,v]);var X,Z=Object(m.useCallback)((function(e){var t=e.split("\n"),s=!0;u.length>3&&t.length>1&&(s=!1),o(t),_(s)}),[u]),$=Object(m.useCallback)((function(){q?t.log({id:M,type:b.yc,value:null},"members"):t.log({id:M,type:b.uc,value:{answers:i,type:v,question:u}},"members")}),[i,t,u,q,v]);return X=q?a()("div",{},void 0,"multiple-choice"===v?a()(z.a,{user:!0,question:u,answers:i,id:M+":multiple-choice-survey",anonymous:W}):null,"number"===v?a()(B.a,{user:!0,question:u,id:M+":number-survey",anonymous:W}):null,"free-text"===v?a()(D.a,{user:!0,question:u,answers:i,id:M+":free-text-survey",anonymous:W}):null,a()("label",{},void 0,W?"":K("survey-not-anonymous")),a()(H.a,{owner:!0},void 0,a()(R.a,{disabled:Y,onClick:$,style:{float:"right"}},void 0,K("stop-survey")))):a()(H.a,{owner:!0,banner:a()("h3",{},void 0,K("survey-not-started"))},void 0,a()(x.a,{},void 0,a()(k.a,{},void 0,a()(j.a,{md:3},void 0,a()(C.a,{htmlFor:"survey-select-input"},void 0,K("type"),":")),a()(j.a,{md:9},void 0,a()(E.c,{id:"survey-select-input",defaultValue:v,options:["multiple-choice","number","free-text"],onChange:g})))),a()(x.a,{},void 0,a()(T.a,{legend:K("question"),onChange:d,rows:2})),"multiple-choice"===v?a()(x.a,{},void 0,a()(T.a,{legend:K("answer-options-new-line-delimited"),onChange:Z})):null,a()(E.a,{tooltip:K("anonymous-survey-tooltip"),tooltipPlacement:"top",legend:K("anonymous-survey"),defaultValue:!0,onChange:J}),a()(R.a,{disabled:Y,onClick:$},void 0,K("start-survey"))),a()(P.a,{dragHandleClassName:"card-header"},void 0,a()(S.a,{header:K("survey"),minimizable:!0,className:"survey-generator",onHide:t.isOwner()?s:null,hideTooltip:K("finish-survey")},void 0,X))},F=s(424),G=s.n(F),L=s(412),W=s.n(L),J=(s(465),s(482),s(4095)),U=s(2712),I=s(4038),Y=s(483),_=s(606),K=Object(J.a)("Toolbar")((function(e){return a()(P.a,{dragHandleClassName:"card-header"},void 0,a()(S.a,{className:"engagement-meter-panel",header:e.t("poll-responses"),onHide:e.onHide,minimizable:!0,style:{width:400}},void 0,a()(I.a,{className:"engagement-table",showPageSizeOptions:!1,data:e.responses,resizable:!1,sortable:!1,columns:[{Header:"Pic",id:"pic",accessor:function(t){for(var s=e.session.userList,n=0;n<s.length;n++)if(s[n].name===t.name)return s[n].picture;return""},Cell:function(t){return a()("img",{className:"engagement-table-pic",alt:"User thumbnail",src:"".concat(e.session.server,"/thumbnail/").concat(t.value)})},maxWidth:38,minWidth:38,style:{color:"darkslategrey"}},{Header:e.t("name"),id:"nameCol",accessor:"name",width:180,Cell:function(e){return a()(Y.a,{tooltip:"".concat(e.value," (").concat(e.original.email,")")},void 0,a()("span",{className:"engagement-table-name"},void 0,e.value))}},{Header:e.t("response"),id:"responseCol",accessor:"value",Cell:e.renderValue,maxWidth:38,minWidth:38},{Header:e.t("chat"),Cell:function(t){var s="Chat with ".concat(t.original.name);return a()(_.a,{tooltip:e.t("chat-tooltip"),showTooltip:!1,for:s})}}],pageSize:8})))}));function Q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,n=v()(e);if(t){var a=v()(this).constructor;s=Reflect.construct(n,arguments,a)}else s=n.apply(this,arguments);return p()(this,s)}}var X,Z="ENGAGEMENT_BINARY",$=function(e){u()(s,e);var t=Q(s);function s(e){var n;return i()(this,s),n=t.call(this,e),W()(G()(n),"toggleResponses",(function(){n.setState({showResponses:!n.state.showResponses})})),n.state={nLeft:0,nRight:0,responses:[],showResponses:!1},n}return l()(s,[{key:"componentDidMount",value:function(){var e,t,s,n=this,r=this.props.session;switch(r&&(this.unsubscribe=r.subscribe((function(e,t){if(e===h.n&&t.id===Z&&t.type===b.cc){var s=n.state.responses.slice();s.push({name:t.name,email:t.email,value:t.value}),1===t.value?n.setState({nRight:n.state.nRight+1,responses:s}):-1===t.value&&n.setState({nLeft:n.state.nLeft+1,responses:s})}}))),this.props.type){case"yes:no":e="fas fa-times",t="fas fa-check",s=this.props.t("answer-yes-no");break;case"too-slow:too-fast":e="fas fa-backward",t="fas fa-forward",s=this.props.t("answer-slow-fast")}if(!r.isOwner())var i=r.addNotification({title:this.props.t("poll"),message:s,level:"info",position:"tc",dismissible:"none",autoDismiss:0,children:a()("div",{style:{marginBottom:"40px",marginTop:"10px"}},void 0,a()(R.a,{variant:"secondary",style:{float:"left"},onClick:function(){r.log({id:Z,type:b.cc,value:-1}),r.removeNotification(i),r.addNotification({title:n.props.t("answer-recorded"),message:n.props.t("answer-recorded-message"),level:"success",position:"tc"})}},void 0,a()("i",{className:e})),a()(R.a,{variant:"secondary",style:{float:"right"},onClick:function(){r.log({id:Z,type:b.cc,value:1}),r.removeNotification(i),r.addNotification({title:n.props.t("answer-recorded"),message:n.props.t("answer-recorded-message"),level:"success",position:"tc"})}},void 0,a()("i",{className:t})))})}},{key:"render",value:function(){var e,t;switch(this.props.type){case"yes:no":e="fas fa-times",t="fas fa-check";break;case"too-slow:too-fast":e="fas fa-backward",t="fas fa-forward"}var s=this.props.t,n=a()(U.a,{bordered:!0,size:"sm"},void 0,a()("thead",{},void 0,a()("tr",{},void 0,a()("th",{},void 0,a()("i",{className:e})),a()("th",{},void 0,a()("i",{className:t})))),a()("tbody",{},void 0,a()("tr",{},void 0,a()("td",{},void 0,this.state.nLeft),a()("td",{},void 0,this.state.nRight))));return a()(m.Fragment,{},void 0,a()(P.a,{dragHandleClassName:"card-header"},void 0,a()(H.a,{owner:!0},void 0,a()(S.a,{header:s("poll"),hideTooltip:s("finish-poll"),onHide:this.props.onHide,className:"engagement-meter-panel",minimizable:!0},void 0,n,a()(R.a,{variant:"link",onClick:this.toggleResponses},void 0,a()("small",{},void 0,s("toggle-details"))))),a()(H.a,{user:!0,notOwner:!0,header:s("poll")},void 0,a()(S.a,{header:s("poll"),className:"engagement-meter-panel",minimizable:!0},void 0,n))),this.state.showResponses?a()(K,{responses:this.state.responses,session:this.props.session,onHide:this.toggleResponses,renderValue:function(s){return-1===s.value?a()("i",{className:e}):a()("i",{className:t})}}):null)}}]),s}(m.Component),ee=Object(J.a)("Toolbar")($),te=s(1354),se=s(6255),ne=s.n(se),ae=s(6257),re=s.n(ae),ie=s(474),oe=s.n(ie),le=s(747),ce=s.n(le);function ue(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,n=v()(e);if(t){var a=v()(this).constructor;s=Reflect.construct(n,arguments,a)}else s=n.apply(this,arguments);return p()(this,s)}}var de=function(e){u()(s,e);var t=ue(s);function s(e){var n;return i()(this,s),n=t.call(this,e),W()(G()(n),"onControlledDrag",(function(e,t){var s=t.x,a=t.y;n.setState({controlledPosition:{x:s,y:a}})})),W()(G()(n),"onControlledDragStop",(function(e,t){var s=t.x,a=t.y;n.setState({controlledPosition:{x:s,y:a},progress:(s+100)/200*100})})),W()(G()(n),"handleSubmit",(function(){n.props.onSubmit(n.state.progress)})),n.state={progress:50,controlledPosition:{x:0,y:0}},n}return l()(s,[{key:"render",value:function(){return a()(m.Fragment,{},void 0,a()("div",{className:"score-bottom"},void 0,a()(ce.a,{bounds:{left:-100,right:100,top:0,bottom:0},onStop:this.onControlledDragStop,position:this.state.controlledPosition,onDrag:this.onControlledDrag},void 0,X||(X=a()("div",{className:"score-setter"}))),a()(te.a,{style:{marginTop:23}},void 0,a()(te.a,{animated:!0,variant:"success",now:this.state.progress}),a()(te.a,{animated:!0,variant:"danger",now:100-this.state.progress}))),a()(R.a,{variant:"secondary",size:"sm",onClick:this.handleSubmit,style:{marginTop:10}},void 0,this.props.t("submit")))}}]),s}(m.Component);function pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,n=v()(e);if(t){var a=v()(this).constructor;s=Reflect.construct(n,arguments,a)}else s=n.apply(this,arguments);return p()(this,s)}}var fe=function(e){u()(s,e);var t=pe(s);function s(e){var n;return i()(this,s),n=t.call(this,e),W()(G()(n),"toggleResponses",(function(){n.setState({showResponses:!n.state.showResponses})})),n.state={mean:null,range:null,responses:[],showResponses:!1},n.id=e.id||"engagement-meter",n.meanAcc=ne()(6),n.rangeAcc=re()(6),n}return l()(s,[{key:"componentDidMount",value:function(){var e=this,t=this.props.session;if(t&&(this.unsubscribe=t.subscribe((function(t,s){if(t===h.n&&s.id===e.id&&s.type===b.cc){var n=e.meanAcc(s.value),a=e.rangeAcc(s.value),r=e.state.responses.slice();r.push({name:s.name,email:s.email,value:s.value}),e.setState({mean:n,range:a,responses:r})}}))),!t.isOwner())var s=t.addNotification({title:this.props.t("poll"),message:this.props.t("meter-prompt"),level:"info",position:"tc",dismissible:"none",autoDismiss:0,children:a()(de,{t:this.props.t,onSubmit:function(t){var n=e.props.session;n.log({id:e.id,type:b.cc,value:t}),n.removeNotification(s),n.addNotification({title:e.props.t("answer-recorded"),message:e.props.t("answer-recorded-message"),level:"success",position:"tc"})}})})}},{key:"render",value:function(){return a()(m.Fragment,{},void 0,a()(P.a,{dragHandleClassName:"card-header"},void 0,a()(H.a,{owner:!0},void 0,a()(S.a,{header:this.props.t("poll"),hideTooltip:this.props.t("finish-poll"),onHide:this.props.onHide,className:"engagement-meter-panel",minimizable:!0},void 0,a()("div",{className:"score-bottom"},void 0,this.state.mean?a()(m.Fragment,{},void 0,a()(te.a,{style:{marginTop:23}},void 0,a()(te.a,{animated:!0,variant:"success",now:this.state.mean}),a()(te.a,{animated:!0,variant:"danger",now:100-this.state.mean}))):null),this.state.mean?a()("p",{},void 0,this.props.t("mean"),": ",oe()(this.state.mean,-2)," (n: ",this.state.responses.length,")"):null,this.state.range?a()("p",{},void 0,this.props.t("range"),": ",oe()(this.state.range,-2)):null,a()(R.a,{variant:"link",onClick:this.toggleResponses},void 0,a()("small",{},void 0,this.props.t("toggle-details")))))),this.state.showResponses?a()(K,{responses:this.state.responses,session:this.props.session,onHide:this.toggleResponses,renderValue:function(e){return e.value}}):null)}}]),s}(m.Component),ve=Object(J.a)("Toolbar")(fe);s(392);function me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var s,n=v()(e);if(t){var a=v()(this).constructor;s=Reflect.construct(n,arguments,a)}else s=n.apply(this,arguments);return p()(this,s)}}var he=function(e){u()(s,e);var t=me(s);function s(e){var n;return i()(this,s),(n=t.call(this,e)).state={inProgress:!1},n}return l()(s,[{key:"componentDidMount",value:function(){var e=this,t=this.props.session;this.unsubscribe=t.subscribe((function(t,s){if(t===h.n&&"engagement"===s.id){var n=s.type;n===b.hb?e.setState({inProgress:s.value}):n===b.gb&&e.setState({inProgress:!1})}}))}},{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"render",value:function(){switch(this.state.inProgress){case"yes:no":case"too-slow:too-fast":return a()(ee,{type:this.state.inProgress,session:this.props.session,onHide:this.props.onHide});case"like:dislike":return a()(ve,{session:this.props.session,onHide:this.props.onHide});case"survey":return a()(q,{session:this.props.session,onHide:this.props.onHide});default:return null}}}]),s}(m.Component);t.default=he}}]);