(window.webpackJsonp=window.webpackJsonp||[]).push([[398],{5802:function(e,t,a){"use strict";a.r(t);a(358),a(351),a(361);var n=a(352),r=a.n(n),o=a(353),i=a.n(o),l=a(356),c=a.n(l),s=a(357),u=a.n(s),d=a(354),v=a.n(d),f=a(350),p=a.n(f),g=a(359),h=a.n(g),b=a(0),y=(a(342),a(399)),m=a.n(y),w=a(894),V=a(388),C=a(428),F=a(579),R=a(509),P=a(472),x=a(501),S=a.n(x),q=a(471),D=a.n(q),T=a(1210),k=a.n(T),A=a(1211),G=a.n(A),j=a(632),O=a.n(j),B=a(1324),J=a(421),z=a(674);function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=v()(e);if(t){var r=v()(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return u()(this,a)}}var N=m()("isle:data-explorer:contingency-table"),X={numeric:!0},Y=h()("br",{}),E=h()(b.Fragment,{},void 0,h()("br",{}),"(1.0)"),I=h()("th",{},void 0,"Row Totals"),K=h()("br",{}),L=h()("br",{}),M=h()(b.Fragment,{},void 0,h()("br",{}),"(1.0)"),Q=h()("br",{}),U=h()("th",{},void 0,"Column Totals"),W=h()(b.Fragment,{},void 0,h()("br",{}),"(1.0)"),Z=h()(b.Fragment,{},void 0,h()("br",{}),"(1.0)"),$=function(e,t,a,n,r,o){var i,l,c={},s={},u=e[t],d=e[a],v=u.length,f=k()(u,G.a),p=k()(d,G.a),g=S()(o,"Row Percent"),y=S()(o,"Column Percent");t.categories?i=Object(B.a)(f,t):(i=D()(f)).sort((function(e,t){return e.localeCompare(t,void 0,X)})),a.categories?l=Object(B.a)(p,a):(l=D()(p)).sort((function(e,t){return e.localeCompare(t,void 0,X)}));for(var m=0;m<i.length;m++)for(var V=0;V<l.length;V++){for(var C=i[m],F=l[V],R=0,P=0;P<v;P++)String(u[P])===C&&String(d[P])===F&&(R+=1);c[C+"-"+F]=R,s[C+"-"+F]=R/v}for(var x=[],q=0;q<l.length;q++){var T=l[q],A=p[T],j=null;g&&!n&&(j=h()(b.Fragment,{},void 0,Y,"(",(A/v).toFixed(r),")")),n&&(A=(A/=v).toFixed(r)),x.push(h()("td",{},void 0,A,j,y?E:null))}return h()(w.a,{bordered:!0,size:"sm"},void 0,h()("thead",{},void 0,h()("tr",{},void 0,h()("th",{},void 0,t," \\ ",a),l.map((function(e,t){return h()("th",{},t,e)})),I)),h()("tbody",{},void 0,i.map((function(e,t){return h()("tr",{},t,h()("th",{},void 0,e),l.map((function(a,o){var i=c[e+"-"+a],l=s[e+"-"+a];return h()("td",{},"".concat(t,":").concat(o),n?l.toFixed(r):i,g?h()(b.Fragment,{},void 0,K,"(",(i/f[e]).toFixed(r),")"):null,y?h()(b.Fragment,{},void 0,L,"(",(i/p[a]).toFixed(r),")"):null)})),h()("td",{},void 0,n?(f[e]/v).toFixed(r):f[e],g?M:null,y&&!n?h()(b.Fragment,{},void 0,Q,"(",(f[e]/v).toFixed(r),")"):null))}))),h()("tbody",{},void 0,h()("tr",{},void 0,U,x,h()("th",{},void 0,n?1..toFixed(r):v,g?W:null,y?Z:null))))},_=h()(C.a.Header,{as:"h4"},void 0,"Contingency Table",h()(z.a,{title:"Contingency Table",content:"A contingency table displays either the raw absolute or relative frequencies of two categorical variable's values alongside their row and column totals."})),ee=function(e){c()(a,e);var t=H(a);function a(e){var n;return r()(this,a),(n=t.call(this,e)).state={relativeFreqs:!1,rowVar:e.defaultRowVar||e.variables[0],colVar:e.defaultColVar||e.variables[1],group:null,nDecimalPlaces:3,variables:e.variables,display:[]},n}return i()(a,[{key:"generateContingencyTable",value:function(){var e,t=this.state,a=t.rowVar,n=t.colVar,r=t.group,o=t.relativeFreqs,i=t.nDecimalPlaces,l=t.display;if(!a||!n)return this.props.session.addNotification({title:"Select Variables",message:"You need to select a row and column variable for the contingency table",level:"warning",position:"tr"});if(r)e=function(e,t,a,n,r,o,i){for(var l={},c=0;c<e[n].length;c++){var s,u=e[n][c];O()(l[u])||(l[u]=(s={},p()(s,t,[]),p()(s,a,[]),s)),l[u][t].push(e[t][c]),l[u][a].push(e[a][c])}for(var d=[],v=Object(B.a)(l,n),f=0;f<v.length;f++){var g=v[f];d.push($(l[g],t,a,r,o,i))}return{variable:"".concat(t," by ").concat(a),type:"Contingency Table",value:h()("div",{style:{overflowX:"auto",width:"100%"}},void 0,h()("label",{},void 0,"Grouped by ".concat(n,":")),d.map((function(e,t){return h()("div",{},t,h()("label",{},void 0,"".concat(v[t]),": "),e)})))}}(this.props.data,a,n,r,o,i,l);else{var c=$(this.props.data,a,n,o,i,l);e={variable:"".concat(a," by ").concat(n),type:"Contingency Table",value:c}}this.props.logAction(J.h,{rowVar:a,colVar:n,group:r,relativeFreqs:o}),this.props.onCreated(e)}},{key:"render",value:function(){var e=this,t=this.props,a=t.variables,n=t.groupingVariables;return h()(C.a,{},void 0,_,h()(C.a.Body,{},void 0,h()(R.a,{legend:"Row Variable:",defaultValue:this.state.rowVar,options:a,onChange:function(t){e.setState({rowVar:t})}}),h()(R.a,{legend:"Column Variable:",defaultValue:this.state.colVar,options:a,onChange:function(t){e.setState({colVar:t})}}),h()(R.a,{legend:"Group By:",options:n,clearable:!0,menuPlacement:"top",onChange:function(t){e.setState({group:t})},tooltip:"Generate a contingency table for each category of a chosen grouping variable"}),h()(F.a,{legend:"Relative Frequency",defaultValue:!1,onChange:function(){e.setState({relativeFreqs:!e.state.relativeFreqs})}}),h()(R.a,{legend:"Display:",options:["Row Percent","Column Percent"],multi:!0,onChange:function(t){e.setState({display:t||[]})}}),this.state.relativeFreqs||this.state.display.length>0?h()("p",{},void 0,"Report relative frequencies to",h()(P.b,{inline:!0,width:50,max:16,min:0,defaultValue:this.state.nDecimalPlaces,onChange:function(t){e.setState({nDecimalPlaces:t})}}),"decimal place(s)."):null,h()(V.a,{variant:"primary",block:!0,onClick:this.generateContingencyTable.bind(this)},void 0,"Generate")))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.variables.length!==t.variables.length?(N("Available variables have changed..."),{rowVar:e.defaultRowVar||e.variables[0],colVar:e.defaultColVar||e.variables[1],variables:e.variables}):null}}]),a}(b.Component);ee.defaultProps={defaultRowVar:null,defaultColVar:null,groupingVariables:null,logAction:function(){},session:{}},t.default=ee}}]);