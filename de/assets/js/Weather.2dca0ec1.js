(self.webpackChunk=self.webpackChunk||[]).push([[1064],{999344:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return T}});a(382139);var r=a(264659),n=a(904730),i=a(673989),o=a(175663),s=a(750591),c=a(575630),l=a(151119),u=a(858255),h=a(574315),d=(a(976142),a(6059),a(202784)),v=(a(213980),a(911755)),p=a.n(v),f=a(789644),m=a.n(f),Z=a(198),w=a(857906),g=a.n(w),y=a(172245),N=a(741319),D=a(432261);var b=function(e){var t=e.weather;return t?(0,u.Z)("div",{className:"weather-description"},void 0,t.main," (",t.description,")"):null};var k,x,I=function(e){var t=e.name,a=e.sys;return(0,u.Z)("div",{className:"weather-location"},void 0,(0,u.Z)("div",{className:"weather-place"},void 0,t,","),(0,u.Z)("div",{className:"weather-location-country"},void 0,a.country))};function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=(0,c.Z)(e);if(t){var n=(0,c.Z)(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return(0,s.Z)(this,a)}}var R=p()("isle:weather"),W=[{command:"trigger",trigger:["in"],description:"Location name",text:!0},{command:"reset",trigger:["close"],description:"Close weather modal window"}],P=function(e){var t,a,r=e.main,n=e.weather,i=(0,d.useState)("fahrenheit"),o=(0,h.Z)(i,2),s=o[0],c=o[1],l=function(){c("celsius"===s?"fahrenheit":"celsius")};"celsius"===s?(t=g()((r.temp-32)*(5/9),-2),a="C"):(t=g()(r.temp),a="F");var v="http://openweathermap.org/img/wn/".concat(n.icon,"@2x.png");return(0,u.Z)("div",{className:"weather-temperature"},void 0,t,"\xb0",(0,u.Z)("span",{role:"button",onClick:l,onKeyPress:l,className:"weather-temperature-type",tabIndex:0},void 0,a),(0,u.Z)("img",{className:"weather-icon",alt:"Weather icon",src:v}))},S=function(e){var t=e.main,a=e.wind,r=e.t;return(0,u.Z)("div",{className:"weather-details"},void 0,(0,u.Z)("div",{className:"weather-humidity"},void 0,r("humidity"),": ",t.humidity,"%"),(0,u.Z)("div",{className:"weather-wind"},void 0,r("wind"),": ",a.speed," ","m/sec",k||(k=(0,u.Z)("br",{})),r("direction"),": ",a.deg))},B=function(e){(0,o.Z)(a,e);var t=C(a);function a(e){var n;return(0,r.Z)(this,a),n=t.call(this,e),(0,l.Z)((0,i.Z)(n),"register",(function(){n.context.speechInterface.register({name:n.props.voiceID,ref:(0,i.Z)(n),commands:W})})),(0,l.Z)((0,i.Z)(n),"reset",(function(){n.setState({data:null})})),(0,l.Z)((0,i.Z)(n),"trigger",(function(e,t){R("Trigger weather retrieval..."),n.callback=t||null;var a=n.props.t("in"),r=e.search(a);if(-1!==(r+=a.length+1)){var i=e.substring(r,e.length);R("Get weather info for location: "+i),n.getData(i)}})),(0,l.Z)((0,i.Z)(n),"getData",(function(e){var t=n.context;e&&t.server&&m().get("".concat(t.server,"/weather?location=").concat(e)).then((function(e){n.setWeatherData(e.data)})).catch((function(e){R("Encountered an error: "+e.message)}))})),(0,l.Z)((0,i.Z)(n),"setWeatherData",(function(e){n.callback&&n.callback(e),n.setState({data:e})})),n.state={data:null},n}return(0,n.Z)(a,[{key:"componentDidMount",value:function(){this.getData(this.props.location),this.props.voiceID&&this.register()}},{key:"render",value:function(){var e=null;this.props.voiceID&&(e=(0,u.Z)(y.Z,{id:this.props.voiceID,reference:this,commands:W}));var t=this.state.data;return t?(0,u.Z)("div",{className:"weather",style:this.props.style},void 0,e,(0,u.Z)(I,{name:t.name,sys:t.sys}),(0,u.Z)(b,{weather:t.weather[0]}),(0,u.Z)(P,{main:t.main,weather:t.weather[0]}),(0,u.Z)(S,{main:t.main,wind:t.wind,t:this.props.t}),x||(x=(0,u.Z)("br",{}))):(0,u.Z)("div",{className:"weather",style:this.props.style},void 0,(0,u.Z)("div",{className:"weather-loading title"},void 0,this.props.t("loading-weather-data-for",{loc:this.props.location})))}}]),a}(d.Component);B.defaultProps={location:null,voiceID:null,style:{}},B.contextType=N.Z;var T=(0,Z.Z)("weather")((0,D.W)(B))}}]);