(window.webpackJsonp=window.webpackJsonp||[]).push([[361],{1292:function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return i}));var s=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#c49c94","#e377c2","#17becf","#aec7e8","#ffbb78","#ff9896","#98df8a","#7f7f7f","#c5b0d5","#f7b6d2","#bcbd22","#c7c7c7","#dbdb8d","#9edae5"],i=["rgba(31,119,180,0.4)","rgba(255,127,14,0.4)","rgba(44,160,44,0.4)","rgba(214,39,40,0.4)","rgba(148,103,189,0.4)","rgba(140,86,75,0.4)","rgba(196,156,148,0.4)","rgba(227,119,194,0.4)","rgba(23,190,239,0.4)","rgba(234,199,232,0.4)","rgba(255,187,120,0.4)","rgba(255,152,150,0.4)","rgba(152,223,138,0.4)","rgba(127,127,127,0.4)","rgba(197,176,213,0.4)","rgba(247,182,210,0.4)","rgba(188,189,34,0.4)","rgba(199,199,199,0.4)","rgba(219,219,141,0.4)","rgba(158,218,229,0.4)"]},1428:function(t,e,n){"use strict";(function(t){n(468),n(708),n(707);var s=/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i;function i(e){t((function(){throw e}),0)}function a(t){return s.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t}var o=function(t){if(!(void 0===t||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var e=t.document.createElementNS("http://www.w3.org/1999/xhtml","a"),n="download"in e,s=/constructor/i.test(t.HTMLElement)||t.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent),r=t.setImmediate||t.setTimeout,l=d.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(t,e,n){return e=e||t.name||"download",n||(t=a(t)),navigator.msSaveOrOpenBlob(t,e)}:(l.abort=function(){},l.readyState=l.INIT=0,l.WRITING=1,l.DONE=2,l.error=null,l.onwritestart=null,l.onprogress=null,l.onwrite=null,l.onabort=null,l.onerror=null,l.onwriteend=null,function(t,e,n){return new d(t,e||t.name||"download",n)})}function c(){return t.URL||t.webkitURL||t}function u(t){setTimeout((function(){"string"==typeof t?c().revokeObjectURL(t):t.remove()}),4e4)}function d(l,d,p){p||(l=a(l));var h,f=this,m="application/octet-stream"===l.type;function v(){!function(t,e,n){for(var s=(e=[].concat(e)).length;s--;){var a=t["on"+e[s]];if("function"==typeof a)try{a.call(t,n||t)}catch(o){i(o)}}}(f,"writestart progress write writeend".split(" "))}if(f.readyState=f.INIT,n)return h=c().createObjectURL(l),void r((function(){var t,n;e.href=h,e.download=d,t=e,n=new MouseEvent("click"),t.dispatchEvent(n),v(),u(h),f.readyState=f.DONE}),0);!function(){if((o||m&&s)&&t.FileReader){var e=new FileReader;return e.onloadend=function(){var n=o?e.result:e.result.replace(/^data:[^;]*;/,"data:attachment/file;");t.open(n,"_blank")||(t.location.href=n),n=void 0,f.readyState=f.DONE,v()},e.readAsDataURL(l),void(f.readyState=f.INIT)}h||(h=c().createObjectURL(l)),m?t.location.href=h:t.open(h,"_blank")||(t.location.href=h),f.readyState=f.DONE,v(),u(h)}()}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||(void 0).content);e.a=o}).call(this,n(999).setImmediate)},2803:function(t,e){},2804:function(t,e){},3338:function(t){t.exports=JSON.parse('{"DE":{"cancel":"Abbrechen","delete":"L\xf6schen","delete-body":"Bist Du sicher, dass Du die ausgew\xe4hlte Benutzeraktion l\xf6schen willst?","delete-title":"Benutzeraktion l\xf6schen"},"EN":{"cancel":"Cancel","delete":"Delete","delete-body":"Are you sure that you want to delete the selected user action?","delete-title":"Delete user action?"},"ES":{"cancel":"Cancelar","delete":"Borrar","delete-body":"\xbfEst\xe1 seguro de que quiere borrar la acci\xf3n del usuario seleccionado?","delete-title":"\xbfBorrar la acci\xf3n del usuario?"}}')},4116:function(t,e,n){"use strict";var s=n(349),i=(n(4117),n(76),Object(s.a)((function(){return Promise.all([n.e(0),n.e(20),n.e(334),n.e(239)]).then(n.bind(null,4544))})));e.a=i},4129:function(t,e){},4339:function(t,e,n){"use strict";var s=n(354),i=n.n(s),a=(n(0),n(643)),o=n(616),r=n(384),l=n(461),c=n(3338);l.a.addResources("de","delete-modal",c.DE),l.a.addResources("en","delete-modal",c.EN),l.a.addResources("es","delete-modal",c.ES);e.a=Object(a.a)("delete-modal")((function(t){return i()(o.a,{show:t.show,style:{zIndex:2e3},backdropClassName:"modal-backdrop-second-order"},void 0,i()(o.a.Header,{},void 0,i()(o.a.Title,{},void 0,t.t("delete-title"))),i()(o.a.Body,{},void 0,t.t("delete-body")),i()(o.a.Footer,{},void 0,i()(r.a,{onClick:t.onClose},void 0,t.t("cancel")),i()(r.a,{variant:"warning",onClick:t.onDelete},void 0,t.t("delete"))))}))},4519:function(t,e,n){var s={"./af":2920,"./af.js":2920,"./ar":2921,"./ar-dz":2922,"./ar-dz.js":2922,"./ar-kw":2923,"./ar-kw.js":2923,"./ar-ly":2924,"./ar-ly.js":2924,"./ar-ma":2925,"./ar-ma.js":2925,"./ar-sa":2926,"./ar-sa.js":2926,"./ar-tn":2927,"./ar-tn.js":2927,"./ar.js":2921,"./az":2928,"./az.js":2928,"./be":2929,"./be.js":2929,"./bg":2930,"./bg.js":2930,"./bm":2931,"./bm.js":2931,"./bn":2932,"./bn-bd":2933,"./bn-bd.js":2933,"./bn.js":2932,"./bo":2934,"./bo.js":2934,"./br":2935,"./br.js":2935,"./bs":2936,"./bs.js":2936,"./ca":2937,"./ca.js":2937,"./cs":2938,"./cs.js":2938,"./cv":2939,"./cv.js":2939,"./cy":2940,"./cy.js":2940,"./da":2941,"./da.js":2941,"./de":2942,"./de-at":2943,"./de-at.js":2943,"./de-ch":2944,"./de-ch.js":2944,"./de.js":2942,"./dv":2945,"./dv.js":2945,"./el":2946,"./el.js":2946,"./en-au":2947,"./en-au.js":2947,"./en-ca":2948,"./en-ca.js":2948,"./en-gb":2949,"./en-gb.js":2949,"./en-ie":2950,"./en-ie.js":2950,"./en-il":2951,"./en-il.js":2951,"./en-in":2952,"./en-in.js":2952,"./en-nz":2953,"./en-nz.js":2953,"./en-sg":2954,"./en-sg.js":2954,"./eo":2955,"./eo.js":2955,"./es":2956,"./es-do":2957,"./es-do.js":2957,"./es-mx":2958,"./es-mx.js":2958,"./es-us":2959,"./es-us.js":2959,"./es.js":2956,"./et":2960,"./et.js":2960,"./eu":2961,"./eu.js":2961,"./fa":2962,"./fa.js":2962,"./fi":2963,"./fi.js":2963,"./fil":2964,"./fil.js":2964,"./fo":2965,"./fo.js":2965,"./fr":2966,"./fr-ca":2967,"./fr-ca.js":2967,"./fr-ch":2968,"./fr-ch.js":2968,"./fr.js":2966,"./fy":2969,"./fy.js":2969,"./ga":2970,"./ga.js":2970,"./gd":2971,"./gd.js":2971,"./gl":2972,"./gl.js":2972,"./gom-deva":2973,"./gom-deva.js":2973,"./gom-latn":2974,"./gom-latn.js":2974,"./gu":2975,"./gu.js":2975,"./he":2976,"./he.js":2976,"./hi":2977,"./hi.js":2977,"./hr":2978,"./hr.js":2978,"./hu":2979,"./hu.js":2979,"./hy-am":2980,"./hy-am.js":2980,"./id":2981,"./id.js":2981,"./is":2982,"./is.js":2982,"./it":2983,"./it-ch":2984,"./it-ch.js":2984,"./it.js":2983,"./ja":2985,"./ja.js":2985,"./jv":2986,"./jv.js":2986,"./ka":2987,"./ka.js":2987,"./kk":2988,"./kk.js":2988,"./km":2989,"./km.js":2989,"./kn":2990,"./kn.js":2990,"./ko":2991,"./ko.js":2991,"./ku":2992,"./ku.js":2992,"./ky":2993,"./ky.js":2993,"./lb":2994,"./lb.js":2994,"./lo":2995,"./lo.js":2995,"./lt":2996,"./lt.js":2996,"./lv":2997,"./lv.js":2997,"./me":2998,"./me.js":2998,"./mi":2999,"./mi.js":2999,"./mk":3e3,"./mk.js":3e3,"./ml":3001,"./ml.js":3001,"./mn":3002,"./mn.js":3002,"./mr":3003,"./mr.js":3003,"./ms":3004,"./ms-my":3005,"./ms-my.js":3005,"./ms.js":3004,"./mt":3006,"./mt.js":3006,"./my":3007,"./my.js":3007,"./nb":3008,"./nb.js":3008,"./ne":3009,"./ne.js":3009,"./nl":3010,"./nl-be":3011,"./nl-be.js":3011,"./nl.js":3010,"./nn":3012,"./nn.js":3012,"./oc-lnc":3013,"./oc-lnc.js":3013,"./pa-in":3014,"./pa-in.js":3014,"./pl":3015,"./pl.js":3015,"./pt":3016,"./pt-br":3017,"./pt-br.js":3017,"./pt.js":3016,"./ro":3018,"./ro.js":3018,"./ru":3019,"./ru.js":3019,"./sd":3020,"./sd.js":3020,"./se":3021,"./se.js":3021,"./si":3022,"./si.js":3022,"./sk":3023,"./sk.js":3023,"./sl":3024,"./sl.js":3024,"./sq":3025,"./sq.js":3025,"./sr":3026,"./sr-cyrl":3027,"./sr-cyrl.js":3027,"./sr.js":3026,"./ss":3028,"./ss.js":3028,"./sv":3029,"./sv.js":3029,"./sw":3030,"./sw.js":3030,"./ta":3031,"./ta.js":3031,"./te":3032,"./te.js":3032,"./tet":3033,"./tet.js":3033,"./tg":3034,"./tg.js":3034,"./th":3035,"./th.js":3035,"./tk":3036,"./tk.js":3036,"./tl-ph":3037,"./tl-ph.js":3037,"./tlh":3038,"./tlh.js":3038,"./tr":3039,"./tr.js":3039,"./tzl":3040,"./tzl.js":3040,"./tzm":3041,"./tzm-latn":3042,"./tzm-latn.js":3042,"./tzm.js":3041,"./ug-cn":3043,"./ug-cn.js":3043,"./uk":3044,"./uk.js":3044,"./ur":3045,"./ur.js":3045,"./uz":3046,"./uz-latn":3047,"./uz-latn.js":3047,"./uz.js":3046,"./vi":3048,"./vi.js":3048,"./x-pseudo":3049,"./x-pseudo.js":3049,"./yo":3050,"./yo.js":3050,"./zh-cn":3051,"./zh-cn.js":3051,"./zh-hk":3052,"./zh-hk.js":3052,"./zh-mo":3053,"./zh-mo.js":3053,"./zh-tw":3054,"./zh-tw.js":3054};function i(t){var e=a(t);return n(e)}function a(t){if(!n.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}i.keys=function(){return Object.keys(s)},i.resolve=a,t.exports=i,i.id=4519},5881:function(t,e,n){"use strict";n.r(e);n(358),n(351),n(360);var s=n(354),i=n.n(s),a=n(352),o=n.n(a),r=n(353),l=n.n(r),c=n(364),u=n.n(c),d=n(356),p=n.n(d),h=n(357),f=n.n(h),m=n(355),v=n.n(m),g=n(350),y=n.n(g),b=n(0),j=n.n(b),w=n(398),k=n.n(w),S=n(643),C=n(998),z=n(677),x=n(629),D=n(626),N=n.n(D),O=n(422),R=n.n(O),F=n(1217),E=(n(468),n(749),n(770),n(1190)),I=n.n(E),A=(n(1902),n(1191)),T=n.n(A),L=(n(342),n(380)),P=n.n(L),B=n(4306),M=n.n(B),U=n(427),H=n(384),V=n(587),_=n(1e3),J=n(2908),K=n(1965),q=n(512),W=n.n(q),G=n(469),Q=n.n(G),Y=n(443),X=n.n(Y),Z=n(381),$=n.n(Z),tt=n(4116),et=n(1428),nt=n(1778),st=n(415),it=n(571),at=(n(768),n(2417)),ot=n.n(at),rt=n(1104),lt=n.n(rt),ct=n(4339),ut=n(1022),dt=n(488),pt=(n(326),i()("span",{className:"fa fa-trash"})),ht=Object(S.a)()((function(t){var e=t.value;Object(dt.isPrimitive)(e)&&(e=e?"true":"false");var n,s,a=new Date(t.absoluteTime);return t.anonymized?(n=t.userHash.name[t.name]||t.name,s=t.userHash.email[t.email]||t.email):(n=t.name,s=t.email),i()(ut.a,{style:{background:t.backgroundColor,color:t.color,fontSize:15,fontFamily:"Open Sans",padding:"2px 1px 2px 1px",lineHeight:1}},void 0,i()("div",{className:"actionNote"},void 0,i()("label",{htmlFor:"action-email-button"},void 0,t.t("name"),":\xa0"),i()("button",{id:"action-name-button",className:"empty-button",onClick:t.clickFactory("name",t.name)},void 0,n)," | ",i()("label",{htmlFor:"action-email-button"},void 0,t.t("email"),":\xa0"),i()("button",{id:"action-email-button",className:"empty-button",onClick:t.clickFactory("email",t.email)},void 0,s)),i()("div",{className:"actionNote"},void 0,i()("span",{className:"title"},void 0,t.t("time"),":\xa0"),a.toLocaleTimeString()," - ",a.toLocaleDateString()),i()("div",{className:"actionNote"},void 0,i()("label",{htmlFor:"action-id-button"},void 0,t.t("id"),":\xa0"),i()("button",{id:"action-id-button",className:"empty-button",onClick:t.clickFactory("id",t.id)},void 0,t.id)," |",i()("label",{htmlFor:"action-type-button"},void 0,t.t("type"),":\xa0"),i()("button",{id:"action-type-button",className:"empty-button",onClick:t.clickFactory("type",t.type)},void 0,t.type)),i()("div",{className:"actionNote"},void 0,i()("span",{className:"title"},void 0,t.t("value"),":\xa0"),i()("span",{style:{userSelect:"text"}},void 0,e)),i()(H.a,{variant:"outline-danger",size:"sm",onClick:function(){t.onDelete(t.sessiondataID)},"aria-label":t.t("delete"),style:{position:"absolute",top:6,right:6}},void 0,pt))})),ft=n(1958),mt=n.n(ft);var vt=function(t,e,n){return function(s){s.stopPropagation();var i=W()(e);delete i[t],N()(i)&&(i=null);var a=yt(i,n);n(i,a)}},gt=(n(327),i()("span",{className:"title"},void 0,"Filters:"));var yt=function(t,e){var n=t?mt()(t):[];return i()(b.Fragment,{},void 0,gt,i()("span",{style:{position:"relative",width:"auto",fontSize:"12px",fontFamily:"Open Sans"}},void 0,n.map((function(n,s){return i()("button",{className:"action-filter-button",onClick:vt(n[0],t,e)},s,n[0],": ",n[1])}))))};function bt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,s=v()(t);if(e){var i=v()(this).constructor;n=Reflect.construct(s,arguments,i)}else n=s.apply(this,arguments);return f()(this,n)}}var jt=k()("isle:statusbar:action-log"),wt=/\r?\n/g,kt=function(t){p()(n,t);var e=bt(n);function n(t){var s;return o()(this,n),s=e.call(this,t),y()(u()(s),"clickFactory",(function(t,e){return function(){var n=s.props.filter?W()(s.props.filter):{};n[t]=e,jt("The filter was successfully changed: "+JSON.stringify(n));var i=yt(n,s.props.onFilterChange);s.props.onFilterChange(n,i)}})),y()(u()(s),"itemSizeGetter",(function(t){var e=40,n=s.state.actions[t];return n?(e+=16*((String(n.value).match(wt)||"").length+1),e+=20):0})),y()(u()(s),"openDeleteModal",(function(t){jt("Open delete modal for action with id "+t),s.setState({showDeleteModal:!s.state.showDeleteModal,deleteModelActionID:t})})),y()(u()(s),"closeDeleteModal",(function(){jt("Close delete modal..."),s.setState({showDeleteModal:!1})})),y()(u()(s),"deleteAction",(function(){var t=s.state.deleteModelActionID;jt("Should delete action with id: "+t),s.props.session.removeSessionElementFromDB(t,(function(t){t&&jt("Encountered an error: "+t.message),s.closeDeleteModal()}))})),y()(u()(s),"renderItem",(function(t,e){jt("Render ".concat(t,"th item"));var n,a=s.state.actions[t],o=t%2?"white":"lightgrey";return n=a.owner?"#3c763d":"black",i()(ht,{backgroundColor:o,color:n,clickFactory:s.clickFactory,onDelete:s.openDeleteModal,value:a.value,email:a.email,type:a.type,name:a.name,owner:a.owner,absoluteTime:a.absoluteTime,time:a.time,id:a.id,sessiondataID:a.sessiondataID,anonymized:s.props.anonymized,userHash:s.props.userHash},e)})),s.state={actions:t.actions,showDeleteModal:!1,deleteModelActionID:null},s}return l()(n,[{key:"render",value:function(){var t=this.props.height,e=this.state.actions;jt("Rendering list of actions...");var n=null;return e.length>0&&(jt("Received more than one action: "+e.length),n=i()(ot.a,{itemRenderer:this.renderItem,length:e.length,type:"variable",pageSize:50,itemSizeGetter:this.itemSizeGetter})),i()("div",{style:{overflowY:"scroll",height:t}},void 0,n,i()(ct.a,{show:this.state.showDeleteModal,onDelete:this.deleteAction,onClose:this.closeDeleteModal}))}}],[{key:"getDerivedStateFromProps",value:function(t,e){if(t.actions.length!==e.actions.length){for(var n=new Array(t.actions.length),s=0;s<t.actions.length;s++){n[s]=t.actions[s];var i=n[s].value;lt()(i)&&(n[s].value=JSON.stringify(i,null,2))}return{actions:t.actions}}return null}}]),n}(b.Component);kt.defaultProps={actions:[],anonymized:!1,filter:{},height:null,userHash:null,onFilterChange:function(){}};var St=Object(S.a)()(kt),Ct=(n(391),n(389),n(378),n(377),n(388),n(1111)),zt=n(1099),xt=n(1933),Dt=n.n(xt);function Nt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}function Ot(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Nt(Object(n),!0).forEach((function(e){y()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Nt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Rt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,s=v()(t);if(e){var i=v()(this).constructor;n=Reflect.construct(s,arguments,i)}else n=s.apply(this,arguments);return f()(this,n)}}var Ft=i()("i",{className:"fas fa-plus"}),Et=function(t){p()(n,t);var e=Rt(n);function n(t){var s;return o()(this,n),s=e.call(this,t),y()(u()(s),"handleSubmit",(function(){var t=s.state.type.value,e=s.state.value;"type"===t&&(e=Dt()(e)),s.props.onSubmit(t,e),s.setState({type:null,value:""})})),s.options=[{value:"email",label:s.props.t("email")},{value:"name",label:s.props.t("name")},{value:"type",label:s.props.t("type")},{value:"id",label:s.props.t("id")},{value:"value",label:s.props.t("value")}],s.state={type:null,value:""},s}return l()(n,[{key:"render",value:function(){var t=this;return i()(zt.a.Group,{controlId:"custom-filter-form-group",style:Ot(Ot({},this.props.style),{},{width:280})},void 0,i()("div",{style:{width:100,float:"left"}},void 0,i()(Ct.a,{options:this.options,placeholder:"Filter",value:this.state.type,onChange:function(e){t.setState({type:e})}})),i()(zt.a.Control,{type:"text",value:this.state.value,placeholder:"Contains...",style:{width:100,float:"left"},onChange:function(e){t.setState({value:e.target.value})}}),i()(H.a,{size:"small",variant:"light",style:{float:"left"},onClick:this.handleSubmit,disabled:!this.state.type||!this.state.value},void 0,Ft))}}]),n}(b.Component);Et.defaultProps={style:{}};var It=Et;function At(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,s=v()(t);if(e){var i=v()(this).constructor;n=Reflect.construct(s,arguments,i)}else n=s.apply(this,arguments);return f()(this,n)}}var Tt=k()("isle:statusbar:action-log");P.a.locale("us");var Lt=function(t){p()(n,t);var e=At(n);function n(t){var s;return o()(this,n),s=e.call(this,t),y()(u()(s),"handleEmailFilterClick",(function(t){t.stopPropagation();var e=W()(s.state.filter);delete e.email,N()(e)&&(e=null);var n=yt(e,(function(t,e){s.setState({filter:t,filters:e})}));s.setState({filter:e,filters:n})})),y()(u()(s),"handleIDFilterClick",(function(t){t.stopPropagation();var e=W()(s.state.filter);delete e.id,N()(e)&&(e=null);var n=yt(e,(function(t,e){s.setState({filter:t,filters:e})}));s.setState({filter:e,filters:n})})),y()(u()(s),"handleRadioChange",T()(I.a.mark((function t(){var e;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=s.context,s.userHash){t.next=5;break}return t.next=4,e.getFakeUsers();case 4:s.userHash=t.sent;case 5:s.setState({anonymized:!s.state.anonymized});case 6:case"end":return t.stop()}}),t)})))),y()(u()(s),"saveJSON",(function(){var t=s.context,e=s.prepareActionsForExport(),n=new Blob([JSON.stringify(e)],{type:"application/json"}),i="actions_".concat(t.namespaceName,"_").concat(t.lessonName,".json");Object(et.a)(n,i)})),y()(u()(s),"saveCSV",(function(){var t=s.context,e=s.prepareActionsForExport();M()(e,{header:!0},(function(e,n){if(e)return t.addNotification({title:s.props.t("error-encountered"),message:s.props.t("error-csv")+e.message,level:"error",position:"tl"});var i=new Blob([n],{type:"text/plain"}),a="actions_".concat(t.namespaceName,"_").concat(t.lessonName,".csv");Object(et.a)(i,a)}))})),s.state={anonymized:!1,includes:["guests","owners","students"],filters:i()("span",{className:"title"},void 0,s.props.t("filters")),period:{from:P()(0).startOf("day"),to:P()().endOf("day")},actions:[]},s}return l()(n,[{key:"componentDidMount",value:function(){var t=this,e=this.context;e.socketActions&&e.socketActions.length>0&&(Tt("Initial construction of actions array..."),this.setState({actions:this.buildActionsArray()})),this.unsubscribe=e.subscribe((function(n,s){n===it.k?(Tt("Should reset the filters after user logout:"),t.setState({filters:i()("span",{className:"title"},void 0,t.props.t("filters"))})):n!==it.B&&n!==it.n&&n!==it.A||t.setState({actions:t.buildActionsArray()}),0===e.socketActions.length&&null!==t.state.filter&&t.setState({filter:{},filters:i()("span",{className:"title"},void 0,t.props.t("filters"))})}))}},{key:"componentDidUpdate",value:function(t,e){this.props.selectedEmail!==t.selectedEmail?this.setState({filter:{email:this.props.selectedEmail},filters:i()(b.Fragment,{},void 0,i()("span",{className:"title"},void 0,this.props.t("filters")),i()("span",{style:{position:"relative",width:"auto",fontSize:"12px",fontFamily:"Open Sans"}},void 0,i()("span",{role:"button",tabIndex:0,onClick:this.handleEmailFilterClick,onKeyPress:this.handleEmailFilterClick,style:{marginLeft:10,background:"lightcoral",cursor:"pointer"}},void 0,"email",": ",this.props.selectedEmail)))}):this.props.selectedID!==t.selectedID?this.setState({filter:{id:this.props.selectedID},filters:i()(b.Fragment,{},void 0,i()("span",{className:"title"},void 0,this.props.t("filters")),i()("span",{style:{position:"relative",width:"auto",fontSize:"12px",fontFamily:"Open Sans"}},void 0,i()("span",{role:"button",tabIndex:0,onClick:this.handleIDFilterClick,onKeyPress:this.handleIDFilterClick,style:{marginLeft:10,background:"lightcoral",cursor:"pointer"}},void 0,"id",": ",this.props.selectedID)))}):this.state.filter!==e.filter?(Tt("Should filter out actions..."),this.setState({actions:this.buildActionsArray()})):this.state.period.from===e.period.from&&this.state.period.to===e.period.to||this.setState({actions:this.buildActionsArray()})}},{key:"componentWillUnmount",value:function(){X()(this.unsubscribe)&&this.unsubscribe()}},{key:"buildActionsArray",value:function(){var t=this.state.period,e=t.from,n=t.to,s=Q()(this.state.includes,"owners"),i=Q()(this.state.includes,"students"),a=Q()(this.state.includes,"guests");if(Tt("Building action array..."),e&&n){e=e.toDate(),n=n.toDate();for(var o=this.context,r=[],l=0;l<o.socketActions.length;l++){var c=o.socketActions[l];o.selectedCohort&&!Object(nt.a)(o.selectedCohort,c.email)||c.absoluteTime>e&&c.absoluteTime<n&&(c.owner?s&&r.push(c):c.email===c.name?a&&r.push(c):i&&r.push(c))}return this.state.filter&&(Tt("Should filter actions: "+r.length),this.removeMarkedActions(r)),r}return[]}},{key:"removeMarkedActions",value:function(t){for(var e=t.length-1;e>=0;e--){var n=t[e],s=!1;for(var i in this.state.filter)if($()(this.state.filter,i)){var a=this.state.filter[i];String(n[i]).includes(a)||(s=!0)}s&&t.splice(e,1)}}},{key:"prepareActionsForExport",value:function(){var t,e=this.state.actions.length;if(this.state.anonymized){t=new Array(e);for(var n=0;n<e;n++){var s=W()(this.state.actions[n]);s.name=this.userHash.name[s.name]||s.name,s.email=this.userHash.email[s.email]||s.email,t[n]=s}}else t=this.state.actions;return[]}},{key:"render",value:function(){var t,e=this,n=this.context,s=n.socketActions,a=s.length;return t=a>0?s[a-1].absoluteTime:0,i()(U.a.Body,{},void 0,i()(tt.a,{size:"sm",origin:t,onChange:function(t){e.setState({period:t})},style:{float:"left"}}),i()(It,{style:{float:"left"},t:this.props.t,onSubmit:function(t,n){var s=e.state.filter?W()(e.state.filter):{};s[t]=n;var i=yt(s,(function(t,n){e.setState({filter:t,filters:n})}));e.setState({filter:s,filters:i})}}),i()("br",{style:{clear:"both"}}),i()(St,{session:n,actions:this.state.actions,period:this.state.period,filter:this.state.filter,height:window.innerHeight/2,userHash:this.userHash,anonymized:this.state.anonymized,onFilterChange:function(t,n){e.setState({filter:t,filters:n})}}),this.state.filters,i()(_.a,{},void 0,i()(V.a,{},void 0,i()("span",{style:{fontSize:"14px",marginRight:20,paddingTop:5,fontWeight:600}},void 0,this.props.t("num-actions",{n:this.state.actions.length}))),i()(J.a,{name:"options",onChange:this.handleRadioChange,type:"radio",size:"small",value:this.state.anonymized,style:{marginRight:"5px"}},void 0,i()(K.a,{size:"sm",variant:"light",value:!1,style:{fontSize:"12px",color:this.state.anonymized?"#A9A9A9":"black"}},void 0,this.props.t("original")),i()(K.a,{size:"sm",variant:"light",value:!0,style:{fontSize:"12px",color:this.state.anonymized?"black":"#A9A9A9"}},void 0,this.props.t("anonymized"))),i()(J.a,{type:"checkbox",onChange:function(t){e.setState({includes:t})},value:this.state.includes,style:{marginRight:"5px"}},void 0,i()(K.a,{size:"sm",variant:"light",value:"owners",style:{fontSize:"12px",color:Q()(this.state.includes,"owners")?"black":"#A9A9A9"}},void 0,this.props.t("instructors")),i()(K.a,{size:"sm",variant:"light",value:"students",style:{fontSize:"12px",color:Q()(this.state.includes,"students")?"black":"#A9A9A9"}},void 0,this.props.t("students")),i()(K.a,{size:"sm",variant:"light",value:"guests",style:{fontSize:"12px",color:Q()(this.state.includes,"guests")?"black":"#A9A9A9"}},void 0,this.props.t("guests"))),i()(V.a,{size:"sm"},void 0,i()(H.a,{variant:"primary",onClick:this.saveJSON},void 0,this.props.t("save-json")),i()(H.a,{variant:"primary",onClick:this.saveCSV},void 0,this.props.t("save-csv")))))}}]),n}(b.Component);Lt.contextType=st.a,Lt.defaultProps={selectedEmail:null,selectedID:null};var Pt=Lt,Bt=n(1751);n(328);function Mt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,s=v()(t);if(e){var i=v()(this).constructor;n=Reflect.construct(s,arguments,i)}else n=s.apply(this,arguments);return f()(this,n)}}var Ut=k()("isle:instructor-notes"),Ht=function(t){p()(n,t);var e=Mt(n);function n(t){return o()(this,n),e.call(this,t)}return l()(n,[{key:"render",value:function(){return Ut("Rendering instructor notes..."),i()(Bt.default,{id:"instructor-notes",className:"instructor-notes",mode:"collaborative",allowSubmissions:!1,toolbarConfig:["bold","italic","underline","heading","|","open_markdown","save","preview"]})}}]),n}(b.Component),Vt=n(4504),_t=n(465),Jt=n(1356),Kt=n(1432),qt=n(718),Wt=n.n(qt),Gt=n(386),Qt=n(473),Yt=n.n(Qt),Xt=n(713),Zt=n(1962),$t=n(1975),te=n(1292);n(329);function ee(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,s=v()(t);if(e){var i=v()(this).constructor;n=Reflect.construct(s,arguments,i)}else n=s.apply(this,arguments);return f()(this,n)}}var ne=k()("isle:statusbar:instructor-view"),se=[];function ie(){for(var t=document.getElementsByClassName("focus-glow");t.length;)t[0].classList.remove("focus-glow");var e=document.getElementById("duplicated-container");e&&e.parentNode.removeChild(e)}var ae=function(t){p()(n,t);var e=ee(n);function n(t){var s;return o()(this,n),s=e.call(this,t),y()(u()(s),"highlightElement",(function(t){var e=s.props.session.userFocuses[t];ne("ID of element to be focused is: "+e),ie();var n=document.getElementById(e);if(n)if(ne("Found element, should add glow effect..."),Object($t.a)(n)){var i=n.cloneNode(!0),a=document.createElement("div");a.id="duplicated-container",i.id="duplicated-elem",i.classList.add("focus-glow"),a.append(i),document.body.appendChild(a)}else n.classList.add("focus-glow"),n.scrollIntoView()})),y()(u()(s),"handleClickFactory",(function(t){return function(){if(s.state.selected===t)return ie(),s.setState({selected:null});s.highlightElement(t),s.setState({selected:t})}})),y()(u()(s),"thumbnailClickFactory",(function(t){return function(e){e.stopPropagation(),s.props.onThumbnailClick(t)}})),y()(u()(s),"filter",(function(t){ne("Clicked on progressbar...");var e,n=t.target.innerText;e=s.state.filter===n?null:n,s.setState({filter:e})})),y()(u()(s),"chatInviteFactory",(function(t,e){var n=s.props.session;return function(s,i){ne("Invite "+e+" to personal chat..."),i?n.inviteToChat({name:t,canLeave:!1},e):n.closeChatForAll(t)}})),y()(u()(s),"videoChatInviteFactory",(function(t,e){var n=s.props.session;return function(s,i){ne("Invite "+e+" to video chat..."),i&&n.inviteToVideo(t,e)}})),s.state={filter:null,selected:null},s}return l()(n,[{key:"componentDidMount",value:function(){var t=this,e=this.props.session;this.unsubscribe=e.subscribe((function(e,n){e===it.v||e===it.L||e===it.M||e===it.K||e===it.B||e===it.N?(ne("Should render the user list..."),t.forceUpdate()):e!==it.n||n.type!==it.h&&n.type!==it.l||(n.email===t.state.selected&&t.highlightElement(n.email),t.forceUpdate())}))}},{key:"componentWillUnmount",value:function(){ne("Unmount user list..."),X()(this.unsubscribe)&&this.unsubscribe(),ie()}},{key:"render",value:function(){var t=this,e=this.props.session,n=e.userFocuses,s=e.userProgress,a={},o=0,r=i()(Jt.a,{className:"user-list-group",style:{height:window.innerHeight/1.5}},void 0,e.userList.filter((function(s){if(e.selectedCohort&&!Object(nt.a)(e.selectedCohort,s.email))return!1;var i=n[s.email];if(i){var r=Wt()(se,i);-1===r&&(r=se.length,se.push(i)),a[i]=(a[i]||0)+1,o+=1}return!t.state.filter||i===t.state.filter})).map((function(a,o){var r,l,c=null,u=n[a.email];if(u){var d=Wt()(se,u);c=i()("span",{style:{float:"right",color:te.a[d%te.a.length]}},void 0,u)}r=a.owner?"#3c763d":a.inactive?"lightgray":"black",l=t.state.selected===a.email?"#e0a800":"transparent";var p,h=e.server+"/thumbnail/"+a.picture,f=t.thumbnailClickFactory(a.email),m=e.user.email!==a.email&&!a.inactive,v=Object(Gt.isPrimitive)(a.joinTime)?a.joinTime:new Date(a.joinTime).toLocaleTimeString();return p=null===a.exitTime?"":Object(Gt.isPrimitive)(a.exitTime)?a.exitTime:new Date(a.exitTime).toLocaleTimeString(),i()(ut.a,{className:"user-list-item"},o,i()("div",{style:{width:"100%"}},void 0,i()(_t.a,{placement:"right",tooltip:t.props.t("open-user-actions")},void 0,i()("span",{role:"button",tabIndex:0,onClick:f,onKeyPress:f},void 0,i()("img",{className:"user-thumbnail",alt:"User thumbnail",src:h}))),i()(_t.a,{placement:"bottom",tooltip:t.props.t("lesson-progress")},void 0,i()(Kt.a,{className:"user-list-progress",now:100*s[a.email]})),m?i()(Xt.a,{showTooltip:!1,for:t.props.t("chat-with",{name:a.name}),onClick:t.chatInviteFactory(t.props.t("chat-with",{name:a.name}),a.email)}):null,m?i()(Zt.a,{showTooltip:!1,for:"".concat(e.user.name,"-").concat(a.name),subject:t.props.t("video-chat-with",{name:a.name}),style:{marginLeft:5},onClick:t.videoChatInviteFactory({name:"".concat(e.user.name,"-").concat(a.name),subject:t.props.t("video-chat-with",{name:a.name})},a.email)}):null),i()("div",{style:{width:"100%",color:r}},void 0,a.name," (",a.email,") | ",v," - ",p,c?i()(_t.a,{placement:"left",tooltip:t.props.t("element-interacting-with")},void 0,i()(H.a,{className:"user-list-active-button",variant:"outline-secondary",size:"sm",onClick:t.handleClickFactory(a.email),style:{background:l}},void 0,c)):null))}))),l=Yt()(a);return i()(b.Fragment,{},void 0,i()(Kt.a,{style:{cursor:"pointer"},onClick:this.filter},void 0,l.map((function(e,n){var s=Wt()(se,e),r=te.a[s%te.a.length];return i()(Kt.a,{style:{background:t.state.filter!==e?r:"gold"},now:a[e]/o*100,label:e},n)}))),r)}}]),n}(b.Component),oe=n(489),re=n.n(oe),le=n(3325),ce=n.n(le),ue=n(376),de=n.n(ue),pe=function(t){t/=1e3;var e=de()(t/3600);t%=3600;var n=de()(t/60);return n<10&&(n="0"+n),e+":"+n};function he(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,s=v()(t);if(e){var i=v()(this).constructor;n=Reflect.construct(s,arguments,i)}else n=s.apply(this,arguments);return f()(this,n)}}var fe=k()("isle:statusbar:instructor-view");function me(){for(var t=document.getElementsByClassName("focus-glow");t.length;)t[0].classList.remove("focus-glow");var e=document.getElementById("duplicated-container");e&&e.parentNode.removeChild(e)}var ve=function(t){p()(n,t);var e=he(n);function n(t){var s;return o()(this,n),s=e.call(this,t),y()(u()(s),"thumbnailClickFactory",(function(t){return function(e){e.stopPropagation(),s.props.onThumbnailClick(t)}})),y()(u()(s),"highlightFactory",(function(t){return function(){if(me(),s.state.selected===t)return s.setState({selected:null});var e=document.getElementById(t);if(e)if(fe("Found element, should add glow effect..."),Object($t.a)(e)){var n=e.cloneNode(!0);n.addEventListener("click",(function(t){fe("Clicked on element with ID ".concat(t.target.id)),document.getElementById(t.target.id).click()}));var i=document.createElement("div");i.id="duplicated-container",n.id="duplicated-elem",n.classList.add("focus-glow"),i.append(n),document.body.appendChild(i)}else e.classList.add("focus-glow"),e.scrollIntoView();s.setState({selected:t})}})),fe("Initializing state in constructor..."),s.state={selected:null,means:{}},s}return l()(n,[{key:"componentDidMount",value:function(){for(var t=this,e=this.props.session,n=e.responseVisualizers,s=e.responseVisualizerIds,i={},a=function(t){var e=n[s[t]],a=ce()();e.ref.state.actions.forEach((function(t){a(t.time)})),i[s[t]]=a},o=0;o<s.length;o++)a(o);this.setState({means:i}),this.unsubscribe=e.subscribe((function(e,n){if(e===it.n&&Q()(s,n.id)){var i=W()(t.state.means);i[n.id](n.time),t.setState({means:i})}else e!==it.J&&e!==it.B||t.forceUpdate()}))}},{key:"componentWillUnmount",value:function(){me(),this.unsubscribe()}},{key:"render",value:function(){var t,e;fe("Render response visualizer statistics...");var n=this.props.session;n.selectedCohort?(e=n.activeCohortMembers.length,t=this.props.t("completion-rate-cohort",{cohort:n.selectedCohort.title})):(e=n.userList.length,t=this.props.t("completion-rate-all"));for(var s=n.responseVisualizers,a=this.state.means,o=n.responseVisualizerIds,r=new Array(o.length),l=new Date-this.props.session.startTime,c=0,u=0;u<o.length;u++){var d=s[o[u]],p=d.ref.state.nInfo,h=d.ref.state.nActions,f=Yt()(d.ref.emailHash).length,m=p/e*100;c+=m;var v=o[u],g="time: ".concat(a[v]?pe(a[v]()):""),y=void 0;y=p>0&&a[v]&&l>a[v]()?m<10?"danger":m>75?"success":"info":"light";var b=void 0;b=n.selectedCohort?"".concat(p," / ").concat(e," (of ").concat(n.selectedCohort.members.length,")"):"".concat(p," / ").concat(e),r[u]=i()(ut.a,{style:{background:this.state.selected===v?"gold":"lightgrey",padding:"0.4rem 1rem",cursor:"pointer"},onClick:this.highlightFactory(v)},u,i()(_t.a,{placement:"right",tooltip:this.props.t("question-id-tooltip")},void 0,i()("label",{style:{margin:0}},void 0,v)),i()(_t.a,{placement:"left",tooltip:this.props.t("open-actions")},void 0,i()(C.a,{variant:"light",style:{float:"right",margin:"2px"},onClick:this.thumbnailClickFactory(v)},void 0,this.props.t("open"))),i()(_t.a,{placement:"left",tooltip:this.props.t("num-cohort-actions",{cohort:n.selectedCohort?n.selectedCohort.title:"all cohorts"})},void 0,i()(C.a,{variant:"light",style:{float:"right",margin:"2px"}},void 0,"n: ".concat(h))),i()(_t.a,{placement:"left",tooltip:this.props.t("num-students-answered",{cohort:n.selectedCohort?n.selectedCohort.title:"all cohorts"})},void 0,i()(C.a,{variant:"light",style:{float:"right",margin:"2px"}},void 0,"s: ".concat(f))),i()(_t.a,{placement:"left",tooltip:this.props.t("elapsed-time")},void 0,i()(C.a,{variant:y,style:{float:"right",margin:"2px"}},void 0,g)),i()(_t.a,{placement:"left",tooltip:t},void 0,i()(Kt.a,{variant:"info",now:m,max:100,min:0,label:b,style:{width:"180px",float:"right",height:"1.25rem"}})))}return c/=o.length,i()("div",{},void 0,i()(Kt.a,{striped:!0,variant:"success",label:this.props.t("class-progress",{progress:re()(c)}),now:c}),i()(Jt.a,{style:{height:window.innerHeight/1.5,overflowY:"scroll"}},void 0,r))}}]),n}(b.Component),ge=n(1218),ye=n(1715),be=n.n(ye),je=n(432),we=n(413),ke=n(458),Se=n(402),Ce=n.n(Se),ze=n(385),xe=n(964),De=n.n(xe),Ne=n(1407),Oe=n(1414);n(330);function Re(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,s=v()(t);if(e){var i=v()(this).constructor;n=Reflect.construct(s,arguments,i)}else n=s.apply(this,arguments);return f()(this,n)}}var Fe=k()("isle:statusbar:student-responses");function Ee(){for(var t=document.getElementsByClassName("focus-glow");t.length;)t[0].classList.remove("focus-glow");var e=document.getElementById("duplicated-container");e&&e.parentNode.removeChild(e)}function Ie(t,e){var n,s=e.ref.props.data.type;if(De()(t))return"";switch(s){case"factor":var i=e.ref.props.data.levels;n=Ce()(t)?t.map((function(t){return Object(ze.isPrimitive)(t)?i[t]:t})).join(", "):i[t];break;case"range":n="lower: ".concat(t[0],", upper: ").concat(t[1]);break;case"number":n=String(t);break;case"image":break;case"matrix":case"tensor":case"matches":n=JSON.stringify(t,null,2);break;default:n=String(t)}return n}function Ae(t){var e=new Date(t);return"".concat(e.toLocaleDateString()," ").concat(e.toLocaleTimeString())}var Te=i()(ke.a,{}),Le=function(t){p()(n,t);var e=Re(n);function n(t){var s;return o()(this,n),s=e.call(this,t),y()(u()(s),"highlightFactory",(function(t){return function(){if(Ee(),s.state.selected===t)return s.setState({selected:null});var e=document.getElementById(t);if(e)if(Fe("Found element, should add glow effect..."),Object($t.a)(e)){var n=e.cloneNode(!0);n.addEventListener("click",(function(t){Fe("Clicked on element with ID ".concat(t.target.id)),document.getElementById(t.target.id).click()}));var i=document.createElement("div");i.id="duplicated-container",n.id="duplicated-elem",n.classList.add("focus-glow"),i.append(n),document.body.appendChild(i)}else e.classList.add("focus-glow"),e.scrollIntoView();s.setState({selected:t})}})),y()(u()(s),"handleRadioChange",T()(I.a.mark((function t(){var e;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=s.props.session,s.userHash){t.next=5;break}return t.next=4,e.getFakeUsers();case 4:s.userHash=t.sent;case 5:s.setState({anonymized:!s.state.anonymized});case 6:case"end":return t.stop()}}),t)})))),y()(u()(s),"prepareQuestionsForExport",(function(){for(var t=[],e=s.props.session,n=e.responseVisualizerIds,i=e.responseVisualizers,a=0;a<n.length;a++){for(var o=i[n[a]],r=o.ref.props.data.question,l=o.ref.props.data.solution,c=o.ref.state.actions,u=[],d=0;d<c.length;d++){var p=c[d];u.push({id:p.id,type:p.type,value:p.value,absoluteTime:Ae(p.absoluteTime),time:p.time,email:s.state.anonymized?s.userHash.email[p.email]:p.email,name:s.state.anonymized?s.userHash.name[p.name]:p.name,question:j.a.isValidElement(r)?be()(r):String(r),solution:j.a.isValidElement(l)?be()(l):l})}t=t.concat(u)}return t})),y()(u()(s),"saveJSON",(function(){var t=s.props.session,e=s.prepareQuestionsForExport(),n=new Blob([JSON.stringify(e)],{type:"application/json"}),i="questions_".concat(t.namespaceName,"_").concat(t.lessonName,".json");Object(et.a)(n,i)})),y()(u()(s),"saveCSV",(function(){var t=s.props.session,e=s.prepareQuestionsForExport();M()(e,{header:!0},(function(e,n){if(e)return t.addNotification({title:s.props.t("error-encountered"),message:s.props.t("error-csv")+e.message,level:"error",position:"tl"});var i=new Blob([n],{type:"text/plain"}),a="questions_".concat(t.namespaceName,"_").concat(t.lessonName,".csv");Object(et.a)(i,a)}))})),y()(u()(s),"assembleUserList",(function(){var t=s.props.session,e=[];if(s.state.anonymized){var n=s.userHash,i=function(t){return n.name[t.name]||t.name},a=function(t){return n.email[t.email]||t.email};if(t.cohorts)if(t.selectedCohort)for(var o=t.selectedCohort,r=0;r<o.members.length;r++){var l=o.members[r];e.push({value:o.members[r],label:"".concat(i(l)," (").concat(a(l),")")})}else for(var c=0;c<t.cohorts.length;c++)for(var u=t.cohorts[c],d=0;d<u.members.length;d++){var p=u.members[d];e.push({value:u.members[d],label:"".concat(i(p)," (").concat(a(p),")")})}return console.log(e),e}if(t.cohorts)if(t.selectedCohort)for(var h=t.selectedCohort,f=0;f<h.members.length;f++){var m=h.members[f];e.push({value:h.members[f],label:"".concat(m.name," (").concat(m.email,")")})}else for(var v=0;v<t.cohorts.length;v++)for(var g=t.cohorts[v],y=0;y<g.members.length;y++){var b=g.members[y];e.push({value:g.members[y],label:"".concat(b.name," (").concat(b.email,")")})}return e})),Fe("Initializing state in constructor..."),s.state={selected:null,leftUser:null,rightUser:null,anonymized:!1},s}return l()(n,[{key:"componentDidMount",value:function(){var t=this,e=this.props.session;this.unsubscribe=e.subscribe((function(e,n){e!==it.J&&e!==it.B||t.forceUpdate()}))}},{key:"componentWillUnmount",value:function(){Ee(),this.unsubscribe()}},{key:"render",value:function(){var t=this;Fe("Render student responses...");for(var e=this.props.session,n=e.responseVisualizers,s=e.responseVisualizerIds,a=this.assembleUserList(),o=new Array(s.length),r=function(e){var a=n[s[e]],r=a.ref.props.data.question,l=a.ref.state.actions,c=a.ref.props.data.solution,u=void 0,d=void 0;u=t.state.leftUser?l.filter((function(e){return e.email===t.state.leftUser.email})):[],d=t.state.rightUser?l.filter((function(e){return e.email===t.state.rightUser.email})):[];var p=s[e];o[e]=i()(we.a,{className:"student-responses-row"},e,i()(_t.a,{tooltip:r,placement:"left"},void 0,i()(ke.a,{onClick:t.highlightFactory(p),style:{cursor:"pointer",background:t.state.selected===p?"gold":"lightgrey"}},void 0,p)),i()(ke.a,{className:"student-responses-first-col"},void 0,i()(Ne.a,{active:u.length>1,style:{width:"100%",paddingTop:14},tooltip:t.props.t("cycle-through-answers")},void 0,u.map((function(t,e){return i()("span",{},e,i()("span",{className:"student-responses-time"},void 0,Ae(t.absoluteTime)),Ie(t.value,a))})))),i()(ke.a,{style:{background:t.state.rightUser?"rgba(173, 216, 230, 0.4)":"#fff2e5"}},void 0,t.state.rightUser?i()(Ne.a,{active:d.length>1,style:{width:"100%",paddingTop:14},tooltip:t.props.t("cycle-through-answers")},void 0,d.map((function(t,e){return i()("span",{},e,i()("span",{className:"student-responses-time"},void 0,Ae(t.absoluteTime)),Ie(t.value,a))}))):i()("span",{},void 0,Ie(c,a))))},l=0;l<s.length;l++)r(l);var c=function(n){var s,a,o,r=n.data.value;return t.state.anonymized?(o=e.server+"/thumbnail/anonymous.jpg",s=t.userHash.email[r.email]||r.email,a=t.userHash.name[r.name]||r.name):(o=e.server+"/thumbnail/"+r.picture,s=r.email,a=r.name),j.a.createElement(ge.z.Option,n,i()("img",{alt:t.props.t("profile-pic"),src:o,width:"32px",height:"32px"}),i()(_t.a,{tooltip:s,placement:"top"},void 0,i()("span",{style:{paddingLeft:6}},void 0,a)))},u=function(n){var s,a,o,r=n.data.value;return t.state.anonymized?(o=e.server+"/thumbnail/anonymous.jpg",s=t.userHash.email[r.email]||r.email,a=t.userHash.name[r.name]||r.name):(o=e.server+"/thumbnail/"+r.picture,s=r.email,a=r.name),j.a.createElement(ge.z.SingleValue,n,i()("img",{alt:t.props.t("profile-pic"),src:o,width:"32px",height:"32px"}),i()(_t.a,{tooltip:s,placement:"top"},void 0,i()("span",{style:{paddingLeft:6}},void 0,a)))};return i()("div",{style:{marginLeft:"6px"}},void 0,i()(we.a,{style:{paddingTop:"3px",paddingBottom:"3px",paddingRight:"16px"}},void 0,Te,i()(ke.a,{},void 0,i()(Ct.a,{components:{Option:c,SingleValue:u},placeholder:this.props.t("select-enrolled-student"),options:a,styles:Oe.a,onChange:function(e){t.setState({leftUser:e?e.value:null})},isClearable:!0})),i()(ke.a,{},void 0,i()(Ct.a,{components:{Option:c,SingleValue:u},placeholder:this.props.t("solutions-or-student"),options:a,styles:Oe.a,onChange:function(e){t.setState({rightUser:e?e.value:null})},isClearable:!0}))),i()(je.a,{style:{height:window.innerHeight/1.5,overflowY:"scroll"}},void 0,o),i()(J.a,{name:"options",onChange:this.handleRadioChange,type:"radio",size:"small",value:this.state.anonymized,style:{marginRight:"5px"}},void 0,i()(K.a,{size:"sm",variant:"light",value:!1,style:{fontSize:"12px",color:this.state.anonymized?"#A9A9A9":"black"}},void 0,this.props.t("original")),i()(K.a,{size:"sm",variant:"light",value:!0,style:{fontSize:"12px",color:this.state.anonymized?"black":"#A9A9A9"}},void 0,this.props.t("anonymized"))),i()(V.a,{size:"sm"},void 0,i()(H.a,{variant:"primary",onClick:this.saveJSON},void 0,this.props.t("save-json")),i()(H.a,{variant:"primary",onClick:this.saveCSV},void 0,this.props.t("save-csv"))))}}]),n}(b.Component),Pe=n(4505);n(331);function Be(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,s=v()(t);if(e){var i=v()(this).constructor;n=Reflect.construct(s,arguments,i)}else n=s.apply(this,arguments);return f()(this,n)}}var Me=F.a?15:0,Ue=k()("isle:statusbar-instructor-view"),He=i()(Ht,{}),Ve=i()("div",{className:"instructor-view-bottom"}),_e=function(t){p()(n,t);var e=Be(n);function n(t,s){var a;o()(this,n),a=e.call(this,t),y()(u()(a),"toggleHidden",(function(){a.setState({hidden:!a.state.hidden})})),y()(u()(a),"toggleBar",(function(){a.state.hidden?(a.toggleHidden(),Object(Vt.a)(a.instructorView,"right",Me,400),a.handler.style.opacity=.7):(Object(Vt.a)(a.instructorView,"right",a.state.rightPos,400,a.toggleHidden),setTimeout(a.toggleHidden,400),a.handler.style.opacity=.7)})),y()(u()(a),"onMouseOver",(function(){a.state.hidden&&(a.handler.style.opacity=1)})),y()(u()(a),"onMouseOut",(function(){a.state.hidden&&(a.handler.style.opacity=.7)})),y()(u()(a),"renderTabs",(function(){var t=a.context;if(a.state.hidden)return null;var e=!N()(t.responseVisualizers);return i()(z.a,{activeKey:a.state.activeTab,id:"instructor-view-tabs",onSelect:function(t){a.setState({activeTab:t})}},void 0,e?i()(x.a,{eventKey:"response_visualizers",title:a.props.t("activity")},void 0,i()(ve,{selectedCohort:t.selectedCohort,session:t,onThumbnailClick:function(t){Ue("Go to actions with id "+t+"..."),a.setState({activeTab:"action_log",selectedID:t})},t:a.props.t})):null,e?i()(x.a,{eventKey:"student_responses",title:a.props.t("responses")},void 0,i()(Le,{selectedCohort:t.selectedCohort,session:t,t:a.props.t})):null,i()(x.a,{eventKey:"active_users",title:i()("span",{},void 0,a.props.t("active-users"),i()(C.a,{variant:"secondary",style:{marginLeft:6}},void 0,t.userList.length))},void 0,i()(ae,{session:t,onThumbnailClick:function(t){Ue("Go to actions from user "+t+"..."),a.setState({activeTab:"action_log",selectedEmail:t})},t:a.props.t})),i()(x.a,{eventKey:"action_log",title:a.props.t("action-log")},void 0,i()(Pt,{selectedEmail:a.state.selectedEmail,selectedID:a.state.selectedID,t:a.props.t})),i()(x.a,{eventKey:"instructor_notes",title:a.props.t("instructor-notes")},void 0,"instructor_notes"===a.state.activeTab?He:null))}));var r=!N()(s.responseVisualizers);return a.state={activeTab:r?"response_visualizers":"active_users",hidden:!0,rightPos:-R()(.45*window.innerWidth,400),selectedEmail:null,selectedID:null},a}return l()(n,[{key:"componentDidMount",value:function(){var t=this,e=this.context;this.unsubscribe=e.subscribe((function(e,n){e!==it.v&&e!==it.L&&e!==it.M&&e!==it.K&&e!==it.B||t.forceUpdate()}))}},{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"render",value:function(){var t=this;return i()(b.Fragment,{},void 0,j.a.createElement("div",{className:"instructor-view unselectable",ref:function(e){t.instructorView=e},style:{right:this.state.rightPos,display:this.state.hidden?"none":"inherit"}},i()("div",{className:"instructor-view-top"},void 0,i()("h3",{style:{marginTop:"20px"}},void 0,this.props.t("instructor-panel")),i()("hr",{style:{background:"#333",backgroundImage:"linear-gradient(to right, #ccc, #333, #ccc)",height:"1px",border:0}})),i()("div",{className:"instructor-view-middle"},void 0,this.renderTabs(),i()(Pe.a,{id:"instructor-view-cohort-select",label:this.props.t("only-show-users-from"),session:this.context,t:this.props.t})),Ve),i()(_t.a,{tooltip:this.state.hidden?this.props.t("instructor-panel-open"):this.props.t("instructor-panel-close"),placement:"left"},void 0,j.a.createElement("div",{className:"instructor-view-handler",role:"button",tabIndex:0,"aria-label":this.state.hidden?this.props.t("instructor-panel-open"):this.props.t("instructor-panel-close"),onClick:this.toggleBar,onKeyPress:this.toggleBar,onMouseOver:this.onMouseOver,onFocus:this.onMouseOver,onMouseOut:this.onMouseOut,onBlur:this.onMouseOut,ref:function(e){t.handler=e},style:{right:Me+12,borderWidth:this.state.hidden?"15px 26px 15px 0":"15px 0 15px 26px",borderColor:this.state.hidden?"transparent #c95d0a transparent transparent":"transparent transparent transparent #c95d0a"}})))}}]),n}(b.Component);_e.contextType=st.a;e.default=Object(S.a)()(_e)}}]);