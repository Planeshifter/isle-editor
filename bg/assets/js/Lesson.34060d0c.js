(self.webpackChunk=self.webpackChunk||[]).push([[8611],{279779:function(e,t,n){"use strict";n.d(t,{xV:function(){return X},W4:function(){return q},sN:function(){return j}});n(382139);var o=n(264659),i=n(904730),r=n(673989),s=n(175663),a=n(750591),u=n(575630),l=n(151119),c=(n(175115),n(202784)),d=n(213980),p=n.n(d),f=n(72779),h=n.n(f);n(296253),n(66108);function v(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return"function"==typeof e&&e.apply(void 0,n)}function m(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var b="react-contextmenu",y="react-contextmenu--visible",g="react-contextmenu-wrapper",Z="react-contextmenu-item",M="react-contextmenu-item--active",C="react-contextmenu-item--disabled",w="react-contextmenu-item--divider",O="react-contextmenu-item--selected",k="react-contextmenu-submenu",S={},x=Boolean("undefined"!=typeof window&&window.document&&window.document.createElement),R="REACT_CONTEXTMENU_SHOW",N="REACT_CONTEXTMENU_HIDE";function T(e,t){var n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window;"function"==typeof window.CustomEvent?n=new window.CustomEvent(e,{detail:t}):(n=document.createEvent("CustomEvent")).initCustomEvent(e,!1,!0,t),o&&(o.dispatchEvent(n),Object.assign(S,t))}function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;T(R,Object.assign({},e,{type:R}),t)}function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;T(N,Object.assign({},e,{type:N}),t)}var H=new function e(){var t=this;(0,o.Z)(this,e),(0,l.Z)(this,"handleShowEvent",(function(e){for(var n in t.callbacks)m(t.callbacks,n)&&t.callbacks[n].show(e)})),(0,l.Z)(this,"handleHideEvent",(function(e){for(var n in t.callbacks)m(t.callbacks,n)&&t.callbacks[n].hide(e)})),(0,l.Z)(this,"register",(function(e,n){var o=Math.random().toString(36).substring(7);return t.callbacks[o]={show:e,hide:n},o})),(0,l.Z)(this,"unregister",(function(e){e&&t.callbacks[e]&&delete t.callbacks[e]})),this.callbacks={},x&&(window.addEventListener(R,this.handleShowEvent),window.addEventListener(N,this.handleHideEvent))},L=(n(319371),n(607560));function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=(0,u.Z)(e);if(t){var i=(0,u.Z)(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return(0,a.Z)(this,n)}}var P=function(e){(0,s.Z)(n,e);var t=D(n);function n(){var e;(0,o.Z)(this,n);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return e=t.call.apply(t,[this].concat(s)),(0,l.Z)((0,r.Z)(e),"handleClick",(function(t){0!==t.button&&1!==t.button&&t.preventDefault(),e.props.disabled||e.props.divider||(v(e.props.onClick,t,Object.assign({},e.props.data,S.data),S.target),e.props.preventClose||I())})),e}return(0,i.Z)(n,[{key:"render",value:function(){var e,t=this,n=this.props,o=n.attributes,i=n.children,r=n.className,s=n.disabled,a=n.divider,u=n.selected,d=h()(r,Z,o.className,(e={},(0,l.Z)(e,h()(C,o.disabledClassName),s),(0,l.Z)(e,h()(w,o.dividerClassName),a),(0,l.Z)(e,h()(O,o.selectedClassName),u),e));return c.createElement("div",(0,L.Z)({},o,{className:d,role:"menuitem",tabIndex:"-1","aria-disabled":s?"true":"false",ref:function(e){t.ref=e},onMouseMove:this.props.onMouseMove,onMouseLeave:this.props.onMouseLeave,onTouchEnd:this.handleClick,onClick:this.handleClick}),a?null:i)}}]),n}(c.Component);(0,l.Z)(P,"defaultProps",{attributes:{},children:null,className:"",data:{},disabled:!1,divider:!1,onClick:function(){return null},onMouseMove:function(){return null},onMouseLeave:function(){return null},preventClose:!1,selected:!1});var j=P;function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=(0,u.Z)(e);if(t){var i=(0,u.Z)(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return(0,a.Z)(this,n)}}var A=function(e){(0,s.Z)(n,e);var t=B(n);function n(e){var i;return(0,o.Z)(this,n),i=t.call(this,e),(0,l.Z)((0,r.Z)(i),"handleKeyNavigation",(function(e){if(!1!==i.state.isVisible)switch(e.keyCode){case 37:case 27:e.preventDefault(),i.hideMenu(e);break;case 38:e.preventDefault(),i.selectChildren(!0);break;case 40:e.preventDefault(),i.selectChildren(!1);break;case 39:i.tryToOpenSubMenu(e);break;case 13:e.preventDefault(),i.tryToOpenSubMenu(e);var t=i.seletedItemRef&&i.seletedItemRef.props&&i.seletedItemRef.props.disabled;i.seletedItemRef&&i.seletedItemRef.ref instanceof HTMLElement&&!t?i.seletedItemRef.ref.click():i.hideMenu(e)}})),(0,l.Z)((0,r.Z)(i),"handleForceClose",(function(){i.setState({forceSubMenuOpen:!1})})),(0,l.Z)((0,r.Z)(i),"tryToOpenSubMenu",(function(e){i.state.selectedItem&&i.state.selectedItem.type===i.getSubMenuType()&&(e.preventDefault(),i.setState({forceSubMenuOpen:!0}))})),(0,l.Z)((0,r.Z)(i),"selectChildren",(function(e){var t=i.state.selectedItem,n=[],o=0,r={};if(c.Children.forEach(i.props.children,(function e(t,s){t&&([j,i.getSubMenuType()].indexOf(t.type)<0?c.Children.forEach(t.props?t.props.children:[],e):t.props.divider||(t.props.disabled&&(++o,r[s]=!0),n.push(t)))})),o!==n.length){var s=function(t){var o=t;do{e?--o:++o,o<0?o=n.length-1:o>=n.length&&(o=0)}while(o!==t&&r[o]);return o===t?null:o}(n.indexOf(t));null!==s&&i.setState({selectedItem:n[s],forceSubMenuOpen:!1})}})),(0,l.Z)((0,r.Z)(i),"onChildMouseMove",(function(e){i.state.selectedItem!==e&&i.setState({selectedItem:e,forceSubMenuOpen:!1})})),(0,l.Z)((0,r.Z)(i),"onChildMouseLeave",(function(){i.setState({selectedItem:null,forceSubMenuOpen:!1})})),(0,l.Z)((0,r.Z)(i),"renderChildren",(function(e){return c.Children.map(e,(function(e){var t={};return c.isValidElement(e)?[j,i.getSubMenuType()].indexOf(e.type)<0?(t.children=i.renderChildren(e.props?e.props.children:[]),c.cloneElement(e,t)):(t.onMouseLeave=i.onChildMouseLeave.bind((0,r.Z)(i)),e.type===i.getSubMenuType()&&(t.forceOpen=i.state.forceSubMenuOpen&&i.state.selectedItem===e,t.forceClose=i.handleForceClose,t.parentKeyNavigationHandler=i.handleKeyNavigation),e.props.divider||i.state.selectedItem!==e?(t.onMouseMove=function(){return i.onChildMouseMove(e)},c.cloneElement(e,t)):(t.selected=!0,t.ref=function(e){i.seletedItemRef=e},c.cloneElement(e,t))):e}))})),i.seletedItemRef=null,i.state={selectedItem:null,forceSubMenuOpen:!1},i}return n}(c.Component);function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=(0,u.Z)(e);if(t){var i=(0,u.Z)(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return(0,a.Z)(this,n)}}var U=function(e){(0,s.Z)(n,e);var t=W(n);function n(e){var i;return(0,o.Z)(this,n),i=t.call(this,e),(0,l.Z)((0,r.Z)(i),"getMenuPosition",(function(){var e=window,t=e.innerWidth,n=e.innerHeight,o=i.subMenu.getBoundingClientRect(),r={};return o.bottom>n?r.bottom=0:r.top=0,o.right<t?r.left="100%":r.right="100%",r})),(0,l.Z)((0,r.Z)(i),"getRTLMenuPosition",(function(){var e=window.innerHeight,t=i.subMenu.getBoundingClientRect(),n={};return t.bottom>e?n.bottom=0:n.top=0,t.left<0?n.left="100%":n.right="100%",n})),(0,l.Z)((0,r.Z)(i),"hideMenu",(function(e){e.preventDefault(),i.hideSubMenu(e)})),(0,l.Z)((0,r.Z)(i),"hideSubMenu",(function(e){e.detail&&e.detail.id&&i.menu&&e.detail.id!==i.menu.id||(i.props.forceOpen&&i.props.forceClose(),i.setState({visible:!1,selectedItem:null}),i.unregisterHandlers())})),(0,l.Z)((0,r.Z)(i),"handleClick",(function(e){e.preventDefault(),i.props.disabled||(v(i.props.onClick,e,Object.assign({},i.props.data,S.data),S.target),i.props.onClick&&!i.props.preventCloseOnClick&&I())})),(0,l.Z)((0,r.Z)(i),"handleMouseEnter",(function(){i.closetimer&&clearTimeout(i.closetimer),i.props.disabled||i.state.visible||(i.opentimer=setTimeout((function(){return i.setState({visible:!0,selectedItem:null})}),i.props.hoverDelay))})),(0,l.Z)((0,r.Z)(i),"handleMouseLeave",(function(){i.opentimer&&clearTimeout(i.opentimer),i.state.visible&&(i.closetimer=setTimeout((function(){return i.setState({visible:!1,selectedItem:null})}),i.props.hoverDelay))})),(0,l.Z)((0,r.Z)(i),"menuRef",(function(e){i.menu=e})),(0,l.Z)((0,r.Z)(i),"subMenuRef",(function(e){i.subMenu=e})),(0,l.Z)((0,r.Z)(i),"registerHandlers",(function(){document.removeEventListener("keydown",i.props.parentKeyNavigationHandler),document.addEventListener("keydown",i.handleKeyNavigation)})),(0,l.Z)((0,r.Z)(i),"unregisterHandlers",(function(e){document.removeEventListener("keydown",i.handleKeyNavigation),e||document.addEventListener("keydown",i.props.parentKeyNavigationHandler)})),i.state=Object.assign({},i.state,{visible:!1}),i}return(0,i.Z)(n,[{key:"componentDidMount",value:function(){this.listenId=H.register((function(){}),this.hideSubMenu)}},{key:"getSubMenuType",value:function(){return n}},{key:"shouldComponentUpdate",value:function(e,t){return this.isVisibilityChange=!(this.state.visible===t.visible&&this.props.forceOpen===e.forceOpen||this.state.visible&&e.forceOpen||this.props.forceOpen&&t.visible),!0}},{key:"componentDidUpdate",value:function(){var e=this;if(this.isVisibilityChange)if(this.props.forceOpen||this.state.visible){(window.requestAnimationFrame||setTimeout)((function(){var t=e.props.rtl?e.getRTLMenuPosition():e.getMenuPosition();e.subMenu.style.removeProperty("top"),e.subMenu.style.removeProperty("bottom"),e.subMenu.style.removeProperty("left"),e.subMenu.style.removeProperty("right"),m(t,"top")&&(e.subMenu.style.top=t.top),m(t,"left")&&(e.subMenu.style.left=t.left),m(t,"bottom")&&(e.subMenu.style.bottom=t.bottom),m(t,"right")&&(e.subMenu.style.right=t.right),e.subMenu.classList.add(y),e.registerHandlers(),e.setState({selectedItem:null})}))}else{this.subMenu.addEventListener("transitionend",(function t(){e.subMenu.removeEventListener("transitionend",t),e.subMenu.style.removeProperty("bottom"),e.subMenu.style.removeProperty("right"),e.subMenu.style.top=0,e.subMenu.style.left="100%",e.unregisterHandlers()})),this.subMenu.classList.remove(y)}}},{key:"componentWillUnmount",value:function(){this.listenId&&H.unregister(this.listenId),this.opentimer&&clearTimeout(this.opentimer),this.closetimer&&clearTimeout(this.closetimer),this.unregisterHandlers(!0)}},{key:"render",value:function(){var e,t=this.props,n=t.children,o=t.attributes,i=t.disabled,r=t.title,s=t.selected,a=this.state.visible,u={ref:this.menuRef,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,className:h()(Z,k,o.listClassName),style:{position:"relative"}},d={className:h()(Z,o.className,(e={},(0,l.Z)(e,h()(C,o.disabledClassName),i),(0,l.Z)(e,h()(M,o.visibleClassName),a),(0,l.Z)(e,h()(O,o.selectedClassName),s),e)),onMouseMove:this.props.onMouseMove,onMouseOut:this.props.onMouseOut,onClick:this.handleClick},p={ref:this.subMenuRef,style:{position:"absolute",transition:"opacity 1ms",top:0,left:"100%"},className:h()(b,this.props.className)};return c.createElement("nav",(0,L.Z)({},u,{role:"menuitem",tabIndex:"-1","aria-haspopup":"true"}),c.createElement("div",(0,L.Z)({},o,d),r),c.createElement("nav",(0,L.Z)({},p,{role:"menu",tabIndex:"-1"}),this.renderChildren(n)))}}]),n}(A);(0,l.Z)(U,"propTypes",{children:p().node.isRequired,attributes:p().object,title:p().node.isRequired,className:p().string,disabled:p().bool,hoverDelay:p().number,rtl:p().bool,selected:p().bool,onMouseMove:p().func,onMouseOut:p().func,forceOpen:p().bool,forceClose:p().func,parentKeyNavigationHandler:p().func}),(0,l.Z)(U,"defaultProps",{disabled:!1,hoverDelay:500,attributes:{},className:"",rtl:!1,selected:!1,onMouseMove:function(){return null},onMouseOut:function(){return null},forceOpen:!1,forceClose:function(){return null},parentKeyNavigationHandler:function(){return null}});var V=U;function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=(0,u.Z)(e);if(t){var i=(0,u.Z)(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return(0,a.Z)(this,n)}}var z=function(e){(0,s.Z)(n,e);var t=K(n);function n(e){var i;return(0,o.Z)(this,n),i=t.call(this,e),(0,l.Z)((0,r.Z)(i),"registerHandlers",(function(){document.addEventListener("mousedown",i.handleOutsideClick),document.addEventListener("touchstart",i.handleOutsideClick),i.props.preventHideOnScroll||document.addEventListener("scroll",i.handleHide),i.props.preventHideOnContextMenu||document.addEventListener("contextmenu",i.handleHide),document.addEventListener("keydown",i.handleKeyNavigation),i.props.preventHideOnResize||window.addEventListener("resize",i.handleHide)})),(0,l.Z)((0,r.Z)(i),"unregisterHandlers",(function(){document.removeEventListener("mousedown",i.handleOutsideClick),document.removeEventListener("touchstart",i.handleOutsideClick),document.removeEventListener("scroll",i.handleHide),document.removeEventListener("contextmenu",i.handleHide),document.removeEventListener("keydown",i.handleKeyNavigation),window.removeEventListener("resize",i.handleHide)})),(0,l.Z)((0,r.Z)(i),"handleShow",(function(e){if(e.detail.id===i.props.id&&!i.state.isVisible){var t=e.detail.position,n=t.x,o=t.y;i.setState({isVisible:!0,x:n,y:o}),i.registerHandlers(),v(i.props.onShow,e)}})),(0,l.Z)((0,r.Z)(i),"handleHide",(function(e){!i.state.isVisible||e.detail&&e.detail.id&&e.detail.id!==i.props.id||(i.unregisterHandlers(),i.setState({isVisible:!1,selectedItem:null,forceSubMenuOpen:!1}),v(i.props.onHide,e))})),(0,l.Z)((0,r.Z)(i),"handleOutsideClick",(function(e){i.menu.contains(e.target)||I()})),(0,l.Z)((0,r.Z)(i),"handleMouseLeave",(function(e){e.preventDefault(),v(i.props.onMouseLeave,e,Object.assign({},i.props.data,S.data),S.target),i.props.hideOnLeave&&I()})),(0,l.Z)((0,r.Z)(i),"handleContextMenu",(function(e){e.preventDefault(),i.handleHide(e)})),(0,l.Z)((0,r.Z)(i),"hideMenu",(function(e){27!==e.keyCode&&13!==e.keyCode||I()})),(0,l.Z)((0,r.Z)(i),"getMenuPosition",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={top:t,left:e};if(!i.menu)return n;var o=window,r=o.innerWidth,s=o.innerHeight,a=i.menu.getBoundingClientRect();return t+a.height>s&&(n.top-=a.height),e+a.width>r&&(n.left-=a.width),n.top<0&&(n.top=a.height<s?(s-a.height)/2:0),n.left<0&&(n.left=a.width<r?(r-a.width)/2:0),n})),(0,l.Z)((0,r.Z)(i),"getRTLMenuPosition",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n={top:t,left:e};if(!i.menu)return n;var o=window,r=o.innerWidth,s=o.innerHeight,a=i.menu.getBoundingClientRect();return n.left=e-a.width,t+a.height>s&&(n.top-=a.height),n.left<0&&(n.left+=a.width),n.top<0&&(n.top=a.height<s?(s-a.height)/2:0),n.left+a.width>r&&(n.left=a.width<r?(r-a.width)/2:0),n})),(0,l.Z)((0,r.Z)(i),"menuRef",(function(e){i.menu=e})),i.state=Object.assign({},i.state,{x:0,y:0,isVisible:!1}),i}return(0,i.Z)(n,[{key:"getSubMenuType",value:function(){return V}},{key:"componentDidMount",value:function(){this.listenId=H.register(this.handleShow,this.handleHide)}},{key:"componentDidUpdate",value:function(){var e=this,t=window.requestAnimationFrame||setTimeout;this.state.isVisible?t((function(){var n=e.state,o=n.x,i=n.y,r=e.props.rtl?e.getRTLMenuPosition(o,i):e.getMenuPosition(o,i),s=r.top,a=r.left;t((function(){e.menu&&(e.menu.style.top="".concat(s,"px"),e.menu.style.left="".concat(a,"px"),e.menu.style.opacity=1,e.menu.style.pointerEvents="auto")}))})):t((function(){e.menu&&(e.menu.style.opacity=0,e.menu.style.pointerEvents="none")}))}},{key:"componentWillUnmount",value:function(){this.listenId&&H.unregister(this.listenId),this.unregisterHandlers()}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,o=e.style,i=this.state.isVisible,r=Object.assign({},o,{position:"fixed",opacity:0,pointerEvents:"none"}),s=h()(b,n,(0,l.Z)({},y,i));return c.createElement("nav",{role:"menu",tabIndex:"-1",ref:this.menuRef,style:r,className:s,onContextMenu:this.handleContextMenu,onMouseLeave:this.handleMouseLeave},this.renderChildren(t))}}]),n}(A);(0,l.Z)(z,"propTypes",{id:p().string.isRequired,children:p().node.isRequired,data:p().object,className:p().string,hideOnLeave:p().bool,rtl:p().bool,onHide:p().func,onMouseLeave:p().func,onShow:p().func,preventHideOnContextMenu:p().bool,preventHideOnResize:p().bool,preventHideOnScroll:p().bool,style:p().object}),(0,l.Z)(z,"defaultProps",{className:"",data:{},hideOnLeave:!1,rtl:!1,onHide:function(){return null},onMouseLeave:function(){return null},onShow:function(){return null},preventHideOnContextMenu:!1,preventHideOnResize:!1,preventHideOnScroll:!1,style:{}});var X=z;function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=(0,u.Z)(e);if(t){var i=(0,u.Z)(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return(0,a.Z)(this,n)}}var _=["input","textarea"],F=function(e){(0,s.Z)(n,e);var t=Y(n);function n(){var e;(0,o.Z)(this,n);for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return e=t.call.apply(t,[this].concat(s)),(0,l.Z)((0,r.Z)(e),"touchHandled",!1),(0,l.Z)((0,r.Z)(e),"handleMouseDown",(function(t){e.props.holdToDisplay>=0&&0===t.button&&(t.persist(),t.stopPropagation(),e.mouseDownTimeoutId=setTimeout((function(){return e.handleContextClick(t)}),e.props.holdToDisplay)),v(e.props.attributes.onMouseDown,t)})),(0,l.Z)((0,r.Z)(e),"handleMouseUp",(function(t){0===t.button&&clearTimeout(e.mouseDownTimeoutId),v(e.props.attributes.onMouseUp,t)})),(0,l.Z)((0,r.Z)(e),"handleMouseOut",(function(t){0===t.button&&clearTimeout(e.mouseDownTimeoutId),v(e.props.attributes.onMouseOut,t)})),(0,l.Z)((0,r.Z)(e),"handleTouchstart",(function(t){e.touchHandled=!1,e.props.holdToDisplay>=0&&(t.persist(),t.stopPropagation(),e.touchstartTimeoutId=setTimeout((function(){e.handleContextClick(t),e.touchHandled=!0}),e.props.holdToDisplay)),v(e.props.attributes.onTouchStart,t)})),(0,l.Z)((0,r.Z)(e),"handleTouchEnd",(function(t){e.touchHandled&&t.preventDefault(),clearTimeout(e.touchstartTimeoutId),v(e.props.attributes.onTouchEnd,t)})),(0,l.Z)((0,r.Z)(e),"handleContextMenu",(function(t){t.button===e.props.mouseButton&&e.handleContextClick(t),v(e.props.attributes.onContextMenu,t)})),(0,l.Z)((0,r.Z)(e),"handleMouseClick",(function(t){t.button===e.props.mouseButton?e.handleContextClick(t):e.props.holdToDisplay>0&&I(),v(e.props.attributes.onClick,t)})),(0,l.Z)((0,r.Z)(e),"handleContextClick",(function(t){if(!(e.props.disable||e.props.disableIfShiftIsPressed&&t.shiftKey)){var n=document.activeElement;if(!(n&&(-1!==_.indexOf(n.tagName.toLowerCase())||n.isContentEditable))&&"CANVAS"!==n.tagName){t.preventDefault(),t.stopPropagation();var o=t.clientX||t.touches&&t.touches[0].pageX,i=t.clientY||t.touches&&t.touches[0].pageY;e.props.posX&&(o-=e.props.posX),e.props.posY&&(i-=e.props.posY),I();var r=v(e.props.collect,e.props),s={position:{x:o,y:i},target:e.elem,id:e.props.id};r&&"function"==typeof r.then?r.then((function(e){s.data=Object.assign({},e,{target:t.target}),E(s)})):(s.data=Object.assign({},r,{target:t.target}),E(s))}}})),(0,l.Z)((0,r.Z)(e),"elemRef",(function(t){e.elem=t})),e}return(0,i.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.renderTag,n=e.attributes,o=e.children,i=Object.assign({},n,{className:h()(g,n.className),onContextMenu:this.handleContextMenu,onClick:this.handleMouseClick,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp,onTouchStart:this.handleTouchstart,onTouchEnd:this.handleTouchEnd,onMouseOut:this.handleMouseOut,ref:this.elemRef});return c.createElement(t,i,o)}}]),n}(c.Component);F.defaultProps={attributes:{},collect:function(){return null},disable:!1,holdToDisplay:1e3,renderTag:"div",posX:0,posY:0,mouseButton:2,disableIfShiftIsPressed:!1};var q=F;n(462773)},429230:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return J}});n(382139);var o,i=n(858255),r=n(264659),s=n(904730),a=n(673989),u=n(175663),l=n(750591),c=n(575630),d=n(151119),p=n(202784),f=(n(213980),n(167185)),h=n.n(f),v=n(227843),m=n(320765),b=n(279779),y=n(844601),g=(0,y.Z)((function(){return Promise.all([n.e(3312),n.e(8740)]).then(n.bind(n,788328))})),Z=n(790599),M=n(741319),C=n(5140),w=n(964909),O=n(574315),k=n(376699),S=n(109361),x=n(31071),R=(0,y.Z)((function(){return n.e(4580).then(n.bind(n,917161))})),N=function(){var e=(0,k.$)("internal/lesson").t,t=(0,p.useState)(!1),n=(0,O.Z)(t,2),r=n[0],s=n[1],a=(0,p.useCallback)((function(){s(!1)}),[]),u=(0,p.useCallback)((function(){s(!r)}),[r]);return(0,i.Z)(p.Fragment,{},void 0,r?(0,i.Z)(R,{run:r,onFinish:a}):null,(0,i.Z)(S.Z,{placement:"left",overlay:(0,i.Z)(x.Z,{id:"interface-tour-button"},void 0,e("start-interface-tour"))},void 0,(0,i.Z)("button",{onClick:u,onMouseOver:R.preload,onFocus:R.preload,className:"interface-tour-button","aria-label":e(r?"end-interface-tour":"start-interface-tour")},void 0,o||(o=(0,i.Z)("i",{className:"fas fa-info-circle"})))))},T=(n(296253),n(66108),n(198)),E=n(911755),I=n.n(E),H=n(708957),L=n.n(H);function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=(0,c.Z)(e);if(t){var i=(0,c.Z)(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return(0,l.Z)(this,n)}}var P=I()("isle:lesson:contextmenu"),j=function(e){(0,u.Z)(n,e);var t=D(n);function n(e){var o;return(0,r.Z)(this,n),o=t.call(this,e),(0,d.Z)((0,a.Z)(o),"handleSelectionChange",(function(e){if(!o.state.contextMenuIsOpen){var t=window.getSelection();if(t.isCollapsed&&"Range"!==t.type)setTimeout((function(){o.forceUpdate()}),150);else if(o.lastSelection=t,t.getRangeAt&&t.rangeCount){var n=t.getRangeAt(0),i=t.toString();o.setState({lastRange:n,lastText:i})}}})),(0,d.Z)((0,a.Z)(o),"highlightText",(function(e){P("Highlight the selected text..."),document.designMode="on";var t=window.getSelection();t.removeAllRanges(),t.addRange(o.state.lastRange),document.execCommand("styleWithCSS",!1,!0),document.execCommand("backColor",!1,"yellow"),document.designMode="off"})),(0,d.Z)((0,a.Z)(o),"removeHighlight",(function(e){P("Highlight the selected text...");var t=window.getSelection();t.removeAllRanges(),t.addRange(o.state.lastRange),document.designMode="on",document.execCommand("styleWithCSS",!1,!0),document.execCommand("backColor",!1,"inherit"),document.designMode="off"})),(0,d.Z)((0,a.Z)(o),"copyToClipboard",(function(e){P("Copying selection to clipboard... "),navigator.clipboard.writeText(o.state.lastText)})),(0,d.Z)((0,a.Z)(o),"textToSpeech",(function(){var e=o.state.lastText;P("Read aloud: "+e);var t=o.props.session;if(L()(window.speechSynthesis.getVoices()))return t.addNotification({title:o.props.t("voice-not-supported"),message:o.props.t("voice-not-supported-message"),level:"error",position:"tr"});var n=new SpeechSynthesisUtterance(e);n.lang=t.config.language||"en-US",window.speechSynthesis.speak(n)})),(0,d.Z)((0,a.Z)(o),"handleShow",(function(){P("Context menu has been opened..."),o.setState({contextMenuIsOpen:!0})})),(0,d.Z)((0,a.Z)(o),"handleHide",(function(){P("Context menu has been closed..."),o.setState({contextMenuIsOpen:!1})})),(0,d.Z)((0,a.Z)(o),"handleStudentNoteAddition",(function(e){var t=e.pageX/window.innerWidth,n=e.pageY/window.innerHeight;o.props.addNote({left:t,top:n,visibility:"public"})})),(0,d.Z)((0,a.Z)(o),"handlePersonalNoteAddition",(function(e){var t=e.pageX/window.innerWidth,n=e.pageY/window.innerHeight;o.props.addNote({left:t,top:n,visibility:"private"})})),(0,d.Z)((0,a.Z)(o),"handleInstructorNoteAddition",(function(e){var t=e.pageX/window.innerWidth,n=e.pageY/window.innerHeight;o.props.addNote({left:t,top:n,visibility:"instructor"})})),o.state={lastRange:null,lastText:"",contextMenuIsOpen:!1},o}return(0,s.Z)(n,[{key:"componentDidMount",value:function(){document.addEventListener("selectionchange",this.handleSelectionChange)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("selectionchange",this.handleSelectionChange)}},{key:"render",value:function(){var e=[],t=window.getSelection();if((!t.isCollapsed||"Range"===t.type)&&(e.push((0,i.Z)(b.sN,{onClick:this.copyToClipboard},1,this.props.t("copy"))),e.push((0,i.Z)(b.sN,{onClick:this.textToSpeech},2,this.props.t("read-aloud"))),e.push((0,i.Z)(b.sN,{onClick:this.highlightText},3,this.props.t("highlight"))),t&&t.focusNode)){var n=t.focusNode.parentElement;n&&n.style&&"yellow"===n.style.backgroundColor&&e.push((0,i.Z)(b.sN,{onClick:this.removeHighlight},4,this.props.t("remove-highlight")))}return e.push((0,i.Z)(b.sN,{onClick:this.handlePersonalNoteAddition},6,this.props.t("add-personal-note"))),this.props.session.isOwner()&&(e.push((0,i.Z)(b.sN,{onClick:this.handleInstructorNoteAddition},7,this.props.t("add-instructor-note"))),e.push((0,i.Z)(b.sN,{onClick:this.handleStudentNoteAddition},8,this.props.t("add-student-note")))),(0,i.Z)(b.xV,{id:"lessonWindow",onShow:this.handleShow,onHide:this.handleHide,disableIfShiftIsPressed:!0},void 0,e)}}]),n}(p.Component),B=(0,T.Z)("internal/lesson")(j),A=(0,T.Z)("internal/lesson")((function(e){return(0,i.Z)("div",{className:"forbidden-wrapper"},void 0,(0,i.Z)("h3",{className:"forbidden-header"},void 0,e.t("not-available-yet")))})),W=(n(627476),n(95767),n(898837),n(694882),n(298351),n(319371),n(968189)),U=n(734150);function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){(0,d.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var z,X,Y,_,F={private:"green",public:"orange",instructor:"pink"},q=function(){var e=(0,p.useContext)(M.Z),t=(0,U.Z)();return(0,p.useEffect)((function(){var n;return e&&(n=e.subscribe((function(e,n){e!==w.WQ&&e!==C.x$||t()}))),function(){n&&n()}}),[t,e]),e.presentationMode?null:e.stickyNotes.map((function(t,n){return t.size||(t.size={}),(0,i.Z)(W.Z,{color:F[t.visibility],watermark:t.visibility,editable:!0,minimizable:!0,removable:!0,draggable:{default:K({x:t.left*window.innerWidth,y:t.top*window.innerHeight},t.size)},title:t.title,body:t.body,onDelete:function(){e.deleteStickyNote(t._id)},onMove:function(n){var o=n.top,i=n.left;e.updateStickyNote({noteID:t._id,top:o,left:i})},onResize:function(n){e.updateStickyNote({noteID:t._id,size:n})},onTitleChange:function(n){e.updateStickyNote({noteID:t._id,title:n})},onBodyChange:function(n){e.updateStickyNote({noteID:t._id,body:n})}},t._id)}))};function Q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=(0,c.Z)(e);if(t){var i=(0,c.Z)(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return(0,l.Z)(this,n)}}var $={Containers:{tc:{margin:"30px auto 0px auto"}},NotificationItem:{info:{border:"solid 8px #007bff",borderRadius:6,padding:20},success:{boxShadow:"1px 1px 3px 1px darkslategrey"}},Title:{success:{color:"#3c763d"}}},G=function(e){(0,u.Z)(o,e);var t=Q(o);function o(e,n){var i;return(0,r.Z)(this,o),i=t.call(this,e),(0,d.Z)((0,a.Z)(i),"addNote",(function(e){var t=e.left,n=e.top,o=e.visibility,r=e.noteID;(i.context.saveStickyNote({left:t,top:n,visibility:o}),r)||(r=(0,Z.Z)(3),i.context.log({id:"lesson",type:C.RY,value:{top:n,left:t,noteID:r}}))})),i.state={visible:!n.lessonID||(n.isActive()||n.isOwner())},i}return(0,s.Z)(o,[{key:"componentDidMount",value:function(){var e=this,t=this.context;t.onLessonMount(),this.unsubscribe=t.subscribe((function(n,o){n!==w.KI&&n!==w.YQ||e.setState({visible:t.isActive()||t.isOwner()})}))}},{key:"render",value:function(){return this.state.visible?(0,i.Z)(v.a,{i18n:m.a},void 0,(0,i.Z)(b.W4,{attributes:{className:"contextmenu-fullscreen"},holdToDisplay:-1,disableIfShiftIsPressed:!0,id:"lessonWindow"},void 0,(0,i.Z)("div",{id:"Lesson",className:this.props.className,style:this.props.style},void 0,this.props.children,X||(X=(0,i.Z)(q,{})),Y||(Y=(0,i.Z)(N,{})),_||(_=(0,i.Z)(g,{})))),(0,i.Z)(B,{addNote:this.addNote,session:this.context}),p.createElement(h(),{ref:function(e){n.g.notificationSystemISLE=e},allowHTML:!0,style:$})):z||(z=(0,i.Z)(v.a,{i18n:m.a},void 0,(0,i.Z)(A,{})))}}]),o}(p.Component);G.defaultProps={className:"",style:{}},G.contextType=M.Z;var J=G},734150:function(e,t,n){"use strict";var o=n(574315),i=n(202784);t.Z=function(){var e=(0,i.useState)(0),t=(0,o.Z)(e,2)[1];return(0,i.useCallback)((function(){t((function(e){return e+1}))}),[])}}}]);