/*! For license information please see 363.6c460b8a.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[363],{1303:function(t,e,r){"use strict";var s=r(370),i=r(1304);s(i,"factory",r(1305)),t.exports=i},1304:function(t,e,r){"use strict";var s=r(700),i=r(346),a=r(374);t.exports=function(t,e){var r,o;return i(t)||i(e)||e<=0?NaN:0===t?.5:(o=e>2*(r=a(t,2))?s(r/(e+r),.5,e/2,!0,!0)/2:s(e/(e+r),e/2,.5,!0,!1)/2,t>0?1-o:o)}},1305:function(t,e,r){"use strict";var s=r(395),i=r(700),a=r(346),o=r(374);t.exports=function(t){return a(t)||t<=0?s(NaN):function(e){var r,s;if(a(e))return NaN;if(0===e)return.5;r=o(e,2),s=t>2*r?i(r/(t+r),.5,t/2,!0,!0)/2:i(t/(t+r),t/2,.5,!0,!1)/2;return e>0?1-s:s}}},1510:function(t,e,r){"use strict";var s=r(851),i=r.n(s),a=r(393);e.a=function(t,e){var r=i()(e);if(!i()(t))throw new TypeError("invalid input argument. Must provide an array. Value: `"+t+"`.");if(!r&&!Object(a.isPrimitive)(e))throw new TypeError("invalid input argument. Second argument must either be an array or number primitive. Value: `"+e+"`.");var s=t.length,o=new Array(s);if(r){if(s!==e.length)throw new Error("invalid input argument. Array to be added must have a length equal to that of the input array.");for(var n=0;n<s;n++)o[n]=t[n]-e[n]}else for(var l=0;l<s;l++)o[l]=t[l]-e;return o}},1511:function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var s=r(1332);class i extends s.a{constructor(t){super(),this.data=t,this.rows=t.length,this.columns=t[0].length}set(t,e,r){return this.data[t][e]=r,this}get(t,e){return this.data[t][e]}}},1966:function(t,e,r){"use strict";function s(t,e){let r=0;return Math.abs(t)>Math.abs(e)?(r=e/t,Math.abs(t)*Math.sqrt(1+r*r)):0!==e?(r=t/e,Math.abs(e)*Math.sqrt(1+r*r)):0}r.d(e,"a",(function(){return s}))},2537:function(t,e,r){"use strict";var s=r(370),i=r(2538);s(i,"factory",r(2539)),t.exports=i},2538:function(t,e,r){"use strict";var s=r(700),i=r(346),a=r(365);t.exports=function(t,e,r){return i(t)||i(e)||i(r)||e<=0||r<=0?NaN:t<=0?0:t===a?1:e*t>r?s(e*t/(r+e*t),e/2,r/2,!0,!1):s(r/(r+e*t),r/2,e/2,!0,!0)}},2539:function(t,e,r){"use strict";var s=r(395),i=r(700),a=r(346),o=r(365);t.exports=function(t,e){return a(t)||a(e)||t<=0||e<=0?s(NaN):function(r){if(a(r))return NaN;if(r<=0)return 0;if(r===o)return 1;if(t*r>e)return i(t*r/(e+t*r),t/2,e/2,!0,!1);return i(e/(e+t*r),e/2,t/2,!0,!0)}}},2916:function(t,e,r){"use strict";r.d(e,"a",(function(){return o}));var s=r(1332),i=r(1511),a=r(1966);class o{constructor(t,e={}){let r=(t=i.a.checkMatrix(t)).rows,o=t.columns;const{computeLeftSingularVectors:n=!0,computeRightSingularVectors:l=!0,autoTranspose:u=!1}=e;let c,h=Boolean(n),f=Boolean(l),d=!1;if(r<o)if(u){c=t.transpose(),r=c.rows,o=c.columns,d=!0;let e=h;h=f,f=e}else c=t.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else c=t.clone();let p=Math.min(r,o),g=Math.min(r+1,o),m=new Float64Array(g),v=new s.b(r,p),b=new s.b(o,o),w=new Float64Array(o),y=new Float64Array(r),M=new Float64Array(g);for(let s=0;s<g;s++)M[s]=s;let x=Math.min(r-1,o),N=Math.max(0,Math.min(o-2,r)),S=Math.max(x,N);for(let s=0;s<S;s++){if(s<x){m[s]=0;for(let t=s;t<r;t++)m[s]=Object(a.a)(m[s],c.get(t,s));if(0!==m[s]){c.get(s,s)<0&&(m[s]=-m[s]);for(let t=s;t<r;t++)c.set(t,s,c.get(t,s)/m[s]);c.set(s,s,c.get(s,s)+1)}m[s]=-m[s]}for(let t=s+1;t<o;t++){if(s<x&&0!==m[s]){let e=0;for(let i=s;i<r;i++)e+=c.get(i,s)*c.get(i,t);e=-e/c.get(s,s);for(let i=s;i<r;i++)c.set(i,t,c.get(i,t)+e*c.get(i,s))}w[t]=c.get(s,t)}if(h&&s<x)for(let t=s;t<r;t++)v.set(t,s,c.get(t,s));if(s<N){w[s]=0;for(let t=s+1;t<o;t++)w[s]=Object(a.a)(w[s],w[t]);if(0!==w[s]){w[s+1]<0&&(w[s]=0-w[s]);for(let t=s+1;t<o;t++)w[t]/=w[s];w[s+1]+=1}if(w[s]=-w[s],s+1<r&&0!==w[s]){for(let t=s+1;t<r;t++)y[t]=0;for(let t=s+1;t<r;t++)for(let e=s+1;e<o;e++)y[t]+=w[e]*c.get(t,e);for(let t=s+1;t<o;t++){let e=-w[t]/w[s+1];for(let i=s+1;i<r;i++)c.set(i,t,c.get(i,t)+e*y[i])}}if(f)for(let t=s+1;t<o;t++)b.set(t,s,w[t])}}let E=Math.min(o,r+1);if(x<o&&(m[x]=c.get(x,x)),r<E&&(m[E-1]=0),N+1<E&&(w[N]=c.get(N,E-1)),w[E-1]=0,h){for(let t=x;t<p;t++){for(let e=0;e<r;e++)v.set(e,t,0);v.set(t,t,1)}for(let t=x-1;t>=0;t--)if(0!==m[t]){for(let e=t+1;e<p;e++){let s=0;for(let i=t;i<r;i++)s+=v.get(i,t)*v.get(i,e);s=-s/v.get(t,t);for(let i=t;i<r;i++)v.set(i,e,v.get(i,e)+s*v.get(i,t))}for(let e=t;e<r;e++)v.set(e,t,-v.get(e,t));v.set(t,t,1+v.get(t,t));for(let e=0;e<t-1;e++)v.set(e,t,0)}else{for(let e=0;e<r;e++)v.set(e,t,0);v.set(t,t,1)}}if(f)for(let s=o-1;s>=0;s--){if(s<N&&0!==w[s])for(let t=s+1;t<o;t++){let e=0;for(let r=s+1;r<o;r++)e+=b.get(r,s)*b.get(r,t);e=-e/b.get(s+1,s);for(let r=s+1;r<o;r++)b.set(r,t,b.get(r,t)+e*b.get(r,s))}for(let t=0;t<o;t++)b.set(t,s,0);b.set(s,s,1)}let R=E-1,A=0,F=Number.EPSILON;for(;E>0;){let t,e;for(t=E-2;t>=-1&&-1!==t;t--){const e=Number.MIN_VALUE+F*Math.abs(m[t]+Math.abs(m[t+1]));if(Math.abs(w[t])<=e||Number.isNaN(w[t])){w[t]=0;break}}if(t===E-2)e=4;else{let r;for(r=E-1;r>=t&&r!==t;r--){let e=(r!==E?Math.abs(w[r]):0)+(r!==t+1?Math.abs(w[r-1]):0);if(Math.abs(m[r])<=F*e){m[r]=0;break}}r===t?e=3:r===E-1?e=1:(e=2,t=r)}switch(t++,e){case 1:{let e=w[E-2];w[E-2]=0;for(let r=E-2;r>=t;r--){let s=Object(a.a)(m[r],e),i=m[r]/s,n=e/s;if(m[r]=s,r!==t&&(e=-n*w[r-1],w[r-1]=i*w[r-1]),f)for(let t=0;t<o;t++)s=i*b.get(t,r)+n*b.get(t,E-1),b.set(t,E-1,-n*b.get(t,r)+i*b.get(t,E-1)),b.set(t,r,s)}break}case 2:{let e=w[t-1];w[t-1]=0;for(let s=t;s<E;s++){let i=Object(a.a)(m[s],e),o=m[s]/i,n=e/i;if(m[s]=i,e=-n*w[s],w[s]=o*w[s],h)for(let e=0;e<r;e++)i=o*v.get(e,s)+n*v.get(e,t-1),v.set(e,t-1,-n*v.get(e,s)+o*v.get(e,t-1)),v.set(e,s,i)}break}case 3:{const e=Math.max(Math.abs(m[E-1]),Math.abs(m[E-2]),Math.abs(w[E-2]),Math.abs(m[t]),Math.abs(w[t])),s=m[E-1]/e,i=m[E-2]/e,n=w[E-2]/e,l=m[t]/e,u=w[t]/e,c=((i+s)*(i-s)+n*n)/2,d=s*n*(s*n);let p=0;0===c&&0===d||(p=c<0?0-Math.sqrt(c*c+d):Math.sqrt(c*c+d),p=d/(c+p));let g=(l+s)*(l-s)+p,y=l*u;for(let M=t;M<E-1;M++){let e=Object(a.a)(g,y);0===e&&(e=Number.MIN_VALUE);let s=g/e,i=y/e;if(M!==t&&(w[M-1]=e),g=s*m[M]+i*w[M],w[M]=s*w[M]-i*m[M],y=i*m[M+1],m[M+1]=s*m[M+1],f)for(let t=0;t<o;t++)e=s*b.get(t,M)+i*b.get(t,M+1),b.set(t,M+1,-i*b.get(t,M)+s*b.get(t,M+1)),b.set(t,M,e);if(e=Object(a.a)(g,y),0===e&&(e=Number.MIN_VALUE),s=g/e,i=y/e,m[M]=e,g=s*w[M]+i*m[M+1],m[M+1]=-i*w[M]+s*m[M+1],y=i*w[M+1],w[M+1]=s*w[M+1],h&&M<r-1)for(let t=0;t<r;t++)e=s*v.get(t,M)+i*v.get(t,M+1),v.set(t,M+1,-i*v.get(t,M)+s*v.get(t,M+1)),v.set(t,M,e)}w[E-2]=g,A+=1;break}case 4:if(m[t]<=0&&(m[t]=m[t]<0?-m[t]:0,f))for(let e=0;e<=R;e++)b.set(e,t,-b.get(e,t));for(;t<R&&!(m[t]>=m[t+1]);){let e=m[t];if(m[t]=m[t+1],m[t+1]=e,f&&t<o-1)for(let r=0;r<o;r++)e=b.get(r,t+1),b.set(r,t+1,b.get(r,t)),b.set(r,t,e);if(h&&t<r-1)for(let s=0;s<r;s++)e=v.get(s,t+1),v.set(s,t+1,v.get(s,t)),v.set(s,t,e);t++}A=0,E--}}if(d){let t=b;b=v,v=t}this.m=r,this.n=o,this.s=m,this.U=v,this.V=b}solve(t){let e=t,r=this.threshold,i=this.s.length,a=s.b.zeros(i,i);for(let s=0;s<i;s++)Math.abs(this.s[s])<=r?a.set(s,s,0):a.set(s,s,1/this.s[s]);let o=this.U,n=this.rightSingularVectors,l=n.mmul(a),u=n.rows,c=o.rows,h=s.b.zeros(u,c);for(let s=0;s<u;s++)for(let t=0;t<c;t++){let e=0;for(let r=0;r<i;r++)e+=l.get(s,r)*o.get(t,r);h.set(s,t,e)}return h.mmul(e)}solveForDiagonal(t){return this.solve(s.b.diag(t))}inverse(){let t=this.V,e=this.threshold,r=t.rows,i=t.columns,a=new s.b(r,this.s.length);for(let s=0;s<r;s++)for(let r=0;r<i;r++)Math.abs(this.s[r])>e&&a.set(s,r,t.get(s,r)/this.s[r]);let o=this.U,n=o.rows,l=o.columns,u=new s.b(r,n);for(let s=0;s<r;s++)for(let t=0;t<n;t++){let e=0;for(let r=0;r<l;r++)e+=a.get(s,r)*o.get(t,r);u.set(s,t,e)}return u}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,e=0,r=this.s;for(let s=0,i=r.length;s<i;s++)r[s]>t&&e++;return e}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return s.b.diag(this.s)}}},5788:function(t,e,r){"use strict";r.r(e);r(360),r(352),r(363);var s=r(641),i=r.n(s),a=r(353),o=r.n(a),n=r(354),l=r.n(n),u=r(369),c=r.n(u),h=r(357),f=r.n(h),d=r(358),p=r.n(d),g=r(355),m=r.n(g),v=r(350),b=r.n(v),w=r(362),y=r.n(w),M=r(0),x=r.n(M),N=(r(341),r(1332)),S=r(2916);class E{constructor(t,e,r={}){const{intercept:s=!0,statistics:i=!0}=r;if(this.statistics=i,!0===t)this.weights=e.weights,this.inputs=e.inputs,this.outputs=e.outputs,this.intercept=e.intercept;else{t=new N.b(t),e=new N.b(e),s&&t.addColumn(new Array(t.rows).fill(1));let r=t.transpose();const a=r.mmul(t),o=r.mmul(e),n=new S.a(a).inverse(),l=o.transpose().mmul(n).transpose();if(this.weights=l.to2DArray(),this.inputs=t.columns,this.outputs=e.columns,s&&this.inputs--,this.intercept=s,i){const r=t.mmul(l),s=e.clone().addM(r.neg()).to2DArray().map(t=>Math.pow(t[0],2)).reduce((t,e)=>t+e)/(e.rows-t.columns);this.stdError=Math.sqrt(s),this.stdErrorMatrix=function(t,e=Number.EPSILON){t=N.b.checkMatrix(t);let r=new S.a(t,{autoTranspose:!0}),s=r.leftSingularVectors,i=r.rightSingularVectors,a=r.diagonal;for(let o=0;o<a.length;o++)Math.abs(a[o])>e?a[o]=1/a[o]:a[o]=0;return i.mmul(N.b.diag(a).mmul(s.transpose()))}(a).mul(s),this.stdErrors=this.stdErrorMatrix.diagonal().map(t=>Math.sqrt(t)),this.tStats=this.weights.map((t,e)=>0===this.stdErrors[e]?0:t[0]/this.stdErrors[e])}}}predict(t){if(Array.isArray(t)){if("number"==typeof t[0])return this._predict(t);if(Array.isArray(t[0])){const e=new Array(t.length);for(let r=0;r<t.length;r++)e[r]=this._predict(t[r]);return e}}else if(N.b.isMatrix(t)){const e=new N.b(t.rows,this.outputs);for(let r=0;r<t.rows;r++)e.setRow(r,this._predict(t.getRow(r)));return e}throw new TypeError("x must be a matrix or array of numbers")}_predict(t){const e=new Array(this.outputs);if(this.intercept)for(let r=0;r<this.outputs;r++)e[r]=this.weights[this.inputs][r];else e.fill(0);for(let r=0;r<this.inputs;r++)for(let s=0;s<this.outputs;s++)e[s]+=this.weights[r][s]*t[r];return e}score(){throw new Error("score method is not implemented yet")}toJSON(){return{name:"multivariateLinearRegression",weights:this.weights,inputs:this.inputs,outputs:this.outputs,intercept:this.intercept,summary:this.statistics?{regressionStatistics:{standardError:this.stdError,observations:this.outputs},variables:this.weights.map((t,e)=>({label:e===this.weights.length-1?"Intercept":"X Variable "+(e+1),coefficients:t,standardError:this.stdErrors[e],tStat:this.tStats[e]}))}:void 0}}static load(t){if("multivariateLinearRegression"!==t.name)throw new Error("not a MLR model");return new E(!0,t)}}var R=r(549),A=r.n(R),F=r(419),V=r.n(F),O=r(840),L=r.n(O),k=r(555),q=r.n(k),j=r(366),C=r.n(j),P=r(374),I=r.n(P),_=r(524),U=r.n(_),D=r(1303),T=r.n(D),z=r(2537),J=r.n(z),X=r(397),B=r(983),G=r(556),Q=r(664),Y=r(862),H=r(499),K=r(754),W=r(3222),Z=r(443),$=r(1510),tt=r(863),et=r(741),rt=r(1198),st=r.n(rt),it=r(538),at=r.n(it);var ot={numeric:!0};function nt(t,e){return String(t).localeCompare(String(e),void 0,ot)}var lt=function(t){var e,r,s=Array.prototype.slice.call(t),i=s.length;for(s.sort(nt),e=1,r=0;e<i;e++){var a=s[e];s[r]!==a&&(s[r+=1]=a)}s.length=r+1;var o,n=[];for(e=0;e<s.length;e++)o=s[e],at()(o)||st()(o)||""===o||n.push(s[e]);return n};function ut(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,s=m()(t);if(e){var i=m()(this).constructor;r=Reflect.construct(s,arguments,i)}else r=s.apply(this,arguments);return p()(this,r)}}var ct=0;function ht(t,e,r,s){for(var i=[],a=[],o={},n=e[t[0]].length,l=0;l<t.length;l++){var u=e[t[l]];if(A()(r,t[l]))a.push(t[l]);else{for(var c=t[l].categories||lt(u),h=s?1:0;h<c.length;h++)a.push("".concat(t[l],"_").concat(c[h]));o[t[l]]=c}}for(var f=0;f<n;f++){for(var d=[],p=0;p<t.length;p++){var g=e[t[p]];if(A()(r,t[p]))d.push(g[f]);else for(var m=o[t[p]],v=g[f],b=s?1:0;b<m.length;b++)d.push(v===m[b]?1:0)}i.push(d)}return{matrix:i,predictors:a}}var ft=y()("thead",{},void 0,y()("tr",{},void 0,y()("th",{},void 0,"Predictor"),y()("th",{},void 0,"Coefficient"),y()("th",{},void 0,"Std. Error"),y()("th",{},void 0,"t"),y()("th",{},void 0,"p-value"))),dt=y()("th",{},void 0,"Intercept"),pt=function(t,e,r,s){var i=T.a.factory(r-e.length-1);return y()(B.a,{bordered:!0,size:"sm"},void 0,ft,y()("tbody",{},void 0,s.intercept?y()("tr",{},void 0,dt,y()("td",{},void 0,s.weights[e.length][0].toFixed(6)),y()("td",{},void 0,s.stdErrors[e.length].toFixed(4)),y()("td",{},void 0,s.tStats[e.length].toFixed(4)),y()("td",{},void 0,2*(1-i(C()(s.tStats[e.length]))).toFixed(4))):null,e.map((function(t,e){return y()("tr",{},e,y()("th",{},void 0,t),y()("td",{},void 0,s.weights[e][0].toFixed(6)),y()("td",{},void 0,s.stdErrors[e].toFixed(4)),y()("td",{},void 0,s.tStats[e].toFixed(4)),y()("td",{},void 0,2*(1-i(C()(s.tStats[e]))).toFixed(4)))}))))},gt=y()("span",{},void 0,"Multiple Linear Regression",y()(et.a,{title:"Multiple Linear Regression",content:"Predict a quantitative response variable using one or more explanatory variables."})),mt=y()(Q.a,{legend:"Include intercept?",defaultValue:!0}),vt=function(t){f()(r,t);var e=ut(r);function r(t){var s;return o()(this,r),s=e.call(this,t),b()(c()(s),"compute",(function(t,e,r){ct+=1;var a=s.props.data[t].map((function(t){return[t]})),o=a.length;V()(e)||(e=[e]);for(var n=ht(e,s.props.data,s.props.quantitative,r),l=n.matrix,u=n.predictors,c=new E(l,a,{intercept:r}),h=c.predict(l).map((function(t){return t[0]})),f=Object(tt.a)(h),d=0,p=0;p<h.length;p++)d+=I()(h[p]-f,2);for(var g=Object($.a)(h,s.props.data[t]),m=0,v=0;v<g.length;v++)m+=I()(g[v],2);var b={y:t,x:e,intercept:r};s.props.logAction(Z.x,b);var w=u.length,M=d/(d+m),N=1-(1-M)*(o-1)/(o-w-1),S=d/w/(m/(o-w-1)),R={variable:"Regression Summary",type:"Multiple Linear Regression",value:y()("div",{style:{overflowX:"auto",width:"100%"}},void 0,y()("span",{className:"title"},void 0,"Regression Summary for Response ",t," (model id: lm",ct,")"),pt(0,u,o,c),y()("p",{},void 0,"Residual standard error: ",U()(c.stdError)),y()("p",{},void 0,"R\xb2: ",M.toFixed(6),", Adjusted R\xb2: ",N.toFixed(6)),y()("p",{},void 0,"F-statistic: ",S.toFixed(3)," (df: ",o-w-1,", ",w,"), p-value: ",(1-J()(S,w,o-w-1)).toFixed(6)),y()(H.a,{placement:"top",tooltip:"Predictions and residuals will be attached to data table"},void 0,y()(X.a,{variant:"secondary",size:"sm",onClick:function(){var i=ht(e,s.props.data,s.props.quantitative,r).matrix,a=c.predict(i).map((function(t){return t[0]})),o=Object($.a)(a,s.props.data[t]),n=q()(s.props.data,1),l=s.props.quantitative.slice(),u="pred_lm"+ct;n[u]=a,A()(l,u)||l.push(u),u="resid_lm"+ct,A()(l,u)||l.push(u),n[u]=o,s.props.onGenerate(l,n)}},void 0,"Use this model to predict for currently selected data")),y()(X.a,{variant:"secondary",size:"sm",style:{marginLeft:6},onClick:function(){var a={variable:"QQ Plot of Residuals",type:"Chart",value:x.a.createElement(K.a,i()({draggable:!0,editable:!0,fit:!0},Object(W.b)(g,"residuals"),{meta:{type:"qqplot of regression residuals",x:e,y:t,intercept:r}}))},o={variable:"Residuals vs. Fitted",type:"Chart",value:y()(K.a,{draggable:!0,editable:!0,fit:!0,data:[{x:h,y:g,mode:"markers",type:h.length>2e3?"scattergl":"scatter"}],layout:{xaxis:{title:"Fitted Values"},yaxis:{title:"Residuals"},title:"Residuals vs. Fitted"},meta:{type:"regression residuals vs. fitted",x:e,y:t,intercept:r}})};s.props.onCreated([a,o])}},void 0,"Model Diagnostics"))};s.props.onCreated(R)})),s}return l()(r,[{key:"render",value:function(){var t=this.props,e=t.categorical,r=t.quantitative;return y()(Y.a,{title:gt,autoStart:!1,onGenerate:this.compute},void 0,y()(G.a,{legend:"Outcome (Y):",options:r,defaultValue:r[0]}),y()(G.a,{legend:"Predictors (X):",multi:!0,options:L()(r.concat(e)),defaultValue:r[1],closeMenuOnSelect:!1}),mt)}}]),r}(M.Component);vt.defaultProps={logAction:function(){}};e.default=vt}}]);