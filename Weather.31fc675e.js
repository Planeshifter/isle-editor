(window.webpackJsonp=window.webpackJsonp||[]).push([[265],{5841:function(e,t,r){"use strict";r.r(t);r(358),r(351),r(361);var n=r(359),a=r.n(n),i=(r(1254),r(352)),c=r.n(i),s=r(353),o=r.n(s),u=r(366),l=r.n(u),d=r(356),h=r.n(d),p=r(357),m=r.n(p),v=r(354),f=r.n(v),w=r(350),g=r.n(w),y=r(0),k=r.n(y),D=(r(342),r(399)),N=r.n(D),b=r(1079),T=r(416);var _=function(e){var t="http:"+e.condition.icon;return a()("div",{className:"weather-description"},void 0,e.condition.text,a()("img",{className:"weather-icon",alt:"Weather icon",src:t}))};r(466);var x=function(e){return a()("div",{className:"weather-location"},void 0,a()("div",{className:"weather-place"},void 0,e.name),a()("div",{className:"weather-location-region"},void 0,e.region,","),a()("div",{className:"weather-location-country"},void 0,e.country))};r(318);function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f()(e);if(t){var a=f()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return m()(this,r)}}var S=N()("isle:weather"),R=[{command:"trigger",trigger:["in"],description:"Location name",text:!0},{command:"reset",trigger:["close"],description:"Close weather modal window"}],E=a()("br",{}),P=function(e){h()(r,e);var t=I(r);function r(e){var n;return c()(this,r),n=t.call(this,e),g()(l()(n),"register",(function(){n.context.speechInterface.register({name:n.props.voiceID,ref:l()(n),commands:R})})),g()(l()(n),"reset",(function(){n.setState({data:null})})),g()(l()(n),"trigger",(function(e,t){S("Trigger weather retrieveal..."),n.callback=t||null;var r="in";switch(n.props.language){case"en-US":case"de-DE":r=" in";break;case"fr-FR":r=" \xe0"}var a=e.search(r);if(-1!==(a+=r.length+1)){var i=e.substring(a,e.length);S("Get weather info for location: "+i),n.getData(i)}})),g()(l()(n),"getData",(function(e){if(e){var t=e,r="https://api.apixu.com/v1/current.json?key="+n.props.key+"&q="+t;S("GET request: "+r),fetch(r).then((function(e){return S("Status code: "+e.status),e.json()})).then((function(e){S(e),n.setWeatherData(e)})).catch((function(e){S("Encountered an error: "+e.message)}))}})),g()(l()(n),"setWeatherData",(function(e){n.callback&&n.callback(e),n.setState({data:e})})),g()(l()(n),"changeTemperatureType",(function(){var e="celsius"===n.state.temperature?"fahrenheit":"celsius";n.setState({temperature:e})})),n.state={data:null,temperature:"celsius"},n}return o()(r,[{key:"componentDidMount",value:function(){this.getData(this.props.location),this.props.voiceID&&this.register()}},{key:"renderTemperature",value:function(e){var t,r;return"celsius"===this.state.temperature?(t=e.temp_c,r="C"):(t=e.temp_f,r="F"),a()("div",{className:"weather-temperature"},void 0,t,"\xb0",a()("span",{role:"button",onClick:this.changeTemperatureType,onKeyPress:this.changeTemperatureType,className:"weather-temperature-type",tabIndex:0},void 0,r))}},{key:"renderWind",value:function(e){var t;return t="celsius"===this.state.temperature?"wind: ".concat(e.wind_kph," kmh / ").concat(e.wind_dir):"wind: ".concat(e.wind_mph," mph / ").concat(e.wind_dir),a()("div",{className:"weather-wind"},void 0,t)}},{key:"renderPrecipitation",value:function(e){return a()("div",{className:"weather-wind"},void 0,"precipitation: ","celsius"===this.state.temperature?e.precip_mm+" mm":e.precip_in+" in")}},{key:"renderDetails",value:function(e){return a()("div",{className:"weather-details"},void 0,a()("div",{className:"weather-humidity"},void 0,"humidity: ",e.humidity,"%"),this.renderWind(e),this.renderPrecipitation(e))}},{key:"render",value:function(){var e=null;if(this.props.voiceID&&(e=a()(b.a,{id:this.props.voiceID,reference:this,commands:R})),!this.state.data)return e;var t=this.state.data.current;return a()("div",{className:"weather",style:this.props.style},void 0,e,k.a.createElement(x,this.state.data.location),k.a.createElement(_,t),E,this.renderTemperature(t),this.renderDetails(t))}}]),r}(y.Component);P.defaultProps={key:"3b94f972948543b8a1780701171211",language:"en-US",location:null,voiceID:null,style:{}},P.contextType=T.a;t.default=P}}]);