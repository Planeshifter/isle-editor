(window.webpackJsonp=window.webpackJsonp||[]).push([[379],{1437:function(t,e,r){"use strict";var n=r(766),a=r.n(n),o=r(384);e.a=function(t,e){var r=a()(e);if(!a()(t))throw new TypeError("invalid input argument. Must provide an array. Value: `"+t+"`.");if(!r&&!Object(o.isPrimitive)(e))throw new TypeError("invalid input argument. Second argument must either be an array or number primitive. Value: `"+e+"`.");var n=t.length,i=new Array(n);if(r){if(n!==e.length)throw new Error("invalid input argument. Array to be added must have a length equal to that of the input array.");for(var s=0;s<n;s++)i[s]=t[s]-e[s]}else for(var c=0;c<n;c++)i[c]=t[c]-e;return i}},4282:function(t,e,r){"use strict";r(1248);e.a=function(t,e){for(var r=t.shape[0],n=t.shape[1],a=new Float64Array(r),o=0;o<r;o++){for(var i=0,s=0;s<n;s++)i+=t.get(o,s)*e[s];a[o]=i}return a}},4283:function(t,e,r){"use strict";var n=r(1669),a=r.n(n)()("float64",2);e.a=function(t){var e=[t.shape[1],t.shape[0]],r=[t.strides[1],t.strides[0]],n=t.offset,o=t.order;return a(t._buffer,e,r,n,o)}},5838:function(t,e,r){"use strict";r.r(e);r(358),r(351),r(361);var n=r(352),a=r.n(n),o=r(353),i=r.n(o),s=r(365),c=r.n(s),l=r(356),u=r.n(l),d=r(357),f=r.n(d),v=r(354),h=r.n(v),p=r(350),g=r.n(p),y=(r(720),r(359)),m=r.n(y),b=(r(1248),r(0)),w=(r(342),r(771)),x=r.n(w),A=r(387),F=r(597),S=r(2781),C=r(891),O=r(426),j=r(413),E=r(456),R=r(894),P=r(1426),k=r.n(P),T=r(501),V=r.n(T),z=r(509),M=r.n(z),q=r(403),_=r.n(q),D=r(384),I=r(1019),L=r.n(I),N=r(478),J=r.n(N),X=r(543),Y=r.n(X),B=r(363),G=r.n(B),H=r(877),U=r.n(H),W=r(502),K=r(580),Q=r(556),Z=r(462),$=r(419),tt=r(1437),et=r(670),rt=r(1977),nt=(r(1108),r(421)),at=r.n(nt),ot=r(5849),it=r(1249),st=r(369),ct=r.n(st),lt=r(371),ut=r.n(lt),dt=r(364),ft=r.n(dt),vt=r(5570),ht=r.n(vt),pt=r(408),gt=r.n(pt),yt=r(5572),mt=r.n(yt),bt=r(370),wt=r.n(bt),xt=r(4282),At=r(4283);var Ft=function(t,e){for(var r=at()(t.shape,2),n=r[0],a=r[1],o=e.shape[1],i=it.b.zeros(n,o),s=new Float64Array(a),c=0;c<o;c++){for(var l=0;l<a;l++)s[l]=e.get(l,c);for(var u=0;u<n;u++){for(var d=0,f=0;f<a;f++)d+=t.get(u,f)*s[f];i.set(u,c,d)}}return i};var St=function(t,e){for(var r=at()(t.shape,2),n=r[0],a=r[1],o=k()(new Float64Array(n*a),{shape:[n,a]}),i=0;i<n;i++)for(var s=0;s<a;s++)o.set(i,s,t.get(i,s)*e[i]);return o};var Ct=function(t,e){for(var r=t.length,n=new Array(r),a=0;a<r;a++)n[a]=t[a]*e[a];return n},Ot=function(t){for(var e=0,r=0;r<t.length;r++)e+=t[r];return e},jt=function(t){for(var e=new Float64Array(t.length),r=0;r<t.length;r++)e[r]=t[r]*(1-t[r]);return e},Et=function(t){for(var e=t.length,r=new Float64Array(e),n=0;n<e;n++){var a=t[n];if(G()(a)>30)r[n]=gt.a;else{var o=ft()(a);r[n]=o/(1+o)}}return r},Rt=function(t){for(var e=t.length,r=new Float64Array(e),n=0;n<e;n++){var a=t[n];G()(a)>30?r[n]=gt.a:r[n]=ft()(a)/ut()(1+ft()(a),2)}return r},Pt=function(t,e,r){for(var n=0,a=0;a<t.length;a++)n+=ct()(mt()(t[a],e[a]));return-2*n+2*r},kt=function(t,e,r){for(var n=t.length,a=new Float64Array(n),o=0;o<n;o++){var i=e[o],s=t[o];a[o]=2*r[o]*(ht()(s,s/i)+ht()(1-s,(1-s)/(1-i)))}return a},Tt=function(t,e,r){for(var n=new Float64Array(t.length),a=0;a<t.length;a++)n[a]=t[a]*(e[a]*e[a]/r[a]);return n},Vt=function(t,e,r,n){for(var a=new Float64Array(e.length),o=0;o<e.length;o++)a[o]=t[o]+(e[o]-r[o])/n[o];return a};function zt(t,e){for(var r=new Float64Array(e.length),n=0;n<r.length;n++)r[n]=e[n]*(1-e[n]);for(var a=at()(t.shape,2),o=a[0],i=a[1],s=new Float64Array(i),c=0;c<s.length;c++){for(var l=0,u=0;u<o;u++)l+=ut()(t.get(u,c),2)*r[u];s[c]=wt()(1/l)}return s}var Mt=function(t,e,r){for(var n=Object(At.a)(t),a=new Array(r).fill(1),o=new Float64Array(a.length),i=0;i<r;i++)o[i]=(a[i]*e[i]+.5)/(a[i]+1);var s,c,l=function(t){for(var e=t.length,r=new Float64Array(e),n=0;n<e;n++)r[n]=ct()(t[n]/(1-t[n]));return r}(o),u=Et(l),d=Ot(kt(e,u,a)),f=!1;for(c=0;c<25;c++){var v=jt(u),h=Rt(l),p=Vt(l,e,u,h),g=Tt(a,h,v),y=Ct(g,p),m=St(t,g),b=Ft(n,m),w=Object(xt.a)(n,y);s=Object(ot.a)(b,it.b.columnVector(w)),l=Object(xt.a)(t,s.to1DArray()),u=Et(l);var x=Ot(kt(e,u,a));if(G()(x-d)/(.1+G()(x))<1e-8){f=!0;break}d=x}var A=s.to1DArray(),F=function(t){return function(t){for(var e=new Float64Array(t.length),r=0;r<t.length;r++)e[r]=1/(1+ft()(-t[r]));return e}(Object(xt.a)(t,A))},S=F(t);return{aic:Pt(e,Et(l),A.length),stdErrors:zt(t,S),fitted:S,coefficients:A,iterations:c,converged:f,predict:F}};function qt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=h()(t);if(e){var a=h()(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return f()(this,r)}}var _t=0;function Dt(t){return J()(t)||L()(t)}function It(t){return Object(D.isPrimitive)(t)&&!J()(t)}function Lt(t,e,r,n,a,o){for(var i=[],s={},c=r[t[0]].length,l=0;l<t.length;l++){var u=r[t[l]];if(V()(n,t[l]))i.push(t[l]);else{for(var d=Object(rt.a)(u,t[l]),f=a?1:0;f<d.length;f++)i.push("".concat(t[l],"_").concat(d[f]));s[t[l]]=d}}for(var v=new Float64Array(c*(i.length+1)),h=0;h<c;h++){a&&(v[(i.length+1)*h]=1);for(var p=0,g=0;g<t.length;g++){var y=r[t[g]];if(V()(n,t[g]))p+=1,v[(i.length+1)*h+p]=y[h];else for(var m=s[t[g]],b=y[h],w=a?1:0;w<m.length;w++)p+=1,v[(i.length+1)*h+p]=b===m[w]?1:0}}return{matrix:k()(v,{shape:[c,i.length+1]}),predictors:i,yvalues:r[e].map((function(t){return t===o?1:0})),nobs:c}}function Nt(t,e,r,n,a,o){for(var i=[],s={},c=0;c<t.length;c++){var l=r[t[c]];if(V()(n,t[c]))i.push(t[c]);else{for(var u=Object(rt.a)(l,t[c]),d=a?1:0;d<u.length;d++)i.push("".concat(t[c],"_").concat(u[d]));s[t[c]]=u}}for(var f=[],v=[],h=0;h<r[t[0]].length;h++){var p=!1,g=[];a&&g.push(1);for(var y=0;y<t.length;y++){var m=r[t[y]];if(V()(n,t[y]))It(m[h])?g.push(m[h]):p=!0;else{var b=m[h];if(Dt(b))p=!0;else for(var w=s[t[y]],x=a?1:0;x<w.length;x++)g.push(b===w[x]?1:0)}}p||(f=f.concat(g),v.push(r[e][h]===o?1:0))}var A=v.length;return{matrix:k()(f,{shape:[A,i.length+1]}),predictors:i,yvalues:v,nobs:A}}var Jt=m()("thead",{},void 0,m()("tr",{},void 0,m()(Z.a,{placement:"right",tooltip:"Name of predictor"},void 0,m()("th",{},void 0,"Predictor")),m()(Z.a,{placement:"right",tooltip:"Change in log odds associated with unit-increase in respective predictor"},void 0,m()("th",{},void 0,"Coefficient")),m()(Z.a,{placement:"left",tooltip:"Standard deviation of coefficient estimate"},void 0,m()("th",{},void 0,"Std. Error")),m()(Z.a,{placement:"left",tooltip:m()("span",{},void 0,"Test statistic for hypothesis that coefficient is zero ",m()(Q.a,{displayMode:!0,raw:"t = \\tfrac{\\text{Coefficient}}{\\text{Std. Error}}"}))},void 0,m()("th",{},void 0,"t")),m()(Z.a,{placement:"left",tooltip:m()("span",{},void 0,"p-value for hypothesis that coefficient is zero ",m()(Q.a,{displayMode:!0,raw:"2 \\Phi( |t| )"}))},void 0,m()("th",{},void 0,"p-value")))),Xt=m()("th",{},void 0,"Intercept"),Yt=function(t,e,r){return m()(R.a,{bordered:!0,size:"sm"},void 0,Jt,m()("tbody",{},void 0,e?m()("tr",{},void 0,Xt,m()("td",{},void 0,r.coefficients[0].toFixed(6)),m()("td",{},void 0,r.stdErrors[0].toFixed(4)),m()("td",{},void 0,(r.coefficients[0]/r.stdErrors[0]).toFixed(4)),m()("td",{},void 0,(2*U()(-G()(r.coefficients[0]/r.stdErrors[0]),0,1)).toFixed(4))):null,t.map((function(t,n){n+=Number(e);var a=r.coefficients[n]/r.stdErrors[n],o=2*U()(-G()(a),0,1);return m()("tr",{},n,m()("th",{},void 0,t),m()("td",{},void 0,r.coefficients[n].toFixed(6)),m()("td",{},void 0,r.stdErrors[n].toFixed(4)),m()("td",{},void 0,a.toFixed(4)),m()("td",{},void 0,o.toFixed(4)))}))))},Bt=m()(b.Fragment,{},void 0,"did ",m()("b",{},void 0,"not")," converge"),Gt=m()(S.a.Prepend,{},void 0,m()(S.a.Text,{},void 0,"Threshold:")),Ht=m()(O.a.Header,{as:"h4"},void 0,"Logistic Regression",m()(et.a,{title:"Logistic Regression",content:"Predict a categorical response variable using one or more explanatory variables."})),Ut=function(t){u()(r,t);var e=qt(r);function r(t){var n,o,i,s;return a()(this,r),n=e.call(this,t),g()(c()(n),"compute",(function(){_t+=1;var t=n.state,e=t.y,r=t.success,a=t.x,o=t.intercept,i=t.omitMissing;_()(a)||(a=[a]);var s=(i?Nt:Lt)(a,e,n.props.data,n.props.quantitative,o,r),c=s.matrix,l=s.predictors,u=s.yvalues,d=s.nobs,f=Mt(c,u,d);n.props.logAction($.u,{y:e,x:a,intercept:o});var v={variable:"Regression Summary",type:"Logistic Regression",value:m()("div",{style:{overflowX:"auto",width:"100%"}},void 0,m()("span",{className:"title"},void 0,"Regression Summary for Response ",e," (model id: logis",_t,")"),Yt(l,o,f),m()("i",{},void 0,"The algorithm ",f.converged?"converged":Bt," after ",f.iterations," Fisher Scoring iterations"),m()("p",{},void 0,"Akaike Information Criterion (AIC): ",Y()(f.aic,-3)),m()(F.a,{},void 0,m()(Z.a,{tooltip:"Probabilities, residuals, and predicted categories (using the chosen probability threshold to be exceeded for predicting a success) will be attached to the data table"},void 0,m()(A.a,{variant:"secondary",size:"sm",onClick:function(){var t=Lt(a,e,n.props.data,n.props.quantitative,o,r),i=t.matrix,s=t.yvalues,c=f.predict(i),l=Object(tt.a)(c,s),u=M()(n.props.data,1),d=n.props.quantitative.slice(),v=n.props.categorical.slice(),h="probs_logis"+_t;u[h]=c,V()(d,h)||d.push(h);var p=c.map((function(t){return t>n.state.probabilityThreshold}));u[h="pred_logis"+_t]=p,V()(v,h)||v.push(h),h="resid_logis"+_t,V()(d,h)||d.push(h),u[h]=l,n.props.onGenerate(d,v,u)}},void 0,"Use this model to predict for currently selected data")),m()(S.a,{size:"sm"},void 0,Gt,m()(C.a,{type:"number",min:0,max:1,defaultValue:.5,step:.01,onChange:function(t){n.setState({probabilityThreshold:t.target.value})}}))))};n.props.onCreated(v)})),_()(t.categorical)&&t.categorical.length>0?(i=t.categorical[0],s=(o=Object(rt.a)(t.data[i],i))[o.length-1]):(o=[],s=null),n.state={categories:o,y:i,success:s,x:t.quantitative[0],intercept:!0,probabilityThreshold:.5,omitMissing:!1},n}return i()(r,[{key:"render",value:function(){var t=this,e=this.props,r=e.categorical,n=e.quantitative,a=e.data,o=this.state,i=o.x,s=o.y,c=o.categories,l=o.success,u=o.intercept;return m()(O.a,{style:{fontSize:"14px",maxWidth:500}},void 0,Ht,m()(O.a.Body,{},void 0,m()(j.a,{},void 0,m()(E.a,{md:6},void 0,m()(W.a,{legend:"Outcome (Y):",options:r,defaultValue:s,onChange:function(e){var r=a[e].slice();x()(r),t.setState({categories:r,success:r[r.length-1],y:e})}})),m()(E.a,{md:6},void 0,m()(W.a,{legend:"Success (Y = 1):",defaultValue:l,options:c,onChange:function(e){t.setState({success:e})}}))),m()(W.a,{legend:"Predictors (X):",multi:!0,options:x()(n.concat(r)),defaultValue:i||"",onChange:function(e){return t.setState({x:e})},closeMenuOnSelect:!1,selectAllOption:!0}),m()(K.a,{legend:"Include intercept?",defaultValue:u,onChange:function(e){return t.setState({intercept:e})}}),m()(K.a,{legend:"Omit missing values",defaultValue:!1,onChange:function(e){return t.setState({omitMissing:e})}}),m()(A.a,{disabled:!i||0===i.length,variant:"primary",block:!0,onClick:this.compute},void 0,"Calculate")))}}]),r}(b.Component);Ut.defaultProps={logAction:function(){}};e.default=Ut}}]);