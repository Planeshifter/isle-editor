(window.webpackJsonp=window.webpackJsonp||[]).push([[259],{1799:function(e,t,n){"use strict";t.a=function(e,t){for(var n=e.members,s=0;s<n.length;s++){if(n[s].email===t)return!0}return!1}},5811:function(e,t,n){"use strict";n.r(t);n(360),n(352),n(363);var s=n(362),o=n.n(s),a=(n(519),n(353)),i=n.n(a),r=n(354),l=n.n(r),c=n(369),u=n.n(c),d=n(357),v=n.n(d),m=n(358),h=n.n(m),f=n(355),g=n.n(f),p=n(350),w=n.n(p),b=n(0),y=(n(341),n(447)),C=n(616),O=n(397),A=n(669),S=n(419),x=n.n(S),k=n(1521),N=n.n(k),j=n(389),M=n.n(j),H=n(792),P=n(438),R=n(701),J=n(983),L=o()("thead",{},void 0,o()("tr",{},void 0,o()("th",{},void 0,"Email"),o()("th",{},void 0,"Receive From"),o()("th",{},void 0,"Send To")));var T=o()(R.a.Header,{closeButton:!0},void 0,o()(R.a.Title,{as:"h3"},void 0,"Assignments")),E=function(e){return o()(R.a,{show:e.show,onHide:e.onHide,dialogClassName:"modal-90w",backdropClassName:"modal-backdrop-second-order",style:{minHeight:"300px",boxShadow:"0 0 10px black",zIndex:2e3}},void 0,T,o()(R.a.Body,{style:{overflowY:"scroll",maxHeight:.8*window.innerHeight}},void 0,function(e){var t=[];for(var n in e)if(M()(e,n)){var s=e[n];t.push(o()("tr",{},void 0,o()("td",{},void 0,"".concat(s.name," (").concat(n,")")),o()("td",{},void 0,"".concat(s.from.name," (").concat(s.from.email,")")),o()("td",{},void 0,"".concat(s.to.name," (").concat(s.to.email,")"))))}return o()(J.a,{bordered:!0,size:"sm"},void 0,L,o()("tbody",{},void 0,t))}(e.assignments)))},z=n(443),B=n(639),D=n(1799);n(333);function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,s=g()(e);if(t){var o=g()(this).constructor;n=Reflect.construct(s,arguments,o)}else n=s.apply(this,arguments);return h()(this,n)}}var I=o()("option",{value:"all"},void 0,"All Cohorts"),V=o()("span",{className:"user-pairer-title"},void 0,"Only pair users from:"),F=function(e){v()(n,e);var t=U(n);function n(e){var s;return i()(this,n),s=t.call(this,e),w()(u()(s),"onCohortChange",(function(e){for(var t,n=s.context.cohorts,o=0;o<n.length;o++)if(n[o].title===e.target.value){t=n[o];break}s.setState({selectedCohort:t})})),w()(u()(s),"createAssignments",(function(){var e=s.context,t=e.userList,n=N()(t.filter((function(e){return!(s.state.selectedCohort&&!Object(D.a)(s.state.selectedCohort,e.email))&&((!s.props.filterOwners||!e.owner)&&null===e.exitTime)})).map((function(e){return{email:e.email,name:e.name}})));if(n.length<2)return s.setState({message:{variant:"warning",value:"There needs to be at least 2 users for the assignment to work"}});for(var o={},a=0;a<n.length;a++){var i=n[a].email;o[i]={to:n[a===n.length-1?0:a+1],from:n[0===a?n.length-1:a-1],name:n[a].name}}s.setState({assignments:o,message:{variant:"success",value:"".concat(n.length," users were successfully assigned with one another.")},showAssignments:!0},(function(){var t=JSON.stringify(s.state.assignments),n={id:s.props.id,type:z.Ic,value:t,noSave:!1};if(e.log(n,"owners"),e.isOwner())for(var a in o)M()(o,a)&&e.log({id:s.props.id,type:z.pb,value:JSON.stringify(s.state.assignments[a]),noSave:!0},a);s.props.onAssignmentOwner(s.state.assignments)}))})),w()(u()(s),"clearAssignments",(function(){var e=s.context;if(e.isOwner()){var t=s.state.assignments,n={id:s.props.id,type:z.a,value:!0};for(var o in e.log(n,"owners"),t)M()(t,o)&&e.log({id:s.props.id,type:z.Vb,value:o,noSave:!0},o);s.setState({showAssignments:!1,assignments:{},message:null})}})),w()(u()(s),"toggleModal",(function(){s.setState({showAssignmentModal:!s.state.showAssignmentModal})})),s.state={showAssignments:!1,showAssignmentModal:!1,assignments:{},message:e.id?null:{variant:"danger",value:"Component expects an ID to work."},selectedCohort:null},s}return l()(n,[{key:"componentDidMount",value:function(){var e=this,t=this.context;this.unsubscribe=t.subscribe((function(n,s){if(n===B.v||n===B.M||n===B.y)e.forceUpdate();else if(n===B.L){var o=s.email;e.state.assignments[o]&&t.log({id:e.props.id,type:z.pb,value:JSON.stringify(e.state.assignments[o]),noSave:!0},o),e.forceUpdate()}else n===B.n&&s.id===e.props.id&&(s.type===z.Ic?(e.props.onAssignmentOwner(JSON.parse(s.value)),e.setState({showAssignments:!0})):s.type===z.a?(e.props.onClearOwner(),e.setState({showAssignments:!1})):s.type===z.pb?(e.props.onAssignmentStudent(JSON.parse(s.value)),e.forceUpdate()):s.type===z.Vb&&(e.props.onClearStudent(s.value),e.forceUpdate()))}))}},{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"renderCohortSelection",value:function(){var e=this.context.cohorts;if(!x()(e))return null;var t=o()("select",{className:"user-pairer-select",onChange:this.onCohortChange,onBlur:this.onCohortChange,value:this.state.selectedCohort?this.state.selectedCohort.title:"all"},void 0,I,e.map((function(e,t){return o()("option",{value:e.title},t,e.title)})));return o()("div",{style:{padding:"5px"}},void 0,V,t)}},{key:"render",value:function(){var e=this,t=this.context.userList;t=t.filter((function(t){return!(e.state.selectedCohort&&!Object(D.a)(e.state.selectedCohort,t.email))&&((!e.props.filterOwners||!t.owner)&&null===t.exitTime)}));var n=this.state.message;return o()(H.a,{owner:!0},void 0,o()(y.a,{},void 0,o()(y.a.Body,{style:{textAlign:"left",fontSize:"18px"}},void 0,this.renderCohortSelection(),o()("p",{},void 0,"There are currently ",o()("b",{},void 0,t.length)," users (",this.props.filterOwners?"excluding":"including"," course owners) ",this.state.selectedCohort?'from cohort "'.concat(this.state.selectedCohort.title,'"'):"from all cohorts"," online."),n?o()(C.a,{variant:n.variant},void 0,n.value):null,o()(A.a,{},void 0,o()(O.a,{variant:"secondary",onClick:this.createAssignments},void 0,this.state.showAssignments?"Re-pair users":"Pair users"),this.state.showAssignments?o()(O.a,{variant:"warning",onClick:this.clearAssignments},void 0,"Clear Assignments"):null,this.state.showAssignments?o()(O.a,{variant:"info",onClick:this.toggleModal},void 0,"Show Assignments"):null),this.state.showAssignmentModal?o()(E,{assignments:this.state.assignments,show:this.state.showAssignmentModal,onHide:this.toggleModal}):null)))}}]),n}(b.Component);F.defaultProps={filterOwners:!0,onAssignmentOwner:function(){},onAssignmentStudent:function(){},onClearOwner:function(){},onClearStudent:function(){}},F.contextType=P.a;t.default=F},616:function(e,t,n){"use strict";var s=n(344),o=n(345),a=n(347),i=n.n(a),r=n(0),l=n.n(r),c=n(404),u=n(432),d=n(356),v=n(477),m=n(635),h=n(769),f=n(651),g=n(551),p=Object(h.a)("h4");p.displayName="DivStyledAsH4";var w=Object(f.a)("alert-heading",{Component:p}),b=Object(f.a)("alert-link",{Component:g.a}),y={show:!0,transition:v.a,closeLabel:"Close alert"},C=l.a.forwardRef((function(e,t){var n=Object(c.a)(e,{show:"onClose"}),a=n.bsPrefix,r=n.show,h=n.closeLabel,f=n.className,g=n.children,p=n.variant,w=n.onClose,b=n.dismissible,y=n.transition,C=Object(o.a)(n,["bsPrefix","show","closeLabel","className","children","variant","onClose","dismissible","transition"]),O=Object(d.a)(a,"alert"),A=Object(u.a)((function(e){w&&w(!1,e)})),S=!0===y?v.a:y,x=l.a.createElement("div",Object(s.a)({role:"alert"},S?C:void 0,{ref:t,className:i()(f,O,p&&O+"-"+p,b&&O+"-dismissible")}),b&&l.a.createElement(m.a,{onClick:A,label:h}),g);return S?l.a.createElement(S,Object(s.a)({unmountOnExit:!0},C,{ref:void 0,in:r}),x):r?x:null}));C.displayName="Alert",C.defaultProps=y,C.Link=b,C.Heading=w,t.a=C},669:function(e,t,n){"use strict";var s=n(344),o=n(345),a=n(347),i=n.n(a),r=n(0),l=n.n(r),c=n(356),u=l.a.forwardRef((function(e,t){var n=e.bsPrefix,a=e.size,r=e.toggle,u=e.vertical,d=e.className,v=e.as,m=void 0===v?"div":v,h=Object(o.a)(e,["bsPrefix","size","toggle","vertical","className","as"]),f=Object(c.a)(n,"btn-group"),g=f;return u&&(g=f+"-vertical"),l.a.createElement(m,Object(s.a)({},h,{ref:t,className:i()(d,g,a&&f+"-"+a,r&&f+"-toggle")}))}));u.displayName="ButtonGroup",u.defaultProps={vertical:!1,toggle:!1,role:"group"},t.a=u}}]);