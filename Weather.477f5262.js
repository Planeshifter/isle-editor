(window.webpackJsonp=window.webpackJsonp||[]).push([[271],{5959:function(e,t,r){"use strict";r.r(t);r(376),r(368),r(377);var a=r(365),n=r.n(a),i=(r(1299),r(370)),c=r.n(i),s=r(371),o=r.n(s),u=r(387),l=r.n(u),d=r(374),h=r.n(d),p=r(375),m=r.n(p),v=r(373),f=r.n(v),w=r(366),g=r.n(w),y=r(0),D=r.n(y),k=(r(357),r(417)),N=r.n(k),b=r(2349),T=r.n(b),_=r(1138),x=r(438);var I=function(e){var t="http:"+e.condition.icon;return n()("div",{className:"weather-description"},void 0,e.condition.text,n()("img",{className:"weather-icon",alt:"Weather icon",src:t}))};r(578);var R=function(e){return n()("div",{className:"weather-location"},void 0,n()("div",{className:"weather-place"},void 0,e.name),n()("div",{className:"weather-location-region"},void 0,e.region,","),n()("div",{className:"weather-location-country"},void 0,e.country))};r(331);function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=f()(e);if(t){var n=f()(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return m()(this,r)}}var P=N()("isle:weather"),W=[{command:"trigger",trigger:["in"],description:"Location name",text:!0},{command:"reset",trigger:["close"],description:"Close weather modal window"}],C=n()("br",{}),E=function(e){h()(r,e);var t=S(r);function r(e){var a;return c()(this,r),a=t.call(this,e),g()(l()(a),"register",(function(){a.context.speechInterface.register({name:a.props.voiceID,ref:l()(a),commands:W})})),g()(l()(a),"reset",(function(){a.setState({data:null})})),g()(l()(a),"trigger",(function(e,t){P("Trigger weather retrieveal..."),a.callback=t||null;var r="in";switch(a.props.language){case"en-US":case"de-DE":r=" in";break;case"fr-FR":r=" \xe0"}var n=e.search(r);if(-1!==(n+=r.length+1)){var i=e.substring(n,e.length);P("Get weather info for location: "+i),a.getData(i)}})),g()(l()(a),"getData",(function(e){var t=a.context;e&&t.server&&T.a.get("".concat(t.server,"/apixu_weather?location=").concat(e)).then((function(e){a.setWeatherData(e.data)})).catch((function(e){P("Encountered an error: "+e.message)}))})),g()(l()(a),"setWeatherData",(function(e){a.callback&&a.callback(e),a.setState({data:e})})),g()(l()(a),"changeTemperatureType",(function(){var e="celsius"===a.state.temperature?"fahrenheit":"celsius";a.setState({temperature:e})})),a.state={data:null,temperature:"celsius"},a}return o()(r,[{key:"componentDidMount",value:function(){this.getData(this.props.location),this.props.voiceID&&this.register()}},{key:"renderTemperature",value:function(e){var t,r;return"celsius"===this.state.temperature?(t=e.temp_c,r="C"):(t=e.temp_f,r="F"),n()("div",{className:"weather-temperature"},void 0,t,"\xb0",n()("span",{role:"button",onClick:this.changeTemperatureType,onKeyPress:this.changeTemperatureType,className:"weather-temperature-type",tabIndex:0},void 0,r))}},{key:"renderWind",value:function(e){var t;return t="celsius"===this.state.temperature?"wind: ".concat(e.wind_kph," kmh / ").concat(e.wind_dir):"wind: ".concat(e.wind_mph," mph / ").concat(e.wind_dir),n()("div",{className:"weather-wind"},void 0,t)}},{key:"renderPrecipitation",value:function(e){return n()("div",{className:"weather-wind"},void 0,"precipitation: ","celsius"===this.state.temperature?e.precip_mm+" mm":e.precip_in+" in")}},{key:"renderDetails",value:function(e){return n()("div",{className:"weather-details"},void 0,n()("div",{className:"weather-humidity"},void 0,"humidity: ",e.humidity,"%"),this.renderWind(e),this.renderPrecipitation(e))}},{key:"render",value:function(){var e=null;if(this.props.voiceID&&(e=n()(_.a,{id:this.props.voiceID,reference:this,commands:W})),!this.state.data)return e;var t=this.state.data.current;return n()("div",{className:"weather",style:this.props.style},void 0,e,D.a.createElement(R,this.state.data.location),D.a.createElement(I,t),C,this.renderTemperature(t),this.renderDetails(t))}}]),r}(y.Component);E.defaultProps={language:"en-US",location:null,voiceID:null,style:{}},E.contextType=x.a;t.default=E}}]);