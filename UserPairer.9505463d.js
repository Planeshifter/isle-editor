(window.webpackJsonp=window.webpackJsonp||[]).push([[270],{1837:function(t,e,n){"use strict";e.a=function(t,e){for(var n=t.members,s=0;s<n.length;s++){if(n[s].email===e)return!0}return!1}},416:function(t,e,n){"use strict";var s,i=n(348),a=n(347),o=n(351),r=n.n(o),l=n(422),u=n(0),c=n.n(u),d=n(426),f=n(425),p=((s={})[d.b]="show",s[d.a]="show",s),h=c.a.forwardRef((function(t,e){var n=t.className,s=t.children,o=Object(a.a)(t,["className","children"]),h=Object(u.useCallback)((function(t){Object(f.a)(t),o.onEnter&&o.onEnter(t)}),[o]);return c.a.createElement(d.e,Object(i.a)({ref:e,addEndListener:l.a},o,{onEnter:h}),(function(t,e){return c.a.cloneElement(s,Object(i.a)({},e,{className:r()("fade",n,s.props.className,p[t])}))}))}));h.defaultProps={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},h.displayName="Fade",e.a=h},421:function(t,e,n){"use strict";var s=n(408);function i(t,e){return function(t){var e=Object(s.a)(t);return e&&e.defaultView||window}(t).getComputedStyle(t,e)}var a=/([A-Z])/g;var o=/^ms-/;function r(t){return function(t){return t.replace(a,"-$1").toLowerCase()}(t).replace(o,"-ms-")}var l=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;e.a=function(t,e){var n="",s="";if("string"==typeof e)return t.style.getPropertyValue(r(e))||i(t).getPropertyValue(r(e));Object.keys(e).forEach((function(i){var a=e[i];a||0===a?!function(t){return!(!t||!l.test(t))}(i)?n+=r(i)+": "+a+";":s+=i+"("+a+") ":t.style.removeProperty(r(i))})),s&&(n+="transform: "+s+";"),t.style.cssText+=";"+n}},422:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var s=n(421),i=n(433);function a(t,e,n){void 0===n&&(n=5);var s=!1,a=setTimeout((function(){s||function(t){var e=document.createEvent("HTMLEvents");e.initEvent("transitionend",!0,!0),t.dispatchEvent(e)}(t)}),e+n),o=Object(i.a)(t,"transitionend",(function(){s=!0}),{once:!0});return function(){clearTimeout(a),o()}}function o(t,e,n,o){var r,l,u;null==n&&(r=t,l=Object(s.a)(r,"transitionDuration")||"",u=-1===l.indexOf("ms")?1e3:1,n=parseFloat(l)*u||0);var c=a(t,n,o),d=Object(i.a)(t,"transitionend",e);return function(){c(),d()}}},425:function(t,e,n){"use strict";function s(t){t.offsetHeight}n.d(e,"a",(function(){return s}))},426:function(t,e,n){"use strict";n.d(e,"c",(function(){return f})),n.d(e,"b",(function(){return p})),n.d(e,"a",(function(){return h})),n.d(e,"d",(function(){return m}));var s=n(347),i=n(385),a=(n(346),n(0)),o=n.n(a),r=n(20),l=n.n(r),u=!1,c=o.a.createContext(null),d="unmounted",f="exited",p="entering",h="entered",m="exiting",v=function(t){function e(e,n){var s;s=t.call(this,e,n)||this;var i,a=n&&!n.isMounting?e.enter:e.appear;return s.appearStatus=null,e.in?a?(i=f,s.appearStatus=p):i=h:i=e.unmountOnExit||e.mountOnEnter?d:f,s.state={status:i},s.nextCallback=null,s}Object(i.a)(e,t),e.getDerivedStateFromProps=function(t,e){return t.in&&e.status===d?{status:f}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(t){var e=null;if(t!==this.props){var n=this.state.status;this.props.in?n!==p&&n!==h&&(e=p):n!==p&&n!==h||(e=m)}this.updateStatus(!1,e)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var t,e,n,s=this.props.timeout;return t=e=n=s,null!=s&&"number"!=typeof s&&(t=s.exit,e=s.enter,n=void 0!==s.appear?s.appear:e),{exit:t,enter:e,appear:n}},n.updateStatus=function(t,e){void 0===t&&(t=!1),null!==e?(this.cancelNextCallback(),e===p?this.performEnter(t):this.performExit()):this.props.unmountOnExit&&this.state.status===f&&this.setState({status:d})},n.performEnter=function(t){var e=this,n=this.props.enter,s=this.context?this.context.isMounting:t,i=this.props.nodeRef?[s]:[l.a.findDOMNode(this),s],a=i[0],o=i[1],r=this.getTimeouts(),c=s?r.appear:r.enter;!t&&!n||u?this.safeSetState({status:h},(function(){e.props.onEntered(a)})):(this.props.onEnter(a,o),this.safeSetState({status:p},(function(){e.props.onEntering(a,o),e.onTransitionEnd(c,(function(){e.safeSetState({status:h},(function(){e.props.onEntered(a,o)}))}))})))},n.performExit=function(){var t=this,e=this.props.exit,n=this.getTimeouts(),s=this.props.nodeRef?void 0:l.a.findDOMNode(this);e&&!u?(this.props.onExit(s),this.safeSetState({status:m},(function(){t.props.onExiting(s),t.onTransitionEnd(n.exit,(function(){t.safeSetState({status:f},(function(){t.props.onExited(s)}))}))}))):this.safeSetState({status:f},(function(){t.props.onExited(s)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(t,e){e=this.setNextCallback(e),this.setState(t,e)},n.setNextCallback=function(t){var e=this,n=!0;return this.nextCallback=function(s){n&&(n=!1,e.nextCallback=null,t(s))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(t,e){this.setNextCallback(e);var n=this.props.nodeRef?this.props.nodeRef.current:l.a.findDOMNode(this),s=null==t&&!this.props.addEndListener;if(n&&!s){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],a=i[0],o=i[1];this.props.addEndListener(a,o)}null!=t&&setTimeout(this.nextCallback,t)}else setTimeout(this.nextCallback,0)},n.render=function(){var t=this.state.status;if(t===d)return null;var e=this.props,n=e.children,i=(e.in,e.mountOnEnter,e.unmountOnExit,e.appear,e.enter,e.exit,e.timeout,e.addEndListener,e.onEnter,e.onEntering,e.onEntered,e.onExit,e.onExiting,e.onExited,e.nodeRef,Object(s.a)(e,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return o.a.createElement(c.Provider,{value:null},"function"==typeof n?n(t,i):o.a.cloneElement(o.a.Children.only(n),i))},e}(o.a.Component);function g(){}v.contextType=c,v.propTypes={},v.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:g,onEntering:g,onEntered:g,onExit:g,onExiting:g,onExited:g},v.UNMOUNTED=d,v.EXITED=f,v.ENTERING=p,v.ENTERED=h,v.EXITING=m;e.e=v},479:function(t,e,n){"use strict";var s=n(348),i=n(347),a=n(351),o=n.n(a),r=n(0),l=n.n(r),u=n(397),c=n(412),d=n(363),f=n(416),p=n(562),h=n(697),m=n(584),v=n(509),g=Object(h.a)("h4");g.displayName="DivStyledAsH4";var b=Object(m.a)("alert-heading",{Component:g}),x=Object(m.a)("alert-link",{Component:v.a}),E={show:!0,transition:f.a,closeLabel:"Close alert"},w=l.a.forwardRef((function(t,e){var n=Object(u.a)(t,{show:"onClose"}),a=n.bsPrefix,r=n.show,h=n.closeLabel,m=n.className,v=n.children,g=n.variant,b=n.onClose,x=n.dismissible,E=n.transition,w=Object(i.a)(n,["bsPrefix","show","closeLabel","className","children","variant","onClose","dismissible","transition"]),O=Object(d.a)(a,"alert"),C=Object(c.a)((function(t){b&&b(!1,t)})),y=!0===E?f.a:E,S=l.a.createElement("div",Object(s.a)({role:"alert"},y?w:void 0,{ref:e,className:o()(m,O,g&&O+"-"+g,x&&O+"-dismissible")}),x&&l.a.createElement(p.a,{onClick:C,label:h}),v);return y?l.a.createElement(y,Object(s.a)({unmountOnExit:!0},w,{ref:void 0,in:r}),S):r?S:null}));w.displayName="Alert",w.defaultProps=E,w.Link=x,w.Heading=b,e.a=w},5927:function(t,e,n){"use strict";n.r(e);n(362),n(355),n(364);var s=n(358),i=n.n(s),a=(n(475),n(356)),o=n.n(a),r=n(357),l=n.n(r),u=n(368),c=n.n(u),d=n(360),f=n.n(d),p=n(361),h=n.n(p),m=n(359),v=n.n(m),g=n(354),b=n.n(g),x=n(0),E=(n(346),n(439)),w=n(479),O=n(386),C=n(595),y=n(407),S=n.n(y),k=n(1459),N=n.n(k),j=n(387),A=n.n(j),T=n(726),R=n(424),M=n(612),L=n(898),P=i()("thead",{},void 0,i()("tr",{},void 0,i()("th",{},void 0,"Email"),i()("th",{},void 0,"Receive From"),i()("th",{},void 0,"Send To")));var D=i()(M.a.Header,{closeButton:!0},void 0,i()(M.a.Title,{as:"h3"},void 0,"Assignments")),H=function(t){return i()(M.a,{show:t.show,onHide:t.onHide,dialogClassName:"modal-90w",backdropClassName:"modal-backdrop-second-order",style:{minHeight:"300px",boxShadow:"0 0 10px black",zIndex:2e3}},void 0,D,i()(M.a.Body,{style:{overflowY:"scroll",maxHeight:.8*window.innerHeight}},void 0,function(t){var e=[];for(var n in t)if(A()(t,n)){var s=t[n];e.push(i()("tr",{},void 0,i()("td",{},void 0,"".concat(s.name," (").concat(n,")")),i()("td",{},void 0,"".concat(s.from.name," (").concat(s.from.email,")")),i()("td",{},void 0,"".concat(s.to.name," (").concat(s.to.email,")"))))}return i()(L.a,{bordered:!0,size:"sm"},void 0,P,i()("tbody",{},void 0,e))}(t.assignments)))},U=n(431),J=n(576),I=n(1837);n(336);function z(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,s=v()(t);if(e){var i=v()(this).constructor;n=Reflect.construct(s,arguments,i)}else n=s.apply(this,arguments);return h()(this,n)}}var B=i()("option",{value:"all"},void 0,"All Cohorts"),Y=i()("span",{className:"user-pairer-title"},void 0,"Only pair users from:"),F=function(t){f()(n,t);var e=z(n);function n(t){var s;return o()(this,n),s=e.call(this,t),b()(c()(s),"onCohortChange",(function(t){for(var e,n=s.context.cohorts,i=0;i<n.length;i++)if(n[i].title===t.target.value){e=n[i];break}s.setState({selectedCohort:e})})),b()(c()(s),"createAssignments",(function(){var t=s.context,e=t.userList,n=N()(e.filter((function(t){return!(s.state.selectedCohort&&!Object(I.a)(s.state.selectedCohort,t.email))&&((!s.props.filterOwners||!t.owner)&&null===t.exitTime)})).map((function(t){return{email:t.email,name:t.name}})));if(n.length<2)return s.setState({message:{variant:"warning",value:"There needs to be at least 2 users for the assignment to work"}});for(var i={},a=0;a<n.length;a++){var o=n[a].email;i[o]={to:n[a===n.length-1?0:a+1],from:n[0===a?n.length-1:a-1],name:n[a].name}}s.setState({assignments:i,message:{variant:"success",value:"".concat(n.length," users were successfully assigned with one another.")},showAssignments:!0},(function(){var e=JSON.stringify(s.state.assignments),n={id:s.props.id,type:U.Lc,value:e,noSave:!1};if(t.log(n,"owners"),t.isOwner())for(var a in i)A()(i,a)&&t.log({id:s.props.id,type:U.rb,value:JSON.stringify(s.state.assignments[a]),noSave:!0},a);s.props.onAssignmentOwner(s.state.assignments)}))})),b()(c()(s),"clearAssignments",(function(){var t=s.context;if(t.isOwner()){var e=s.state.assignments,n={id:s.props.id,type:U.a,value:!0};for(var i in t.log(n,"owners"),e)A()(e,i)&&t.log({id:s.props.id,type:U.Yb,value:i,noSave:!0},i);s.setState({showAssignments:!1,assignments:{},message:null})}})),b()(c()(s),"toggleModal",(function(){s.setState({showAssignmentModal:!s.state.showAssignmentModal})})),s.state={showAssignments:!1,showAssignmentModal:!1,assignments:{},message:t.id?null:{variant:"danger",value:"Component expects an ID to work."},selectedCohort:null},s}return l()(n,[{key:"componentDidMount",value:function(){var t=this,e=this.context;this.unsubscribe=e.subscribe((function(n,s){if(n===J.v||n===J.M||n===J.y)t.forceUpdate();else if(n===J.L){var i=s.email;t.state.assignments[i]&&e.log({id:t.props.id,type:U.rb,value:JSON.stringify(t.state.assignments[i]),noSave:!0},i),t.forceUpdate()}else n===J.n&&s.id===t.props.id&&(s.type===U.Lc?(t.props.onAssignmentOwner(JSON.parse(s.value)),t.setState({showAssignments:!0})):s.type===U.a?(t.props.onClearOwner(),t.setState({showAssignments:!1})):s.type===U.rb?(t.props.onAssignmentStudent(JSON.parse(s.value)),t.forceUpdate()):s.type===U.Yb&&(t.props.onClearStudent(s.value),t.forceUpdate()))}))}},{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"renderCohortSelection",value:function(){var t=this.context.cohorts;if(!S()(t))return null;var e=i()("select",{className:"user-pairer-select",onChange:this.onCohortChange,onBlur:this.onCohortChange,value:this.state.selectedCohort?this.state.selectedCohort.title:"all"},void 0,B,t.map((function(t,e){return i()("option",{value:t.title},e,t.title)})));return i()("div",{style:{padding:"5px"}},void 0,Y,e)}},{key:"render",value:function(){var t=this,e=this.context.userList;e=e.filter((function(e){return!(t.state.selectedCohort&&!Object(I.a)(t.state.selectedCohort,e.email))&&((!t.props.filterOwners||!e.owner)&&null===e.exitTime)}));var n=this.state.message;return i()(T.a,{owner:!0},void 0,i()(E.a,{},void 0,i()(E.a.Body,{style:{textAlign:"left",fontSize:"18px"}},void 0,this.renderCohortSelection(),i()("p",{},void 0,"There are currently ",i()("b",{},void 0,e.length)," users (",this.props.filterOwners?"excluding":"including"," course owners) ",this.state.selectedCohort?'from cohort "'.concat(this.state.selectedCohort.title,'"'):"from all cohorts"," online."),n?i()(w.a,{variant:n.variant},void 0,n.value):null,i()(C.a,{},void 0,i()(O.a,{variant:"secondary",onClick:this.createAssignments},void 0,this.state.showAssignments?"Re-pair users":"Pair users"),this.state.showAssignments?i()(O.a,{variant:"warning",onClick:this.clearAssignments},void 0,"Clear Assignments"):null,this.state.showAssignments?i()(O.a,{variant:"info",onClick:this.toggleModal},void 0,"Show Assignments"):null),this.state.showAssignmentModal?i()(H,{assignments:this.state.assignments,show:this.state.showAssignmentModal,onHide:this.toggleModal}):null)))}}]),n}(x.Component);F.defaultProps={filterOwners:!0,onAssignmentOwner:function(){},onAssignmentStudent:function(){},onClearOwner:function(){},onClearStudent:function(){}},F.contextType=R.a;e.default=F},595:function(t,e,n){"use strict";var s=n(348),i=n(347),a=n(351),o=n.n(a),r=n(0),l=n.n(r),u=n(363),c=l.a.forwardRef((function(t,e){var n=t.bsPrefix,a=t.size,r=t.toggle,c=t.vertical,d=t.className,f=t.as,p=void 0===f?"div":f,h=Object(i.a)(t,["bsPrefix","size","toggle","vertical","className","as"]),m=Object(u.a)(n,"btn-group"),v=m;return c&&(v=m+"-vertical"),l.a.createElement(p,Object(s.a)({},h,{ref:e,className:o()(d,v,a&&m+"-"+a,r&&m+"-toggle")}))}));c.displayName="ButtonGroup",c.defaultProps={vertical:!1,toggle:!1,role:"group"},e.a=c},673:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var s=n(408),i=n(0),a=function(t){var e;return"undefined"==typeof document?null:null==t?Object(s.a)().body:("function"==typeof t&&(t=t()),t&&"current"in t&&(t=t.current),(null==(e=t)?void 0:e.nodeType)&&t||null)};function o(t,e){var n=Object(i.useState)((function(){return a(t)})),s=n[0],o=n[1];if(!s){var r=a(t);r&&o(r)}return Object(i.useEffect)((function(){e&&s&&e(s)}),[e,s]),Object(i.useEffect)((function(){var e=a(t);e!==s&&o(e)}),[t,s]),s}}}]);